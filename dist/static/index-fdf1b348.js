import{p as k,c as ae,g as Re,r as l,u as xi,t as Je,d as _y,j as i,S as Zp,a as Ru,G as Ze,b as Te,B as I,e as Du,f as Ey,h as B,i as Z,E as $u,C as U,k as $o,T as E,m as vl,o as re,l as Sa,n as dj,q as Ge,H as An,s as Lr,F as P,R as uj,M as ze,v as Be,A as Iy,w as wo,x as zi,y as mj,z as On,D as Sn,I as My,J as Lu,K as Ci,L as xn,N as xl,O as nt,P as Jt,Q as Fc,U as jn,V as Ri,W as rt,X as pj,Y as Py,Z as Bu,_ as Vu,$ as Cl,a0 as hj,a1 as Qp,a2 as fj,a3 as gj,a4 as bj,a5 as yj,a6 as vj,a7 as Ny,a8 as xj,a9 as Oy,aa as wi,ab as Fy,ac as Cj,ad as Ry,ae as He,af as _n,ag as nn,ah as _a,ai as hn,aj as Uu,ak as Jn,al as wj,am as Dy,an as $y,ao as ye,ap as Ly,aq as _t,ar as Br,as as Lo,at as By,au as Vy,av as wl,aw as Uy,ax as Va,ay as Di,az as gt,aA as ka,aB as Vr,aC as vt,aD as Tl,aE as qa,aF as zy,aG as zu,aH as Tj,aI as et,aJ as Kn,aK as En,aL as xr,aM as Hy,aN as Ur,aO as Ky,aP as Et,aQ as en,aR as Ys,aS as Ie,aT as Bt,aU as Hi,aV as ge,aW as Hu,aX as Wy,aY as jj,aZ as kj,a_ as Aj,a$ as un,b0 as Sj,b1 as $t,b2 as an,b3 as sn,b4 as Dn,b5 as Ye,b6 as Ue,b7 as K,b8 as at,b9 as jl,ba as zr,bb as Bo,bc as mn,bd as zt,be as yt,bf as tn,bg as Cr,bh as _j,bi as Vt,bj as eh,bk as th,bl as pi,bm as nh,bn as Rd,bo as ah,bp as Xs,bq as Ku,br as Gy,bs as qy,bt as Yy,bu as tt,bv as Xy,bw as Jy,bx as fr,by as Wu,bz as Cn,bA as Fn,bB as Gu,bC as Ea,bD as Gn,bE as qu,bF as Zy,bG as Yu,bH as Ia,bI as Ti,bJ as it,bK as Ma,bL as Qy,bM as e0,bN as Xu,bO as Rn,bP as t0,bQ as Ej,bR as Ij,bS as n0,bT as Mj,bU as Pj,bV as Nj,bW as Oj,bX as Fj,bY as Rj,bZ as Dj,b_ as $j,b$ as a0,c0 as Lj,c1 as Ju,c2 as Bj,c3 as Vj,c4 as i0,c5 as Uj,c6 as Rc,c7 as ps,c8 as Os,c9 as wr,ca as ih,cb as Dd,cc as zj,cd as Vo,ce as Hj,cf as Kj,cg as Wj,ch as Gj,ci as qj,cj as da,ck as r0,cl as o0,cm as hi,cn as Ut,co as Ee,cp as Yj,cq as Xj,cr as Jj,cs as s0,ct as Tr,cu as rh,cv as Zj,cw as Qj,cx as ek,cy as tk,cz as Lt,cA as Zu,cB as l0,cC as bt,cD as Ot,cE as c0,cF as ct,cG as pa,cH as ua,cI as $d,cJ as nk,cK as jr,cL as kl,cM as Wt,cN as Aa,cO as d0,cP as u0,cQ as ak,cR as ik,cS as rk,cT as ok,cU as sk,cV as lk,cW as m0,cX as kr,cY as ck,cZ as dk,c_ as Fs,c$ as ln,d0 as Al,d1 as Qt,d2 as p0,d3 as Qu,d4 as pn,d5 as Ha,d6 as Li,d7 as h0,d8 as mi,d9 as ut,da as Ar,db as uk,dc as ma,dd as mk,de as Uo,df as f0,dg as g0,dh as pk,di as em,dj as hk,dk as qn,dl as Ua,dm as b0,dn as y0,dp as v0,dq as x0,dr as C0,ds as w0,dt as tm,du as li,dv as To,dw as zo,dx as Sr,dy as Js,dz as T0,dA as fk,dB as za,dC as Ho,dD as gk,dE as j0,dF as bk,dG as yk,dH as vk,dI as xk,dJ as Ck,dK as wk,dL as Tk,dM as jk,dN as kk,dO as Ak,dP as Sk,dQ as _k,dR as k0,dS as Ek,dT as A0,dU as S0,dV as _0,dW as Ik,dX as E0,dY as Mk,dZ as fi,d_ as wn,d$ as nm,e0 as Sl,e1 as I0,e2 as Pk,e3 as jo,e4 as Nk,e5 as _r,e6 as Rs,e7 as ji,e8 as _l,e9 as Hr,ea as El,eb as Pa,ec as Ok,ed as Fk,ee as Rk,ef as Dk,eg as $k,eh as Lk,ei as Bk,ej as Ds,ek as Vk,el as Uk,em as zk,en as M0,eo as P0,ep as Hk,eq as Il,er as N0,es as Ml,et as Kk,eu as Wk,ev as Gk,ew as O0,ex as qk,ey as Yk,ez as am,eA as Pl,eB as Xk,eC as Jk,eD as ya,eE as im,eF as Zk,eG as Qk,eH as eA,eI as tA,eJ as ha,eK as nA,eL as ki,eM as aA,eN as Nl,eO as F0,eP as R0,eQ as Ld,eR as iA,eS as rA,eT as oA,eU as D0,eV as $0,eW as sA,eX as lA,eY as cA,eZ as Ki,e_ as L0,e$ as Ko,f0 as Ol,f1 as Fl,f2 as Rl,f3 as Ht,f4 as dA,f5 as uA,f6 as Dl,f7 as mA,f8 as Zs,f9 as Qs,fa as B0,fb as gr,fc as pA,fd as hA,fe as fA,ff as rm,fg as V0,fh as U0,fi as gA,fj as z0,fk as Er,fl as H0,fm as bA,fn as oh,fo as Dc,fp as K0,fq as W0,fr as yA,fs as Bd,ft as G0,fu as q0,fv as Y0,fw as X0,fx as J0,fy as vA,fz as xA,fA as CA,fB as om,fC as wA,fD as TA,fE as Yn,fF as sm,fG as Z0,fH as Q0,fI as gi,fJ as oa,fK as va,fL as ev,fM as jA,fN as tv,fO as bo,fP as kA,fQ as AA,fR as lm,fS as nv,fT as SA,fU as av,fV as _A,fW as iv,fX as Vd,fY as rv,fZ as Wi,f_ as ov,f$ as sv,g0 as EA,g1 as IA,g2 as lv,g3 as br,g4 as Ud,g5 as cv,g6 as MA,g7 as PA,g8 as dv,g9 as NA,ga as OA,gb as zd,gc as sh,gd as FA,ge as uv,gf as RA,gg as el,gh as ta,gi as DA,gj as $A,gk as LA,gl as cm,gm as BA,gn as VA,go as UA,gp as zA,gq as mv,gr as pv,gs as HA,gt as Ta,gu as KA,gv as WA,gw as GA,gx as qA,gy as hv,gz as YA,gA as XA,gB as JA,gC as ZA,gD as fv,gE as QA,gF as eS,gG as gv,gH as bv,gI as dm,gJ as tS,gK as nS,gL as Qr,gM as aS,gN as iS,gO as bi,gP as rS,gQ as oS,gR as $l,gS as sS,gT as lS,gU as cS,gV as Ll,gW as dS,gX as uS,gY as mS,gZ as lh,g_ as pS,g$ as yv,h0 as vv,h1 as xv,h2 as Cv,h3 as um,h4 as wv,h5 as hS,h6 as fS,h7 as mm,h8 as pm,h9 as hm,ha as tl,hb as gS,hc as Bl,hd as Tv,he as bS,hf as yS,hg as Vl,hh as vS,hi as ch,hj as xS,hk as CS,hl as wS,hm as TS,hn as jS,ho as kS,hp as AS,hq as SS,hr as _S,hs as jv,ht as fm,hu as ES,hv as kv,hw as IS,hx as MS}from"./sanity-6afb8dc4.js";function PS(){const e=new Map,{publish:t,subscribe:n}=Ru(),a=Bo(t,10,{trailing:!0}),r=()=>Array.from(e.entries());function o(c,u){e.has(c),e.set(c,u),a(r())}function s(c,u){e.has(c),e.set(c,u),a(r())}function d(c){e.has(c),e.delete(c),a(r())}return{add:o,remove:d,update:s,read:r,subscribe:n}}function NS(e){return typeof e=="function"}function dh(e){return NS(e)?e():e}const OS=()=>{};function FS(e){return function(t,n,a=Object.is){const{add:r,update:o,remove:s}=l.useContext(e),d=l.useRef();l.useLayoutEffect(()=>{if(t===null)return OS;const c=dh(n);return r(t,c),d.current=c,()=>{s(t)}},[r,t,s,n]),l.useLayoutEffect(()=>{const c=dh(n);typeof d.current<"u"&&!a(d.current,c)&&t!==null&&o(t,c),d.current=c})}}let Ir=!1;const $c=e=>{Ir||console.warn(new Error(`No context provided for reporter. Make sure that the component calling "useReporter(${e}, ...)", is wrapped in a <Tracker> element`)),Ir=!0};function RS(){return Ir||console.warn(new Error('No context provided for reporter. Make sure that the component calling "useReportedValues()", is wrapped inside a <Tracker> element')),Ir=!0,[]}const DS=()=>(Ir||console.warn(new Error('No context provided for reporter. Make sure that the component calling "useReportedValues()", is wrapped inside a <Tracker> element')),Ir=!0,()=>{}),$S={add:$c,update:$c,remove:$c,subscribe:DS,read:RS};let LS=0;const BS=()=>++LS;function Av(){const e=l.createContext($S);function t(){const r=l.useContext(e),[o,s]=l.useState(r.read());return l.useLayoutEffect(()=>(s(r.read()),r.subscribe(s)),[r]),o}function n(r){const o=l.useMemo(()=>PS(),[]);return i.jsx(e.Provider,{value:o,children:r.children})}const a=FS(e);return{Tracker:n,useReportedValues:t,useReporter:a,useAutoIdReporter:(r,o=Object.is)=>a(`element-${l.useRef(BS()).current}`,r,o)}}const In=4,VS=16,uh=8,Ae=8,zn=2,hs=4,Zt=12,rr=1,US=!1,zS=Av(),HS=zS.useReporter;function Wo(e){const t=l.useRef(e);return tt(t.current,e)||(t.current=e),t.current}function Ul(e,t){const n=[t,!0],a={type:"tuple",tuple:n};return function(r){const o=Wo(r),s=l.useMemo(()=>re(o).pipe(Ee(c=>zt(re({type:"loading"}),e(c).pipe(K(u=>({type:"value",value:u}))))),qn(([c],u)=>u.type==="loading"?[c,!0]:[u.value,!1],n),yt(([c,u],[m,p])=>!(c!==m||u!==p)),K(c=>({type:"tuple",tuple:c})),ut(c=>re({type:"error",error:c}))),[o]),d=Ut(s,a);if(d.type==="error")throw d.error;return d.tuple}}function Ft(e){return e!=null}const KS="drafts",gm=`${KS}.`;function bm(e){return e.startsWith(gm)}function Sv(e){return{draftId:kn(e),publishedId:ft(e)}}function kn(e){return bm(e)?e:gm+e}function ft(e){return bm(e)?e.slice(gm.length):e}function ym(e){const t=e.reduce((n,a)=>{const r=ft(a._id);let o=n.get(r);return o||(o={id:r,type:a._type,published:void 0,draft:void 0},n.set(r,o)),o[r===a._id?"published":"draft"]=a,n},new Map);return Array.from(t.values())}function _v(e){return ym(e).map(t=>t.draft||t.published).filter(Ft)}const lt=Object.freeze([]);function WS(){if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global;throw new Error("@sanity/ui: could not locate global scope")}const GS=WS();function Ke(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function $s(e){return typeof e=="string"}const qS=typeof document=="object"&&typeof window=="object"&&window.ResizeObserver?window.ResizeObserver:Ek,YS=()=>{const e=Ru(),t=new qS(n=>e.publish(n));return{observe:(n,a,r)=>{const o=e.subscribe(s=>{const d=s.find(c=>c.target===n);d&&a(d)});return t.observe(n,r),()=>{o(),t.unobserve(n)}},unobserve:n=>t.unobserve(n)}},mh=YS(),XS=["match","in","asc","desc","true","false","null"],JS=/^[a-zA-Z_][a-zA-Z0-9_]*$/,ZS=e=>!JS.test(e)||XS.includes(e),QS=e=>`["${e}"]`,Go=e_();function e_(){return typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}const ph=typeof Intl=="object"&&"Segmenter"in Intl?new Intl.Segmenter:void 0;function t_(e,t,n){if(n<t)throw new Error("End must be greater than start, use `String.prototype.slice()` for negative values");if(!ph)return e.slice(t,n);let a=0,r="";for(const o of ph.segment(e)){if(a===n)return r;r+=o.segment,a++}return r}function hh(e,t){const n=t_(e,0,t);return n===e?n:`${n}…`}function n_(e,t){return e!==null&&e.roles.some(n=>n.name===t)}var fh;const Ls=typeof process>"u"?!1:(fh=process==null?void 0:process.env)==null?void 0:fh.SANITY_STUDIO_DEBUG_I18N,a_=!!Ls,i_={reverse:e=>`‮${e}`,triangles:e=>`◤ ${e} ◢`};function Ev(e){const t=Ls==="reverse"||Ls==="triangles"?i_[Ls]:null;return t?(...n)=>t(e(...n)):e}const gh={bindI18n:!1};function L(e,t){const{t:n}=Uu(e,t?{keyPrefix:t.keyPrefix,lng:t.lng,...gh}:gh);return{t:Ev(n)}}const r_=250,o_=k.div(({$changed:e,$disabled:t,$hasFocus:n,$isReviewChangeOpen:a})=>t?ae`
        ${sr}:after {
          display: none;
        }
      `:ae`
      --change-bar-offset: 4px;

      display: flex;
      position: relative;

      ${sr}:after {
        opacity: 0.5;
      }

      @media (hover: hover) {
        &:hover {
          z-index: 10;
          ${sr}:after {
            opacity: 1;
          }
        }
      }

      /* hide when field is not changed */
      ${n&&ae`
        ${sr}:after {
          opacity: 1;
        }
      `}

      /* hide when field is not changed */
      ${!e&&ae`
        ${sr}:after {
          opacity: 0;
          pointer-events: none;
        }
      `}

      /* hide hover effect when review changes is open */
      ${a&&ae`
        ${Iv} {
          opacity: 0;
        }
      `}
    `),s_=k.div`
  flex-grow: 1;
  min-width: 0;
`,l_=k.div`
  position: relative;
  opacity: 1;
  transition: opacity 100ms;
  z-index: ${({$zIndex:e})=>e};
`,sr=k.div(e=>{const{media:t}=Re(e.theme);return ae`
    position: absolute;
    top: -1px;
    left: var(--change-bar-offset);
    width: 1px;
    bottom: -1px;
    background-color: var(--card-bg-color);

    @media (min-width: ${t[0]}px) {
      display: unset;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 1px;
      left: 0;
      width: 1px;
      bottom: 1px;
      background-color: var(--card-badge-caution-dot-color);
      border-radius: 0.5px;
    }
  `}),Iv=k.button(e=>{const{$withHoverEffect:t}=e;return ae`
    appearance: none;
    border: 0;
    outline: 0;
    display: block;
    padding: 0;
    background: transparent;
    opacity: 0;
    position: absolute;
    height: 100%;
    cursor: pointer;
    pointer-events: all;
    left: calc(-0.25rem + var(--change-bar-offset));
    width: calc(1rem - 1px);
    transition: opacity ${r_}ms;

    &:focus {
      border: 0;
      outline: 0;
    }

    &:focus {
      border: 0;
      outline: 0;
    }

    ${t&&ae`
      @media (hover: hover) {
        &:hover {
          opacity: 0.2;
        }
      }
    `}
  `});function c_(e){const{children:t,disabled:n,hasFocus:a,isChanged:r,withHoverEffect:o=!0}=e,{onOpenReviewChanges:s,isReviewChangesOpen:d}=l.useContext(ek),{zIndex:c}=xi(),{t:u}=L(),m=l.useMemo(()=>n||!r?null:i.jsxs(l_,{"data-testid":"change-bar",$zIndex:c,children:[i.jsx(sr,{"data-testid":"change-bar__marker"}),i.jsx(Ie,{content:u("changes.change-bar.aria-label"),portal:!0,children:i.jsx(Iv,{"aria-label":u("changes.change-bar.aria-label"),"data-testid":"change-bar__button",onClick:d?void 0:s,tabIndex:-1,type:"button",$withHoverEffect:o})})]}),[n,r,d,s,u,o,c]);return i.jsxs(o_,{"data-testid":"change-bar-wrapper",$changed:r,$disabled:n,$hasFocus:a,$isReviewChangeOpen:d,children:[i.jsx(s_,{"data-testid":"change-bar__field-wrapper",children:t}),m]})}const d_=l.memo(function(e){const{children:t,disabled:n,hasFocus:a,isChanged:r,onMouseEnter:o,onMouseLeave:s,path:d=lt,withHoverEffect:c,...u}=e,m=xi(),[p,h]=l.useState(!1),f=l.useCallback(v=>{o==null||o(v),h(!0)},[o]),g=l.useCallback(v=>{s==null||s(v),h(!1)},[s]),b=l.useRef(null);return HS(n?null:`field-${Je(d)}`,()=>({element:b.current,path:d,isChanged:r,hasFocus:a,hasHover:p,zIndex:m.zIndex}),_y),i.jsx("div",{...u,ref:b,onMouseEnter:f,onMouseLeave:g,children:i.jsx(c_,{hasFocus:a,isChanged:r,disabled:n,withHoverEffect:c,children:t})})});function Kt(e){const{children:t,hasFocus:n,isChanged:a,path:r,withHoverEffect:o,...s}=e;return i.jsx(d_,{...s,path:r,hasFocus:n,isChanged:a,withHoverEffect:o,children:t})}const bh=()=>{},u_=l.forwardRef(function(e,t){const{as:n="div",onScroll:a,...r}=e,o=l.useRef(null);l.useImperativeHandle(t,()=>o.current);const s=l.useContext(Zp),d=l.useMemo(()=>Ru(),[]);return l.useEffect(()=>a?d.subscribe(a):bh,[d,a]),l.useEffect(()=>s?d.subscribe(s.publish):bh,[s,d]),l.useEffect(()=>{const c=m=>{d.publish(m)},u=o.current;if(u)return u.addEventListener("scroll",c,{passive:!0,capture:!0}),()=>{u.removeEventListener("scroll",c)}},[d,o]),i.jsx(Zp.Provider,{value:d,children:l.createElement(n,{ref:o,"data-testid":"scroll-container",...r})})});function m_(e){const{bounds:t,...n}=e,a=Math.max(t.left,e.left),r=Math.max(e.top,t.top),o=Math.max(0,e.height-(r-e.top)),s=Math.max(0,e.width-(a-e.left));return i.jsx("rect",{...n,x:a,y:r,height:o,width:s})}k.rect`
  stroke: #ccc;
  fill: none;
  pointer-events: none;
  stroke-linecap: round;
`;const eo=k.path`
  fill: none;
  pointer-events: none;
  stroke-linejoin: round;
  stroke: var(--card-badge-caution-dot-color);
`,p_=k.path`
  fill: none;
  pointer-events: stroke;
  stroke: transparent;
  cursor: pointer;
  stroke-linecap: round;
  stroke-linejoin: round;
  opacity: 0;

  &:hover {
    opacity: 0.2;
  }
`,h_=k(m_)`
  stroke: none;
  pointer-events: none;
  fill: var(--card-badge-caution-dot-color);
`;function fs(e,t,n){return[`M ${e-hs} ${t-hs*n} `,`L ${e} ${t}`,`L ${e+hs} ${t-hs*n}`].join("")}function Lc(e,t){return`M${e} ${t}`}function jt(e,t){return`L${e} ${t}`}function f_(e,t=""){return e.join(t)}function yn(e,t,n,a){return`Q${e} ${t} ${n} ${a}`}function g_(e){const{from:t,to:n}=e,{left:a,top:r}=t,{left:o,top:s}=n,d=[],c=Math.min(In,Math.abs(r-s)/2);return t.isAbove?d.push(Lc(a+Ae,r-Zt+zn),jt(a+Ae,r-In),yn(a+Ae,r,a+Ae+In,r)):t.isBelow?d.push(Lc(a+Ae,r+Zt-zn),jt(a+Ae,r+In),yn(a+Ae,r,a+Ae+In,r)):d.push(Lc(a,r)),n.isAbove?r<n.bounds.top?d.push(jt(n.bounds.left-8-c,r),yn(n.bounds.left-8,r,n.bounds.left-8,r+c),jt(n.bounds.left-8,s-c),yn(n.bounds.left-8,s,n.bounds.left-8+c,s),jt(n.bounds.left+Ae-In,s),yn(n.bounds.left+Ae,s,n.bounds.left+Ae,s-In),jt(n.bounds.left+Ae,s-Zt+zn)):d.push(jt(n.bounds.left+Ae-In,r),yn(n.bounds.left+Ae,r,n.bounds.left+Ae,r-In),jt(n.bounds.left+Ae,s-Zt+zn)):n.isBelow?r>n.bounds.top+n.bounds.height?d.push(jt(n.bounds.left-Ae-c,r),yn(n.bounds.left-Ae,r,n.bounds.left-Ae,r-c),jt(n.bounds.left-Ae,s+c),yn(n.bounds.left-Ae,s,n.bounds.left-Ae+c,s),jt(n.bounds.left+Ae-In,s),yn(n.bounds.left+Ae,s,n.bounds.left+Ae,s+In),jt(n.bounds.left+Ae,s+Zt-zn)):d.push(jt(n.bounds.left+Ae-In,r),yn(n.bounds.left+Ae,r,n.bounds.left+Ae,r+In),jt(n.bounds.left+Ae,s+Zt-zn)):r<s?d.push(jt(n.bounds.left+Ae-c,r),yn(n.bounds.left+Ae,r,n.bounds.left+Ae,r+c),jt(n.bounds.left+Ae,s-c),yn(n.bounds.left+Ae,s,n.bounds.left+Ae+c,s),jt(o,s)):d.push(jt(n.bounds.left+Ae-c,r),yn(n.bounds.left+Ae,r,n.bounds.left+Ae,r-c),jt(n.bounds.left+Ae,s+c),yn(n.bounds.left+Ae,s,n.bounds.left+Ae+c,s),jt(o,s)),f_(d)}function yh(e,t){const n=e.top+e.height/2,a=e.top+e.height<t.top+zn,r=e.top>t.top+t.height-zn;return{bounds:t,left:e.left,top:n,centerY:n,startY:e.top+uh,endY:e.top+e.height-uh,isAbove:a,isBelow:r,outOfBounds:a||r}}function b_(e){const t={top:e.from.bounds.top+Zt,bottom:e.from.bounds.top+e.from.bounds.height-Zt,left:e.from.bounds.left,right:e.from.bounds.left+e.from.bounds.width,width:e.from.bounds.width,height:e.from.bounds.height-Zt*2},n=yh(e.from.rect,t);n.left=e.from.rect.left+e.from.rect.width+1;const a={top:e.to.bounds.top+Zt,bottom:e.to.bounds.top+e.to.bounds.height-Zt,left:e.to.bounds.left,right:e.to.bounds.left+e.to.bounds.width,width:e.to.bounds.width,height:e.to.bounds.height-Zt*2},r=yh(e.to.rect,a),o=Math.max(r.startY,n.startY);return n.top=Math.min(o,n.endY),n.top<a.top?n.top=Math.min(a.top,n.endY):n.top>a.bottom&&(n.top=Math.max(a.bottom,n.startY)),r.top=Math.min(o,r.endY),r.top<t.top?r.top=Math.min(t.top,r.endY):r.top>t.bottom&&(r.top=Math.max(t.bottom,r.startY)),n.top=Math.min(Math.max(n.top,t.top),t.bottom),r.top=Math.min(Math.max(r.top,a.top),a.bottom),{from:n,to:r}}l.memo(function({from:e,to:t}){const n=b_({from:e,to:t});if(n.from.outOfBounds&&n.to.outOfBounds)return null;const a=g_(n);return i.jsxs(i.Fragment,{children:[i.jsx(p_,{d:a,strokeWidth:VS}),i.jsx(eo,{d:a,strokeWidth:rr}),i.jsx(h_,{top:t.rect.top,left:t.rect.left-.5,height:t.rect.height,width:rr,bounds:t.bounds}),n.from.isAbove&&i.jsx(eo,{d:fs(n.from.left+Ae,n.from.bounds.top-Zt+zn,-1),strokeWidth:rr}),n.from.isBelow&&i.jsx(eo,{d:fs(n.from.left+Ae,n.from.bounds.top+n.from.bounds.height+Zt-zn,1),strokeWidth:rr}),n.to.isAbove&&i.jsx(eo,{d:fs(n.to.bounds.left+Ae,n.to.bounds.top-Zt+zn,-1),strokeWidth:rr}),n.to.isBelow&&i.jsx(eo,{d:fs(n.to.bounds.left+Ae,n.to.bounds.top+n.to.bounds.height+Zt-zn,1),strokeWidth:rr}),US]})});k.svg`
  pointer-events: none;
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
`;const vh=i.jsx(E,{muted:!0,children:i.jsx(_a,{})}),Bc=(e,t)=>i.jsx(I,{as:"li",children:i.jsx(E,{textOverflow:"ellipsis",size:1,weight:"medium",children:e})},`${e}-${t}`);function y_(e){const{titlePath:t,maxLength:n}=e,a=l.useMemo(()=>{const o=t.length,s=Math.ceil(n/2),d=Math.floor(n/2);return n&&o>n?[...t.slice(0,s-1),t.slice(s-1,o-d),...t.slice(o-d)]:t},[n,t]),r=l.useMemo(()=>a.map((o,s)=>{const d=`${o}-${s}`,c=s<a.length-1;return Array.isArray(o)?i.jsxs(l.Fragment,{children:[i.jsx(Ie,{content:i.jsx(B,{space:2,padding:2,children:o.map(Bc)}),children:i.jsx(I,{children:Bc("...",s)})}),c&&vh]},d):i.jsxs(l.Fragment,{children:[Bc(o,s),c&&vh]},d)}),[a]);return i.jsx(P,{align:"center",as:"ol",gap:2,children:r})}function v_(e){return`inset 0 0 0 ${e.width}px ${e.color}`}const x_=k(Ze)`
  align-items: flex-end;
`;function vm(e){const{base:t,border:n,focusRing:a}=e,r=a.offset+a.width,o=0-a.offset,s=t?t.bg:"var(--card-bg-color)";return[o>0&&`inset 0 0 0 ${o}px var(--card-focus-ring-color)`,n&&v_(n),o<0&&`0 0 0 ${0-o}px ${s}`,r>0&&`0 0 0 ${r}px var(--card-focus-ring-color)`].filter(Boolean).join(",")}const C_="data-active",Vc="a,button",w_=k.div(({theme:e,offset:t})=>ae`
    bottom: ${-t}px;
    border-radius: ${Te(e.sanity.radius[1])};
    left: ${-t}px;
    pointer-events: none;
    position: absolute;
    right: ${-t}px;
    top: ${-t}px;
    z-index: 2;

    ${Mv}:focus-visible & {
      box-shadow: ${vm({base:e.sanity.color.base,focusRing:e.sanity.focusRing})};
    }
  `),T_=k.div`
  bottom: 0;
  display: none;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
  z-index: 1;

  @media (hover: hover) {
    &[data-enabled='true'] {
      display: block;
    }
  }
`,Mv=k(I)`
  height: 100%;
  outline: none;
  overflow-x: hidden;
  overflow-y: auto;
  overscroll-behavior: contain;
  width: 100%;
`,j_=k(I).attrs(({$height:e})=>({style:{height:`${e}px`}}))`
  position: relative;
  width: 100%;
`,Gi=l.forwardRef(function({activeItemDataAttr:e=C_,ariaLabel:t,ariaMultiselectable:n=!1,autoFocus:a,canReceiveFocus:r,fixedHeight:o,focusRingOffset:s=0,getItemDisabled:d,getItemKey:c,getItemSelected:u,initialIndex:m,initialScrollAlign:p="start",inputElement:h,itemHeight:f,items:g,onEndReached:b,onEndReachedIndexOffset:v=0,onlyShowSelectionWhenActive:y,overscan:x,renderItem:w,wrapAround:C=!0,...T},j){const A=l.useRef(!1),M=l.useRef(l.useId()),S=l.useRef(m??0),[N,D]=l.useState(null),[_,F]=l.useState(!1),[R,$]=l.useState(null),[O,V]=l.useState(null),H=l.useCallback(Q=>{if(!b)return;const[ue]=[...Q.getVirtualItems()].reverse();ue&&ue.index>=g.length-v-1&&A.current&&b()},[b,g.length,v]),J=Du({count:g.length,getItemKey:c,getScrollElement:()=>O,estimateSize:()=>f,onChange:H,overscan:x}),q=l.useMemo(()=>{let Q=-1;return g.reduce((ue,se,he)=>{var _e,Ne;const $e=(_e=d==null?void 0:d(he))!=null?_e:!1,Ce=(Ne=u==null?void 0:u(he))!=null?Ne:!1;return $e||(Q+=1),ue[he]={activeIndex:$e?null:Q,disabled:$e,selected:Ce},ue},[])},[d,u,g]),oe=l.useMemo(()=>q.filter(Q=>!Q.disabled).length,[q]),ie=l.useCallback(Q=>R==null?void 0:R.setAttribute("data-enabled",(!Q).toString()),[R]),te=l.useCallback(Q=>`${M.current}-item-${Q}`,[]),X=l.useCallback(()=>`${M.current}-children`,[]),le=l.useCallback(()=>{const Q=[h,O].some(se=>document.activeElement===se);if(y&&!Q&&!_)return;const ue=Array.from((N==null?void 0:N.children)||[]);ue==null||ue.forEach(se=>{var he,_e,Ne;const $e=Number((he=se.dataset)==null?void 0:he.index),Ce=(_e=q[$e])==null?void 0:_e.activeIndex;(Ne=se.querySelector(Vc))==null||Ne.toggleAttribute(e,Ce===S.current)})},[e,N==null?void 0:N.children,_,h,q,y,O]),me=l.useCallback(()=>{const Q=Array.from((N==null?void 0:N.children)||[]);Q==null||Q.forEach(ue=>{var se;(se=ue.querySelector(Vc))==null||se.toggleAttribute(e,!1)})},[e,N==null?void 0:N.children]),G=l.useMemo(()=>Ey(le,200),[le]),ce=l.useCallback(()=>{const Q=S==null?void 0:S.current;g.length>0?(h==null||h.setAttribute("aria-activedescendant",te(Q)),O==null||O.setAttribute("aria-activedescendant",te(Q))):(h==null||h.removeAttribute("aria-activedescendant"),O==null||O.removeAttribute("aria-activedescendant"))},[te,h,g.length,O]),de=l.useCallback(()=>{var Q,ue;const se=N==null?void 0:N.parentElement;if(N&&se){const he=se.getBoundingClientRect().top-N.getBoundingClientRect().top;return(ue=(Q=J.getVirtualItemForOffset(he))==null?void 0:Q.index)!=null?ue:-1}return-1},[N,J]),pe=l.useCallback(({index:Q,scrollAlign:ue,scrollIntoView:se=!0})=>{if(S.current=Q,ce(),le(),se){const he=q.findIndex(_e=>_e.activeIndex===Q);he>-1&&J.scrollToIndex(he,ue?{align:ue}:{})}},[ce,q,le,J]),W=l.useCallback(Q=>{let ue=-1;const se=oe-1;if(Q==="next"){const he=C?0:se;ue=S.current<oe-1?S.current+1:he}if(Q==="previous"){const he=C?se:0;ue=S.current>0?S.current-1:he}pe({index:ue,scrollIntoView:!0}),ie(!1)},[oe,ie,pe,C]),Y=l.useCallback(Q=>{switch(Q){case"input":h==null||h.focus();break;case"list":O==null||O.focus();break}},[h,O]),z=l.useCallback(()=>{h==null||h.focus()},[h]),ne=l.useCallback(()=>{O==null||O.focus()},[O]),ee=l.useCallback(Q=>()=>{pe({index:Q,scrollIntoView:!1})},[pe]),fe=l.useCallback(()=>{le()},[le]),Oe=l.useCallback(Q=>ue=>{const se=Array.from((N==null?void 0:N.children)||[]);if(se.length&&(ue.key==="ArrowDown"&&(ue.preventDefault(),Y(Q),W("next")),ue.key==="ArrowUp"&&(ue.preventDefault(),Y(Q),W("previous")),ue.key==="Enter")){ue.preventDefault(),Y(Q);const he=se.find(_e=>Number(_e.dataset.index)===q.findIndex(Ne=>Ne.activeIndex===S.current));if(he){const _e=he==null?void 0:he.querySelector(Vc);_e==null||_e.click()}}},[N==null?void 0:N.children,Y,q,W]),Se=l.useCallback(Q=>Oe("input")(Q),[Oe]),De=l.useCallback(Q=>Oe("list")(Q),[Oe]),Fe=l.useCallback(()=>{y&&(le(),F(!0))},[y,le]),Qe=l.useCallback(()=>{y&&(me(),F(!1))},[me,y]);l.useImperativeHandle(j,()=>({focusInputElement(){z()},focusListElement(){ne()},getTopIndex(){return de()},scrollToIndex(Q){pe({index:Q}),ie(!0)}}),[ie,z,ne,de,pe]),l.useEffect(()=>{typeof m<"u"&&!A.current&&pe({index:m,scrollAlign:p,scrollIntoView:!0}),A.current=!0},[m,p,y,pe]),l.useEffect(()=>{function Q(){ie(!0)}return O==null||O.addEventListener("mousemove",Q),O==null||O.addEventListener("wheel",Q,{passive:!0}),()=>{O==null||O.removeEventListener("mousemove",Q),O==null||O.removeEventListener("wheel",Q)}},[ie,O]),l.useEffect(()=>(h==null||h.addEventListener("focus",fe),h==null||h.addEventListener("keydown",Se),O==null||O.addEventListener("focus",fe),O==null||O.addEventListener("keydown",De),()=>{h==null||h.removeEventListener("focus",fe),h==null||h.removeEventListener("keydown",Se),O==null||O.removeEventListener("focus",fe),O==null||O.removeEventListener("keydown",De)}),[r,fe,Oe,Se,De,me,h,le,O]),l.useEffect(()=>{ce()},[ce,g]),l.useEffect(()=>{const Q=new MutationObserver(G);return N&&Q.observe(N,{childList:!0,subtree:!0}),()=>{Q.disconnect()}},[N,G]),l.useEffect(()=>{h==null||h.setAttribute("aria-autocomplete","list"),h==null||h.setAttribute("aria-expanded","true"),h==null||h.setAttribute("aria-controls",X()),h==null||h.setAttribute("role","combobox")},[X,h]),l.useEffect(()=>{a&&Y(a)},[a,r,ne,z,Y]);const ht=r?0:-1;return i.jsxs(Mv,{id:X(),onMouseEnter:Fe,onMouseLeave:Qe,ref:V,sizing:"border",tabIndex:ht,...T,children:[r&&i.jsx(w_,{offset:s}),i.jsx(T_,{"aria-hidden":"true","data-enabled":!0,ref:$}),J&&i.jsx(j_,{forwardedAs:"ul",$height:J.getTotalSize(),"aria-label":t,"aria-multiselectable":n,flex:1,ref:D,role:"listbox",children:J.getVirtualItems().map(Q=>{const ue=Q.index,{activeIndex:se,disabled:he,selected:_e}=q[ue],Ne=w(g[ue],{activeIndex:se,disabled:he,selected:_e,virtualIndex:ue}),$e=l.cloneElement(Ne,{tabIndex:-1}),Ce=typeof se=="number"&&!he?{"aria-posinset":se+1,...n?{"aria-selected":_e.toString()}:{},"aria-setsize":oe,id:te(se),role:"option",onMouseEnter:ee(se)}:{};return i.jsx(B,{as:"li","data-index":ue,ref:o?void 0:J.measureElement,style:{flex:1,...o?{height:`${Q.size}px`}:{},left:0,position:"absolute",top:0,transform:`translateY(${Q.start}px)`,width:"100%"},tabIndex:-1,...Ce,children:$e},Q.key)})})]})}),wt=l.forwardRef(function(e,t){const{mode:n="bleed",tooltipProps:a,tone:r,...o}=e,{t:s}=L();return i.jsx(Z,{...o,icon:$u,mode:n,ref:t,tone:r,tooltipProps:{...a,content:(a==null?void 0:a.content)||s("common.context-menu-button.tooltip")}})});function fo({name:e,title:t},n){return typeof e=="string"&&e.trim().length>0?e:Hd(t,n)}function Hd(e,t){const n=typeof e=="string"&&e.trim().length>0?` (titled "${e}")`:"";return`at index ${t}${n}`}function xm(){const e=l.useContext(tk);if(!e)throw new Error("Could not find `workspaces` context");return e}var k_=Object.defineProperty,A_=(e,t,n)=>t in e?k_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xh=(e,t,n)=>A_(e,typeof t!="symbol"?t+"":t,n);class xa extends Error{constructor(t,n){super(t),xh(this,"index"),xh(this,"identifier"),this.name="WorkspaceValidationError",this.index=n==null?void 0:n.index,this.identifier=(n==null?void 0:n.workspace)&&fo(n.workspace,n.index)}}function S_({workspaces:e}){if(e.length===0)throw new xa("At least one workspace is required.");__(e),E_(e)}function __(e){const t=e.length===1,n=new Map;e.forEach((a,r)=>{const{name:o,title:s}=a,d=Hd(s,r);if(!o&&!t)throw new xa(`All workspaces must have a \`name\`, unless only a single workspace is defined. Workspace ${d} did not define a \`name\`.`,{workspace:a,index:r});const c=t&&typeof o>"u"?"default":o;if(typeof c!="string")throw new xa(`Workspace at index ${r} defined an invalid \`name\` - must be a string.`,{workspace:a,index:r});const u=c.toLowerCase(),m=n.get(u);if(m){const p=Hd(m.workspace.title,m.index);throw new xa(`\`name\`s must be unique. Workspace ${p} and workspace ${d} both have the \`name\` \`${c}\``,{workspace:a,index:r})}if(n.set(u,{index:r,workspace:a}),!/^[a-z0-9][a-z0-9_-]*$/i.test(c))throw new xa(`All workspace \`name\`s must consist of only a-z, 0-9, underscore and dashes, and cannot begin with an underscore or dash. Workspace ${d} has the invalid name \`${c}\``,{workspace:a,index:r})})}function E_(e){e.length>1&&e.every(I_),e.every(M_);const[t,...n]=e,a=(t.basePath||"/").slice(1).split("/").filter(Boolean).length;n.forEach((o,s)=>{const d=(o.basePath||"/").slice(1).split("/").length;if(a!==d)throw new xa(`All workspace \`basePath\`s must have the same amount of segments. Workspace \`${fo(t,s)}\` had ${a} segment${a===1?"":"s"} \`${t.basePath}\` but workspace \`${fo(o,s)}\` had ${d} segment${d===1?"":"s"} \`${o.basePath}\``,{workspace:o,index:s})});const r=new Map;e.forEach((o,s)=>{const d=(o.basePath||"").toLowerCase(),c=r.get(d);if(c)throw new xa(`\`basePath\`s must be unique. Workspaces \`${c}\` and \`${fo(o,s)}\` both have the \`basePath\` \`${d}\``,{workspace:o,index:s});r.set(d,fo(o,s))})}function I_(e,t){const{name:n,basePath:a}=e;if(a&&typeof a=="string")return!0;throw typeof a>"u"?new xa(`If more than one workspace is defined, every workspace must have a \`basePath\` defined. Workspace \`${n}\` is missing a \`basePath\``,{workspace:e,index:t}):new xa(`If more than one workspace is defined, every workspace must have a \`basePath\` defined. Workspace \`${n}\` has an invalid \`basePath\` (must be a non-empty string)`,{workspace:e,index:t})}function M_(e,t){const{name:n,basePath:a}=e;if(!(!a||a==="/")&&!/^\/[a-z0-9/_-]*[a-z0-9_-]+$/i.test(a))throw new xa(`All workspace \`basePath\`s must start with a leading \`/\`, consist of only URL safe characters, and cannot end with a trailing \`/\`. Workspace \`${n}\`'s basePath is \`${a}\``,{workspace:e,index:t})}const P_=()=>l.createElement(l.Fragment);function N_(e,t){return n=>{let a=r=>l.createElement(e,r);for(const r of t){const o=a;a=s=>l.createElement(r,{...s,renderDefault:o})}return a({...n,renderDefault:P_})}}function Ai(e){const{options:t}=mt().__internal,{defaultComponent:n,pick:a}=e;return l.useMemo(()=>{const r=[...qi(t,[])];r.reverse();const o=r.map(({config:s})=>a(s)).filter(Boolean);return N_(n,o)},[n,t,a])}var O_=Object.defineProperty,F_=(e,t,n)=>t in e?O_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uc=(e,t,n)=>F_(e,typeof t!="symbol"?t+"":t,n);class Ch extends Error{constructor({propertyName:t,path:n,cause:a}){const r=Ke(a)&&typeof(a==null?void 0:a.message)=="string"?`: ${a.message}`:"";super(`An error occurred while resolving \`${t}\` from ${n.join(" > ")}${r}`),Uc(this,"propertyName"),Uc(this,"path"),Uc(this,"cause"),this.name="ConfigPropertyError",this.propertyName=t,this.cause=a,this.path=n}}var R_=Object.defineProperty,D_=(e,t,n)=>t in e?R_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zc=(e,t,n)=>D_(e,typeof t!="symbol"?t+"":t,n);class sa extends Error{constructor({causes:t,name:n,type:a}){const r=t.filter(Boolean).map(o=>Ke(o)&&typeof(o==null?void 0:o.message)=="string"?o.message:String(o));super(`Could not resolve ${a}${n?` \`${n}\``:""}:
${r.map(o=>`	- ${o}`).join(`
`)}

`),zc(this,"name"),zc(this,"type"),zc(this,"causes"),this.name=n,this.causes=t,this.type=a}}function wh(e){const t=["projectId"in e&&"`projectId` not allowed in plugin configuration","dataset"in e&&"`dataset` not allowed in plugin configuration"].filter(A0);if(t.length)throw new Error(`Invalid plugin configuration:
${t.map(n=>`	${n}`).join(`
`)}`)}function zl(e){if(typeof e=="function"){const t=e;return n=>{const a=t(n);return wh(a),a}}return wh(e),()=>e}const $_=(e,{document:t},n)=>{const a=t==null?void 0:t.unstable_fieldActions;if(!a)return e;if(typeof a=="function")return a(e,n);if(Array.isArray(a))return[...e,...a];throw new Error(`Expected \`document.unstable_fieldActions\` to be an array or a function, but received ${typeof a}`)},L_=[];function B_(e){const t=Vt();return l.useEffect(()=>{console.error(`Scheduled publishing plugin is added by default, please remove this plugin from your config. 
        
If you have a custom date config, you can use the scheduledPublishing API to customize the date input.
        
See: https://www.sanity.io/docs/scheduled-publishing.
        `),t.push({id:"scheduled-publishing-deprecated",closable:!0,duration:6e4,status:"error",title:"Scheduled publishing plugin is deprecated",description:"The scheduled publishing plugin is now deprecated, you should remove the plugin from your configuration. If you have a custom date config, you can use the scheduledPublishing API to customize the date input. See: https://www.sanity.io/docs/scheduled-publishing."})},[t]),e.renderDefault(e)}const V_=zl({name:"sanity/deprecated/scheduled-publishing",studio:{components:{layout:B_}}}),U_=["scheduled-publishing"],qi=({plugins:e=[],...t},n)=>{const a={config:t,path:[...n,t.name]},r=e.flatMap(s=>qi(s,[...n,t.name])),o=r.find(s=>s.config.name==="scheduled-publishing");return o&&r.push({path:o.path,config:V_()}),[...r.filter(s=>!U_.includes(s.config.name)),a]},z_=!1,Th=750,Kd=2e3,H_=k(U)(({$fill:e})=>ae`
    align-items: center;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;

    ${e?ae`
          bottom: 0;
          height: 100%;
          left: 0;
          position: absolute;
          right: 0;
          top: 0;
          width: 100%;
        `:ae`
          min-height: 75px;
          height: stretch;
          height: -webkit-fill-available;
          width: stretch;
          width: -webkit-fill-available;
        `}

    ${z_}

    > * {
      position: absolute;
    }
  `),K_=k($o)(({$animatePosition:e=!0})=>ae`
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    @keyframes slideUp {
      from {
        transform: translateY(0);
      }
      to {
        transform: translateY(-15px);
      }
    }
    animation: ${e?`500ms ease-out ${Th}ms 1 normal both running fadeIn, 750ms ease-out ${Kd}ms 1 normal both running slideUp`:`500ms ease-out ${Th}ms 1 normal both running fadeIn`};
  `),W_=k(E)`
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes slideDown {
    from {
      transform: translateY(0);
    }
    to {
      transform: translateY(15px);
    }
  }
  animation:
    1500ms ease-out ${Kd}ms 1 normal both running fadeIn,
    750ms ease-out ${Kd}ms 1 normal both running slideDown;
`;function It({fill:e,showText:t,title:n}){return i.jsxs(H_,{$fill:e,as:e?wi:"div",children:[i.jsx(K_,{$animatePosition:!!t,muted:!0}),t&&i.jsx(G_,{title:n})]})}function G_({title:e}){const{t}=L();return i.jsx(W_,{muted:!0,size:1,children:e||t("common.loading")})}function q_(e){return!("then"in e.resources&&typeof e.resources.then=="function")}function Pv(e,t){return t}const ko="studio",Y_="validation",X_=Pv("studio",{"asset-source.asset-list.menu.delete":"Delete","asset-source.asset-list.menu.show-usage":"Show usage","asset-source.asset-usage-dialog.header_file":"Documents using file","asset-source.asset-usage-dialog.header_image":"Documents using image","asset-source.asset-usage-dialog.loading":"Loading…","asset-source.delete-dialog.action.cancel":"Cancel","asset-source.delete-dialog.action.delete":"Delete","asset-source.delete-dialog.header_file":"Delete file","asset-source.delete-dialog.header_image":"Delete image","asset-source.delete-dialog.loading":"Loading…","asset-source.delete-dialog.usage-list.confirm-delete-file_named":"You are about to delete the file <strong>{{filename}}</strong> and its metadata. Are you sure?","asset-source.delete-dialog.usage-list.confirm-delete-file_unnamed":"You are about to delete the file and its metadata. Are you sure?","asset-source.delete-dialog.usage-list.confirm-delete-image_named":"You are about to delete the image <strong>{{filename}}</strong> and its metadata. Are you sure?","asset-source.delete-dialog.usage-list.confirm-delete-image_unnamed":"You are about to delete the image and its metadata. Are you sure?","asset-source.delete-dialog.usage-list.image-preview-alt":"Preview of image","asset-source.delete-dialog.usage-list.warning-file-is-in-use_named":"{{filename}} cannot be deleted because it's being used. In order to delete this file, you first need to remove all uses of it.","asset-source.delete-dialog.usage-list.warning-file-is-in-use_unnamed":"This file cannot be deleted because it's being used. In order to delete it, you first need to remove all uses of it.","asset-source.delete-dialog.usage-list.warning-image-is-in-use_named":"{{filename}} cannot be deleted because it's being used. In order to delete this image, you first need to remove all uses of it.","asset-source.delete-dialog.usage-list.warning-image-is-in-use_unnamed":"This image cannot be deleted because it's being used. In order to delete it, you first need to remove all uses of it.","asset-source.dialog.accept-message":"Only showing assets of accepted types: <strong>{{acceptTypes}}</strong>","asset-source.dialog.default-title_file":"Select file","asset-source.dialog.default-title_image":"Select image","asset-source.dialog.load-more":"Load more","asset-source.dialog.no-assets_file":"No files","asset-source.dialog.no-assets_image":"No images","asset-source.file.asset-list.action.delete.disabled-cannot-delete-current-file":"Cannot delete currently selected file","asset-source.file.asset-list.action.delete.text":"Delete","asset-source.file.asset-list.action.delete.title":"Delete file","asset-source.file.asset-list.action.select-file.title":"Select the file {{filename}}","asset-source.file.asset-list.action.show-usage.title":"Show usage","asset-source.file.asset-list.delete-failed":"File could not be deleted","asset-source.file.asset-list.delete-successful":"File was deleted","asset-source.file.asset-list.header.date-added":"Date added","asset-source.file.asset-list.header.filename":"Filename","asset-source.file.asset-list.header.size":"Size","asset-source.file.asset-list.header.type":"Type","asset-source.file.title":"Uploaded files","asset-source.image.asset-list.delete-failed":"Image could not be deleted","asset-source.image.asset-list.delete-successful":"Image was deleted","asset-source.image.title":"Uploaded images","asset-source.usage-list.documents-using-file_named_one":"One document is using file <code>{{filename}}</code>","asset-source.usage-list.documents-using-file_named_other":"{{count}} documents are using file <code>{{filename}}</code>","asset-source.usage-list.documents-using-file_named_zero":"No documents are using file <code>{{filename}}</code>","asset-source.usage-list.documents-using-file_unnamed_one":"One document is using this file","asset-source.usage-list.documents-using-file_unnamed_other":"{{count}} documents are using this file","asset-source.usage-list.documents-using-file_unnamed_zero":"No documents are using this file","asset-source.usage-list.documents-using-image_named_one":"One document is using image <code>{{filename}}</code>","asset-source.usage-list.documents-using-image_named_other":"{{count}} documents are using image <code>{{filename}}</code>","asset-source.usage-list.documents-using-image_named_zero":"No documents are using image <code>{{filename}}</code>","asset-source.usage-list.documents-using-image_unnamed_one":"One document is using this image","asset-source.usage-list.documents-using-image_unnamed_other":"{{count}} documents are using this image","asset-source.usage-list.documents-using-image_unnamed_zero":"No documents are using this image","calendar.action.go-to-next-month":"Go to next month","calendar.action.go-to-next-year":"Go to next year","calendar.action.go-to-previous-month":"Go to previous month","calendar.action.go-to-previous-year":"Go to previous year","calendar.action.go-to-today":"Today","calendar.action.go-to-today-aria-label":"Go to today","calendar.action.go-to-tomorrow":"Tomorrow","calendar.action.go-to-yesterday":"Yesterday","calendar.action.include-time-label":"Include time","calendar.action.select-hour":"Select hour","calendar.action.select-minute":"Select minute","calendar.action.set-to-current-time":"Set to current time","calendar.action.set-to-time-preset":"{{time}} on {{date, datetime}}","calendar.error.must-be-in-format":"Must be in the format: {{exampleDate}}","calendar.month-names.april":"April","calendar.month-names.august":"August","calendar.month-names.december":"December","calendar.month-names.february":"February","calendar.month-names.january":"January","calendar.month-names.july":"July","calendar.month-names.june":"June","calendar.month-names.march":"March","calendar.month-names.may":"May","calendar.month-names.november":"November","calendar.month-names.october":"October","calendar.month-names.september":"September","calendar.weekday-names.short.friday":"Fri","calendar.weekday-names.short.monday":"Mon","calendar.weekday-names.short.saturday":"Sat","calendar.weekday-names.short.sunday":"Sun","calendar.weekday-names.short.thursday":"Thu","calendar.weekday-names.short.tuesday":"Tue","calendar.weekday-names.short.wednesday":"Wed","changes.action.close-label":"Close review changes","changes.action.revert-all-cancel":"Cancel","changes.action.revert-all-confirm":"Revert all","changes.action.revert-all-description":"Are you sure you want to revert all {{count}} changes?","changes.action.revert-changes-confirm-change_one":"Revert change","changes.action.revert-changes-confirm-change_other":"Revert changes","changes.action.revert-changes-description":"Are you sure you want to revert the changes?","changes.action.revert-changes-description_one":"Are you sure you want to revert the change?","changes.added-label":"Added","changes.array.item-added-in-position":"Added in position {{position}}","changes.array.item-moved_down_one":"Moved {{count}} position down","changes.array.item-moved_down_other":"Moved {{count}} positions down","changes.array.item-moved_up_one":"Moved {{count}} position up","changes.array.item-moved_up_other":"Moved {{count}} positions up","changes.array.item-removed-from-position":"Removed from position {{position}}","changes.change-bar.aria-label":"Review changes","changes.changed-label":"Changed","changes.changes-by-author":"Changes by","changes.error-boundary.developer-info":"Check the developer console for more information","changes.error-boundary.title":"Rendering the changes to this field caused an error","changes.error.incorrect-type-message":'Value error: Value is of type "<code>{{actualType}}</code>", expected "<code>{{expectedType}}</code>"',"changes.file.meta-info-fallback-title":"Untitled","changes.image.crop-changed":"Crop changed","changes.image.deleted":"Image deleted","changes.image.error-loading-image":"Error loading image","changes.image.hotspot-changed":"Hotspot changed","changes.image.meta-info-fallback-title":"Untitled","changes.image.no-asset-set":"Image not set","changes.image.no-image-placeholder":"(no image)","changes.inspector.from-label":"From","changes.inspector.meta-label":"Meta","changes.inspector.to-label":"To","changes.loading-author":"Loading…","changes.loading-changes":"Loading changes…","changes.no-changes-description":"Edit the document or select an older version in the timeline to see a list of changes appear in this panel.","changes.no-changes-title":"There are no changes","changes.portable-text.annotation_added":"Added annotation","changes.portable-text.annotation_changed":"Changed annotation","changes.portable-text.annotation_removed":"Removed annotation","changes.portable-text.annotation_unchanged":"Unchanged annotation","changes.portable-text.block-style-changed":'Changed block style from "{{fromStyle}}" to "{{toStyle}}"',"changes.portable-text.changed-formatting":"Changed formatting","changes.portable-text.empty-inline-object":"Empty {{inlineObjectType}}","changes.portable-text.empty-object-annotation":"Empty {{annotationType}}","changes.portable-text.empty-text_added":"Added empty text","changes.portable-text.empty-text_changed":"Changed empty text","changes.portable-text.empty-text_removed":"Removed empty text","changes.portable-text.inline-object_added":"Added inline object","changes.portable-text.inline-object_changed":"Changed inline object","changes.portable-text.inline-object_removed":"Removed inline object","changes.portable-text.inline-object_unchanged":"Unchanged inline object","changes.portable-text.text_added":"Added text","changes.portable-text.text_removed":"Removed text","changes.portable-text.unknown-annotation-schema-type":"Unknown schema type","changes.portable-text.unknown-inline-object-schema-type":"Unknown schema type","changes.removed-label":"Removed","changes.title":"Review changes","common.context-menu-button.tooltip":"Show more","common.dialog.cancel-button.text":"Cancel","common.dialog.confirm-button.text":"Confirm","common.loading":"Loading","configuration-issues.button.label":"Configuration issues","configuration-issues.button.tooltip":"Found configuration issues","default-menu-item.fallback-title":"Sort by {{title}}","default-orderings.caption":"Sort by Caption","default-orderings.description":"Sort by Description","default-orderings.header":"Sort by Header","default-orderings.heading":"Sort by Heading","default-orderings.label":"Sort by Label","default-orderings.name":"Sort by Name","default-orderings.title":"Sort by Title","document-status.edited":"Edited {{date}}","document-status.not-published":"Not published","document-status.published":"Published {{date}}","form.error.duplicate-keys-alert.details.additional-description":"The value of the <code>_key</code> property must be a unique string.","form.error.duplicate-keys-alert.details.description":"This usually happens when items are created using an API client, and the <code>_key</code> property of each elements has been generated non-uniquely.","form.error.duplicate-keys-alert.details.title":"Developer info","form.error.duplicate-keys-alert.generate-button.text":"Generate unique keys","form.error.duplicate-keys-alert.summary":"Several items in this list share the same identifier (key). Every item must have an unique identifier.","form.error.duplicate-keys-alert.title":"Non-unique keys","form.error.field-not-found":'Field "{{fieldName}}" not found among members – verify that it is defined in the schema and that it has not been conditionally hidden.',"form.error.missing-keys-alert.add-button.text":"Add missing keys","form.error.missing-keys-alert.details.additional-description":"The value of the <code>_key</code> property must be a unique string.","form.error.missing-keys-alert.details.description":"This usually happens when items are created using an API client, and the <code>_key</code> property has not been included.","form.error.missing-keys-alert.details.title":"Developer info","form.error.missing-keys-alert.summary":"Some items in the list are missing their keys. This must be fixed in order to edit the list.","form.error.missing-keys-alert.title":"Missing keys","form.error.mixed-array-alert.details.description":"This usually happens when items are created using an API client, or when a custom input component has added invalid data to the list.","form.error.mixed-array-alert.details.title":"Developer info","form.error.mixed-array-alert.remove-button.text":"Remove non-object values","form.error.mixed-array-alert.summary":"Some items in this list are not objects. This must be fixed in order to edit the list.","form.error.mixed-array-alert.title":"Invalid list values","form.error.no-array-item-at-index":"No array item at index <code>{{index}}</code> found at path <code>{{path}}</code>","form.error.no-array-item-at-key":'No array item with `_key` <code>"{{key}}"</code> found at path <code>{{path}}</code>',"form.error.unhandled-runtime-error.call-stack.title":"Call Stack:","form.error.unhandled-runtime-error.component-stack.title":"Component Stack:","form.error.unhandled-runtime-error.error-message":"Error: {{message}}","form.error.unhandled-runtime-error.title":"Unhandled Runtime Error","form.field.deprecated-label":"deprecated","form.field.untitled-field-label":"Untitled","form.validation.has-error-aria-label":"Has error","form.validation.has-info-aria-label":"Has information","form.validation.has-warning-aria-label":"Has warning","form.validation.summary.errors-count_one":"{{count}} error","form.validation.summary.errors-count_other":"{{count}} errors","form.validation.summary.warnings-count_one":"{{count}} warning","form.validation.summary.warnings-count_other":"{{count}} warnings","free-trial.tooltip.days-count_one":"{{count}} day left in trial","free-trial.tooltip.days-count_other":"{{count}} days left in trial","free-trial.tooltip.trial-finished":"Upgrade your project","help-resources.action.contact-sales":"Contact sales","help-resources.action.help-and-support":"Help and support","help-resources.action.join-our-community":"Join our community","help-resources.latest-sanity-version":"Latest version is {{latestVersion}}","help-resources.studio-version":"Sanity Studio version {{studioVersion}}","help-resources.title":"Help and resources","input.files.common.cancel-upload":"Cancel","input.files.common.upload-placeholder.file-input-button.text":"Upload","input.files.common.upload-progress":"Uploading <FileName/>","input.reference.document-cannot-be-opened.failed-to-resolve-url":"This document cannot be opened (unable to resolve URL to Studio)","inputs.array.action.add-after":"Add item after","inputs.array.action.add-before":"Add item before","inputs.array.action.add-item":"Add item","inputs.array.action.add-item-select-type":"Add item...","inputs.array.action.drag.tooltip":"Drag to re-order","inputs.array.action.duplicate":"Duplicate","inputs.array.action.edit":"Edit {{itemTypeTitle}}","inputs.array.action.remove":"Remove","inputs.array.action.remove-invalid-item":"Remove","inputs.array.action.view":"View {{itemTypeTitle}}","inputs.array.error.can-delete-but-no-edit-description":"You can still move or delete this item, but it cannot be edited since the schema definition for its type is nowhere to be found.","inputs.array.error.cannot-resolve-initial-value-title":"Unable to resolve initial value for type: {{schemaTypeTitle}}: {{errorMessage}}.","inputs.array.error.cannot-upload-unable-to-convert_one":"The following item can't be uploaded because there's no known conversion from content type to array item:","inputs.array.error.cannot-upload-unable-to-convert_other":"The following items can't be uploaded because there's no known conversion from content types to array item:","inputs.array.error.current-schema-not-declare-description":"The current schema does not declare items of type <code>{{typeName}}</code> as valid for this list. This could mean that the type has been removed as a valid item type, or that someone else has added it to their own local schema that is not yet deployed.","inputs.array.error.json-representation-description":"JSON representation of this item:","inputs.array.error.type-is-incompatible-prompt":"Item of type <code>{{typeName}}</code> not valid for this list","inputs.array.error.type-is-incompatible-title":"Why is this happening?","inputs.array.error.unexpected-error":"Unexpected Error: {{error}}","inputs.array.insert-menu.filter.all-items":"All","inputs.array.insert-menu.search.no-results":"No items found","inputs.array.insert-menu.search.placeholder":"Search","inputs.array.insert-menu.toggle-grid-view.tooltip":"Toggle grid view","inputs.array.insert-menu.toggle-list-view.tooltip":"Toggle list view","inputs.array.no-items-label":"No items","inputs.array.read-only-label":"This field is read-only","inputs.array.resolving-initial-value":"Resolving initial value…","inputs.boolean.disabled":"Disabled","inputs.datetime.placeholder":"e.g. {{example}}","inputs.file.actions-menu.file-options.aria-label":"Open file options menu","inputs.file.browse-button.text":"Browse","inputs.file.dialog.title":"Select file","inputs.file.error.unknown-member-kind":"Unknown member kind: {{kind}}","inputs.file.invalid-file-warning.description":"The value of this field is not a valid file. Resetting this field will let you choose a new file.","inputs.file.invalid-file-warning.reset-button.text":"Reset value","inputs.file.invalid-file-warning.title":"Invalid file value","inputs.file.multi-browse-button.text":"Select","inputs.file.upload-failed.description":"The upload could not be completed at this time.","inputs.file.upload-failed.title":"Upload failed","inputs.files.common.actions-menu.clear-field.label":"Clear field","inputs.files.common.actions-menu.copy-url.label":"Copy URL","inputs.files.common.actions-menu.download.label":"Download","inputs.files.common.actions-menu.notification.url-copied":"The URL is copied to the clipboard","inputs.files.common.actions-menu.replace.label":"Replace","inputs.files.common.actions-menu.upload.label":"Upload","inputs.files.common.drop-message.drop-to-upload":"Drop to upload","inputs.files.common.drop-message.drop-to-upload-multi_one":"Drop to upload {{count}} file","inputs.files.common.drop-message.drop-to-upload-multi_other":"Drop to upload {{count}} files","inputs.files.common.drop-message.drop-to-upload.no-accepted-file-message_one":"Can't upload this file here","inputs.files.common.drop-message.drop-to-upload.no-accepted-file-message_other":"Can't upload any of these files here","inputs.files.common.drop-message.drop-to-upload.rejected-file-message_one":"{{count}} file can't be uploaded here","inputs.files.common.drop-message.drop-to-upload.rejected-file-message_other":"{{count}} files can't be uploaded here","inputs.files.common.placeholder.cannot-upload-some-files_one":"Cannot upload file","inputs.files.common.placeholder.cannot-upload-some-files_other":"Cannot upload {{count}} files","inputs.files.common.placeholder.drag-or-paste-to-upload_file":"Drag or paste file here","inputs.files.common.placeholder.drag-or-paste-to-upload_image":"Drag or paste image here","inputs.files.common.placeholder.drop-to-upload_file":"Drop to upload file","inputs.files.common.placeholder.drop-to-upload_image":"Drop to upload image","inputs.files.common.placeholder.read-only":"Read only","inputs.files.common.placeholder.upload-not-supported":"Can't upload files here","inputs.files.common.stale-upload-warning.clear":"Clear upload","inputs.files.common.stale-upload-warning.description":"An upload has made no progress for at least {{staleThresholdMinutes}} minutes and likely got interrupted. You can safely clear the incomplete upload and try uploading again.","inputs.files.common.stale-upload-warning.title":"Incomplete upload","inputs.image.actions-menu.crop-image-tooltip":"Crop image","inputs.image.actions-menu.edit-details.aria-label":"Open image edit dialog","inputs.image.actions-menu.options.aria-label":"Open image options menu","inputs.image.browse-menu.text":"Select","inputs.image.drag-overlay.cannot-upload-here":"Cannot upload this file here","inputs.image.drag-overlay.drop-to-upload-image":"Drop image to upload","inputs.image.drag-overlay.this-field-is-read-only":"This field is read only","inputs.image.error.unknown-member-kind":"Unknown member kind: {{kind}}","inputs.image.hotspot-dialog.title":"Edit hotspot and crop","inputs.image.invalid-image-warning.description":"The value of this field is not a valid image. Resetting this field will let you choose a new image.","inputs.image.invalid-image-warning.reset-button.text":"Reset value","inputs.image.invalid-image-warning.title":"Invalid image value","inputs.image.preview-uploaded-image":"Preview of uploaded image","inputs.image.upload-error.description":"The upload could not be completed at this time.","inputs.image.upload-error.title":"Upload failed","inputs.imagetool.description":"Adjust the rectangle to crop image. Adjust the circle to specify the area that should always be visible.","inputs.imagetool.load-error":"Error: {{errorMessage}}","inputs.imagetool.title":"Hotspot & Crop","inputs.invalid-value.convert-button.text":"Convert to {{targetType}}","inputs.invalid-value.current-type":"The current value (<code>{{actualType}}</code>)","inputs.invalid-value.description":"The property value is stored as a value type that does not match the expected type.","inputs.invalid-value.details.description":"The value of this property must be of type <code>{{validType}}</code> according to the schema.","inputs.invalid-value.details.multi-type-description":"Only the following types are valid here according to schema:","inputs.invalid-value.details.possible-reason":"Mismatching value types typically occur when the schema has recently been changed.","inputs.invalid-value.details.title":"Developer info","inputs.invalid-value.reset-button.text":"Reset value","inputs.invalid-value.title":"Invalid property value","inputs.object.field-group-tabs.aria-label":"Field groups","inputs.object.unknown-fields.read-only.description":"This field is <strong>read only</strong> according to the document’s schema and cannot be unset. If you want to be able to unset this in Studio, make sure you remove the <code>readOnly</code> field from the enclosing type in the schema.","inputs.object.unknown-fields.remove-field-button.text":"Remove field","inputs.object.unknown-fields.warning.description_one":"Encountered a field that is not defined in the schema.","inputs.object.unknown-fields.warning.description_other":"Encountered {{count}} fields that are not defined in the schema.","inputs.object.unknown-fields.warning.details.description_one":"This field is not defined in the schema, which could mean that the field definition has been removed or that someone else has added it to their own local project and have not deployed their changes yet.","inputs.object.unknown-fields.warning.details.description_other":"These fields are not defined in the document’s schema, which could mean that the field definitions have been removed or that someone else has added them to their own local project and have not deployed their changes yet.","inputs.object.unknown-fields.warning.details.title":"Developer info","inputs.object.unknown-fields.warning.title_one":"Unknown field found","inputs.object.unknown-fields.warning.title_other":"Unknown fields found","inputs.portable-text.action.collapse-editor":"Collapse editor","inputs.portable-text.action.edit-annotation-aria-label":"Edit annotation","inputs.portable-text.action.expand-editor":"Expand editor","inputs.portable-text.action.insert-block":"Insert {{typeName}}","inputs.portable-text.action.insert-block-aria-label":"Insert {{typeName}} (block)","inputs.portable-text.action.insert-inline-object":"Insert {{typeName}}","inputs.portable-text.action.insert-inline-object-aria-label":"Insert {{typeName}} (inline)","inputs.portable-text.action.remove-annotation-aria-label":"Remove annotation","inputs.portable-text.activate-on-focus-message_click":"Click to activate","inputs.portable-text.activate-on-focus-message_click-focused":"Click or press space to activate","inputs.portable-text.activate-on-focus-message_tap":"Tap to activate","inputs.portable-text.annotation-aria-label":"Annotation object","inputs.portable-text.annotation-editor.title":"Edit {{schemaType}}","inputs.portable-text.annotation.link":"Link","inputs.portable-text.block.aria-label":"Block object","inputs.portable-text.block.edit":"Edit","inputs.portable-text.block.open-menu-aria-label":"Open menu","inputs.portable-text.block.open-reference":"Open reference","inputs.portable-text.block.remove":"Remove","inputs.portable-text.block.view":"View","inputs.portable-text.decorator.code":"Code","inputs.portable-text.decorator.emphasis":"Italic","inputs.portable-text.decorator.strike-through":"Strike","inputs.portable-text.decorator.strong":"Strong","inputs.portable-text.decorator.underline":"Underline","inputs.portable-text.empty-placeholder":"Empty","inputs.portable-text.inline-block.aria-label":"Inline object","inputs.portable-text.inline-object.edit":"Edit object","inputs.portable-text.inline-object.edit-aria-label":"Edit object","inputs.portable-text.inline-object.remove":"Remove object","inputs.portable-text.inline-object.remove-aria-label":"Remove object","inputs.portable-text.invalid-value.action-disclaimer":"NOTE: It’s generally safe to perform the action above, but if you are in doubt, get in touch with those responsible for configuring your studio.","inputs.portable-text.invalid-value.disallowed-child-type.action":"Remove the object","inputs.portable-text.invalid-value.disallowed-child-type.description":"Child with key {{childKey}} of block with key <code>{{key}}</code> is of type <code>{{childType}}</code>, which is not allowed by the schema.","inputs.portable-text.invalid-value.disallowed-type.action":"Remove the block","inputs.portable-text.invalid-value.disallowed-type.description":"Block with key <code>{{key}}</code> is of type <code>{{typeName}}</code>, which is not allowed by the schema.","inputs.portable-text.invalid-value.empty-children.action":"Insert empty text span","inputs.portable-text.invalid-value.empty-children.description":"Text block with key <code>{{key}}</code> has no text spans.","inputs.portable-text.invalid-value.ignore-button.text":"Ignore","inputs.portable-text.invalid-value.incorrect-block-type.action":"Use type <code>{{expectedTypeName}}</code>","inputs.portable-text.invalid-value.incorrect-block-type.description":"Block with key <code>{{key}}</code> has an invalid type name. According to the schema, it should be <code>{{expectedTypeName}}</code>.","inputs.portable-text.invalid-value.invalid-span-text.action":"Set empty text value","inputs.portable-text.invalid-value.invalid-span-text.description":"Span with key {{childKey}} of block with key <code>{{key}}</code> has a missing or invalid <code>text</code> property.","inputs.portable-text.invalid-value.missing-block-type.action":"Use type <code>{{expectedTypeName}}</code>","inputs.portable-text.invalid-value.missing-block-type.description":"Block with key <code>{{key}}</code> is missing a type name. According to the schema, it should be <code>{{expectedTypeName}}</code>.","inputs.portable-text.invalid-value.missing-child-key.action":"Assign random key","inputs.portable-text.invalid-value.missing-child-key.description":"Child at index <code>{{index}}</code> of block with key <code>{{key}}</code> is missing <code>_key</code> property.","inputs.portable-text.invalid-value.missing-child-type.action":"Remove the object","inputs.portable-text.invalid-value.missing-child-type.description":"Child with key {{childKey}} of block with key <code>{{key}}</code> is missing <code>_type</code> property.","inputs.portable-text.invalid-value.missing-key.action":"Assign random key","inputs.portable-text.invalid-value.missing-key.description":"Block at index <code>{{index}}</code> is missing required <code>_key</code> property.","inputs.portable-text.invalid-value.missing-or-invalid-children.action":"Remove the block","inputs.portable-text.invalid-value.missing-or-invalid-children.description":"Text block with key <code>{{key}}</code> has an invalid or missing `children` property.","inputs.portable-text.invalid-value.missing-or-invalid-markdefs.action":"Add property","inputs.portable-text.invalid-value.missing-or-invalid-markdefs.description":"Text block with key <code>{{key}}</code> has an invalid or missing `markDefs` property.","inputs.portable-text.invalid-value.missing-type.action":"Remove the block","inputs.portable-text.invalid-value.missing-type.description":"Block with key <code>{{key}}</code> is missing a type name.","inputs.portable-text.invalid-value.non-object-child.action":"Remove the item","inputs.portable-text.invalid-value.non-object-child.description":"Child at index <code>{{index}}</code> of block with key <code>{{key}}</code> is not an object.","inputs.portable-text.invalid-value.not-an-array.action":"Unset the value","inputs.portable-text.invalid-value.not-an-array.description":"Value must be an array of Portable Text blocks, or undefined.","inputs.portable-text.invalid-value.not-an-object.action":"Remove item","inputs.portable-text.invalid-value.not-an-object.description":"Item at <code>{{index}}</code> is not an object,.","inputs.portable-text.invalid-value.orphaned-marks.action":"Remove disallowed marks","inputs.portable-text.invalid-value.orphaned-marks.description":"Text block with key <code>{{key}}</code> contains marks <code>({{orphanedMarks, list}})</code> that are not allowed by the schema.","inputs.portable-text.invalid-value.title":"Invalid Portable Text value","inputs.portable-text.list-type.bullet":"Bulleted list","inputs.portable-text.list-type.number":"Numbered list","inputs.portable-text.style.h1":"Heading 1","inputs.portable-text.style.h2":"Heading 2","inputs.portable-text.style.h3":"Heading 3","inputs.portable-text.style.h4":"Heading 4","inputs.portable-text.style.h5":"Heading 5","inputs.portable-text.style.h6":"Heading 6","inputs.portable-text.style.multiple":"Multiple","inputs.portable-text.style.none":"No style","inputs.portable-text.style.normal":"Normal","inputs.portable-text.style.quote":"Quote","inputs.reference.action.clear":"Clear","inputs.reference.action.create-new-document":"Create","inputs.reference.action.create-new-document-select":"Create…","inputs.reference.action.duplicate":"Duplicate","inputs.reference.action.open-in-new-tab":"Open in new tab","inputs.reference.action.remove":"Remove","inputs.reference.action.replace":"Replace","inputs.reference.action.replace-cancel":"Cancel replace","inputs.reference.cross-dataset.feature-disabled-actions":"You can still clear this field's existing reference, but it cannot be changed to a different document as long as the feature is disabled.","inputs.reference.cross-dataset.feature-disabled-description":"This feature has been disabled. Read how to enable it in <DocumentationLink>the documentation</DocumentationLink>.","inputs.reference.cross-dataset.feature-unavailable-title":"Unavailable feature: Cross dataset reference","inputs.reference.cross-dataset.invalid-type":"The referenced document is of invalid type ({{typeName}}) <JsonValue/>","inputs.reference.document-opens-in-new-tab":"This document opens in a new tab","inputs.reference.error.document-unavailable-title":"Document unavailable","inputs.reference.error.failed-to-load-document-title":"Failed to load referenced document","inputs.reference.error.invalid-search-result-type-title":`Search returned a type that's not valid for this reference: "{{returnedType}}"`,"inputs.reference.error.invalid-type-description":"Referenced document (<code>{{documentId}}</code>) is of type <code>{{actualType}}</code>. According to the schema, referenced documents can only be of type <AllowedTypes />.","inputs.reference.error.invalid-type-title":"Document of invalid type","inputs.reference.error.missing-read-permissions-description":"The referenced document could not be accessed due to insufficient permissions","inputs.reference.error.missing-read-permissions-title":"Insufficient permissions","inputs.reference.error.nonexistent-document-description":"The referenced document does not exist (ID: <code>{{documentId}}</code>). You can either remove the reference or replace it with another document.","inputs.reference.error.nonexistent-document-title":"Not found","inputs.reference.error.nonexistent-document.clear-button-label":"Clear","inputs.reference.error.search-failed-title":"Reference search failed","inputs.reference.image-preview-alt-text":"Image preview of referenced document","inputs.reference.incomplete-reference.finalize-action-description":"<strong>{{referencedDocument}}</strong> is published and this reference should now be finalized.","inputs.reference.incomplete-reference.finalize-action-title":"Finalize reference","inputs.reference.incomplete-reference.strengthen-action-description":"<strong>{{referencedDocument}}</strong> is published and this reference should now be converted to a strong reference.","inputs.reference.incomplete-reference.strengthen-action-title":"Convert to strong reference","inputs.reference.incomplete-reference.strengthen-button-label":"Convert to strong reference","inputs.reference.metadata-error.retry-button-label":"Retry","inputs.reference.metadata-error.title":"Unable to load reference metadata","inputs.reference.no-results-for-query":"No results for <strong>“{{searchTerm}}”</strong>","inputs.reference.preview.edited-at-time":"Edited <RelativeTime/>","inputs.reference.preview.has-no-unpublished-changes-aria-label":"No unpublished edits","inputs.reference.preview.has-unpublished-changes-aria-label":"Edited","inputs.reference.preview.is-not-published-aria-label":"Not published","inputs.reference.preview.is-published-aria-label":"Published","inputs.reference.preview.no-unpublished-edits":"No unpublished edits","inputs.reference.preview.not-published":"Not published","inputs.reference.preview.published-at-time":"Published <RelativeTime/>","inputs.reference.referenced-document-does-not-exist":"The referenced document no longer exist and might have been deleted (document ID: <code>{{documentId}}</code>).","inputs.reference.referenced-document-insufficient-permissions":"The referenced document could not be accessed due to insufficient permissions","inputs.reference.resolving-initial-value":"Resolving initial value…","inputs.reference.search-placeholder":"Type to search","inputs.reference.strength-mismatch.is-strong-consquences":"It will not be possible to delete the reference document without first removing this reference or converting it to weak.","inputs.reference.strength-mismatch.is-strong-description":"This reference is <em>strong</em>, but according to the current schema it should be <em>weak</em>.","inputs.reference.strength-mismatch.is-weak-consquences":"This makes it possible to delete the referenced document without first deleting this reference, leaving this field referencing a nonexisting document.","inputs.reference.strength-mismatch.is-weak-description":"This reference is <em>weak</em>, but according to the current schema it should be <em>strong</em>.","inputs.reference.strength-mismatch.strengthen-button-label":"Convert to strong reference","inputs.reference.strength-mismatch.title":"Reference strength mismatch","inputs.reference.strength-mismatch.weaken-button-label":"Convert to weak reference","inputs.slug.action.generate":"Generate","inputs.slug.action.generating":"Generating…","inputs.slug.error.missing-source":"Source is missing. Check source on type {{schemaType}} in schema","inputs.tags.placeholder":"Enter tag and press ENTER…","inputs.tags.placeholder_touch":"Enter tag…","inputs.untyped-value.convert-button.text":"Convert to {{targetType}}","inputs.untyped-value.description":"Encountered an object value without a <code>_type</code> property.","inputs.untyped-value.details.description":"Either remove the <code>name</code> property of the object declaration, or set <code>_type</code> property on items.","inputs.untyped-value.details.json-dump-prefix":"Current value (<code>object</code>):","inputs.untyped-value.details.multi-type-description":"The following types are valid here according to schema:","inputs.untyped-value.details.title":"Developer info","inputs.untyped-value.title":"Property value missing <code>_type</code>","inputs.untyped-value.unset-item-button.text":"Unset value","insufficient-permissions-message.not-authorized-explanation":"You do not have permission to access this feature.","insufficient-permissions-message.not-authorized-explanation_create-any-document":"You do not have permission to create a document.","insufficient-permissions-message.not-authorized-explanation_create-document":"You do not have permission to create this document.","insufficient-permissions-message.not-authorized-explanation_create-document-type":"You do not have permission to create this kind of document.","insufficient-permissions-message.not-authorized-explanation_create-new-reference":"You do not have permission to create a new reference.","insufficient-permissions-message.not-authorized-explanation_delete-document":"You do not have permission to delete this document.","insufficient-permissions-message.not-authorized-explanation_delete-schedules":"You do not have permission to delete schedules.","insufficient-permissions-message.not-authorized-explanation_discard-changes":"You do not have permission to discard changes in this document.","insufficient-permissions-message.not-authorized-explanation_duplicate-document":"You do not have permission to duplicate this document.","insufficient-permissions-message.not-authorized-explanation_edit-schedules":"You do not have permission to edit schedules.","insufficient-permissions-message.not-authorized-explanation_execute-schedules":"You do not have permission to execute schedules.","insufficient-permissions-message.not-authorized-explanation_publish-document":"You do not have permission to publish this document.","insufficient-permissions-message.not-authorized-explanation_unpublish-document":"You do not have permission to unpublish this document.","insufficient-permissions-message.roles":"Your roles: <Roles/>","insufficient-permissions-message.title":"Insufficient permissions","member-field-error.unexpected-error":"Unexpected error: {{error}}","new-document.button":"Create","new-document.create-new-document-label":"New document…","new-document.filter-placeholder":"Search document types","new-document.loading":"Loading…","new-document.new-document-aria-label":"New document","new-document.no-document-types-found":"No document types found","new-document.no-document-types-label":"No document types","new-document.no-results":"No results for <strong>{{searchQuery}}</strong>","new-document.open-dialog-aria-label":"Create new document","new-document.title":"Create new document","package-version.new-package-available.description":"Simply reload to use the new version.","package-version.new-package-available.reload-button":"Reload","package-version.new-package-available.title":"Sanity Studio was updated","presence.action.manage-members":"Manage members","presence.aria-label":"Global presence","presence.no-one-else-description":"Invite people to the project to see their online status.","presence.no-one-else-title":"No one else is here","presence.not-in-a-document":"Not in a document","presence.tooltip-content":"Who is here","preview.default.title-fallback":"Untitled","preview.fallback.no-value":"(no value)","preview.image.file-is-being-uploaded.alt-text":"The image currently being uploaded","relative-time.just-now":"just now","search.action-open-aria-label":"Open search","search.action.add-filter":"Add filter","search.action.clear-filters":"Clear filters","search.action.clear-recent-searches":"Clear recent searches","search.action.clear-type-filters-aria-label":"Clear checked filters","search.action.clear-type-filters-label":"Clear","search.action.close-search-aria-label":"Close search","search.action.filter-by-document-type-aria-label":"Filter by document type","search.action.remove-filter-aria-label":"Remove filter","search.action.search-all-types":"Search all documents","search.action.search-specific-types":"Search for {{types, list}}","search.action.search-specific-types-truncated":"Search for {{types, list}} +{{count}} more","search.action.select-asset":"Select asset","search.action.select-asset_file":"Select file","search.action.select-asset_image":"Select image","search.action.toggle-filters-aria-label_hide":"Hide filters","search.action.toggle-filters-aria-label_show":"Show filters","search.action.toggle-filters-label_hide":"Hide filters","search.action.toggle-filters-label_show":"Show filters","search.button.tooltip":"Search","search.document-type-list":"{{types, list}}","search.document-type-list-all-types":"All types","search.document-type-list-truncated":"{{types, list}} +{{count}} more","search.document-types-aria-label":"Document types","search.document-types-no-matches-found":"No matches for {{filter}}","search.error.display-filter-description":"This may indicate invalid options defined in your schema.","search.error.display-filter-title":"An error occurred whilst displaying this filter.","search.error.no-valid-asset-source-check-config-description":"Please ensure it's enabled in your studio configuration file.","search.error.no-valid-asset-source-only-default-description":"Currently, only the default asset source is supported.","search.error.no-valid-asset-source-title":"No valid asset sources found.","search.error.unspecified-error-help-description":"Please try again or check your connection","search.error.unspecified-error-title":"Something went wrong while searching","search.filter-all-fields-header":"All fields","search.filter-asset-change_file":"Change file","search.filter-asset-change_image":"Change image","search.filter-asset-clear":"Clear","search.filter-asset-select_file":"Select file","search.filter-asset-select_image":"Select image","search.filter-boolean-false":"False","search.filter-boolean-true":"True","search.filter-by-title-aria-label":"Filter by title","search.filter-date-aria-label":"Date","search.filter-date-range-end-date-aria-label":"End date","search.filter-date-range-start-date-aria-label":"Start date","search.filter-date-unit-aria-label":"Select unit","search.filter-date-unit_days":"Days","search.filter-date-unit_months":"Months","search.filter-date-unit_years":"Years","search.filter-date-value-aria-label":"Unit value","search.filter-field-tooltip-description":"Field description","search.filter-field-tooltip-name":"Field name","search.filter-field-tooltip-used-in-document-types":"Used in document types","search.filter-no-matches-found":"No matches for {{filter}}","search.filter-number-max-value-placeholder":"Max value","search.filter-number-min-value-placeholder":"Min value","search.filter-number-value-placeholder":"Value","search.filter-placeholder":"Filter","search.filter-reference-clear":"Clear","search.filter-shared-fields-header":"Shared fields","search.filter-string-value-placeholder":"Value","search.filter-string-value-select-predefined-value":"Select…","search.filters-aria-label_one":"Filter","search.filters-aria-label_other":"Filters","search.instructions":"Use <ControlsIcon/> to refine your search","search.no-results-help-description":"Try another keyword or adjust your filters","search.no-results-title":"No results found","search.operator.array-count-equal.description_one":"<Field/> <Operator>has</Operator> <Value>{{count}} item</Value>","search.operator.array-count-equal.description_other":"<Field/> <Operator>has</Operator> <Value>{{count}} items</Value>","search.operator.array-count-equal.name":"quantity is","search.operator.array-count-gt.description_one":"<Field/> <Operator>has ></Operator> <Value>{{count}} item</Value>","search.operator.array-count-gt.description_other":"<Field/> <Operator>has ></Operator> <Value>{{count}} items</Value>","search.operator.array-count-gt.name":"quantity greater than","search.operator.array-count-gte.description_one":"<Field/> <Operator>has ≥</Operator> <Value>{{count}} item</Value>","search.operator.array-count-gte.description_other":"<Field/> <Operator>has ≥</Operator> <Value>{{count}} items</Value>","search.operator.array-count-gte.name":"quantity greater than or equal to","search.operator.array-count-lt.description_one":"<Field/> <Operator>has <</Operator> <Value>{{count}} item</Value>","search.operator.array-count-lt.description_other":"<Field/> <Operator>has <</Operator> <Value>{{count}} items</Value>","search.operator.array-count-lt.name":"quantity less than","search.operator.array-count-lte.description_one":"<Field/> <Operator>has ≤</Operator> <Value>{{count}} item</Value>","search.operator.array-count-lte.description_other":"<Field/> <Operator>has ≤</Operator> <Value>{{count}} items</Value>","search.operator.array-count-lte.name":"quantity less than or equal to","search.operator.array-count-not-equal.description_one":"<Field/> <Operator>does not have</Operator> <Value>{{count}} item</Value>","search.operator.array-count-not-equal.description_other":"<Field/> <Operator>does not have</Operator> <Value>{{count}} items</Value>","search.operator.array-count-not-equal.name":"quantity is not","search.operator.array-count-range.description":"<Field/> <Operator>has between</Operator> <Value>{{from}} → {{to}} items</Value>","search.operator.array-count-range.name":"quantity is between","search.operator.array-list-includes.description":"<Field/> <Operator>includes</Operator> <Value>{{value}}</Value>","search.operator.array-list-includes.name":"includes","search.operator.array-list-not-includes.description":"<Field/> <Operator>does not include</Operator> <Value>{{value}}</Value>","search.operator.array-list-not-includes.name":"does not include","search.operator.array-reference-includes.description":"<Field/> <Operator>includes</Operator> <Value>{{value}}</Value>","search.operator.array-reference-includes.name":"includes","search.operator.array-reference-not-includes.description":"<Field/> <Operator>does not include</Operator> <Value>{{value}}</Value>","search.operator.array-reference-not-includes.name":"does not include","search.operator.asset-file-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.asset-file-equal.name":"is","search.operator.asset-file-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.asset-file-not-equal.name":"is not","search.operator.asset-image-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.asset-image-equal.name":"is","search.operator.asset-image-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.asset-image-not-equal.name":"is not","search.operator.boolean-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.boolean-equal.name":"is","search.operator.date-after.description":"<Field/> <Operator>is after</Operator> <Value>{{value}}</Value>","search.operator.date-after.name":"after","search.operator.date-before.description":"<Field/> <Operator>is before</Operator> <Value>{{value}}</Value>","search.operator.date-before.name":"before","search.operator.date-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.date-equal.name":"is","search.operator.date-last.description":"<Field/> <Operator>is in the last</Operator> <Value>{{value}}</Value>","search.operator.date-last.name":"last","search.operator.date-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.date-not-equal.name":"is not","search.operator.date-range.description":"<Field/> <Operator>is between</Operator> <Value/>","search.operator.date-range.name":"is between","search.operator.date-time-after.description":"<Field/> <Operator>is after</Operator> <Value>{{value}}</Value>","search.operator.date-time-after.name":"after","search.operator.date-time-before.description":"<Field/> <Operator>is before</Operator> <Value>{{value}}</Value>","search.operator.date-time-before.name":"before","search.operator.date-time-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.date-time-equal.name":"is","search.operator.date-time-last.description":"<Field/> <Operator>is in the last</Operator> <Value>{{value}}</Value>","search.operator.date-time-last.name":"last","search.operator.date-time-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.date-time-not-equal.name":"is not","search.operator.date-time-range.description":"<Field/> <Operator>is between</Operator> <Value/>","search.operator.date-time-range.name":"is between","search.operator.defined.description":"<Field/> <Operator>is</Operator> <Value>not empty</Value>","search.operator.defined.name":"not empty","search.operator.not-defined.description":"<Field/> <Operator>is</Operator> <Value>empty</Value>","search.operator.not-defined.name":"empty","search.operator.number-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.number-equal.name":"is","search.operator.number-gt.description":"<Field/> <Operator>></Operator> <Value>{{value}}</Value>","search.operator.number-gt.name":"greater than","search.operator.number-gte.description":"<Field/> <Operator>≥</Operator> <Value>{{value}}</Value>","search.operator.number-gte.name":"greater than or equal to","search.operator.number-lt.description":"<Field/> <Operator><</Operator> <Value>{{value}}</Value>","search.operator.number-lt.name":"less than","search.operator.number-lte.description":"<Field/> <Operator>≤</Operator> <Value>{{value}}</Value>","search.operator.number-lte.name":"less than or equal to","search.operator.number-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.number-not-equal.name":"is not","search.operator.number-range.description":"<Field/> <Operator>is between</Operator> <Value>{{from}} → {{to}}</Value>","search.operator.number-range.name":"is between","search.operator.portable-text-contains.description":"<Field/> <Operator>contains</Operator> <Value>{{value}}</Value>","search.operator.portable-text-contains.name":"contains","search.operator.portable-text-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.portable-text-equal.name":"is","search.operator.portable-text-not-contains.description":"<Field/> <Operator>does not contain</Operator> <Value>{{value}}</Value>","search.operator.portable-text-not-contains.name":"does not contain","search.operator.portable-text-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.portable-text-not-equal.name":"is not","search.operator.reference-asset-file.description":"<Field/> <Operator>→</Operator> <Value>{{value}}</Value>","search.operator.reference-asset-file.name":"file","search.operator.reference-asset-image.description":"<Field/> <Operator>→</Operator> <Value>{{value}}</Value>","search.operator.reference-asset-image.name":"image","search.operator.reference-document.description":"<Field/> <Operator>→</Operator> <Value>{{value}}</Value>","search.operator.reference-document.name":"document","search.operator.reference-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.reference-equal.name":"is","search.operator.reference-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.reference-not-equal.name":"is not","search.operator.slug-contains.description":"<Field/> <Operator>contains</Operator> <Value>{{value}}</Value>","search.operator.slug-contains.name":"contains","search.operator.slug-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.slug-equal.name":"is","search.operator.slug-not-contains.description":"<Field/> <Operator>does not contain</Operator> <Value>{{value}}</Value>","search.operator.slug-not-contains.name":"does not contain","search.operator.slug-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.slug-not-equal.name":"is not","search.operator.string-contains.description":"<Field/> <Operator>contains</Operator> <Value>{{value}}</Value>","search.operator.string-contains.name":"contains","search.operator.string-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.string-equal.name":"is","search.operator.string-list-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.string-list-equal.name":"is","search.operator.string-list-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.string-list-not-equal.name":"is not","search.operator.string-not-contains.description":"<Field/> <Operator>does not contain</Operator> <Value>{{value}}</Value>","search.operator.string-not-contains.name":"does not contain","search.operator.string-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.string-not-equal.name":"is not","search.ordering.best-match-label":"Best match","search.ordering.created-ascending-label":"Created: Oldest first","search.ordering.created-descending-label":"Created: Newest first","search.ordering.updated-ascending-label":"Updated: Oldest first","search.ordering.updated-descending-label":"Updated: Newest first","search.placeholder":"Search","search.recent-searches-aria-label":"Recent searches","search.recent-searches-label":"Recent searches","search.search-results-aria-label":"Search results","sheet-list.edit-columns":"Edit columns","sheet-list.hide-field":"Remove from table","sheet-list.reset-columns":"Reset columns","sheet-list.select-fields":"Select up to 5 field types","status-button.aria-label":"Configuration status","timeline.error.load-document-changes-description":"Document history transactions have not been affected.","timeline.error.load-document-changes-title":"An error occurred whilst retrieving document changes.","timeline.error.no-document-history-description":"When changing the content of the document, the document versions will appear in this menu.","timeline.error.no-document-history-title":"No document history","timeline.error.unable-to-load-revision":"Unable to load revision","timeline.latest":"Latest","timeline.latest-revision":"Latest revision","timeline.latest-version":"Latest revision","timeline.list.aria-label":"Document revisions","timeline.loading-history":"Loading history…","timeline.operation.created":"Created","timeline.operation.created-initial":"Created","timeline.operation.created-initial_timestamp":"Created: {{timestamp, datetime}}","timeline.operation.created_timestamp":"Created: {{timestamp, datetime}}","timeline.operation.deleted":"Deleted","timeline.operation.deleted_timestamp":"Deleted: {{timestamp, datetime}}","timeline.operation.draft-discarded":"Discarded draft","timeline.operation.draft-discarded_timestamp":"Discarded draft: {{timestamp, datetime}}","timeline.operation.edited-draft":"Edited","timeline.operation.edited-draft_timestamp":"Edited: {{timestamp, datetime}}","timeline.operation.edited-live":"Live edited","timeline.operation.edited-live_timestamp":"Live edited: {{timestamp, datetime}}","timeline.operation.published":"Published","timeline.operation.published_timestamp":"Published: {{timestamp, datetime}}","timeline.operation.unpublished":"Unpublished","timeline.operation.unpublished_timestamp":"Unpublished: {{timestamp, datetime}}","timeline.since":"Since: {{timestamp, datetime}}","timeline.since-version-missing":"Since: unknown version","toolbar.portable-text.action-button-aria-label":"{{action}}","tree-editing-dialog.breadcrumbs.menu":"Breadcrumb menu","tree-editing-dialog.search-placeholder":"Search","tree-editing-dialog.search.menu-label":"Search menu","tree-editing-dialog.search.no-results-title":"No results found","tree-editing-dialog.sidebar.action.close":"Close sidebar","tree-editing-dialog.sidebar.action.collapse":"Collapse","tree-editing-dialog.sidebar.action.done":"Done","tree-editing-dialog.sidebar.action.expand":"Expand","tree-editing-dialog.sidebar.action.open":"Open sidebar","user-menu.action.free-trial-finished":"Upgrade from free","user-menu.action.free-trial_one":"{{count}} day left in trial","user-menu.action.free-trial_other":"{{count}} days left in trial","user-menu.action.invite-members":"Invite members","user-menu.action.invite-members-aria-label":"Invite members","user-menu.action.manage-project":"Manage project","user-menu.action.manage-project-aria-label":"Manage project","user-menu.action.portable-text.annotation-disabled_empty-block":"Cannot apply {{name}} to empty block","user-menu.action.portable-text.annotation-disabled_multiple-blocks":"Cannot apply {{name}} to multiple blocks","user-menu.action.sign-out":"Sign out","user-menu.appearance-title":"Appearance","user-menu.close-menu":"Close menu","user-menu.color-scheme.dark-description":"Use dark appearance","user-menu.color-scheme.dark-title":"Dark","user-menu.color-scheme.light-description":"Use light appearance","user-menu.color-scheme.light-title":"Light","user-menu.color-scheme.system-description":"Use system appearance","user-menu.color-scheme.system-title":"System","user-menu.locale-title":"Language","user-menu.login-provider":"Signed in with {{providerTitle}}","user-menu.open-menu":"Open menu","workspaces.action.add-workspace":"Add workspace","workspaces.action.choose-another-workspace":"Choose another workspace","workspaces.choose-your-workspace-label":"Choose your workspace","workspaces.select-workspace-aria-label":"Select workspace","workspaces.select-workspace-label":"Select workspace","workspaces.select-workspace-tooltip":"Select workspace","workspaces.title":"Workspaces"}),J_={locale:"en-US",namespace:ko,resources:X_},Z_=Pv("validation",{"array.exact-length":"Must have exactly {{wantedLength}} items","array.exact-length_blocks":"Must have exactly {{wantedLength}} blocks","array.item-duplicate":"Can't be a duplicate","array.maximum-length":"Must have at most {{maxLength}} items","array.maximum-length_blocks":"Must have at most {{maxLength}} blocks","array.minimum-length":"Must have at least {{minLength}} items","array.minimum-length_blocks":"Must have at least {{minLength}} blocks","date.invalid-format":"Must be a valid ISO-8601 formatted date string","date.maximum":"Must be at or before {{maxDate}}","date.minimum":"Must be at or after {{minDate}}","generic.incorrect-type":'Expected type "{{expectedType}}", got "{{actualType}}"',"generic.not-allowed":"Value did not match any allowed values","generic.not-allowed_hint":'Value "{{hint}}" did not match any allowed values',"generic.required":"Required","number.greater-than":"Must be greater than {{threshold}}","number.less-than":"Must be less than {{threshold}}","number.maximum":"Must be lower than or equal to {{maxNumber}}","number.maximum-precision":"Max precision is {{limit}}","number.minimum":"Must be greater than or equal to {{minNumber}}","number.non-integer":"Must be an integer","object.asset-required":"Asset is required","object.asset-required_file":"File is required","object.asset-required_image":"Image is required","object.not-reference":"Must be a reference to a document","object.reference-not-published":"Referenced document must be published","panel.close-button-aria-label":"Close validation","panel.no-errors-message":"No validation errors","panel.title":"Validation","slug.missing-current":"Slug must have a value","slug.not-object":"Slug must be an object","slug.not-unique":"Slug is already in use","string.email":"Must be a valid email address","string.exact-length":"Must be exactly {{wantedLength}} characters long","string.lowercase":"Must be all lowercase characters","string.maximum-length":"Must be at most {{maxLength}} characters long","string.minimum-length":"Must be at least {{minLength}} characters long","string.regex-does-not-match":'Does not match "{{name}}"-pattern',"string.regex-match":'Should not match "{{name}}"-pattern',"string.uppercase":"Must be all uppercase characters","string.url.disallowed-scheme":"Does not match allowed protocols/schemes","string.url.includes-credentials":"Username/password not allowed","string.url.invalid":"Not a valid URL","string.url.not-absolute":"Relative URLs are not allowed","string.url.not-relative":"Only relative URLs are allowed"}),Q_={locale:"en-US",namespace:Y_,resources:Z_},Nv={id:"en-US",title:"English (US)",bundles:[J_,Q_],weekInfo:{firstDay:7,weekend:[6,7],minimalDays:1}},aa=Nv,qo=(()=>{const e="__tmp_supports_local_storage";try{return typeof localStorage>"u"?!1:(localStorage.setItem(e,"---"),localStorage.removeItem(e),!0)}catch{return!1}})(),eE="sanity-locale";function tE(e,t){if(!qo)return;const n=localStorage.getItem(nE(e,t));return n??void 0}function nE(e,t){return[eE,e,t].join(":")}function aE(e){const t=Array.isArray(e)?e:[e],n=JSON.stringify(t.flatMap(o=>o!=null&&o.i18n?Object.values(o.i18n).map(({ns:s})=>s):[]).filter(Ft).sort()),a=l.useMemo(()=>JSON.parse(n),[n]),{t:r}=L(a);return l.useCallback(function(o){const{i18n:s}=o;return s?new Proxy(o,{get:(d,c)=>{const u=d[c];if(typeof c=="string"&&c in s){const{key:m,ns:p}=s[c];return r(m,{ns:p,...typeof u=="string"&&{defaultValue:u}})}return u}}):o},[r])}function Cm(e){const t=l.useMemo(()=>e.i18n?Array.from(new Set(Object.values(e.i18n).map(({ns:a})=>a))).sort():[],[e.i18n]),{t:n}=L(t);return l.useMemo(()=>{const{i18n:a}=e;return a?new Proxy(e,{get:(r,o)=>{const s=r[o];if(typeof o=="string"&&o in a){const{key:d,ns:c}=a[o];return n(d,{ns:c,...typeof s=="string"&&{defaultValue:s}})}return s}}):e},[e,n])}function Yi(){return Ov().currentLocale}function Ov(){const e=l.useContext(S0);if(!e)throw new Error("Sanity LocaleContext value missing. Is this hook being used outside LocaleContext.Provider?");return e}const $a=(()=>{const e={dateTimeFormat:gs(),listFormat:gs(),numberFormat:gs(),relativeTimeFormat:gs()};function t(o,s){const d=bs(o,s);let c=e.dateTimeFormat[d];return c||(c=new Intl.DateTimeFormat(o,s),e.dateTimeFormat[d]=c,c)}function n(o,s){const d=bs(o,s);let c=e.listFormat[d];return c||(c=new Intl.ListFormat(o,s),e.listFormat[d]=c,c)}function a(o,s){const d=bs(o,s);let c=e.numberFormat[d];return c||(c=new Intl.NumberFormat(o,s),e.numberFormat[d]=c,c)}function r(o,s){const d=bs(o,s);let c=e.relativeTimeFormat[d];return c||(c=new Intl.RelativeTimeFormat(o,s),e.relativeTimeFormat[d]=c,c)}return{dateTimeFormat:t,listFormat:n,numberFormat:a,relativeTimeFormat:r}})();function gs(){return Object.create(null)}function bs(e,t){return`${e}-${JSON.stringify(iE(t))}`}function iE(e){const t=[];for(const[n,a]of Object.entries(e))t.push(`${n}=${JSON.stringify(a)}`);return t.sort().join(`
`)}function Kr(e={}){var t;const n=(t=l.useContext(S0))==null?void 0:t.currentLocale.id;return n?$a.listFormat(n,e):$a.listFormat("en-US",{...e,style:"narrow"})}const rE=/^<(?<tag>[^\s\d<][^/?><]+)\/?>/,oE=/<\/(?<tag>[^>]+)>/,sE=/<[^>]+\/>/,lE=/^[A-Z][A-Za-z0-9]+$/,cE=/^[a-z]+$/,dE=/{{\s*?([^}]+)\s*?}}/g;function uE(e){const t=[];let n="",a="",r=e;for(;r.length>0;)if(!a&&r[0]==="<"){const o=hE(r);if(o){const s=o.groups.tag;gE(s),n&&(t.push(...Hc(n)),n=""),pE(o[0])?t.push({type:"tagOpen",selfClosing:!0,name:s}):(t.push({type:"tagOpen",name:s}),a=s),r=r.slice(o[0].length)}else n+=r[0],r=r.slice(1)}else if(a&&r[0]==="<"&&r[1]!=="<"){const o=fE(r);if(o){const s=o.groups.tag;if(r[1]!=="/")throw new Error(`Expected closing tag for <${a}>, but found new opening tag <${s}>. Nested tags is not supported.`);if(s!==a)throw new Error(`Expected closing tag for <${a}>, but found closing tag </${s}> instead. Make sure each opening tag has a matching closing tag.`);n&&(t.push(...Hc(n)),n=""),t.push({type:"tagClose",name:s}),a="",r=r.slice(o[0].length)}else n+=r[0],r=r.slice(1)}else n+=r[0],r=r.slice(1);if(a)throw new Error(`No matching closing tag for <${a}> found. Either make it self closing (e.g. "<${a}/>") or close it (e.g "<${a}>...</${a}>").`);return n&&t.push(...Hc(n)),t}function Hc(e){const t=[],n=e.matchAll(dE);let a=0;for(const r of n){if(typeof r.index>"u")continue;const o=e.slice(a,r.index);o.length>0&&t.push({type:"text",text:o}),t.push(mE(r[0])),a+=o.length+r[0].length}return a<e.length&&t.push({type:"text",text:e.slice(a)}),t}function mE(e){const[t,...n]=e.replace(/^\{\{|\}\}$/g,"").trim().split(/\s*,\s*/);if(n.length===1&&n[0]==="list")return{type:"interpolation",variable:t,formatters:n};if(n.length>0)throw new Error(`Interpolations with formatters are not supported when using <Translate>. Found "${e}". Utilize "useTranslation" instead, or format the values passed to <Translate> ahead of time.`);return{type:"interpolation",variable:t}}function pE(e){return sE.test(e)}function hE(e){return e.match(rE)}function fE(e){return e.match(oE)}function gE(e){if(!(lE.test(e)||cE.test(e)))throw new Error(e.trim()===e?`Invalid tag "<${e}>". Tag names must be lowercase HTML tags or start with an uppercase letter and can only include letters and numbers.`:`Invalid tag "<${e}>". No whitespace allowed in tags.`)}const bE=/^[A-Z]/,yE=["abbr","address","cite","code","del","em","ins","kbd","q","samp","strong","sub","sup"];function Pe(e){const t=e.t(e.i18nKey,{context:e.context,skipInterpolation:!0,count:e.values&&"count"in e.values&&typeof e.values.count=="number"?e.values.count:void 0}),n=l.useMemo(()=>uE(t),[t]),a=Kr(),r={list:o=>a.format(o)};return i.jsx(i.Fragment,{children:oi(n,e.values,e.components||{},r)})}function oi(e,t,n,a){const[r,...o]=e;if(!r)return null;if(r.type==="interpolation"){const s=t?t[r.variable]:void 0;if(typeof s>"u")return`{{${r.variable}}}`;const d=vE(s,r.formatters||[],a);return i.jsxs(i.Fragment,{children:[d,oi(o,t,n,a)]})}if(r.type==="text")return i.jsxs(i.Fragment,{children:[r.text,oi(o,t,n,a)]});if(r.type==="tagOpen"&&r.selfClosing){const s=n[r.name];if(!s)throw new Error(`Component not found: ${r.name}`);return i.jsxs(i.Fragment,{children:[i.jsx(s,{}),oi(o,t,n,a)]})}if(r.type==="tagOpen"&&!r.selfClosing){const s=o.findIndex(p=>p.type==="tagClose"),d=o[s];if(d&&r.name!==d.name)throw new Error("Nested tags is not allowed");const c=n[r.name];if(!c&&bE.test(r.name))throw new Error(`Component not defined: ${r.name}`);if(!c&&!yE.includes(r.name))throw new Error(`HTML tag "${r.name}" is not allowed`);const u=o.slice(0,s),m=o.slice(s+1);return c?i.jsxs(i.Fragment,{children:[i.jsx(c,{children:oi(u,t,n,a)}),oi(m,t,n,a)]}):i.jsxs(i.Fragment,{children:[l.createElement(r.name,{},oi(u,t,n,a)),oi(m,t,n,a)]})}return null}function vE(e,t,n){let a=e;for(const r of t)if(r==="list")if(Array.isArray(e))a=n.list(e);else throw new Error("List formatter used on non-array value");return`${a}`}const qe={apiVersion:"2024-05-28"};function xE(e,t){return e<1e3?t(e,"byte"):e<1e3*1e3?t(e/1e3,"kilobyte"):e<1e3*1e3*1e3?t(e/(1e3*1e3),"megabyte"):e<1e3*1e3*1e3*1e3?t(e/(1e3*1e3*1e3),"gigabyte"):t(e/(1e3*1e3*1e3*1e3),"terabyte")}function CE({client:e}){const t=e.withConfig(qe),n=new P0(async o=>{const s=(await t.request({uri:`/users/me/keyvalue/${o.join(",")}`,withCredentials:!0}).catch(d=>(console.error("Error fetching data:",d),Array(o.length).fill(null)))).reduce((d,c)=>(c!=null&&c.key&&(d[c.key]=c.value),d),{});return o.map(d=>s[d]||null)}),a=o=>Ot(n.loadMany(o)),r=o=>Ot(t.request({method:"PUT",uri:"/users/me/keyvalue",body:o,withCredentials:!0})).pipe(K(s=>s.map(d=>(n.clear(d.key),n.prime(d.key,d.value),d.value))),ut(s=>(console.error("Error setting data:",s),re(Array(o.length).fill(null)))));return{getKey:o=>a([o]).pipe(K(s=>s[0])),setKey:(o,s)=>r([{key:o,value:s}]).pipe(K(d=>d[0])),getKeys:a,setKeys:r}}function wE({client:e}){const t=CE({client:e}),n=new sn,a=n.pipe(Ee(r=>t.setKey(r.key,r.value).pipe(K(o=>({key:r.key,value:o})))),an(1));return{getKey:r=>at(t.getKey(r),a.pipe(Ue(o=>o.key===r),K(o=>o.value))),setKey:(r,o)=>(n.next({key:r,value:o}),a.pipe(Ue(s=>s.key===r),K(s=>s.value),hi(1)))}}var TE=Object.defineProperty,jE=(e,t,n)=>t in e?TE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kE=(e,t,n)=>jE(e,t+"",n);class Fv extends Error{constructor({projectId:t}){super("CorsOriginError"),kE(this,"projectId"),this.name="CorsOriginError",this.projectId=t}}const wm={};function Rv(e,t){qo?localStorage[e]=t:wm[e]=t}function AE(e){return qo?localStorage[e]:wm[e]}function Dv(e){qo?localStorage.removeItem(e):delete wm[e]}function SE(e){const t=typeof window>"u"?re():Sa(window,"storage"),n=`__studio_local_storage_messaging_${e}`,a=new sn,r=at(a,t.pipe(Ue(s=>s.key===n),K(s=>s.newValue),Ue(Ft),K(s=>JSON.parse(s)))).pipe(an(1));function o(s){try{Rv(n,JSON.stringify(s)),Dv(n),a.next(s)}catch{}}return{messages:r,broadcast:o}}const _E=k.svg(({theme:e})=>{const{fg:t}=e.sanity.color.base;return ae`
    fill: ${t};
  `}),EE=k.img`
  height: 19px;
  width: 19px;
  object-fit: contain;
`,IE=()=>i.jsx(_E,{width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 438.55 438.55",children:i.jsx("path",{d:"M409.13 114.57a218.32 218.32 0 0 0-79.8-79.8Q278.94 5.36 219.27 5.36T109.21 34.77a218.29 218.29 0 0 0-79.8 79.8Q0 165 0 224.63q0 71.67 41.83 128.91t108.06 79.23q7.71 1.43 11.42-2a11.17 11.17 0 0 0 3.69-8.57q0-.86-.14-15.42t-.14-25.41l-6.57 1.14a83.77 83.77 0 0 1-15.85 1 120.73 120.73 0 0 1-19.84-2 44.34 44.34 0 0 1-19.11-8.51 36.23 36.23 0 0 1-12.56-17.6l-2.86-6.57a71.34 71.34 0 0 0-9-14.56q-6.14-8-12.42-10.85l-2-1.43a21 21 0 0 1-3.71-3.43 15.66 15.66 0 0 1-2.57-4q-.86-2 1.43-3.29C61.2 310.42 64 310 68 310l5.71.85q5.71 1.14 14.13 6.85a46.08 46.08 0 0 1 13.85 14.84q6.57 11.71 15.85 17.85t18.7 6.14a81.19 81.19 0 0 0 16.27-1.42 56.78 56.78 0 0 0 12.85-4.29q2.57-19.14 14-29.41a195.49 195.49 0 0 1-29.36-5.13 116.52 116.52 0 0 1-26.83-11.14 76.86 76.86 0 0 1-23-19.13q-9.14-11.42-15-30t-5.8-42.81q0-34.55 22.56-58.82-10.57-26 2-58.24 8.28-2.57 24.55 3.85t23.84 11q7.57 4.56 12.13 7.71a206.2 206.2 0 0 1 109.64 0l10.85-6.85a153.65 153.65 0 0 1 26.26-12.56q15.13-5.71 23.13-3.14 12.84 32.26 2.28 58.24 22.55 24.27 22.56 58.82 0 24.27-5.85 43t-15.12 30a79.82 79.82 0 0 1-23.13 19 116.74 116.74 0 0 1-26.84 11.14 195.29 195.29 0 0 1-29.23 5.07q14.8 12.84 14.81 40.58v60.2a11.37 11.37 0 0 0 3.57 8.56q3.57 3.42 11.28 2 66.24-22 108.07-79.23t41.83-128.91q-.03-59.62-29.43-110.05z"})}),ME=()=>i.jsxs("svg",{width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[i.jsx("path",{d:"M11 24a13 13 0 0 1 .66-4.08l-7.4-5.66a22.18 22.18 0 0 0 0 19.49l7.4-5.67A13 13 0 0 1 11 24z",fill:"#fbbc05"}),i.jsx("path",{d:"M24 11a12.72 12.72 0 0 1 8.1 2.9l6.4-6.4a22 22 0 0 0-34.24 6.75l7.4 5.66A13 13 0 0 1 24 11z",fill:"#ea4335"}),i.jsx("path",{d:"M24 37a13 13 0 0 1-12.34-8.92l-7.4 5.66A21.93 21.93 0 0 0 24 46a21 21 0 0 0 14.33-5.48l-7-5.44A13.59 13.59 0 0 1 24 37zm-12.35-8.93l-7.4 5.67 7.4-5.66z",fill:"#34a853"}),i.jsx("path",{d:"M44.5 20H24v8.5h11.8a9.91 9.91 0 0 1-4.49 6.58l7 5.44C42.37 36.76 45 31.17 45 24a18.25 18.25 0 0 0-.5-4z",fill:"#4285f4"})]});function PE(e){const{provider:t}=e;return t.logo?i.jsx(EE,{src:t.logo,alt:`Logo for ${t.name}`}):void 0}const NE={google:ME,github:IE};async function OE({client:e,mode:t,providers:n=[]}){if(t==="replace"&&Array.isArray(n))return n;const{providers:a}=await e.request({uri:"/auth/providers"});return typeof n=="function"?n(a):n.length===0?a:t==="replace"?n:a.filter(r=>n.some(o=>o.url!==r.url)).concat(n)}function jh({loginMethod:e="dual",projectId:t,url:n,redirectPath:a}){const r=new URLSearchParams;return r.set("origin",`${window.location.origin}${a}`),r.set("projectId",t),e==="token"?r.set("withSid","true"):r.set("type",e),`${n}?${r}`}function FE({getClient:e,loginMethod:t,redirectOnSingle:n,...a}){const r=Ul(e);function o({projectId:s,...d}){const c=d.redirectPath||d.basePath||"/",[u,m]=l.useState(null),[p,h]=l.useState(null);if(p)throw p;const[f]=r();l.useEffect(()=>{f&&OE({client:f,...a}).then(m).catch(h)},[f]);const g=n&&(u==null?void 0:u.length)===1&&(u==null?void 0:u[0])&&jh({loginMethod:t,projectId:s,url:u[0].url,redirectPath:c}),b=!u||g;return l.useEffect(()=>{g&&(window.location.href=g)},[g]),b?i.jsx(It,{showText:!0}):i.jsxs(B,{space:4,children:[i.jsx(An,{align:"center",size:1,children:"Choose login provider"}),i.jsx(B,{space:2,children:u.map((v,y)=>i.jsx(Z,{as:"a",icon:NE[v.name]||i.jsx(PE,{provider:v}),href:jh({loginMethod:t,projectId:s,url:v.url,redirectPath:c}),mode:"ghost",size:"large",text:v.title},`${v.url}_${y}`))})]})}return o}const kh=/sid=([^&]{20,})&?/;function RE(){if(typeof window>"u"||typeof window.location!="object")return null;const e=window.location.hash,[,t]=e.match(kh)||[];if(!t)return null;const n=e.replace(kh,""),a=new URL(window.location.href);return a.hash=n.length>1?n:"",history.replaceState(null,"",a),t}let Ah=RE();const DE=()=>{const e=Ah;return e&&(Ah=null),e};function $E(e){return Ke(e)&&"state"in e&&Ke(e.state)&&"subscribe"in e.state&&typeof e.state.subscribe=="function"}function LE(e){return["dual","token"].includes(e)}const Tm=e=>{if(!e)throw new Error("Invalid project id");return`__studio_auth_token_${e}`},Kc=e=>{try{const t=AE(Tm(e));if(t){const{token:n}=JSON.parse(t);if(n&&typeof n=="string")return n}}catch(t){console.error(t)}return null},$v=e=>{try{Dv(Tm(e))}catch(t){console.error(t)}},BE=({token:e,projectId:t})=>{try{Rv(Tm(t),JSON.stringify({token:e,time:new Date().toISOString()}))}catch(n){console.error(n)}},Sh=async(e,t)=>{var n;try{const a=await e.request({uri:"/users/me",withCredentials:!0,tag:"users.get-current"});return typeof(a==null?void 0:a.id)=="string"?a:null}catch(a){if(a.statusCode===401)return $v(e.config().projectId||""),t(null),null;if(await e.request({uri:"/ping",withCredentials:!1,tag:"cors-check"}).then(()=>!0,()=>!1))throw new Fv({projectId:(n=e.config())==null?void 0:n.projectId});if(a.isNetworkError&&!a.message&&a.request&&a.request.url){const r=new URL(a.request.url).host;throw new Error(`Unknown network error attempting to reach ${r}`)}throw a}};function VE({clientFactory:e,projectId:t,dataset:n,apiHost:a,loginMethod:r="dual",...o}){const{broadcast:s,messages:d}=SE(`dual_mode_auth_${t}`),c=e??_0,u=d.pipe(Lt(LE(r)?Kc(t):null)),m={};a&&(m.apiHost=a);const p=u.pipe(K(v=>c({projectId:t,dataset:n,apiVersion:"2021-06-07",useCdn:!1,...v&&{token:v},withCredentials:!0,requestTagPrefix:"sanity.studio",ignoreBrowserTokenWarning:!0,allowReconfigure:!1,...m})),Ee(v=>tn(async()=>{const y=await Sh(v,s);return{currentUser:y,client:v,authenticated:!!y}})),yt((v,y)=>tt(v.currentUser,y.currentUser)),an(1));async function h(){const v=DE();if(!v){s(r==="cookie"?null:Kc(t));return}const y=c({projectId:t,dataset:n,useCdn:!0,withCredentials:!0,apiVersion:"2021-06-07",requestTagPrefix:"sanity.studio",...m});let x;if((r==="dual"||r==="cookie")&&(x=await Sh(y,s)),x||r==="cookie"){s(null);return}const w=await f(y,v);s(w??null)}async function f(v,y){const{token:x}=await v.request({method:"GET",uri:"/auth/fetch",query:{sid:y},tag:"auth.fetch-token"});return BE({token:x,projectId:t}),x}async function g(){var v;const y=c({projectId:t,dataset:n,useCdn:!0,withCredentials:!0,token:(v=Kc(t))!=null?v:void 0,apiVersion:"2021-06-07",requestTagPrefix:"sanity.studio",...m});$v(t),await y.request({uri:"/auth/logout",method:"POST"}),s(null)}const b=FE({...o,getClient:()=>p.pipe(K(v=>v.client)),loginMethod:r});return{handleCallbackUrl:h,token:u,state:p,LoginComponent:b,logout:g}}function Lv(e){return typeof e!="object"||e===null?`${e}`:JSON.stringify(Object.fromEntries(Object.entries(e).sort(([t],[n])=>t.localeCompare(n,"en")).map(([t,n])=>[t,Lv(n)])))}const UE=vl(VE,Lv);function zE(e){return t=>{let n=[];const a=ut((r,o)=>(n.push(r),e(r,n.length,o).pipe(a)));return t.pipe(bt(()=>{n=[]}),a)}}const _h=typeof window>"u"?re({}):Sa(window,"online"),HE=typeof window>"u"?re({}):Sa(window,"offline"),KE=e=>Math.pow(2,e)*100,WE={type:"connecting"},Bv=dj(),GE=Bv[0];Bv[1];const qE=({error:e,isOffline:t,attemptNo:n,retryAt:a})=>({type:"error",error:e,attemptNo:n,isOffline:t,retryAt:a});function YE({bifur:e}){return{connectionStatus$:at(e.heartbeats,HE.pipe(Cr(Dl(new Error("The browser went offline"))))).pipe(K(t=>({type:"connected",lastHeartbeat:t})),zE((t,n,a)=>{const r=Math.min(24e4,KE(n)),o=new Date(new Date().getTime()+r),s=mn(o),d=!navigator.onLine,c=qE({error:t,retryAt:o,isOffline:d,attemptNo:n}),u=lm.pipe(nv(d?_h:at(s,_h,GE)));return zt(re(c),u.pipe(hi(1)),a)}),Lt(WE))}}function Hl(e){return e.type?Hl(e.type):e.name==="block"}function XE(e){return e.kind==="field"&&e.field.schemaType.jsonType==="array"}const JE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ZE=/_key\s*==\s*['"](.*)['"]/;function Nn(e){if(!Array.isArray(e))throw new Error("Path is not an array");return e.reduce((t,n,a)=>{if(Ri(n))return`${t}[${n}]`;if(jn(n)&&n._key)return`${t}[_key=="${n._key}"]`;if(Zu(n)){const[r,o]=n;return`${t}[${r}:${o}]`}if(typeof n=="string")return`${t}${a===0?"":"."}${n}`;throw new Error(`Unsupported path segment \`${JSON.stringify(n)}\``)},"")}function ja(e,t){const n=t[0];if(!n)return e;const a=t.slice(1);if(Ri(n))return ja(Array.isArray(e)?e[n]:void 0,a);if(jn(n))return ja(Array.isArray(e)?e.find(r=>r._key===n._key):void 0,a);if(typeof n=="string")return ja(Ke(e)?e[n]:void 0,a);throw new Error(`Unknown segment type ${JSON.stringify(n)}`)}function QE(e){const t=e.match(JE);if(!t)throw new Error("Invalid path string");return t.map(eI)}function eI(e){return Ri(e)?tI(e):jn(e)?nI(e):Zu(e)?aI(e):e}function tI(e){return Number(e.replace(/[^\d]/g,""))}function nI(e){const t=e.match(ZE);if(!t)throw new Error("Invalid key segment");return{_key:t[1]}}function aI(e){const[t,n]=e.split(":").map(a=>a===""?a:Number(a));return[t,n]}function iI(e,t){return e.get((t==null?void 0:t.author)||null)}function Vv(e,t){const n=Array.isArray(t)?t:QE(t);return rI(e,n)}function rI(e,t){const n=Wd(e,t);if(n&&n.action!=="unchanged")return n.annotation||void 0}function Wd(e,t,n=[]){if(t.length===0)return e;const a=t[0],r=t.slice(1);if(Zu(a))throw new Error("Index tuples are not supported in diff paths");if(Ri(a)||jn(a)){const s=Ri(a)?`at index ${a}`:`with key ${a._key}`;if(e.type!=="array"){`${s}${Nn(n)}`;return}const d=e.items.find(Ri(a)?c=>c.toIndex===a:c=>oI(c,a));if(!d){`${s}${Nn(n)}`;return}return Wd(d.diff,r,n.concat(a))}if(e.type!=="object"){`${a}${Nn(n)}`;return}const o=e.fields[a];if(typeof o>"u"){`${a}${Nn(n)}`;return}return Wd(o,r,n.concat(a))}function oI(e,t){const n=e.diff;return n.type!=="object"||!n.toValue?!1:n.toValue._key===t}function Uv(){const e=l.useContext(Ik);if(!e)throw new Error("UserColorManager: missing context value");return e}function zv(e){const t=Uv(),n=l.useMemo(()=>e?t.listen(e):$t,[t,e]);return Ut(n,t.get(null))}function Hv(e){const t=Uv();return iI(t,e)}function sI(e){if(!("diff"in e))return i.jsx(Eh,{...e});const{diff:t,path:n=[],...a}=e,r=Vv(t,n);return i.jsx(Eh,{...a,annotations:r?[r]:[]})}function Eh(e){const{annotations:t,children:n,description:a,...r}=e,{t:o}=L();if(!t)return n;const s=i.jsxs(B,{space:2,children:[i.jsx(E,{muted:!0,size:1,weight:"medium",children:a||o("changes.changed-label")}),i.jsx(B,{space:2,children:t.map((d,c)=>i.jsx(lI,{annotation:d},c))})]});return i.jsx(yne,{zOffset:"paneFooter",children:i.jsx(Ie,{content:s,portal:!0,...r,children:n})})}function lI({annotation:e}){const{author:t,timestamp:n}=e,[a]=Oa(t),r=Hv(e),o=$r(n,{minimal:!0}),{t:s}=L();return i.jsxs(et,{space:2,children:[i.jsxs(P,{align:"center",paddingRight:3,style:{backgroundColor:r.background,color:r.text,borderRadius:"calc(23px / 2)"},children:[i.jsx(Xa,{user:t}),i.jsx(et,{paddingLeft:2,children:i.jsx(E,{muted:!0,size:1,style:{color:r.text},children:a?a.displayName:s("changes.loading-author")})})]}),i.jsx(E,{as:"time",muted:!0,size:1,dateTime:n,children:o})]})}const cI=k(U)`
  --diff-card-radius: ${({theme:e})=>Te(e.sanity.radius[2])};
  --diff-card-bg-color: ${({theme:e})=>e.sanity.color.card.enabled.bg};

  max-width: 100%;
  position: relative;
  border-radius: var(--diff-card-radius);

  &:not(del) {
    text-decoration: none;
  }

  &[data-hover] {
    &::after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
    }

    &:hover {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;

      &::after {
        bottom: -3px;
        border-top: 1px solid var(---diff-card-bg-color);
        border-bottom: 2px solid currentColor;
        border-bottom-left-radius: var(--diff-card-radius);
        border-bottom-right-radius: var(--diff-card-radius);
      }
    }

    [data-from-to-layout]:hover & {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;

      &::after {
        bottom: -3px;
        border-top: 1px solid var(---diff-card-bg-color);
        border-bottom: 2px solid currentColor;
        border-bottom-left-radius: var(--diff-card-radius);
        border-bottom-right-radius: var(--diff-card-radius);
      }
    }
  }
`,dI=[];l.forwardRef(function(e,t){const{annotation:n,as:a="div",children:r,className:o,diff:s,disableHoverEffect:d,path:c=dI,style:u={},tooltip:m,...p}=e,h=l.useMemo(()=>n||Vv(s,c),[n,s,c]),f=Hv(h),g=i.jsx(cI,{...p,as:a,className:o,"data-hover":d||!h?void 0:"",ref:t,radius:1,style:{...u,backgroundColor:f.background,color:f.text},children:r});return m&&h?i.jsx(sI,{annotations:[h],description:m&&typeof m=="object"&&m.description,children:g}):g});k.div`
  border-radius: ${({theme:e})=>Te(e.sanity.radius[2])};
  padding: ${({theme:e})=>Te(e.sanity.space[1])};
`;k(E)`
  &:not([hidden]) {
    color: inherit;
  }
`;const Kl=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],Wl=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];Wl.map(e=>e[0]).concat(Kl.map(e=>e[0]));Wl.map(e=>e[1]).concat(Kl.map(e=>e[1]));function fn(e){const t=typeof e;if(t==="object"){if(e===null)return"null";if(Array.isArray(e))return"array";if(e instanceof Object&&e.constructor.name!=="Object")return e.constructor.name}return t}k.div`
  display: inline-block;
  word-wrap: break-word;
`;k.div`
  ${({theme:e})=>`
    --size-diff-positive: ${e.sanity.color.solid.positive.enabled.bg};
    --size-diff-negative: ${e.sanity.color.solid.critical.enabled.bg};
  `}
  &:not([hidden]) {
    display: inline-block;
  }

  [data-number='positive'] {
    color: var(--size-diff-positive);
  }

  [data-number='negative'] {
    color: var(--size-diff-negative);
  }
`;k.div`
  height: 100%;
  max-height: 190px;
  position: relative;

  /* Ideally the checkerboard component currently in the form builder should be made available and used here */
  background-color: ${Ge.gray[100].hex};
  background-image: linear-gradient(45deg, ${Ge.gray[50].hex} 25%, transparent 25%),
    linear-gradient(-45deg, ${Ge.gray[50].hex} 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, ${Ge.gray[50].hex} 75%),
    linear-gradient(-45deg, transparent 75%, ${Ge.gray[50].hex} 75%);
  background-size: 16px 16px;
  background-position:
    0 0,
    0 8px,
    8px -8px,
    -8px 0;

  &::after {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    box-shadow: inset 0 0 0 1px var(--card-border-color);
    pointer-events: none;
  }

  &[data-changed] {
    opacity: 0.45;
  }
`;k.img`
  display: block;
  flex: 1;
  min-height: 0;
  object-fit: contain;
  width: 100%;
  height: 100%;

  &[data-action='removed'] {
    opacity: 0.45;
  }
`;k.div`
  svg {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
`;k.div`
  display: inline-block;
  word-break: break-all;
`;const Kv=k(I)`
  &:not([hidden]) {
    display: inline;
    align-items: center;

    &[data-changed] {
      cursor: pointer;
    }
  }
`;k(E)`
  &:not([hidden]) {
    display: inline;
    color: inherit;
  }
`;const uI=k(I)`
  &:not([hidden]) {
    display: inline-flex;
    align-items: center;

    ${Kv} [data-ui="Text"] {
      opacity: 0.5;
    }
  }
`;k(I)`
  min-width: 160px;
  max-height: 40vh;
  overflow-y: auto;
`;k.div`
  text-decoration: none;
  display: inline;
  position: relative;
  border: 0;
  padding: 0;
  border-bottom: 2px dotted currentColor;
  box-shadow: inset 0 0 0 1px var(--card-border-color);
  white-space: nowrap;
  align-items: center;
  background-color: color(var(--card-fg-color) a(10%));

  &[data-changed] {
    cursor: pointer;
  }

  &[data-removed] {
    text-decoration: line-through;
  }

  &:hover ${uI} {
    opacity: 1;
  }
`;k.blockquote`
  margin: 0;
`;k(An)`
  &:not([hidden]) {
    display: inline;
    text-transform: none;
    margin: 0;

    &::before,
    &::after {
      content: unset;
    }
  }
`;k.div`
  text-transform: none;
  white-space: wrap;
  overflow-wrap: break-word;
  margin: 0;
`;k.span`
  display: inline;
  ${({theme:e,decoration:t})=>{switch(t){case"strong":return"font-weight: bold;";case"em":return"font-style: italic;";case"underline":return"text-decoration: underline;";case"overline":return"text-decoration: overline;";case"strike-through":return"text-decoration: line-through;";case"code":return`
          font-family: ${e.sanity.fonts.code.family};
          background: ${e.sanity.color.muted.default.enabled.bg};
        `;default:return""}}}
`;k(U)`
  &:not([hidden]) {
    display: inline;
    cursor: pointer;
    white-space: nowrap;
    align-items: center;

    &[data-removed] {
      text-decoration: line-through;
    }

    ${Kv} {
      display: inline-flex;
    }
  }
`;Wl.map(e=>e[0]);Wl.map(e=>e[1]);Kl.map(e=>e[0]);Kl.map(e=>e[1]);k.div`
  word-wrap: break-word;
`;k.div`
  display: inline-block;
  word-break: break-all;
  white-space: pre-wrap;
`;k.div`
  white-space: pre-wrap;
  word-wrap: break-word;
`;k.div`
  display: grid;
  grid-template-columns: minmax(0, 1fr);
`;const Ya=!1,mI={down:rA,right:oA};function pI(e){const{direction:t="right",...n}=e,a=mI[t];return i.jsx(E,{muted:!0,size:1,...n,children:l.createElement(a)})}k.pre`
  overflow-x: auto;
  position: relative;
`;k.div`
  position: absolute;
  top: 0;
  right: 0;
`;const hI={flexShrink:0},fI={alignItems:"stretch"},Ih={top:"flex-start",center:"center",bottom:"flex-end",default:"flex-start"};l.forwardRef(function(e,t){const{align:n="top",layout:a="inline",from:r,to:o,style:s,...d}=e,c=Lr(),u=a==="inline"?P:Ze,m=l.useMemo(()=>({...s,...a==="inline"?{maxWidth:"100%",display:"inline-flex"}:{gridTemplateColumns:`minmax(0, 1fr) ${Te(c.sanity.space[5])} minmax(0, 1fr)`}}),[a,s,c]),p=a==="inline"?hI:fI;return i.jsxs(u,{...d,ref:t,style:m,"data-from-to-layout":!0,children:[r&&i.jsxs(i.Fragment,{children:[i.jsx(P,{align:Ih[n],style:p,children:r}),i.jsx(P,{align:"center",justify:"center",padding:2,children:i.jsx(pI,{})})]}),i.jsx(P,{align:Ih[n],style:p,children:o})]})});k.div`
  --field-change-error: ${({theme:e})=>e.sanity.color.solid.critical.enabled.bg};
  &[data-revert-all-changes-hover] [data-revert-all-hover]::before {
    border-left: 2px solid var(--field-change-error);
  }
`;k.div`
  --field-change-error: ${({theme:e})=>e.sanity.color.solid.critical.enabled.bg};
  --diff-inspect-padding-xsmall: ${({theme:e})=>Te(e.sanity.space[1])};
  --diff-inspect-padding-small: ${({theme:e})=>Te(e.sanity.space[2])};

  position: relative;
  padding: var(--diff-inspect-padding-xsmall) 0 var(--diff-inspect-padding-xsmall)
    var(--diff-inspect-padding-small);

  &::before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    border-left: 1px solid var(--card-border-color);
  }

  &[data-error]:hover::before,
  &[data-revert-field-hover]:hover::before {
    border-left: 2px solid var(--field-change-error);
  }
`;const gI=k(Z)`
  [data-ui='Text'] {
    font-weight: normal;
  }

  div[data-ui='Box'] {
    display: none;
  }

  &:not([data-disabled='true']):hover,
  &:not([data-disabled='true']):focus {
    --card-fg-color: ${({theme:e})=>e.sanity.color.solid.critical.enabled.bg};
    --card-bg-color: transparent;
    --card-border-color: transparent;

    div[data-ui='Box'] {
      display: block;
    }
  }
`;l.forwardRef(function(e,t){const{selected:n,changeCount:a,...r}=e,{t:o}=L();return i.jsx(gI,{icon:uj,selected:n,text:o("changes.action.revert-changes-confirm-change",{count:a}),mode:"bleed",ref:t,tooltipProps:null,...r})});k.div`
  display: grid;
  grid-template-columns: minmax(0, 1fr);
`;k.div`
  --field-change-error: ${({theme:e})=>e.sanity.color.solid.critical.enabled.bg};
  --diff-inspect-padding-xsmall: ${({theme:e})=>Te(e.sanity.space[1])};
  --diff-inspect-padding-small: ${({theme:e})=>Te(e.sanity.space[2])};

  position: relative;
  padding: var(--diff-inspect-padding-xsmall) var(--diff-inspect-padding-small);

  &::before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    border-left: 1px solid var(--card-border-color);
  }

  &[data-error]:hover::before,
  &[data-revert-group-hover]:hover::before,
  &[data-revert-all-groups-hover]::before {
    border-left: 2px solid var(--field-change-error);
  }
`;k.span`
  border-radius: ${({theme:e})=>Te(e.sanity.radius[1])};
`;k(E)`
  &:not([hidden]) {
    display: inline;
    line-height: calc(1.25em + 2px);
  }

  &:hover {
    background-color: none !important;
    background-image: linear-gradient(
      to bottom,
      var(--card-bg-color) 0,
      var(--card-bg-color) 33.333%,
      currentColor 33.333%,
      currentColor 100%
    );
    background-size: 1px 3px;
    background-repeat: repeat-x;
    background-position-y: bottom;
    padding-bottom: 3px;
    box-shadow: 0 0 0 1px var(--card-bg-color);
    z-index: 1;
  }
`;k(E)`
  color: inherit;
`;k.div`
  display: inline-block;
  word-break: break-all;
  white-space: pre-wrap;
`;const bI=["_key","_type","_weak"];function jm(e){return Object.keys(e).every(t=>bI.includes(t))}function Gl(e,t){return Gd(e,t,new WeakMap)}function Gd(e,t,n){if(e===t)return e;if(n.has(t))return n.get(t);if(e==null||t==null||typeof e!=typeof t)return t;if(Array.isArray(t)){let a=e.length===t.length;const r=[];n.set(t,r);for(let o=0;o<t.length;o++){const s=Gd(e[o],t[o],n);s!==e[o]&&(a=!1),r[o]=s}return n.set(t,a?e:r),a?e:r}if(typeof t=="object"){const a=Object.keys(t);let r=Object.keys(e).length===a.length;const o={};n.set(t,o);for(const s of a){const d=Gd(e[s],t[s],n);d!==e[s]&&(r=!1),o[s]=d}return n.set(t,r?e:o),r?e:o}return t}function yI(e){return i.jsx(yv.Provider,{value:e.presence,children:e.children})}function Wv(){const e=l.useContext(yv);if(!e)throw new Error("Form context not provided");return e}function Wr(e,t){const n=Wv(),a=l.useRef(n),r=Gl(a.current,n.filter(o=>Jt(e,o.path)&&t));return a.current=r,r}function Na(){const e=l.useContext(E0);if(!e)throw new Error("FormBuilder: missing context value");return e}const vI=e=>e==="error"?i.jsx(Aa,{}):e==="warning"?i.jsx(Wt,{}):i.jsx(Uo,{}),xI=k(E)(({theme:e})=>ae`
    &[data-info] {
      color: ${e.sanity.color.muted.primary.enabled.fg};
    }

    &[data-warning] {
      color: ${e.sanity.color.muted.caution.enabled.fg};
    }

    &[data-error] {
      color: ${e.sanity.color.muted.critical.enabled.fg};
    }
  `);function Gv(e){const{markers:t,validation:n,renderCustomMarkers:a}=e,{CustomMarkers:r}=Na().__internal.components;return t.length===0&&n.length===0?null:i.jsxs(B,{space:1,children:[n.length>0&&n.map(({message:o,level:s},d)=>i.jsxs(P,{children:[i.jsx(I,{marginRight:2,marginBottom:d+1===n.length?0:2,children:i.jsx(xI,{size:1,"data-error":s==="error"?"":void 0,"data-warning":s==="warning"?"":void 0,"data-info":s==="info"?"":void 0,children:vI(s)})}),i.jsx(I,{children:i.jsx(E,{size:1,children:o||"Error"})})]},`validationItem-${d}`)),t.length>0&&i.jsxs(I,{marginTop:n.length>0?3:0,children:[a&&a(t),!a&&i.jsx(r,{markers:t})]})]})}function CI(e){return i.jsx(vv.Provider,{value:e.validation,children:e.children})}function wI(){const e=l.useContext(vv);if(!e)throw new Error("Form context not provided");return e}function km(e,t=!1){const n=wI();return l.useMemo(()=>n.filter(a=>Jt(e,a.path)&&(t||!nt(e,a.path))).map(a=>({message:a.message,level:a.level,path:a.path})),[t,e,n])}const TI=["@@_NONEXISTENT_PATH_@@"];function ql(e){const t=l.useRef(null),n=e!=null&&e.validation&&e.validation.length>0?e.validation:lt,a=km((e==null?void 0:e.path)||TI),r=l.useMemo(()=>e!=null&&e.schemaType&&Hl(e==null?void 0:e.schemaType)?n:n.concat(a),[a,e,n]),[o,s,d]=l.useMemo(()=>[r.filter(u=>u.level==="error").length>0,r.filter(u=>u.level==="warning").length>0,r.filter(u=>u.level==="info").length>0],[r]),c=Gl(t.current,r);return t.current=c,l.useMemo(()=>({validation:c,hasError:o,hasWarning:s,hasInfo:d}),[c,o,s,d])}function Yl(e){const t=l.useContext(jv);if(!t)throw new Error("Form context not provided");return l.useMemo(()=>t.filter(n=>nt(n.path,e)),[t,e])}const jI={placement:"right",fallbackPlacements:["top","bottom"]};function kI(e){const{group:t}=e,{title:n}=Cm(t);return t.expanded?i.jsxs(i.Fragment,{children:[i.jsx(I,{padding:2,paddingTop:3,children:i.jsx(E,{muted:!0,size:1,weight:"medium",children:n})}),t.children.map((a,r)=>{var o;return i.jsx(qd,{action:a,isFirst:r===0,prevIsGroup:((o=t.children[r-1])==null?void 0:o.type)==="group"},r)})]}):i.jsx(Ly,{icon:t.icon,popover:jI,text:n,tone:t.tone,children:t.children.map((a,r)=>{var o;return i.jsx(qd,{action:a,isFirst:r===0,prevIsGroup:((o=t.children[r-1])==null?void 0:o.type)==="group"},r)})})}function AI(e){const{action:t}=e,{title:n}=Cm(t),a=l.useCallback(()=>{t.onAction()},[t]),r=typeof t.disabled=="object"&&i.jsx(E,{size:1,children:t.disabled.reason});return i.jsx(gne,{content:r,placement:"left",children:i.jsx(ye,{disabled:!!t.disabled,icon:t.icon,iconRight:t.iconRight||(t.selected?Gn:void 0),onClick:a,pressed:t.selected,text:n,tone:t.tone})})}function qd(e){const{action:t,isFirst:n,prevIsGroup:a}=e;return t.type==="divider"?i.jsx(en,{}):t.type==="group"?i.jsxs(i.Fragment,{children:[!n&&i.jsx(en,{}),i.jsx(kI,{group:t})]}):i.jsxs(i.Fragment,{children:[a&&i.jsx(en,{}),i.jsx(AI,{action:t})]})}const qv={placement:"top"};function Mh(e){return"renderAsButton"in e&&e.renderAsButton}const SI=l.memo(function(e){const{nodes:t,onMenuOpenChange:n}=e,[a,r]=l.useState(!1),o=l.useCallback(()=>{n(!0),r(!0)},[n]),s=l.useCallback(()=>{n(!1),r(!1)},[n]),d=l.useMemo(()=>t.filter(Mh),[t]),c=l.useMemo(()=>t.filter(p=>!Mh(p)),[t]),u=l.useMemo(()=>{const p=c.length;if(p===0||p>1)return c;const h=c[0];return h.type==="group"?[{...h,expanded:!0}]:c},[c]),m=l.useMemo(()=>[...u.length?[{type:"group",children:u,icon:$u,title:"Field actions"}]:[],...d],[d,u]);return i.jsx(i.Fragment,{children:m.map((p,h)=>i.jsx(_I,{node:p,onOpen:o,onClose:s,open:a},h))})}),_I=l.memo(function(e){const{node:t,onOpen:n,onClose:a,open:r}=e;return t.type==="divider"?i.jsx(U,{borderLeft:!0,flex:"none"}):t.type==="action"?i.jsx(Z,{icon:t.icon,mode:"bleed",onClick:t.onAction,tooltipProps:{...qv,content:t.title}}):i.jsx(II,{node:t,onOpen:n,onClose:a,open:r})}),EI={constrainSize:!0,placement:"right",portal:!0,fallbackPlacements:["top","bottom"]};function II(e){const{node:t,onOpen:n,onClose:a,open:r}=e,{title:o}=Cm(t);return i.jsx(ze,{button:i.jsx(Z,{icon:t.icon,label:r?void 0:o,mode:"bleed",tooltipProps:{...qv,content:t.title}}),id:l.useId(),menu:i.jsx(Be,{children:t.children.map((s,d)=>{var c;return i.jsx(qd,{action:s,isFirst:d===0,prevIsGroup:((c=t.children[d-1])==null?void 0:c.type)==="group"},d)})}),onOpen:n,onClose:a,popover:EI})}function Ph(){return l.useContext(xv)}function Xl(e){const{actions:t,children:n,path:a,focused:r}=e,{onMouseEnter:o,onMouseLeave:s}=Ph(),d=Ph().hoveredStack[0],c=Go||(d?Nn(a)===d:!1),u=l.useCallback(()=>{o(a)},[o,a]),m=l.useCallback(()=>{s(a)},[s,a]),p=l.useMemo(()=>({actions:t,focused:r,hovered:c,onMouseEnter:u,onMouseLeave:m}),[t,r,u,m,c]);return i.jsx(l0.Provider,{value:p,children:n})}function Yv(e){return e.filter(Boolean).filter(t=>"hidden"in t?t.hidden!==!0:!0).map(t=>t.type==="group"?{...t,children:Yv(t.children)}:t)}const Jl=l.memo(function(e){const{actions:t,documentId:n,documentType:a,onActions:r,path:o,schemaType:s}=e,d=t.length,c=l.useRef(d),[u,m]=l.useState(()=>Array.from(new Array(d))),p=l.useRef(u),h=l.useCallback((g,b)=>{m(v=>{const y=[...v];return y[g]=b,y})},[]);l.useEffect(()=>{p.current!==u&&(p.current=u,r(Yv(u)))},[u,r]),l.useEffect(()=>{if(c.current!==d){const g=Array.from(new Array(d));for(let b=0;b<d;b++)g[b]=p.current[b];c.current=d,m(g),p.current=g}},[d]);const f=l.useMemo(()=>t.map((g,b)=>MI({action:g,documentId:n,documentType:a,index:b,path:o,schemaType:s,setFieldAction:h})),[t,n,a,o,s,h]);return i.jsx(i.Fragment,{children:f.map((g,b)=>i.jsx(g,{},b))})});function MI({action:e,documentId:t,documentType:n,index:a,path:r,schemaType:o,setFieldAction:s}){const{useAction:d}=e;return l.memo(function(){const c=d({documentId:t,documentType:n,path:r,schemaType:o}),u=Wo(c);return l.useEffect(()=>{s(a,u)},[u]),null})}function Xv(){return l.useContext(l0)}function PI(e){const{children:t}=e,[n,a]=l.useState([]),r=l.useCallback(d=>{const c=Nn(d);a(u=>u.includes(c)?u:[c,...u])},[]),o=l.useCallback(d=>{const c=Nn(d);a(u=>u.includes(c)?u.filter(m=>m!==c):u)},[]),s=l.useMemo(()=>({hoveredStack:n,onMouseEnter:r,onMouseLeave:o}),[r,o,n]);return i.jsx(xv.Provider,{value:s,children:t})}const NI={portal:!0},OI=k.div(e=>{const{space:t}=Re(e.theme);return ae`
    margin: ${0-t[1]}px;
  `}),Nh=e=>{if(e.length===1)return`${e[0].user.displayName} is editing this document`;if(e.length>1)return`${e.length} people are editing this document right now`};function Jv(e){const{presence:t}=e,n=l.useMemo(()=>Array.from(new Set(t.map(r=>r.user.id))).map(r=>t.find(o=>o.user.id===r)).filter(Ft),[t]),a=l.useMemo(()=>Nh(n),[n]);return i.jsx(Ie,{content:a,...NI,children:i.jsx(OI,{children:i.jsx(D0,{maxLength:2,"aria-label":Nh(n),size:0,children:n.map(r=>i.jsx(Xa,{size:0,user:r.user},r.user.id))})})})}const FI=/[^\p{Alpha}\p{White_Space}]/gu,RI=new RegExp("\\p{White_Space}+","u"),DI={small:0,medium:1,large:2};function $I(e){const t=e.replace(FI,"").split(RI);return t.length===1?`${t[0].charAt(0)}`.toUpperCase():`${t[0].charAt(0)}${t[t.length-1].charAt(0)}`}function Xa(e){const{user:t,withTooltip:n,...a}=e;return Ke(t)?n?i.jsx(LI,{...a,user:t}):i.jsx(Zv,{...a,user:t}):i.jsx(BI,{...e,user:t})}function LI(e){const{user:{displayName:t}}=e;return i.jsx(Ie,{content:t,placement:"top",portal:!0,children:i.jsx("div",{style:{display:"inline-block"},children:i.jsx(Zv,{...e})})})}const Zv=l.forwardRef(function(e,t){const{user:n,animateArrowFrom:a,position:r,size:o,status:s,tone:d,...c}=e,[u,m]=l.useState(null),p=zv(n.id),h=u||n==null?void 0:n.imageUrl;return i.jsx(Iy,{__unstable_hideInnerStroke:!0,animateArrowFrom:a,arrowPosition:r,color:p.name,"data-legacy-tone":d,initials:(n==null?void 0:n.displayName)&&$I(n.displayName),src:h,onImageLoadError:m,ref:t,size:typeof o=="string"?DI[o]:o,status:s,title:n==null?void 0:n.displayName,...c})});function BI({user:e,...t}){const[n]=Oa(e);return n?i.jsx(Xa,{...t,user:n}):null}const VI=3,Qv=3,nl=-4,Mr=25,Oh=4,UI=[0,.25,.75,1],ys=23,zI=8,HI=8,ex=20,tx=20,Wc=!1,nx=k(P)`
  & > div:first-child {
    flex: 1;
    min-width: 0;
  }
`,KI=k(P)`
  height: ${Mr}px;
  min-width: 23px;
  vertical-align: top;
`,{Tracker:WI,useReporter:GI,useReportedValues:qI}=Av();function YI(e){const{children:t,items:n}=e,a=l.useMemo(()=>i.jsx(B,{sizing:"border",children:n.map(r=>i.jsxs(P,{align:"center",gap:2,children:[i.jsx("div",{children:i.jsx(Xa,{user:r.user,status:"online"})}),i.jsx(E,{size:1,children:r.user.displayName})]},r.user.id))}),[n]);return i.jsx(Ie,{content:a,placement:"top",portal:"documentScrollElement",children:t})}const XI=(e,t)=>{const n=e.length>t?t-1:t,a=Math.max(0,e.length-n);return[e.slice(0,a),e.slice(a)]};function JI(e){return-nl+(Mr+nl)*e}const ax=l.memo(function({presence:e,position:t="inside",animateArrowFrom:n="inside",maxAvatars:a=Qv,stack:r=!0}){const o=wo(e||[],m=>m.user.id),s=zi(o,m=>m.lastActiveAt),[d,c]=r?XI(s,a):[[],s],u=[...c.reverse().map(m=>({key:m.user.id,element:i.jsx(Xa,{animateArrowFrom:n,position:t,status:"online",user:m.user})})),d.length>=2?{key:"counter",element:i.jsx(mj,{count:d.length})}:null].filter(Boolean);return i.jsxs(nx,{children:[i.jsx("div",{}),i.jsx(KI,{direction:"row-reverse",children:u.map((m,p)=>m&&i.jsx("div",{style:{position:"absolute",transform:`translate3d(${-p*(Mr+nl)}px, 0px, 0px)`,transitionProperty:"transform",transitionDuration:"200ms",transitionTimingFunction:"cubic-bezier(0.85, 0, 0.15, 1)",zIndex:100-p},children:m.element},m.key))})]})});function ZI(e){const t=l.useContext(Mk),{presence:n=t,maxAvatars:a=Qv}=e,r=l.useRef(null);GI(l.useId(),()=>({presence:n,element:r.current,maxAvatars:a}));const o=l.useMemo(()=>wo(n||[],s=>s.user.id),[n]);return i.jsx(YI,{items:o,children:i.jsx(nx,{ref:r,style:{minHeight:Mr,minWidth:Mr}})})}const Yo=ZI,QI=e=>{const t=new sn,n=new IntersectionObserver(a=>{a.forEach(r=>{t.next(r)})},e);return{observe:a=>new Dn(r=>{const o=t.pipe(Ue(s=>s.target===a)).subscribe(r);return n.observe(a),()=>{o.unsubscribe(),n.unobserve(a)}})}},Am=e=>{const{onIntersection:t,io:n,id:a,...r}=e,o=l.useRef(null);return l.useEffect(()=>{const s=o.current;if(!s)return;const d=n.observe(s).pipe(bt(c=>t(a,c))).subscribe();return()=>d.unsubscribe()},[n,a,t]),i.jsx("div",{ref:o,...r})},eM=k.div`
  position: relative;
`,tM=k.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 13;
`,Sm=ae`
  overflow: hidden;
  overflow: clip;
  pointer-events: none;
  position: absolute;
`,nM=k(Am)(({$debug:e,margins:t})=>ae`
    ${Sm}

    z-index: 100;
    position: sticky;
    height: 1px;
    top: ${t?`${t[0]-1}px`:void 0};
    background-color: ${e?"red":"none"};
  `),aM=k(Am)(({$debug:e})=>ae`
    ${Sm}

    visibility: none;

    ${e&&ae`
      background: rgba(255, 0, 0, 0.25);
      outline: 1px solid #00b;
      visibility: visible;
    `}
  `),iM=k(Am)(({$debug:e})=>ae`
    ${Sm}

    position: sticky;
    bottom: -1px;
    height: 1px;
    background-color: ${e?"blue":"transparent"};
  `),rM=e=>`${e}px`,oM=e=>0-e,sM=l.forwardRef(function(e,t){const{regions:n,render:a,children:r,margins:[o,s,d,c]}=e,u=l.useRef(null),m=l.useMemo(()=>[o,s,d,c],[o,s,d,c]),p=l.useMemo(()=>QI({rootMargin:m.map(oM).map(rM).join(" "),threshold:UI}),[m]),[h,f]=l.useState({}),g=l.useCallback((x,w)=>{f(C=>({...C,[x]:w}))},[]),b=h["::top"],v=h["::bottom"],y=l.useMemo(()=>b&&v?n.filter(x=>{var w;return((w=x.presence)==null?void 0:w.length)>0}).map(x=>{const w=h[x.id];if(!w)return null;const{bottom:C,top:T}=w.boundingClientRect,j=w.boundingClientRect.top<b.boundingClientRect.bottom,A=w.boundingClientRect.top<v.boundingClientRect.top,M=w.isIntersecting?T-(w.intersectionRect.top-ys):j?-b.boundingClientRect.bottom:v.boundingClientRect.top,S=w.isIntersecting?-(C-(w.intersectionRect.bottom+ys)):A?v.boundingClientRect.top:-b.boundingClientRect.bottom,N=M<=zI?"top":S<=HI?"bottom":"inside";return{distanceTop:M,distanceBottom:S,region:x,position:N}}).filter(Boolean):[],[v,h,n,b]);return i.jsxs(eM,{ref:t,children:[i.jsx(nM,{$debug:Wc,io:p,id:"::top",onIntersection:g,margins:m}),i.jsx("div",{children:r}),i.jsx(tM,{ref:u,children:u.current&&a(y,u.current.offsetWidth)}),n.map(x=>{const w=x.rect.width===0;return i.jsx(aM,{$debug:Wc,io:p,onIntersection:g,id:x.id,style:{width:w?1:x.rect.width,left:x.rect.left-(w?1:0),top:x.rect.top-ys,height:x.rect.height+ys*2}},x.id)}),i.jsx(iM,{$debug:Wc,id:"::bottom",io:p,onIntersection:g})]})}),ix={transitionProperty:"transform",transitionDuration:"200ms",transitionTimingFunction:"cubic-bezier(0.85, 0, 0.15, 1)"},lM=e=>e.top+e.height;function cM(e){return e.map((t,n,a)=>{var r;const o=(r=a[n-1])==null?void 0:r.region.rect,s=o?lM(o):0;return{...t,spacerHeight:t.region.rect.top-s}})}const vs=e=>Ku(e,t=>t.region.rect.top),dM=(e,t)=>e+t,Fh=e=>e.reduce(dM,0);function uM(e){const t=cM(vs(e)),n={top:[],inside:[],bottom:[],...om(t,a=>a.position)};return{top:vs(n.top).map((a,r,o)=>({...a,indent:o.slice(r+1).reduce((s,d)=>s+d.region.rect.width,0)})),inside:vs(n.inside).map(a=>({...a,indent:0})),bottom:vs(n.bottom).map((a,r,o)=>({...a,indent:o.slice(0,r).reduce((s,d)=>s+d.region.rect.width,0)}))}}const Rh=({height:e,...t})=>i.jsx("div",{style:{height:Math.max(0,e),...t==null?void 0:t.style}}),mM=[0,0,0,0],pM=(e,t)=>{let n=e,a=-n.scrollTop,r=0;for(;n&&n!==t;)a+=n.offsetTop-n.scrollTop,r+=n.offsetLeft,n=n.offsetParent instanceof HTMLElement?n.offsetParent:null;return{top:a,left:r}};function hM(e,t){return{...pM(e,t),width:e.offsetWidth,height:e.offsetHeight}}function fM(e,t){return e.filter(([,n])=>!!n.element).map(([n,a])=>({...a,id:n,rect:hM(a.element,t)}))}function gM(e){const{children:t,margins:n=mM}=e,a=qI(),r=l.useRef(null),o=l.useMemo(()=>r.current?fM(a,r.current):Yd,[a]),s=l.useCallback((d,c)=>{const u=uM(d.filter(f=>f.region.presence.length>0)),m=Fh(u.top.map(f=>f.region.rect.height+f.spacerHeight)),p=Fh([...u.inside,...u.bottom].map(f=>f.region.rect.height+f.spacerHeight)),h=u.inside.reduce((f,g)=>{const{distanceTop:b,distanceBottom:v}=g,y=b<=ex,x=v<=tx;return{nearTop:f.nearTop+(y?g.region.presence.length:0),nearBottom:f.nearBottom+(x?g.region.presence.length:0)}},{nearTop:0,nearBottom:0});return i.jsxs(i.Fragment,{children:[i.jsx(Dh,{closeCount:h.nearTop,margins:n,position:"top",regionsWithIntersectionDetails:u.top}),i.jsx(Rh,{height:m}),i.jsx(bM,{containerWidth:c,regionsWithIntersectionDetails:u.inside}),i.jsx(Rh,{height:p}),i.jsx(Dh,{closeCount:h.nearBottom,margins:n,position:"bottom",regionsWithIntersectionDetails:u.bottom})]})},[n]);return i.jsx(sM,{ref:r,margins:n,regions:o,render:s,children:t})}const Yd=[],Dh=l.memo(function(e){const{closeCount:t,margins:n,position:a,regionsWithIntersectionDetails:r}=e,o=a==="top"?1:-1,s=l.useMemo(()=>r.length?On(zi(r,g=>g.region.rect.top*o).map(g=>g.region.presence||Yd)):Yd,[o,r]),[d,c,u,m]=n,p=(m||0)+(s.length>0?-t*(Mr+nl):0)-c,h=a==="top"?d:u,f=l.useMemo(()=>({zIndex:2,position:"sticky",display:"flex",flexDirection:"column",alignItems:"flex-end",...ix,transform:`translate3d(${p}px, 0px, 0px)`,top:Oh+1+h,bottom:Oh+1+h}),[p,h]);return i.jsx("div",{"data-dock":a,style:f,children:i.jsx(ax,{position:a,maxAvatars:VI,presence:s})},`sticky-${a}`)});function bM(e){const{regionsWithIntersectionDetails:t,containerWidth:n}=e;return i.jsx(i.Fragment,{children:t.map(a=>{const r=a.region.rect.left,{distanceTop:o,distanceBottom:s}=a,d=o<=ex,c=s<=tx,u=n-r-a.region.rect.width,{presence:m,maxAvatars:p}=a.region;return i.jsx(l.Fragment,{children:i.jsx("div",{style:{zIndex:2,position:"absolute",...ix,left:r,transform:`translate3d(${d||c?u:0}px, 0px, 0px)`,height:a.region.rect.height,top:a.region.rect.top},children:i.jsx(vM,{value:()=>`⤒${o} | ${s}⤓`,children:i.jsx(ax,{stack:!d&&!c,position:d?"top":c?"bottom":"inside",maxAvatars:p,presence:m})})})},a.region.id)})})}const yM=e=>e.children,vM=yM,xM=[0,0,0,0];function CM({children:e,margins:t}){return i.jsx(WI,{children:i.jsx(gM,{margins:t||xM,children:e})})}const Xo=CM,wM=k(P)(({theme:e,$floatingCardWidth:t,$slotWidth:n,$floatingCardVisible:a})=>{const{space:r}=e.sanity;return ae`
    /* Prevent buttons from taking up extra vertical space */
    line-height: 1;
    width: 100%;
    /* For floating actions menu */
    position: relative;

    [data-ui='PresenceBox'] {
      position: absolute;
      bottom: 0;
      right: ${n+t+r[1]}px;
    }
    @media (hover: hover) {
      // If hover is supported, we hide the floating card by default, so only add space for it when it's visible.
      [data-ui='PresenceBox'] {
        position: absolute;
        bottom: 0;
        right: ${n+(a?t:0)+r[1]}px;
      }
    }
  `}),TM=k(I)(({theme:e,$presenceMaxWidth:t})=>{const{space:n}=e.sanity;return ae`
    max-width: calc(100% - ${t+n[1]}px);
    min-width: 75%;
  `}),jM=k(I)(({theme:e,$right:t,$fieldActionsVisible:n})=>{const{space:a}=e.sanity,r=n?t+a[1]:t;return ae`
    position: absolute;
    bottom: 0;
    right: ${r}px;
  `}),kM=k(U)`
  align-items: center;
  bottom: 0;
  position: absolute;
  right: 0;
  transition: opacity 150ms ease;
  line-height: 1;

  @media (hover: hover) {
    // If hover is supported, we hide the floating card by default
    // and only show it when it has focus within or when the field is hovered or focused.
    opacity: 0;
    pointer-events: none;

    [data-ui='FieldActionsFlex'] {
      opacity: 0;
    }

    &[data-actions-visible='false']:not(:focus-within) {
      // Remove the shadow when the field actions are not visible
      box-shadow: none;

      // Since the field actions always will be present in the DOM (to make them focusable) –
      // they will always affect the width of the floating card, even when they are not visible.
      // Therefore, we remove the background of the floating card when the field actions are not visible.
      background: transparent;
    }

    // Remove the shadow when the field has comments but no actions
    &[data-has-comments='true']:not([data-has-actions='true']) {
      box-shadow: none;
    }

    // Show the floating card when it has focus within (ie when field actions are focused).
    &:focus-within {
      opacity: 1;
      pointer-events: auto;
      width: max-content;

      [data-ui='FieldActionsFlex'] {
        opacity: 1;
        pointer-events: auto;
        width: max-content;
      }
    }
  }

  &[data-visible='true'] {
    opacity: 1;
    pointer-events: auto;
    width: max-content;
  }

  &[data-actions-visible='true'] {
    [data-ui='FieldActionsFlex'] {
      opacity: 1;
      pointer-events: auto;
      width: max-content;
    }
  }
`,AM=k(P)`
  gap: inherit;
  transition: opacity 150ms ease;
`,$h=4;function rx(e){const{__internal_comments:t,__internal_slot:n,actions:a,content:r,fieldFocused:o,fieldHovered:s,presence:d}=e,[c,u]=l.useState(!1),[m,p]=l.useState(!1),[h,f]=l.useState(null),[g,b]=l.useState(0),[v,y]=l.useState(null),[x,w]=l.useState(0),{hasComments:C=!1,button:T=null,isAddingComment:j=!1}=t||{},A=a&&a.length>0,M=o||s||m||j,S=(t==null?void 0:t.button)||A,N=c||M||C,D=l.useCallback(()=>{if(h){const{width:$}=h.getBoundingClientRect();b($||0)}},[h]),_=l.useCallback(()=>{D(),u(!0)},[D]),F=l.useCallback(()=>{D(),u(!1)},[D]);l.useEffect(()=>{D()},[D,M]),l.useEffect(()=>{if(v){const{width:$}=v.getBoundingClientRect();w($||0)}},[v]);const R=l.useMemo(()=>n?i.jsx(jM,{$fieldActionsVisible:!!M,$right:g,ref:y,children:n}):null,[g,M,n]);return i.jsxs(wM,{align:"flex-end",justify:"space-between",$floatingCardVisible:N,$floatingCardWidth:g,$slotWidth:x,children:[i.jsx(TM,{"data-ui":"fieldHeaderContentBox",flex:1,paddingY:2,$presenceMaxWidth:JI($h),children:r}),d&&d.length>0&&i.jsx(I,{"data-ui":"PresenceBox",flex:"none",children:i.jsx(Yo,{maxAvatars:$h,presence:d})}),R,(S||C)&&i.jsx(Ia,{children:i.jsxs(kM,{"data-actions-visible":M?"true":"false","data-has-actions":A?"true":"false","data-has-comments":C?"true":"false","data-visible":N?"true":"false",display:"flex",onBlurCapture:F,onFocusCapture:_,ref:f,sizing:"border",children:[A&&i.jsx(AM,{align:"center","data-ui":"FieldActionsFlex",children:i.jsx(SI,{nodes:a,onMenuOpenChange:p})}),T]})})]})}function Si(e,t){if(!(!t||!e))return`desc_${e}`}const SM=[],ox={error:MM,warning:PM,info:NM},_M=k(B)`
  max-width: 200px;
`,sx=k(E)(({$status:e})=>e==="error"?{"--card-icon-color":"var(--card-badge-critical-icon-color)"}:e==="warning"?{"--card-icon-color":"var(--card-badge-caution-icon-color)"}:e==="info"?{"--card-icon-color":"var(--card-badge-primary-icon-color)"}:{});function Gr(e){const{validation:t=SM,__unstable_showSummary:n,fontSize:a,placement:r}=e,o=t.some(u=>u.level==="error"),s=t.some(u=>u.level==="warning"),d=o?"error":s?"warning":"info",c=ox[d];return i.jsx(Ie,{content:i.jsxs(_M,{space:3,children:[n&&i.jsx(IM,{validation:t}),!n&&i.jsx(i.Fragment,{children:t.map((u,m)=>i.jsx(EM,{validation:u},m))})]}),portal:!0,placement:r,fallbackPlacements:["bottom","right","left"],children:i.jsx("div",{children:i.jsx(sx,{$status:d,size:a,weight:"medium",children:c&&i.jsx(c,{})})})})}function EM(e){const{validation:t}=e,n=ox[t.level];return i.jsxs(P,{children:[i.jsx(I,{marginRight:2,children:i.jsx(sx,{$status:t.level,size:1,children:n&&i.jsx(n,{})})}),i.jsx(I,{flex:1,children:i.jsx(E,{size:1,children:t.message})})]})}function IM({validation:e}){const{t}=L(),n=Kr(),a=e.reduce((u,m)=>m.level==="error"?u+1:u,0),r=e.reduce((u,m)=>m.level==="warning"?u+1:u,0),o=a>0,s=r>0;if(!o&&!s)return null;const d=o&&t("form.validation.summary.errors-count",{count:a}),c=s&&t("form.validation.summary.warnings-count",{count:r});return d&&c?i.jsx(E,{size:1,children:n.format([d,c])}):i.jsx(E,{size:1,children:d||c})}function MM(){const{t:e}=L();return i.jsx(Aa,{"data-testid":"input-validation-icon-error","aria-label":e("form.validation.has-error-aria-label"),"aria-hidden":!0,role:"presentation"})}function PM(){const{t:e}=L();return i.jsx(Wt,{"data-testid":"input-validation-icon-warning","aria-label":e("form.validation.has-warning-aria-label"),"aria-hidden":!0,role:"presentation"})}function NM(){const{t:e}=L();return i.jsx(Uo,{"data-testid":"input-validation-icon-info","aria-label":e("form.validation.has-info-aria-label"),"aria-hidden":!0,role:"presentation"})}const OM=k(P)`
  /*
   * Prevent the block size of appended elements (such as the deprecated field badge) affecting
   * the intrinsic block size of the label.
   */
  contain: size;
`,FM=[],_m=l.memo(function(e){const{description:t,inputId:n,title:a,deprecated:r,validation:o=FM}=e,{t:s}=L(),d=o.length>0,c=r||d;return i.jsxs(B,{space:3,children:[i.jsxs(P,{align:"center",paddingY:1,children:[i.jsx(E,{as:"label",htmlFor:n,weight:"medium",size:1,children:a||i.jsx("span",{style:{color:"var(--card-muted-fg-color)"},children:s("form.field.untitled-field-label")})}),c&&i.jsxs(OM,{align:"center",flex:1,children:[r&&i.jsx(I,{marginLeft:2,children:i.jsx(Sn,{"data-testid":`deprecated-badge-${a}`,tone:"caution",children:s("form.field.deprecated-label")})}),d&&i.jsx(I,{marginLeft:2,children:i.jsx(Gr,{fontSize:1,placement:"top",validation:o})})]})]}),r&&i.jsx(Ct,{"data-testid":`deprecated-message-${a}`,tone:"caution",size:1,children:r.reason}),t&&i.jsx(E,{muted:!0,size:1,id:Si(n,t),children:t})]})}),Lh=[],Xi=l.memo(function(e){const{__unstable_headerActions:t=Lh,__unstable_presence:n=Lh,__internal_slot:a=null,__internal_comments:r,children:o,description:s,inputId:d,level:c,title:u,validation:m,deprecated:p,...h}=e,{focused:f,hovered:g,onMouseEnter:b,onMouseLeave:v}=Xv();return i.jsxs(B,{...h,"data-level":c,onMouseEnter:b,onMouseLeave:v,space:2,children:[u&&i.jsx(rx,{__internal_comments:r,__internal_slot:a,actions:t,fieldFocused:!!f,fieldHovered:g,presence:n,content:i.jsx(_m,{description:s,inputId:d,title:u,validation:m,deprecated:p})}),i.jsx("div",{children:o})]})}),Bh=k.legend`
  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */
  padding: 0;
  display: table;
`,RM=k(P).attrs({forwardedAs:"button"})(e=>{const{theme:t}=e,{focusRing:n,radius:a}=t.sanity,{base:r}=t.sanity.color;return ae`
    appearance: none;
    border: 0;
    background: none;
    color: inherit;
    -webkit-font-smoothing: inherit;
    font: inherit;
    outline: none;
    border-radius: ${Te(a[2])};
    position: relative;

    &:not([hidden]) {
      display: flex;
    }

    &:focus {
      box-shadow: ${vm({base:r,focusRing:n})};
    }

    &:focus:not(:focus-visible) {
      box-shadow: none;
    }

    /* Added to increase the hit area of the collapsible fieldset */
    &::after {
      content: '';
      position: absolute;
      top: -10px;
      right: -10px;
      bottom: -10px;
      left: -10px;
    }
  `}),DM=k(I)`
  width: 9px;
  height: 9px;
  margin-right: 3px;

  & svg {
    transition: transform 100ms;
  }
`,$M=l.memo(function(e){const{collapsed:t,collapsible:n,onClick:a,title:r}=e,o=i.jsx(E,{weight:"medium",size:1,children:r});return n?i.jsx(Bh,{children:i.jsxs(RM,{type:"button",onClick:a,children:[i.jsx(DM,{children:i.jsx(E,{muted:!0,size:1,children:i.jsx(My,{style:{transform:`rotate(${t?"0":"90deg"}) translate3d(0, 0, 0)`}})})}),o]})}):i.jsx(Bh,{children:o})});function LM(e){return typeof e=="function"?e():e}const BM=k(B).attrs({forwardedAs:"fieldset"})`
  border: none;

  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */
  body:not(:-moz-handler-blocked) & {
    display: table-cell;
  }
`,VM=k(I)(e=>{const{$borderLeft:t,theme:n}=e,{focusRing:a}=n.sanity,{base:r}=n.sanity.color;return ae`
    outline: none;
    border-left: ${t?"1px solid var(--card-border-color)":void 0};

    &:focus {
      box-shadow: ${vm({base:r,focusRing:{...a,offset:2}})};
    }

    &:focus:not(:focus-visible) {
      box-shadow: none;
    }
  `}),Gc=[],Zl=l.forwardRef(function(e,t){const{__internal_comments:n,__internal_slot:a=null,__unstable_headerActions:r=Gc,__unstable_presence:o=Gc,children:s,collapsed:d,collapsible:c,columns:u,description:m,level:p=0,onCollapse:h,onExpand:f,onFocus:g,tabIndex:b,title:v,validation:y=Gc,inputId:x,deprecated:w,...C}=e,{focused:T,hovered:j,onMouseEnter:A,onMouseLeave:M}=Xv(),S=y.length>0,N=l.useRef(null),{t:D}=L();l.useImperativeHandle(t,()=>N.current);const _=l.useCallback($=>{N.current===$.target&&g&&g($)},[g]),F=l.useCallback(()=>d?f==null?void 0:f():h==null?void 0:h(),[d,h,f]),R=l.useMemo(()=>d?null:i.jsx(x_,{columns:u,gapX:4,gapY:5,children:LM(s)}),[s,d,u]);return i.jsxs(BM,{"data-level":p,...C,onMouseEnter:A,onMouseLeave:M,space:2,children:[i.jsx(rx,{__internal_comments:n,__internal_slot:a,actions:r,fieldFocused:!!T,fieldHovered:j,presence:o,content:i.jsxs(B,{space:3,children:[i.jsxs(P,{align:"center",children:[v&&i.jsx($M,{collapsed:!!d,collapsible:c,onClick:c?F:void 0,title:v}),w&&i.jsx(I,{marginLeft:2,children:i.jsx(Sn,{"data-testid":`deprecated-badge-${v}`,tone:"caution",children:D("form.field.deprecated-label")})}),S&&i.jsx(I,{marginLeft:2,children:i.jsx(Gr,{fontSize:1,placement:"top",validation:y})})]}),w&&i.jsx(Ct,{"data-testid":`deprecated-message-${v}`,tone:"caution",size:1,children:w.reason}),m&&i.jsx(E,{muted:!0,size:1,id:Si(x,m),children:m})]})}),i.jsx(VM,{$borderLeft:p>0,hidden:d,paddingLeft:p===0?0:3,onFocus:typeof b=="number"&&b>-1?_:void 0,ref:N,tabIndex:b,children:!d&&R})]})}),UM=k.div`
  display: flex;
  justify-content: flex-end;
  box-sizing: border-box;
  min-height: var(--avatar-height);
  width: 77px;
  margin-left: var(--small-padding);

  &[data-max-avatars='1'] {
    max-width: 23px;
  }

  &[data-position='top'] {
    align-self: flex-start;
  }

  &[data-position='bottom'] {
    align-self: flex-end;
  }
`;function zM({children:e,maxAvatars:t,position:n="bottom"}){return i.jsx(UM,{"data-max-avatars":t,"data-position":n,children:e})}function HM(e,t){const n=l.useRef(null);return l.useEffect(()=>{n.current=e},[e]),n.current}function rn(e,t,n=fi){const a=HM(e);l.useEffect(()=>{n(a,e)||t(a,e)},[t,e,a,n])}const Bi=Symbol.for("sanity.patch");function Tn(e,t=[]){return{patchType:Bi,type:"setIfMissing",path:t,value:e}}function di(e,t,n=[]){return{patchType:Bi,type:"insert",path:n,position:t,items:e}}function be(e,t=[]){return{patchType:Bi,type:"set",path:t,value:e}}function we(e=[]){return{patchType:Bi,type:"unset",path:e}}function KM(e,t){return{...e,path:[t,...e.path]}}function WM(){const e=[];return{publish(t){for(const n of e)n(t)},subscribe(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}}}var GM=Object.defineProperty,qM=(e,t,n)=>t in e?GM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,YM=(e,t,n)=>qM(e,t+"",n);class je{constructor(t){YM(this,"patches"),this.patches=t}static from(t){return t instanceof je?t:new je(Array.isArray(t)?On(t):[t])}prepend(...t){return je.from([...On(t),...this.patches])}append(...t){return je.from([...this.patches,...On(t)])}prefixAll(t){return je.from(this.patches.map(n=>KM(n,t)))}}const Jo=l.memo(function(e){const t=l.useRef(e);t.current=e;const n=l.useCallback(p=>{var h,f,g;return(g=(f=(h=t.current)==null?void 0:h.transformPatches)==null?void 0:f.call(h,p))!=null?g:[]},[t]),a=l.useCallback(p=>{t.current.onChange(p)},[]),r=l.useCallback((p,h)=>{t.current.onPathFocus(p,h)},[]),o=l.useCallback(p=>{t.current.onPathBlur(p)},[]),s=l.useCallback(p=>{t.current.onPathOpen(p)},[]),d=l.useCallback((p,h)=>{t.current.onSetPathCollapsed(p,h)},[]),c=l.useCallback((p,h)=>{t.current.onSetFieldSetCollapsed(p,h)},[]),u=l.useCallback((p,h)=>{t.current.onFieldGroupSelect(p,h)},[]),m=l.useMemo(()=>({transformPatches:n,onChange:a,onPathFocus:r,onPathBlur:o,onPathOpen:s,onSetPathCollapsed:d,onSetFieldSetCollapsed:c,onFieldGroupSelect:u}),[a,u,o,r,s,c,d,n]);return i.jsx(Lu.Provider,{value:m,children:e.children})});function Zn(){const e=l.useContext(Lu);if(!e)throw new Error("Form context not provided");return e}function Em(e){if(pa(e))return e.name==="object"?{}:{_type:e.name};if(ua(e))return[];if(e.jsonType==="string")return"";if(e.jsonType==="number")return 0;if(e.jsonType==="boolean")return!1}function XM(e=16){const t=new Uint8Array(e);return wA(t),t}const JM=(()=>{let e;return()=>{if(e)return e;e=[];for(let t=0;t<256;++t)e[t]=(t+256).toString(16).slice(1);return e}})();function Ao(e){const t=JM();return XM(e).reduce((n,a)=>n+t[a],"").slice(0,e)}function ZM(e){return e._key!==void 0}function Bs(e){return ZM(e)?e:{...e,_key:Ao(12)}}const QM=(e,t)=>{const n=wn(t);return e.of.find(a=>a.name===n)};function eP(e,t){return Object.entries(e).map(([n,a])=>be(a,[...t,n]))}function lx(e,t,n){return Ot(e).pipe(Ye(a=>{const r={_key:a._key};return re(QM(t,a)).pipe(Ye(o=>o?re(o):$t),Ye(o=>!jm(a)||!n?$t:zt(re({type:"patch",patches:[be(!0,[r,"_resolvingInitialValue"])]}),tn(()=>n(o,a)).pipe(Ue(Ft),K(s=>({type:"patch",patches:eP(s,[r])})),ut(s=>re({type:"error",error:s,item:a,schemaType:o}))),re({type:"patch",patches:[we([r,"_resolvingInitialValue"])]}))))}))}function Im(e){const t=l.useRef(),{member:n,renderAnnotation:a,renderBlock:r,renderField:o,renderInlineBlock:s,renderInput:d,renderItem:c,renderPreview:u}=e,{t:m}=L(),{onPathBlur:p,onPathFocus:h,onChange:f,onPathOpen:g,onSetPathCollapsed:b,onSetFieldSetCollapsed:v,onFieldGroupSelect:y}=Zn(),x=gp();rn(n.item.focused,(G,ce)=>{var de;!G&&ce&&((de=t.current)==null||de.focus())});const w=l.useCallback(()=>{f(je.from([we([{_key:n.key}])]))},[n.key,f]),C=l.useCallback(G=>{g(G),b(G,!1)},[g,b]),T=Vt(),j=l.useCallback(G=>{if(G.items.length===0)throw new Error("Insert event should include at least one item");const ce=G.items.map(Y=>Bs(Y));f(je.from([di(ce,G.position,[{_key:n.key}])]));const de=ce[0]._key,pe=[...n.item.path.slice(0,-1),{_key:de}];h(pe);const W=G.open!==!1;G.skipInitialValue?W&&C(pe):lx(ce,n.parentSchemaType,x).pipe(bt(Y=>{Y.type==="patch"?f(je.from(Y.patches)):T.push({title:m("inputs.array.error.cannot-resolve-initial-value-title"),description:m("inputs.array.error.cannot-resolve-initial-value-description",{schemaTypeTitle:Y.schemaType.title,errorMessage:Y.error.message}),status:"error"})})).subscribe({complete:()=>{W&&C(pe)}})},[C,n.item.path,n.key,n.parentSchemaType,f,h,x,T,m]),A=l.useCallback(()=>{p(n.item.path)},[n.item.path,p]),M=l.useCallback(()=>{h(n.item.path)},[n.item.path,h]),S=l.useCallback(G=>{h(n.item.path.concat(G))},[n.item.path,h]),N=l.useCallback(G=>{f(je.from(G).prepend(Tn(Em(n.item.schemaType))).prefixAll({_key:n.key}))},[f,n.item.schemaType,n.key]),D=l.useCallback(()=>{b(n.item.path,!0)},[b,n.item.path]),_=l.useCallback(()=>{b(n.item.path,!1)},[b,n.item.path]),F=l.useCallback(G=>{b(n.item.path.concat(G),!0)},[b,n.item.path]),R=l.useCallback(G=>{b(n.item.path.concat(G),!1)},[b,n.item.path]),$=l.useCallback(()=>{g(n.item.path)},[g,n.item.path]),O=l.useCallback(G=>{g(n.item.path.concat(G))},[g,n.item.path]),V=l.useCallback(G=>{v(n.item.path.concat(G),!1)},[v,n.item.path]),H=l.useCallback(G=>{v(n.item.path.concat(G),!0)},[v,n.item.path]),J=l.useCallback(()=>{g(n.item.path)},[g,n.item.path]),q=!n.item.value||jm(n.item.value),oe=l.useCallback(()=>{q&&w();const G=n.item.path.slice(0,-1);g(G),h(G)},[q,g,n.item.path,h,w]),ie=l.useCallback(G=>{y(n.item.path,G)},[y,n.item.path]),te=l.useMemo(()=>({onBlur:A,onFocus:M,id:n.item.id,ref:t,"aria-describedby":Si(n.item.id,n.item.schemaType.description)}),[A,M,n.item.id,n.item.schemaType.description]),X=l.useMemo(()=>({changed:n.item.changed,focusPath:n.item.focusPath,focused:n.item.focused,groups:n.item.groups,id:n.item.id,level:n.item.level,members:n.item.members,onChange:N,onFieldClose:$,onFieldCollapse:F,onFieldSetCollapse:H,onFieldExpand:R,onFieldSetExpand:V,onFieldGroupSelect:ie,onPathFocus:S,onFieldOpen:O,path:n.item.path,presence:n.item.presence,readOnly:n.item.readOnly,renderAnnotation:a,renderBlock:r,renderField:o,renderInlineBlock:s,renderInput:d,renderItem:c,renderPreview:u,schemaType:n.item.schemaType,validation:n.item.validation,value:n.item.value,elementProps:te}),[te,N,$,F,H,R,V,S,O,ie,n.item.changed,n.item.focusPath,n.item.focused,n.item.groups,n.item.id,n.item.level,n.item.members,n.item.path,n.item.presence,n.item.readOnly,n.item.schemaType,n.item.validation,n.item.value,a,r,o,s,d,c,u]),le=l.useMemo(()=>d(X),[X,d]),me=l.useMemo(()=>({key:n.key,index:n.index,level:n.item.level,value:n.item.value,title:n.item.schemaType.title,description:n.item.schemaType.description,collapsible:n.collapsible,collapsed:n.collapsed,schemaType:n.item.schemaType,parentSchemaType:n.parentSchemaType,onInsert:j,onRemove:w,presence:n.item.presence,validation:n.item.validation,open:n.open,onOpen:J,onClose:oe,onExpand:_,onCollapse:D,readOnly:n.item.readOnly,focused:n.item.focused,onFocus:M,onBlur:A,inputId:n.item.id,path:n.item.path,children:le,changed:n.item.changed,inputProps:X}),[n.key,n.index,n.item.level,n.item.value,n.item.schemaType,n.parentSchemaType,n.item.presence,n.item.validation,n.item.readOnly,n.item.focused,n.item.id,n.item.path,n.item.changed,n.collapsible,n.collapsed,n.open,j,w,J,oe,_,D,M,A,le,X]);return i.jsx(Jo,{onFieldGroupSelect:y,onChange:N,onPathOpen:g,onSetFieldSetCollapsed:v,onSetPathCollapsed:b,onPathBlur:p,onPathFocus:h,children:l.useMemo(()=>c(me),[me,c])})}const tP=k(U)`
  max-width: ${({theme:e})=>e.sanity.container[1]}px;
`;function cx(e){const{value:t,onFocus:n,vertical:a,...r}=e,[o,s]=l.useState(!1),[d,c]=l.useState(null),{t:u}=L();vt(()=>s(!1),[d]);const m=l.useCallback(f=>{(f.key==="Escape"||f.key==="Tab")&&s(!1)},[]),p=l.useCallback(()=>{s(f=>!f)},[]),h=wn(t);return i.jsx(rt,{open:o,ref:c,onKeyDown:m,portal:!0,constrainSize:!0,tone:"default",content:i.jsx(tP,{margin:1,padding:3,onKeyDown:m,tabIndex:0,overflow:"auto",children:i.jsxs(B,{space:4,children:[i.jsx(E,{weight:"medium",children:i.jsx(Pe,{t:u,i18nKey:"inputs.array.error.type-is-incompatible-prompt",values:{typeName:h}})}),i.jsx(E,{size:1,weight:"medium",children:u("inputs.array.error.type-is-incompatible-title")}),i.jsx(E,{size:1,children:i.jsx(Pe,{t:u,i18nKey:"inputs.array.error.current-schema-not-declare-description",values:{typeName:h}})}),i.jsx(I,{children:i.jsxs(E,{size:1,children:[i.jsx(nm,{})," ",u("inputs.array.error.can-delete-but-no-edit-description")]})}),i.jsxs(B,{space:2,children:[i.jsx(E,{size:1,weight:"medium",children:u("inputs.array.error.json-representation-description")}),i.jsx(U,{padding:2,overflow:"auto",border:!0,children:i.jsx(xn,{size:1,as:"pre",language:"json",children:JSON.stringify(t,null,2)})})]})]})}),children:i.jsx(U,{as:"button",type:"button",radius:2,tone:"inherit",paddingX:2,paddingY:3,flex:1,onFocus:n,onClick:p,onKeyDown:m,__unstable_focusRing:!0,...r,children:i.jsxs(P,{align:"center",children:[i.jsx(I,{marginRight:3,children:i.jsx(E,{children:i.jsx(mi,{})})}),i.jsx(I,{flex:1,children:i.jsx(E,{size:1,textOverflow:"ellipsis",children:i.jsx(Pe,{t:u,i18nKey:"inputs.array.error.type-is-incompatible-prompt",values:{typeName:h}})})})]})})})}function nP(e){const{member:t}=e,{t:n}=L();return t.error.type==="INVALID_ITEM_TYPE"?i.jsx(cx,{value:t.error.value}):i.jsx("div",{children:n("inputs.array.error.unexpected-error",{error:t.error.type})})}function Mm(e){switch(e.jsonType){case"string":return"";case"number":return-0;case"boolean":return!1;default:throw new Error(`Unable to create value from type "${e.jsonType}"`)}}function dx(e,t,n){return jr(e)&&typeof n=="string"&&Number(n)===t?n:String(t??"")}function aP(e){const t=l.useRef(),{member:n,renderItem:a,renderInput:r}=e,[o,s]=l.useState(),{onPathBlur:d,onPathFocus:c,onChange:u}=Zn();rn(n.item.focused,(C,T)=>{var j;!C&&T&&((j=t.current)==null||j.focus())});const m=l.useCallback(C=>{d(n.item.path)},[n.item.path,d]),p=l.useCallback(C=>{c(n.item.path)},[n.item.path,c]),h=l.useCallback(C=>{u(je.from(C).prefixAll(n.index))},[u,n.index]),f=l.useCallback(C=>{let T=C.currentTarget.value;if(jr(n.item.schemaType)){if(T=C.currentTarget.valueAsNumber,T>Number.MAX_SAFE_INTEGER||T<Number.MIN_SAFE_INTEGER)return}else kl(n.item.schemaType)&&(T=C.currentTarget.checked);const j=T===""||typeof T=="number"&&isNaN(T);jr(n.item.schemaType)&&s(j?void 0:C.currentTarget.value),h(be(j?Mm(n.item.schemaType):T))},[h,n.item.schemaType]),g=l.useMemo(()=>({onBlur:m,onFocus:p,id:n.item.id,ref:t,onChange:f,value:iP(n.item.schemaType,n.item.value,o),readOnly:!!n.item.readOnly,placeholder:n.item.schemaType.placeholder,"aria-describedby":Si(n.item.id,n.item.schemaType.description)}),[m,p,f,n.item.id,n.item.readOnly,n.item.schemaType,n.item.value,o]),b=l.useMemo(()=>({changed:n.item.changed,level:n.item.level,value:n.item.value,readOnly:n.item.readOnly,schemaType:n.item.schemaType,id:n.item.id,path:n.item.path,focused:n.item.focused,onChange:h,validation:n.item.validation,presence:n.item.presence,elementProps:g}),[n.item.changed,n.item.level,n.item.value,n.item.readOnly,n.item.schemaType,n.item.id,n.item.path,n.item.focused,n.item.validation,n.item.presence,h,g]),v=l.useMemo(()=>r(b),[b,r]),y=l.useCallback(()=>{u(je.from([we([n.index])]))},[n.index,u]),x=l.useCallback(C=>{u(je.from([di(C.items,C.position,[n.index])]))},[n.index,u]),w=l.useMemo(()=>({key:n.key,index:n.index,level:n.item.level,value:n.item.value,title:n.item.schemaType.title,description:n.item.schemaType.description,schemaType:n.item.schemaType,parentSchemaType:n.parentSchemaType,onInsert:x,onRemove:y,presence:n.item.presence,validation:n.item.validation,readOnly:n.item.readOnly,focused:n.item.focused,onFocus:p,onBlur:m,inputId:n.item.id,path:n.item.path,children:v}),[n.key,n.index,n.item.level,n.item.value,n.item.schemaType,n.item.presence,n.item.validation,n.item.readOnly,n.item.focused,n.item.id,n.item.path,n.parentSchemaType,x,y,p,m,v]);return i.jsx(i.Fragment,{children:l.useMemo(()=>a(w),[w,a])})}function iP(e,t,n){return Object.is(t,-0)?"":dx(e,t,n)}function qr(e){if(!pa(e))throw new Error(`Invalid item type: "${e.type}". Default array input can only contain objects (for now)`);return{...Em(e),_key:Sl(12)}}const Vh="before",Uh="after";function rP(e,t,n,...a){if(t!==Vh&&t!==Uh)throw new Error(`Invalid position "${t}", must be either ${Vh} or ${Uh}`);const r=zh(...a);if(e.length===0)return r;const o=e.length,s=Math.abs((o+n)%o)%o,d=t==="after"?s+1:s,c=e.slice();return c.splice(d,0,...zh(r)),c}function zh(...e){return e.reduce((t,n)=>t.concat(n),[])}const Hh=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function oP(e,t,n){const a=e.slice(),r=a[t];return a.splice(t,1),a.splice(n,0,r),a}function sP(e,t){if(typeof t=="number")return t;const n=U0(e,t);return n===-1?!1:n}function lP(e,t){const n=e.slice();if(t.path.length===0){if(t.type==="setIfMissing"){if(!Array.isArray(t.value))throw new Error("Cannot set value of an array to a non-array");return e===void 0?t.value:e}else if(t.type==="set"){if(!Array.isArray(t.value))throw new Error("Cannot set value of an array to a non-array");return t.value}else{if(t.type==="unset")return;if(t.type==="move"){if(!t.value||!Hh(t.value,"from")||!Hh(t.value,"to"))throw new Error(`Invalid value of 'move' patch. Expected a value with "from" and "to" indexes, instead got: ${JSON.stringify(t.value)}`);return oP(n,t.value.from,t.value.to)}}throw new Error(`Invalid array operation: ${t.type}`)}const[a,...r]=t.path,o=sP(e,a);if(o===!1)return n;if(r.length===0){if(t.type==="insert"){const{position:s,items:d}=t;return rP(e,s,o,d)}else if(t.type==="unset"){if(typeof o!="number")throw new Error(`Expected array index to be a number, instead got "${o}"`);return n.splice(o,1),n}}return n[o]=Nm(n[o],{...t,path:r}),n}function cP(e,t){const n=TA(e);if(t.path.length===0){if(t.type==="set"){if(!$0(t.value))throw new Error("Cannot set value of an object to a non-object");return t.value}else{if(t.type==="unset")return;if(t.type==="setIfMissing")return e===void 0?t.value:e}throw new Error(`Invalid object operation: ${t.type}`)}const[a,...r]=t.path;if(typeof a!="string")throw new Error(`Expected field name to be a string, instad got: ${a}`);return r.length===0&&t.type==="unset"?Yn(n,a):(n[a]=Nm(n[a],{...t,path:r}),n)}const ux={replace(e,t){return t},set(e,t){return t},setIfMissing(e,t){return e===void 0?t:e},unset(e,t){},inc(e,t){return e+t},dec(e,t){return e-t}},dP=Object.keys(ux);function uP(e,t){if(!dP.includes(t.type))throw new Error(`Received patch of unsupported type "${t.type}" for primitives. This is most likely a bug.`);if(t.path.length>0)throw new Error(`Cannot apply deep operations on primitive values. Received patch with type "${t.type}" and path "${t.path.map(n=>JSON.stringify(n)).join(".")} that targeted the value "${JSON.stringify(e)}"`);return ux[t.type](e,t.value)}const mx={replace(e,t){return t},set(e,t){return t},setIfMissing(e,t){return e===void 0?t:e},unset(e,t){},diffMatchPatch(e,t){const[n]=O0(IA(t),e,{allowExceedingIndices:!0});return n}},mP=Object.keys(mx);function pP(e,t){if(!mP.includes(t.type))throw new Error(`Received patch of unsupported type: "${JSON.stringify(t.type)}" for string. This is most likely a bug.`);if(t.path.length>0)throw new Error(`Cannot apply deep operations on string values. Received patch with type "${t.type}" and path "${t.path.join(".")} that targeted the value "${JSON.stringify(e)}"`);return mx[t.type](e,t.value)}function Pm(e,t){return t.reduce(Nm,e)}function hP(e,t){return Array.isArray(e)?lP(e,t):A0(e)?pP(e,t):$0(e)?cP(e,t):uP(e,t)}function Nm(e,t){return hP(e,t)}function fP(e){const t=l.useMemo(()=>({actions:e.actions||lt}),[e.actions]);return i.jsx(I0.Provider,{value:t,children:e.children})}function Ql(){const e=l.useContext(I0);if(!e)throw new Error("useDocumentFieldActions must be used within a DocumentFieldActionsProvider");return e.actions}function Ca(e,t){return t.name===e||!!(t.type&&Ca(e,t.type))}function Xd(e,t){if(!e||!t)return!0;const n=Array.isArray(t)?t:t.split(","),a=e.name||"",r=(e.type||"").toLowerCase(),o=r.replace(/\/.*$/,"");return n.some(s=>{const d=s.trim().toLowerCase();return d.charAt(0)==="."?a?a.toLowerCase().endsWith(d):!0:d.endsWith("/*")?o===d.replace(/\/.*$/,""):r===d})}const px=4;function Kh(e,t){const n=e.indexOf(t);return n>-1&&e.splice(n,1),e}function gP(e,t=px){const n=bP(t);return(...a)=>Ot(n(e(...a)))}function bP(e=px){const t=[],n=[],a=new sn;return r;function r(d){return new Dn(c=>{if(t.length>=e)return o(d).pipe(Ye(r)).subscribe(c);const u=d.subscribe(c);return t.push(u),()=>{Kh(t,u),Kh(n,d),u.unsubscribe(),s()}})}function o(d){return n.push(d),a.asObservable().pipe(c0(c=>c===d))}function s(){for(;n.length>0&&t.length<e;)a.next(n.shift())}}const yP=4;function vP(e,t,n,a={}){const r=a.metadata,o=a.storeOriginalFilename,{label:s,title:d,description:c,creditLine:u,source:m}=a;return jP(n).pipe(ut(()=>re(null)),Ye(p=>p?wP(e,`sanity.${t}Asset`,p):re(null)),Ye(p=>p?re({type:"complete",id:p._id,asset:p}):e.observable.assets.upload(t,n,{tag:"asset.upload",extract:r,preserveFilename:o,label:s,title:d,description:c,creditLine:u,source:m}).pipe(K(h=>h.type==="response"?{type:"complete",id:h.body.document._id,asset:h.body.document}:h))))}const hx=gP(vP,yP),xP=(e,t,n)=>hx(e,"image",t,n),CP=(e,t,n)=>hx(e,"file",t,n);function fx(e,t){return e.observePaths({_type:"reference",_ref:t},["originalFilename","url","metadata","label","title","description","creditLine","source","size"]).pipe(Ee(n=>{if(n===null)throw new Error(`No asset found in documentPreviewStore with id: ${t}`);return re(n)}),jS({count:5,delay:1e3}),ut(n=>(console.error("Final error after retries, asset not found in documentPreviewStore:",n),re(null))))}function gx(e,t){return fx(e,t)}function bx(e,t){return fx(e,t)}function wP(e,t,n){return e.observable.fetch("*[_type == $documentType && sha1hash == $hash][0]",{documentType:t,hash:n},{tag:"asset.find-duplicate"})}function TP(e){return new Dn(t=>{const n=new FileReader;return n.onload=()=>{t.next(n.result),t.complete()},n.onerror=a=>{t.error(a)},n.readAsArrayBuffer(e),()=>{n.abort()}})}function jP(e){return!window.crypto||!window.crypto.subtle||!window.FileReader?re(null):TP(e).pipe(Ye(t=>crypto.subtle.digest("SHA-1",t)),K(kP))}function kP(e){return Array.prototype.map.call(new Uint8Array(e),t=>`00${t.toString(16)}`.slice(-2)).join("")}const ia="_upload",AP=we([ia]);function $i(e=[]){return{type:"uploadProgress",patches:e}}const yx=$i([AP]);function vx(e){const t=new Date().toISOString(),n={progress:2,createdAt:t,updatedAt:t,file:{name:e.name,type:e.type}};return $i([be(n,[ia])])}function xx(e,t,n){const a=CP(e,t,n).pipe(K(r=>r.type==="complete"?$i([be({_type:"reference",_ref:r.asset._id},["asset"]),be(100,[ia,"progress"]),be(new Date().toISOString(),[ia,"updated"])]):$i([be(r.percent,[ia,"progress"]),be(new Date().toISOString(),[ia,"updated"])])));return zt(re(vx(t)),a,re(yx))}function Wh(e){return[5,6,7,8].indexOf(e)>-1}function SP(e,t){const n=t.x,a=t.y,r=(t.degrees||0)*(Math.PI/180);e==null||e.translate(n,a),e==null||e.rotate(r),e==null||e.translate(-n,-a)}function Gh(e,t,n){const a=e.getContext("2d");a==null||a.translate(t?e.width:0,n?e.height:0),a==null||a.scale(t?-1:1,n?-1:1)}const _P=[{op:"none",degrees:0},{op:"flip-x",degrees:0},{op:"none",degrees:180},{op:"flip-y",degrees:0},{op:"flip-x",degrees:90},{op:"none",degrees:90},{op:"flip-x",degrees:-90},{op:"none",degrees:-90}],EP=["top-left","top-right","bottom-right","bottom-left","left-top","right-top","right-bottom","left-bottom"],IP="top-left",MP=120;function PP(e,t){const n=_P[t-1],a=e.height/e.width;e.width=MP/a,e.height=e.width*a;const r=document.createElement("canvas"),o=r.getContext("2d");if(Wh(t)?(r.height=e.width,r.width=e.height):(r.width=e.width,r.height=e.height),n.op==="flip-x"&&Gh(r,!0,!1),n.op==="flip-y"&&Gh(r,!1,!0),n.degrees&&(SP(o,{degrees:n.degrees,x:r.width/2,y:r.height/2}),Wh(t))){const s=r.width-r.height;o==null||o.translate(s/2,-s/2)}return o==null||o.drawImage(e,0,0,e.width,e.height),r}function NP(e,t){return new Dn(n=>{const a=EP.indexOf(t)+1,r=PP(e,a);n.next(r.toDataURL("image/jpeg",.1)),n.complete()})}function OP(e,t){return new Dn(n=>{const a=new window.FileReader;return a.onerror=r=>n.error(r),a.onload=()=>{n.next(a.result),n.complete()},a.readAsArrayBuffer(e.slice(0,t)),()=>a.abort()})}const FP=/(invalid image format)|(No exif data)/i,RP=128e3;function DP(e){return Ot(OP(e,RP)).pipe(K(t=>sA(t)),ut(t=>(FP.test(t.message)||console.warn(`Exif read failed, continuing anyway: ${t.message}`),re({}))))}function $P(e){return new Dn(t=>{const n=new window.Image;return n.onerror=()=>{t.error(new Error(`Could not load image from url "${e}". Image may be of an unsupported format`))},n.onload=()=>{t.next(n),t.complete()},n.src=e,()=>{}})}function LP(e,t){return $P(window.URL.createObjectURL(e)).pipe(Ye(n=>NP(n,t)))}function BP(e,t,n){const a=xP(e,t,n).pipe(Ue(o=>o.stage!=="download"),K(o=>({...o,progress:2+o.percent/100*98})),K(o=>o.type==="complete"?$i([be({_type:"reference",_ref:o.asset._id},["asset"]),be(100,[ia,"progress"]),be(new Date().toISOString(),[ia,"updatedAt"])]):$i([be(o.percent,[ia,"progress"]),be(new Date().toISOString(),[ia,"updatedAt"])]))),r=DP(t).pipe(Ye(o=>LP(t,o.orientation||IP)),ut(o=>(console.warn('Image preprocessing failed for "%s" with the error: %s',t.name,o.message),re(null))),Ue(Boolean),K(o=>$i([be(o,[ia,"previewImage"])])));return zt(re(vx(t)),at(a,r),re(yx))}const VP={type:"image",accepts:"image/*",upload:(e,t,n,a)=>BP(e,t,a)},UP={type:"file",accepts:"",upload:(e,t,n,a)=>xx(e,t,a)},zP={type:"string",accepts:"text/*",upload:(e,t,n,a)=>xx(e,t,a).pipe(K(r=>({type:"uploadProgress",patches:[be(r)]})))},HP=[VP,zP,UP].map((e,t)=>({...e,priority:t}));function Om(e,t){return HP.find(n=>{var a;return Ca(n.type,e)&&Xd(t,n.accepts)&&Xd(t,((a=e.options)==null?void 0:a.accept)||"")})||null}function KP(e){const{onPathBlur:t,onPathFocus:n,onChange:a,onSetPathCollapsed:r,onSetFieldSetCollapsed:o,onPathOpen:s,onFieldGroupSelect:d}=Zn(),{member:c,renderAnnotation:u,renderBlock:m,renderField:p,renderInlineBlock:h,renderInput:f,renderItem:g,renderPreview:b}=e,v=Ql(),y=l.useRef(),x=l.useRef({});rn(c.field.focused,(W,Y)=>{var z;!W&&Y&&((z=y.current)==null||z.focus())});const w=l.useCallback(W=>{W.currentTarget===W.target&&W.currentTarget===y.current&&n(c.field.path)},[c.field.path,n]),C=l.useCallback(W=>{W.currentTarget===W.target&&W.currentTarget===y.current&&t(c.field.path)},[c.field.path,t]),T=l.useRef(c.field.value);l.useEffect(()=>{T.current=c.field.value},[c.field.value]);const j=l.useCallback(W=>{const Y=je.from(W).patches;if(Y.some(z=>z.type==="unset"&&z.path.length===1)&&(T.current=Pm(T.current||[],Y),Array.isArray(T.current)&&!T.current.length)){a(je.from(we([c.name])));return}a(je.from(W).prepend(Tn([])).prefixAll(c.name))},[a,c.name,T]),A=gp(),M=Vt(),S=l.useCallback(()=>{r(c.field.path,!0)},[r,c.field.path]),N=l.useCallback(()=>{r(c.field.path,!1)},[r,c.field.path]),D=l.useCallback(W=>{r(c.field.path.concat({_key:W}),!0)},[r,c.field.path]),_=l.useCallback(W=>{r(c.field.path.concat({_key:W}),!1)},[r,c.field.path]),F=l.useCallback(W=>{s(W),r(W,!1)},[s,r]),R=l.useCallback(()=>{s(c.field.path),r(c.field.path,!0)},[s,c.field.path,r]),$=l.useCallback(W=>{if(W.items.length===0)throw new Error("Insert event should include at least one item");const Y=W.items.map(fe=>Bs(fe));j(je.from([di(Y,W.position,[W.referenceItem])]));const z=Y[0]._key,ne=[...c.field.path,{_key:z}];n(ne);const ee=W.open!==!1;W.skipInitialValue?ee&&F(ne):lx(Y,c.field.schemaType,A).pipe(bt(fe=>{fe.type==="patch"?j(fe.patches):M.push({title:"Could not resolve initial value",description:`Unable to resolve initial value for type: ${fe.schemaType.title}: ${fe.error.message}.`,status:"error"})})).subscribe({complete:()=>{ee&&F(ne)}})},[j,F,c.field.path,c.field.schemaType,n,A,M]),O=l.useCallback(W=>{const Y=c.field.value,z=Y==null?void 0:Y[W.fromIndex],ne=Y==null?void 0:Y[W.toIndex];if(W.fromIndex!==W.toIndex){if(!(z!=null&&z._key)||!(ne!=null&&ne._key)){console.error("Neither the item you are moving nor the item you are moving to have a key. Cannot continue.");return}j([we([{_key:z._key}]),di([z],W.fromIndex>W.toIndex?"before":"after",[{_key:ne._key}])])}},[j,c.field.value]),V=l.useCallback(W=>{j([Tn([]),di([Bs(W)],"before",[0])])},[j]),H=l.useCallback(W=>{j([Tn([]),di([Bs(W)],"after",[-1])])},[j]),J=l.useCallback(W=>{x.current[W]&&(x.current[W].unsubscribe(),delete x.current[W]),j([we([{_key:W}])])},[j]),q=l.useCallback((W,Y)=>{n(c.field.path.concat(W),Y)},[c.field.path,n]),oe=l.useMemo(()=>({onBlur:C,onFocus:w,id:c.field.id,ref:y,"aria-describedby":Si(c.field.id,c.field.schemaType.description)}),[C,w,c.field.id,c.field.schemaType.description]),ie=Xe(qe),te=Na(),X=te.__internal.image.directUploads,le=te.__internal.file.directUploads,me=l.useCallback((W,Y)=>Ca("image",W)&&!X||Ca("file",W)&&!le?null:Om(W,Y),[le,X]),G=l.useCallback(({file:W,schemaType:Y,uploader:z})=>{const ne=qr(Y),ee=ne._key;$({items:[ne],position:"after",referenceItem:-1,open:!1});const fe={metadata:ct(Y,"options.metadata"),storeOriginalFilename:ct(Y,"options.storeOriginalFilename")},Oe=z.upload(ie,W,Y,fe).pipe(K(Se=>je.from(Se.patches||[]).prefixAll({_key:ee})),bt(Se=>j(Se.patches)));x.current={...x.current,[ee]:Oe.subscribe()}},[ie,j,$]),ce=l.useMemo(()=>({level:c.field.level,members:c.field.members,value:c.field.value,readOnly:c.field.readOnly,schemaType:c.field.schemaType,changed:c.field.changed,id:c.field.id,onItemExpand:_,onItemCollapse:D,onItemClose:R,onItemOpen:F,focusPath:c.field.focusPath,focused:c.field.focused,path:c.field.path,onChange:j,onInsert:$,onItemMove:O,onItemRemove:J,onItemAppend:H,onItemPrepend:V,onPathFocus:q,resolveInitialValue:A,onUpload:G,resolveUploader:me,validation:c.field.validation,presence:c.field.presence,renderAnnotation:u,renderBlock:m,renderInlineBlock:h,renderInput:f,renderField:p,renderItem:g,renderPreview:b,elementProps:oe}),[c.field.level,c.field.members,c.field.value,c.field.readOnly,c.field.schemaType,c.field.changed,c.field.id,c.field.focusPath,c.field.focused,c.field.path,c.field.validation,c.field.presence,_,D,R,F,j,$,O,J,H,V,q,A,G,me,u,m,h,f,p,g,b,oe]),de=l.useMemo(()=>f(ce),[ce,f]),pe=l.useMemo(()=>({actions:v,name:c.name,index:c.index,level:c.field.level,value:c.field.value,title:c.field.schemaType.title,description:c.field.schemaType.description,collapsible:c.collapsible,collapsed:c.collapsed,changed:c.field.changed,onCollapse:S,onExpand:N,schemaType:c.field.schemaType,inputId:c.field.id,path:c.field.path,presence:c.field.presence,validation:c.field.validation,children:de,inputProps:ce}),[v,c.name,c.index,c.field.level,c.field.value,c.field.schemaType,c.field.changed,c.field.id,c.field.path,c.field.presence,c.field.validation,c.collapsible,c.collapsed,S,N,de,ce]);return i.jsx(Jo,{onFieldGroupSelect:d,onChange:j,onSetFieldSetCollapsed:o,onSetPathCollapsed:r,onPathOpen:s,onPathBlur:t,onPathFocus:n,children:l.useMemo(()=>p(pe),[pe,p])})}function WP(e,t){return new Dn(n=>{const a=new FileReader;return a.onerror=r=>n.error(r),a.onload=()=>{n.next(a.result),n.complete()},a.readAsText(e,t),()=>{a.abort()}})}function GP(e,t,n){const a=e.slice(),r=a[t];return a.splice(t,1),a.splice(n,0,r),a}function qP(e,t,n){const a=t.slice();return a.splice(e+1,0,...n),a}function YP(e){return/^\d+$/.test(e)}function XP(e,t){let n=!1,a=!1,r=!1;return t.forEach(o=>{kl(o)&&(n=!0),lA(o)&&(r=!0),jr(o)&&(a=!0)}),n&&(e==="true"||e==="false")?e==="true":a&&YP(e)?Number(e):r?e:void 0}function JP(e){return{priority:0,accepts:"text/*",type:"string",upload(t,n){return WP(n,"utf-8").pipe(K(a=>a==null?void 0:a.split(/[\n\r]/).map(r=>XP(r,e)).filter(r=>r!==void 0)),Ue(a=>Array.isArray(a)),K(a=>({type:"uploadProgress",patches:[di(a,"after",[-1])]})))}}}function ZP(e){const{onPathBlur:t,onPathFocus:n,onChange:a,onPathOpen:r,onSetPathCollapsed:o,onSetFieldSetCollapsed:s,onFieldGroupSelect:d}=Zn(),{member:c,renderAnnotation:u,renderBlock:m,renderField:p,renderInlineBlock:h,renderInput:f,renderItem:g,renderPreview:b}=e,v=Ql(),y=l.useRef(),x=l.useRef(),w=Xe(qe);rn(c.field.focused,(X,le)=>{var me;!X&&le&&((me=y.current)==null||me.focus())});const C=l.useCallback(X=>{X.currentTarget===X.target&&X.currentTarget===y.current&&n(c.field.path)},[c.field.path,n]),T=l.useCallback(X=>{X.currentTarget===X.target&&X.currentTarget===y.current&&t(c.field.path)},[c.field.path,t]),j=l.useCallback(X=>{const le=je.from(X).patches;if(le.some(me=>me.type==="unset"&&me.path.length===1)){const me=Pm(c.field.value||[],le);if(Array.isArray(me)&&!me.length){a(je.from(we([c.name])));return}}a(je.from(X).prepend(Tn([])).prefixAll(c.name))},[a,c.name,c.field.value]),A=l.useCallback(X=>{o(c.field.path,X)},[o,c.field.path]),M=l.useCallback(()=>{o(c.field.path,!0)},[o,c.field.path]),S=l.useCallback(()=>{o(c.field.path,!1)},[o,c.field.path]),N=l.useCallback(X=>{j(X.length===0?we():be(X))},[j]),D=l.useCallback(X=>{const{value:le=[]}=c.field;X.fromIndex!==X.toIndex&&N(GP(le,X.fromIndex,X.toIndex))},[c.field,N]),_=l.useCallback(X=>{const{value:le=[]}=c.field;N(le.concat(X))},[c.field,N]),F=l.useCallback(X=>{const{value:le=[]}=c.field;N([X].concat(le||[]))},[c.field,N]),R=l.useCallback(X=>{const{value:le=[]}=c.field,me=X.referenceIndex+(X.position==="before"?-1:0);N(qP(me,le,X.items))},[c.field,N]),$=l.useCallback(X=>{j(we([X]))},[j]),O=l.useCallback(X=>{n(c.field.path.concat([X]))},[c.field.path,n]),V=l.useMemo(()=>({onBlur:T,onFocus:C,id:c.field.id,ref:y,"aria-describedby":Si(c.field.id,c.field.schemaType.description)}),[T,C,c.field.id,c.field.schemaType.description]),H=l.useMemo(()=>JP(c.field.schemaType.of),[c.field.schemaType.of]),J=l.useCallback((X,le)=>Xd(le,"text/*")?H:null,[H]),q=l.useCallback(({file:X,schemaType:le,uploader:me})=>{const G=me.upload(w,X,le).pipe(K(ce=>je.from(ce.patches||[])),bt(ce=>j(ce.patches)));x.current&&x.current.unsubscribe(),x.current=G.subscribe()},[w,j]),oe=l.useMemo(()=>({level:c.field.level,members:c.field.members,value:c.field.value,readOnly:c.field.readOnly,onSetCollapsed:A,schemaType:c.field.schemaType,changed:c.field.changed,id:c.field.id,elementProps:V,path:c.field.path,focusPath:c.field.focusPath,focused:c.field.focused,onChange:j,onInsert:R,onMoveItem:D,onItemRemove:$,onItemAppend:_,onItemPrepend:F,validation:c.field.validation,presence:c.field.presence,resolveUploader:J,onUpload:q,renderAnnotation:u,renderBlock:m,renderInlineBlock:h,renderInput:f,renderItem:g,onIndexFocus:O,renderPreview:b}),[c.field.level,c.field.members,c.field.value,c.field.readOnly,c.field.schemaType,c.field.changed,c.field.id,c.field.path,c.field.focusPath,c.field.focused,c.field.validation,c.field.presence,A,V,j,R,D,$,_,F,J,q,u,m,h,f,g,O,b]),ie=l.useMemo(()=>f(oe),[oe,f]),te=l.useMemo(()=>({actions:v,name:c.name,index:c.index,level:c.field.level,value:c.field.value,title:c.field.schemaType.title,description:c.field.schemaType.description,collapsible:c.collapsible,collapsed:c.collapsed,onExpand:S,changed:c.field.changed,onCollapse:M,schemaType:c.field.schemaType,inputId:c.field.id,path:c.field.path,presence:c.field.presence,validation:c.field.validation,children:ie,inputProps:oe}),[v,c.name,c.index,c.field.level,c.field.value,c.field.schemaType,c.field.changed,c.field.id,c.field.path,c.field.presence,c.field.validation,c.collapsible,c.collapsed,S,M,ie,oe]);return i.jsx(Jo,{onFieldGroupSelect:d,onChange:j,onPathOpen:r,onSetFieldSetCollapsed:s,onSetPathCollapsed:o,onPathBlur:t,onPathFocus:n,children:l.useMemo(()=>p(te),[te,p])})}function QP(e){return pa(e.field.schemaType)}function eN(e){return ua(e.field.schemaType)&&e.field.schemaType.of.every(t=>$d(t))}function Cx(e){return ua(e.field.schemaType)&&e.field.schemaType.of.every(t=>pa(t))}const tN=function(e){const{onPathBlur:t,onPathFocus:n,onChange:a,onPathOpen:r,onSetPathCollapsed:o,onSetFieldSetCollapsed:s,onFieldGroupSelect:d}=Zn(),{member:c,renderAnnotation:u,renderBlock:m,renderField:p,renderInlineBlock:h,renderInput:f,renderItem:g,renderPreview:b}=e,v=Ql(),y=l.useRef(),x=l.useRef(c.field.value);l.useEffect(()=>{x.current=c.field.value},[c.field.value]),rn(c.field.focused,(ie,te)=>{var X;!ie&&te&&((X=y.current)==null||X.focus())});const w=l.useCallback(()=>{t(c.field.path)},[c.field.path,t]),C=l.useCallback(()=>{n(c.field.path)},[c.field.path,n]),T=l.useCallback(ie=>{n(c.field.path.concat(ie))},[c.field.path,n]),j=l.useCallback(ie=>{if(c.field.path.length!==0){const te=je.from(ie).patches;if(x.current=Pm(x.current||{},te),x.current&&nk(x.current)){a(je.from(we([c.name])));return}}a(je.from(ie).prepend(Tn(Em(c.field.schemaType))).prefixAll(c.name))},[a,c,x]),A=l.useCallback(()=>{o(c.field.path,!0)},[o,c.field.path]),M=l.useCallback(()=>{o(c.field.path,!1)},[o,c.field.path]),S=l.useCallback(ie=>{o(c.field.path.concat(ie),!0)},[o,c.field.path]),N=l.useCallback(ie=>{o(c.field.path.concat(ie),!1)},[o,c.field.path]),D=l.useCallback(ie=>{r(c.field.path.concat(ie))},[r,c.field.path]),_=l.useCallback(()=>{r(c.field.path)},[r,c.field.path]),F=l.useCallback(ie=>{s(c.field.path.concat(ie),!1)},[s,c.field.path]),R=l.useCallback(ie=>{s(c.field.path.concat(ie),!0)},[s,c.field.path]),$=l.useCallback(()=>{r(c.field.path)},[r,c.field.path]),O=l.useCallback(()=>{r(c.field.path.slice(0,-1))},[r,c.field.path]),V=l.useCallback(ie=>{d(c.field.path,ie)},[d,c.field.path]),H=l.useMemo(()=>({onBlur:w,onFocus:C,id:c.field.id,ref:y,"aria-describedby":Si(c.field.id,c.field.schemaType.description)}),[w,C,c.field.id,c.field.schemaType.description]),J=l.useMemo(()=>({elementProps:H,level:c.field.level,members:c.field.members,value:c.field.value,readOnly:c.field.readOnly,validation:c.field.validation,presence:c.field.presence,schemaType:c.field.schemaType,changed:c.field.changed,id:c.field.id,onFieldGroupSelect:V,onFieldOpen:D,onFieldClose:_,onFieldCollapse:S,onFieldExpand:N,onFieldSetExpand:F,onFieldSetCollapse:R,onPathFocus:T,path:c.field.path,focusPath:c.field.focusPath,focused:c.field.focused,groups:c.field.groups,onChange:j,renderAnnotation:u,renderBlock:m,renderField:p,renderInlineBlock:h,renderInput:f,renderItem:g,renderPreview:b}),[H,c.field.level,c.field.members,c.field.value,c.field.readOnly,c.field.validation,c.field.presence,c.field.schemaType,c.field.changed,c.field.id,c.field.path,c.field.focusPath,c.field.focused,c.field.groups,V,D,_,S,N,F,R,T,j,u,m,p,h,f,g,b]),q=l.useMemo(()=>f(J),[J,f]),oe=l.useMemo(()=>({actions:v,name:c.name,index:c.index,level:c.field.level,value:c.field.value,validation:c.field.validation,presence:c.field.presence,title:c.field.schemaType.title,description:c.field.schemaType.description,collapsible:c.collapsible,collapsed:c.collapsed,onCollapse:A,onExpand:M,open:c.open,changed:c.field.changed,onOpen:$,onClose:O,schemaType:c.field.schemaType,inputId:c.field.id,path:c.field.path,children:q,inputProps:J}),[v,c.name,c.index,c.field.level,c.field.value,c.field.validation,c.field.presence,c.field.schemaType,c.field.changed,c.field.id,c.field.path,c.collapsible,c.collapsed,c.open,A,M,$,O,q,J]);return i.jsx(Jo,{onFieldGroupSelect:d,onChange:j,onSetFieldSetCollapsed:s,onPathOpen:r,onSetPathCollapsed:o,onPathBlur:t,onPathFocus:n,children:l.useMemo(()=>p(oe),[oe,p])})};function nN(e){const{member:t,renderInput:n,renderField:a}=e,r=Ql(),o=l.useRef(),[s,d]=l.useState(),{onPathBlur:c,onPathFocus:u,onChange:m}=Zn();l.useEffect(()=>{var C;t.field.focused&&((C=o.current)==null||C.focus())},[t.field.focused]);const p=l.useCallback(()=>{c(t.field.path)},[t.field.path,c]),h=l.useCallback(()=>{u(t.field.path)},[t.field.path,u]),f=l.useCallback(C=>{m(je.from(C).prefixAll(t.name))},[m,t.name]),g=l.useCallback(C=>{let T=C.currentTarget.value;if(jr(t.field.schemaType)){if(T=C.currentTarget.valueAsNumber,T>Number.MAX_SAFE_INTEGER||T<Number.MIN_SAFE_INTEGER)return}else kl(t.field.schemaType)&&(T=C.currentTarget.checked);const j=T===""||typeof T=="number"&&isNaN(T);jr(t.field.schemaType)&&d(j?void 0:C.currentTarget.value),m(je.from(j?we():be(T)).prefixAll(t.name))},[t.name,t.field.schemaType,m]),b=l.useMemo(()=>t.field.validation.filter(C=>C.level==="error").map(C=>C.message).join(`
`),[t.field.validation])||void 0,v=l.useMemo(()=>({onBlur:p,onFocus:h,id:t.field.id,ref:o,onChange:g,value:dx(t.field.schemaType,t.field.value,s),readOnly:!!t.field.readOnly,placeholder:t.field.schemaType.placeholder,"aria-describedby":Si(t.field.id,t.field.schemaType.description)}),[p,h,g,t.field.id,t.field.readOnly,t.field.schemaType,t.field.value,s]),y=l.useMemo(()=>({value:t.field.value,readOnly:t.field.readOnly,schemaType:t.field.schemaType,changed:t.field.changed,id:t.field.id,path:t.field.path,focused:t.field.focused,level:t.field.level,onChange:f,validation:t.field.validation,presence:t.field.presence,validationError:b,elementProps:v}),[t.field.value,t.field.readOnly,t.field.schemaType,t.field.changed,t.field.id,t.field.path,t.field.focused,t.field.level,t.field.validation,t.field.presence,f,b,v]),x=l.useMemo(()=>n(y),[y,n]),w=l.useMemo(()=>({actions:r,changed:t.field.changed,children:x,description:t.field.schemaType.description,index:t.index,inputId:t.field.id,inputProps:y,level:t.field.level,name:t.name,path:t.field.path,presence:t.field.presence,schemaType:t.field.schemaType,title:t.field.schemaType.title,validation:t.field.validation,value:t.field.value}),[r,t.field.level,t.field.value,t.field.schemaType,t.field.id,t.field.path,t.field.validation,t.field.presence,t.field.changed,t.name,t.index,x,y]);return i.jsx(i.Fragment,{children:a(w)})}const Zo=l.memo(function(e){const{member:t,renderAnnotation:n,renderBlock:a,renderField:r,renderInlineBlock:o,renderInput:s,renderItem:d,renderPreview:c}=e;return QP(t)?i.jsx(tN,{member:t,renderAnnotation:n,renderBlock:a,renderField:r,renderInlineBlock:o,renderInput:s,renderItem:d,renderPreview:c}):eN(t)?i.jsx(ZP,{member:t,renderAnnotation:n,renderBlock:a,renderField:r,renderInput:s,renderInlineBlock:o,renderItem:d,renderPreview:c}):Cx(t)?i.jsx(KP,{member:t,renderAnnotation:n,renderBlock:a,renderField:r,renderInlineBlock:o,renderInput:s,renderItem:d,renderPreview:c}):i.jsx(nN,{member:t,renderField:r,renderInput:s})}),aN={warning:"caution",error:"critical"},iN=k(I)`
  border-top: 1px solid var(--card-border-color);
`;function fa(e){const{children:t,status:n="warning",suffix:a,title:r,...o}=e;return i.jsxs(U,{radius:2,tone:aN[n],...o,"data-ui":"Alert",children:[i.jsxs(P,{padding:4,children:[i.jsx(I,{children:i.jsxs(E,{size:1,children:[n==="warning"&&i.jsx(Wt,{}),n==="error"&&i.jsx(Aa,{})]})}),i.jsxs(I,{flex:1,marginLeft:3,children:[i.jsx(E,{size:1,weight:"medium",children:r}),t&&i.jsx(I,{marginTop:3,children:t})]})]}),a&&i.jsx(iN,{children:a})]})}const rN=k.button`
  display: block;
  -webkit-font-smoothing: inherit;
  appearance: none;
  font: inherit;
  background: none;
  width: 100%;
  text-align: left;
  border: 0;
  margin: 0;
  padding: 0;
  outline: none;
`,oN=k(My)`
  transform: ${e=>e.open?"rotate(90deg)":""};
`,sN=k(P)`
  cursor: default;
`,lN=k(I)`
  & > div > svg {
    transform: rotate(0);
    transition: transform 100ms;
  }

  &[data-open] > div > svg {
    transform: rotate(90deg);
  }
`;function Ji(e){const{children:t,open:n,icon:a,title:r="Details",...o}=e,[s,d]=l.useState(n||!1),c=l.useCallback(()=>d(u=>!u),[]);return l.useEffect(()=>d(n||!1),[n]),i.jsxs(I,{...o,children:[i.jsx(rN,{type:"button",onClick:c,children:i.jsx(sN,{align:"center",children:i.jsxs(et,{children:[i.jsx(lN,{"data-open":s?"":void 0,children:i.jsx(E,{size:1,children:i.jsx(oN,{open:s})})}),a&&i.jsx(I,{marginLeft:1,children:a}),i.jsx(I,{flex:1,marginLeft:1,children:i.jsx(E,{size:1,weight:"medium",children:r})})]})})}),i.jsx(I,{hidden:!s,marginTop:3,children:t})]})}const wx=["yes","true","1"],Tx=["false","no","false","0","null"],cN=wx.concat(Tx),xs=()=>!0,dN=e=>t=>t&&t[e],uN=e=>t=>(t&&t._type)===e;function mN(e){const t=new Date(e.getTime()+e.getTimezoneOffset()*60*1e3),n=e.getTimezoneOffset()/60,a=e.getHours();return t.setHours(a-n),t}function pN(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return null}const qc={string:{number:{test:Number,convert:Number},boolean:{test:e=>cN.includes(e.toLowerCase()),convert:e=>wx.includes(e.toLowerCase())||!Tx.includes(e.toLowerCase())},richDate:{test:e=>pi(e),convert:e=>({_type:"richDate",local:mN(new Date(e)).toJSON(),utc:new Date(e).toJSON(),timezone:pN(),offset:new Date().getTimezoneOffset()})}},date:{richDate:{test:uN("date"),convert:e=>Object.assign({},e,{_type:"richDate"})}},richDate:{datetime:{test:dN("utc"),convert:e=>e.utc}},number:{string:{test:xs,convert:String},boolean:{test:xs,convert:Number}},boolean:{string:{test:xs,convert:e=>e?"Yes":"No"},number:{test:xs,convert:Number}}};function hN({value:e,targetType:t,onChange:n}){const a=l.useMemo(()=>({...e,_type:t}),[t,e]),r=l.useCallback(()=>n(je.from(Tn(t,["_type"])),a),[a,n,t]),{t:o}=L();return i.jsx(Z,{onClick:r,text:o("inputs.untyped-value.convert-button.text",{targetType:t})})}function fN({value:e,onChange:t,validTypes:n}){const a=l.useMemo(()=>({...e,_type:n[0]}),[n,e]),r=l.useCallback(()=>t(je.from(we()),a),[a,t]),{t:o}=L();return i.jsx(Z,{onClick:r,tone:"critical",text:o("inputs.untyped-value.unset-item-button.text")})}function gN({validTypes:e,value:t,onChange:n}){const a=ot(),r=e.length===1,o=a.has(e[0]),{t:s}=L();return i.jsx(fa,{status:"warning",title:i.jsx(i.Fragment,{children:i.jsx(Pe,{t:s,i18nKey:"inputs.untyped-value.title"})}),children:i.jsx(Ji,{open:Ya,title:s("inputs.untyped-value.details.title"),children:i.jsxs(B,{space:3,children:[i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:s,i18nKey:"inputs.untyped-value.description"})}),r&&!o&&i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:s,i18nKey:"inputs.untyped-value.details.description"})}),!r&&i.jsx(E,{as:"p",muted:!0,size:1,children:s("inputs.untyped-value.details.multi-type-description")}),!r&&i.jsx(B,{as:"ul",space:2,children:e.map(d=>i.jsx(E,{as:"li",muted:!0,size:1,children:i.jsx("code",{children:d})},d))}),i.jsxs(B,{space:2,children:[i.jsx(E,{as:"h4",weight:"medium",size:1,children:s("inputs.untyped-value.details.json-dump-prefix")}),i.jsx(U,{border:!0,overflow:"auto",padding:2,radius:2,tone:"inherit",children:i.jsx(xn,{language:"json",children:JSON.stringify(t,null,2)})})]}),i.jsxs(Ze,{columns:[1,2,2],gap:1,children:[r&&i.jsx(hN,{onChange:n,targetType:e[0],value:t}),i.jsx(fN,{onChange:n,validTypes:e,value:t})]})]})})})}function bN(e,t,n){return t in qc?Object.keys(qc[t]).filter(a=>n.includes(a)).map(a=>({from:t,to:a,...qc[t][a]})).filter(a=>a.test(e)):[]}const jx=l.forwardRef((e,t)=>{const{value:n,actualType:a,validTypes:r,onChange:o}=e;l.useImperativeHandle(t,()=>({focus:()=>{}}));const s=l.useCallback(()=>{o(je.from(we()))},[o]),d=l.useCallback(p=>{o(je.from(be(p)))},[o]),c=l.useMemo(()=>bN(n,a,r),[n,a,r]),{t:u}=L();if(Ci(n)&&!("_type"in n))return i.jsx(gN,{value:n,validTypes:r,onChange:o});const m=i.jsx(B,{padding:2,children:i.jsx(Z,{onClick:s,tone:"critical",text:u("inputs.invalid-value.reset-button.text")})});return i.jsxs(fa,{status:"error",suffix:m,title:u("inputs.invalid-value.title"),children:[i.jsx(E,{as:"p",muted:!0,size:1,children:u("inputs.invalid-value.description")}),i.jsx(Ji,{marginTop:4,open:Ya,title:u("inputs.invalid-value.details.title"),children:i.jsxs(B,{space:3,children:[r.length===1&&i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:u,i18nKey:"inputs.invalid-value.details.description",values:{validType:r[0]}})}),r.length===1&&i.jsx(E,{as:"p",muted:!0,size:1,children:u("inputs.invalid-value.details.possible-reason")}),r.length!==1&&i.jsx(E,{as:"p",muted:!0,size:1,children:u("inputs.invalid-value.details.multi-type-description")}),r.length!==1&&i.jsx(B,{as:"ul",space:2,children:r.map(p=>i.jsx(E,{as:"li",children:i.jsx("code",{children:p})},p))}),i.jsxs(B,{marginTop:2,space:2,children:[i.jsx(E,{size:1,weight:"medium",children:i.jsx(Pe,{t:u,i18nKey:"inputs.invalid-value.current-type",values:{actualType:a}})}),i.jsx(U,{border:!0,padding:2,radius:2,tone:"inherit",children:i.jsx(xn,{language:"json",size:1,children:JSON.stringify(n,null,2)})})]}),c.length>0&&i.jsx(B,{space:1,children:c.map(p=>i.jsx(yN,{converter:p,onConvert:d,value:n},`${p.from}-${p.to}`))})]})})]})});jx.displayName="InvalidValueInput";function yN({converter:e,onConvert:t,value:n}){const a=l.useCallback(()=>t(e.convert(n)),[e,t,n]),{t:r}=L();return i.jsx(Z,{onClick:a,text:r("inputs.invalid-value.convert-button.text",{targetType:e.to})})}function vN(e){const{error:t,onChange:n}=e,a=l.useCallback(()=>{n(je.from((t.duplicates||[]).map(([o,s])=>be(`${s}_deduped_${o}`,[o,"_key"]))))},[t.duplicates,n]),{t:r}=L();return i.jsx(Xi,{title:t.schemaType.title,description:t.schemaType.description,children:i.jsxs(fa,{status:"warning",suffix:i.jsx(B,{padding:2,children:i.jsx(Z,{onClick:a,text:r("form.error.duplicate-keys-alert.generate-button.text"),tone:"caution"})}),title:r("form.error.duplicate-keys-alert.title"),children:[i.jsx(E,{as:"p",muted:!0,size:1,children:r("form.error.duplicate-keys-alert.summary")}),i.jsx(Ji,{marginTop:4,open:Ya,title:r("form.error.duplicate-keys-alert.details.title"),children:i.jsxs(B,{space:3,children:[i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:r,i18nKey:"form.error.duplicate-keys-alert.details.description"})}),i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:r,i18nKey:"form.error.duplicate-keys-alert.details.additional-description"})})]})})]})})}function xN(e){const{error:t,onChange:n}=e,a=l.useCallback(()=>{n(je.from((t.value||[]).map((o,s)=>Tn(Sl(),[s,"_key"]))))},[t.value,n]),{t:r}=L();return i.jsx(Xi,{title:t.schemaType.title,description:t.schemaType.description,children:i.jsxs(fa,{status:"warning",suffix:i.jsx(B,{padding:2,children:i.jsx(Z,{onClick:a,text:r("form.error.missing-keys-alert.add-button.text"),tone:"caution"})}),title:r("form.error.missing-keys-alert.title"),children:[i.jsx(E,{as:"p",muted:!0,size:1,children:r("form.error.missing-keys-alert.summary")}),i.jsx(Ji,{marginTop:4,open:Ya,title:r("form.error.missing-keys-alert.details.title"),children:i.jsxs(B,{space:3,children:[i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:r,i18nKey:"form.error.missing-keys-alert.details.description"})}),i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:r,i18nKey:"form.error.missing-keys-alert.details.additional-description"})})]})})]})})}function CN(e){const{error:t,onChange:n}=e,a=()=>{const o=(t.value||[]).flatMap((s,d)=>Ci(s)?[]:[d]).reverse().map(s=>we([s]));n(je.from(o))},{t:r}=L();return i.jsx(Xi,{title:t.schemaType.title,description:t.schemaType.description,children:i.jsxs(fa,{status:"error",suffix:i.jsx(B,{padding:2,children:i.jsx(Z,{onClick:a,text:r("form.error.mixed-array-alert.remove-button.text"),tone:"critical"})}),title:r("form.error.mixed-array-alert.title"),children:[i.jsx(E,{as:"p",muted:!0,size:1,children:r("form.error.mixed-array-alert.summary")}),i.jsx(Ji,{marginTop:4,open:Ya,title:r("form.error.mixed-array-alert.details.title"),children:i.jsx(B,{space:3,children:i.jsx(E,{as:"p",muted:!0,size:1,children:r("form.error.mixed-array-alert.details.description")})})})]})})}function ec(e){const{member:t}=e,{onChange:n}=Zn(),a=l.useCallback(o=>{n(je.from(o).prefixAll(t.fieldName))},[n,t.fieldName]),{t:r}=L();return t.error.type==="INCOMPATIBLE_TYPE"?i.jsx(jx,{value:t.error.value,onChange:a,actualType:t.error.resolvedValueType,validTypes:[t.error.expectedSchemaType.name]}):t.error.type==="MISSING_KEYS"?i.jsx(xN,{error:t.error,onChange:a}):t.error.type==="DUPLICATE_KEYS"?i.jsx(vN,{error:t.error,onChange:a}):t.error.type==="MIXED_ARRAY"?i.jsx(CN,{onChange:a,error:t.error}):i.jsx(I,{children:r("member-field-error.unexpected-error",{error:e.member.error.type})})}const Fm=l.memo(function(e){var t;const{member:n,renderAnnotation:a,renderBlock:r,renderField:o,renderInlineBlock:s,renderInput:d,renderItem:c,renderPreview:u}=e,{onSetFieldSetCollapsed:m}=Zn(),p=l.useCallback(()=>{m(n.fieldSet.path,!0)},[n.fieldSet.path,m]),h=l.useCallback(()=>{m(n.fieldSet.path,!1)},[n.fieldSet.path,m]);return i.jsx(Zl,{title:n.fieldSet.title||xl(n.fieldSet.name),description:n.fieldSet.description,level:n.fieldSet.level,collapsible:n.fieldSet.collapsible,collapsed:n.fieldSet.collapsed,onCollapse:p,onExpand:h,columns:(t=n==null?void 0:n.fieldSet)==null?void 0:t.columns,"data-testid":`fieldset-${n.fieldSet.name}`,inputId:n.fieldSet.name,children:n.fieldSet.members.map(f=>f.kind==="error"?i.jsx(ec,{member:f},n.key):i.jsx(Zo,{member:f,renderAnnotation:a,renderBlock:r,renderField:o,renderInlineBlock:s,renderInput:d,renderItem:c,renderPreview:u},f.key))})}),wN=l.memo(function(e){const{member:t,renderAnnotation:n,renderBlock:a,renderInput:r,renderInlineBlock:o,renderField:s,renderItem:d,renderPreview:c}=e;return t.kind==="field"?i.jsx(Zo,{member:t,renderAnnotation:n,renderBlock:a,renderInlineBlock:o,renderInput:r,renderField:s,renderItem:d,renderPreview:c},t.key):t.kind==="error"?i.jsx(ec,{member:t},t.key):t.kind==="fieldSet"?i.jsx(Fm,{member:t,renderAnnotation:n,renderBlock:a,renderInlineBlock:o,renderInput:r,renderField:s,renderItem:d,renderPreview:c},t.key):(console.warn(new Error(`Unhandled member kind ${t.kind}`)),null)});function TN(e){const{members:t,renderAnnotation:n,renderBlock:a,renderInput:r,renderInlineBlock:o,renderField:s,renderItem:d,renderPreview:c}=e,u=l.useMemo(()=>t.map(m=>i.jsx(wN,{member:m,renderAnnotation:n,renderBlock:a,renderField:s,renderInlineBlock:o,renderInput:r,renderItem:d,renderPreview:c},m.key)),[t,n,a,s,o,r,d,c]);return i.jsx(i.Fragment,{children:u})}function qh(e){return pa(e.schemaType)}function Yh(e){return ua(e.schemaType)}const to=({children:e})=>e;function jN(e){return"absolutePath"in e}const Rm=l.memo(function(e){const t=l.useMemo(()=>jN(e)?e.absolutePath:e.path.concat(e.relativePath),[e]),n=l.useCallback(()=>i.jsx(i.Fragment,{children:"Missing destination render function"}),[]);return i.jsx(kN,{...e,absolutePath:t,destinationRenderAnnotation:e.renderAnnotation||n,destinationRenderBlock:e.renderBlock||n,destinationRenderField:e.renderField,destinationRenderInlineBlock:e.renderInlineBlock||n,destinationRenderInput:e.renderInput,destinationRenderItem:e.renderItem,destinationRenderPreview:e.renderPreview})}),kN=l.memo(function e(t){const{absolutePath:n,destinationRenderAnnotation:a,destinationRenderBlock:r,destinationRenderField:o,destinationRenderInlineBlock:s,destinationRenderInput:d,destinationRenderItem:c,destinationRenderPreview:u}=t,{t:m}=L(),p=l.useCallback(y=>{if(nt(y.path,n)||Jt(n,y.path))return d(y);if(!qh(y)&&!Yh(y))throw new Error(`Expected either object input props or array input props for: ${JSON.stringify(y.path)}`);return i.jsx(e,{...y,absolutePath:n,destinationRenderAnnotation:a,destinationRenderBlock:r,destinationRenderInput:d,destinationRenderItem:c,destinationRenderField:o,destinationRenderInlineBlock:s,destinationRenderPreview:u})},[n,a,r,o,s,d,c,u]),h=l.useCallback(y=>Jt(n,y.path)&&(t.includeField||!nt(n,y.path))?o(y):to(y),[n,o,t.includeField]),f=l.useCallback(y=>Jt(n,y.path)&&(t.includeItem||!nt(n,y.path))?c(y):to(y),[n,c,t.includeItem]),g=l.useCallback(y=>Jt(n,y.path)&&(t.includeItem||!nt(n,y.path))?r(y):to(y),[n,r,t.includeItem]),b=l.useCallback(y=>Jt(n,y.path)&&(t.includeItem||!nt(n,y.path))?s(y):to(y),[n,s,t.includeItem]),v=l.useCallback(y=>Jt(n,y.path)&&(t.includeItem||!nt(n,y.path))?a(y):to(y),[n,a,t.includeItem]);if(Yh(t)){const y=Fc(t.path,n),x=t.members.find(w=>w.kind=="item"&&jn(y[0])&&w.key===y[0]._key);if(!x){const w=Nn(t.path),C=Fc(t.path,n);if(jn(C[0])){const j=C[0]._key;return i.jsx("div",{children:i.jsx(Pe,{t:m,i18nKey:"form.error.no-array-item-at-key",values:{key:j,path:w}})})}const T=Ri(C[0])?C[0]:C[0][0];return i.jsx("div",{children:i.jsx(Pe,{t:m,i18nKey:"form.error.no-array-item-at-index",values:{index:T,path:w}})})}return x.kind==="error"?i.jsx(nP,{member:x}):i.jsx(Im,{member:x,renderAnnotation:v,renderBlock:g,renderInput:p,renderField:h,renderInlineBlock:b,renderItem:f,renderPreview:u})}if(qh(t)){const y=Fc(t.path,n),x=t.members.find(T=>T.kind=="field"&&y[0]===T.name),w=t.members.filter(T=>T.kind==="fieldSet").flatMap(T=>{var j;return T.kind==="fieldSet"&&((j=T.fieldSet)==null?void 0:j.members)||[]}).find(T=>T.kind==="field"&&T.name===y[0]),C=x||w;if(!C){const T=typeof y[0]=="string"?y[0]:JSON.stringify(y[0]);return i.jsx("div",{children:m("form.error.field-not-found",{fieldName:T})})}return i.jsx(Zo,{member:C,renderAnnotation:v,renderBlock:g,renderInput:p,renderInlineBlock:b,renderField:h,renderItem:f,renderPreview:u})}throw new Error("FormInput can only be used with arrays or objects")});function tc(e){const t=l.useContext(fm);if(!t)throw new Error("Form context not provided");return t.find(n=>n.key===e)}function AN(){const e=l.useContext(fm);if(!e)throw new Error("Form context not provided");return e}function SN(e){const{members:t,path:n,schemaType:a,renderAnnotation:r,renderField:o,renderBlock:s,renderInput:d,renderItem:c,renderInlineBlock:u,renderPreview:m,onPathFocus:p}=e,h=l.useRef([]);return l.useMemo(()=>{var f;const g=[];for(const v of t)if(v.kind==="item")if(!Hl(v.item.schemaType))g.push({kind:"objectBlock",member:v,node:v.item});else{(v.item.validation.length>0||v.item.changed||(f=v.item.presence)!=null&&f.length||v.open||v.item.focusPath.length||v.item.focused)&&g.push({kind:"textBlock",member:v,node:v.item});const y=v.item.members.find(w=>w.kind==="field"&&w.name==="children");if(y&&y.kind==="field"&&Cx(y))for(const w of y.field.members)w.kind==="item"&&w.item.schemaType.name!=="span"&&g.push({kind:"inlineObject",member:w,node:w.item});const x=v.item.members.filter(XE).find(w=>w.name==="markDefs");if(x)for(const w of x.field.members)w.kind==="item"&&w.item.schemaType.jsonType==="object"&&g.push({kind:"annotation",member:w,node:w.item})}const b=g.map(v=>{const y=Nn(v.node.path),x=h.current.find(T=>T.key===y),w=v.kind!=="textBlock";let C=null;if(w&&v.member!==(x==null?void 0:x.member)||v.node!==(x==null?void 0:x.node)){const T=N=>({...N.elementProps,onFocus:()=>{}}),j=N=>{const D=v.member.item.path.concat(N);N.length!==0&&p(D.slice(n.length,D.length))},A=N=>D=>{if(D.type==="unset"&&D.path.length===0){N.onChange(be({_type:v.member.item.schemaType.name,_key:v.member.key},D.path));return}N.onChange(D)},M=N=>nt(N.path,v.member.item.path)?d({...N,onChange:A(N),onPathFocus:j,elementProps:T(N)}):d(N),S={absolutePath:bi(v.node.path),includeField:!1,members:t,path:bi(n),renderAnnotation:r,renderBlock:s,renderField:o,renderInlineBlock:u,renderInput:M,renderItem:c,renderPreview:m,schemaType:a};C=i.jsx(Rm,{...S})}return x?(x.member=v.member,x.node=v.node,x.input=C||x.input,x):{kind:v.kind,key:y,member:v.member,node:v.node,elementRef:l.createRef(),input:C}});return h.current=b,b},[t,p,n,r,s,o,u,d,c,m,a])}const _N=k.span(e=>{var t,n,a,r;const{$toneKey:o="default",theme:s}=e;return ae`
      text-decoration: none;
      display: inline;
      background-color: ${(t=s.sanity.color.selectable)==null?void 0:t[o].enabled.bg};
      border-bottom: 1px dashed ${(n=s.sanity.color.selectable)==null?void 0:n[o].enabled.fg};
      color: ${(a=s.sanity.color.selectable)==null?void 0:a[o].enabled.fg};

      &[data-link] {
        border-bottom: 1px solid ${(r=s.sanity.color.selectable)==null?void 0:r[o].enabled.fg};
      }

      &[data-custom-markers] {
        background-color: ${s.sanity.color.dark?Ge.purple[950].hex:Ge.purple[50].hex};
      }

      &[data-warning] {
        background-color: ${s.sanity.color.muted.caution.hovered.bg};
      }

      &[data-error] {
        background-color: ${s.sanity.color.muted.critical.hovered.bg};
      }
    `}),EN=k(I).attrs({forwardedAs:"span"})`
  max-width: 250px;
`,IN=["top","bottom"];function MN(e){const{annotationOpen:t,floatingBoundary:n,onOpen:a,onRemove:r,referenceBoundary:o,referenceElement:s,selected:d,title:c}=e,[u,m]=l.useState(!1),[p,h]=l.useState(!1),[f,g]=l.useState(null),b=l.useRef(null),{sanity:v}=Lr(),{t:y}=L(),x=l.useRef(null),w=v.color.dark?"light":"dark",C=l.useCallback(N=>{m(N),N?l.startTransition(()=>{h(N)}):h(N)},[]),T=l.useMemo(()=>f?{getBoundingClientRect:()=>f}:null,[f]);Pa(l.useCallback(N=>{p&&N.key==="Escape"&&C(!1)},[C,p]));const j=l.useCallback(()=>{if(t){C(!1),g(null);return}const N=window.getSelection();if(!N||N.rangeCount===0)return;const D=N.getRangeAt(0);if(!(s!=null&&s.contains(D.commonAncestorContainer))){C(!1),g(null);return}const _=D==null?void 0:D.getBoundingClientRect();_&&(g(_),C(!0))},[t,s,C]);l.useEffect(()=>(document.addEventListener("selectionchange",j,{passive:!0}),()=>{document.removeEventListener("selectionchange",j)}),[j]);const A=l.useCallback(()=>{C(!1),a()},[a,C]);l.useEffect(()=>{!t&&d&&f&&C(!0),t&&C(!1)},[t,d,f,C]);const M=l.useCallback(()=>{C(!1),r()},[r,C]),S=l.useCallback(()=>{b.current&&g(b.current.getBoundingClientRect())},[]);return l.useEffect(()=>{const N=window.getSelection();N&&N.rangeCount>0&&(b.current=N.getRangeAt(0))},[p]),l.useEffect(()=>{if(p&&o)return o.addEventListener("scroll",S),()=>o.removeEventListener("scroll",S);if(p)return o==null||o.addEventListener("scroll",S),()=>{o==null||o.removeEventListener("scroll",S)}},[p,o,S]),u?i.jsx(rt,{open:p,floatingBoundary:n,constrainSize:!0,content:i.jsx(I,{padding:1,"data-testid":"annotation-toolbar-popover",children:i.jsxs(P,{gap:1,children:[i.jsx(I,{padding:2,children:i.jsx(E,{weight:"medium",size:1,children:c})}),i.jsx(Z,{"aria-label":y("inputs.portable-text.action.edit-annotation-aria-label"),"data-testid":"edit-annotation-button",icon:Sr,mode:"bleed",onClick:A,tabIndex:0,tooltipProps:null}),i.jsx(Z,{"aria-label":y("inputs.portable-text.action.remove-annotation-aria-label"),"data-testid":"remove-annotation-button",icon:_t,mode:"bleed",onClick:M,tabIndex:0,tone:"critical",tooltipProps:null})]})}),fallbackPlacements:IN,placement:"top",portal:!0,preventOverflow:!0,ref:x,referenceBoundary:o,referenceElement:T,scheme:w}):null}const kx=e=>Array.isArray(e)?e.flatMap(kx):typeof e=="number"?[e]:e==="auto"?["auto"]:[],PN=e=>e==="dialog"||e==="popover"?e:void 0;function NN(e){var t;const n=(t=e.options)==null?void 0:t.modal;return typeof n=="object"&&n!==null?{type:PN(n.type),width:kx(n.width)}:void 0}function So(e){const{scrollElement:t,containerElement:n}=e;return i.jsx(d0.Provider,{value:{scrollElement:t,containerElement:n},children:e.children})}function ON(e){const{onClose:t,children:n,title:a,width:r=1,autoFocus:o}=e,s=l.useId(),[d,c]=l.useState(null),u=l.useRef(null);return i.jsx(En,{header:a,id:s,onClickOutside:t,onClose:t,portal:"default",width:r,contentRef:c,"data-testid":"default-edit-object-dialog",__unstable_autoFocus:o,children:i.jsx(Xo,{margins:[0,0,1,0],children:i.jsx(So,{scrollElement:d,containerElement:u,children:i.jsx(I,{ref:u,children:n})})})})}const FN=k(rt)`
  & > div {
    overflow: hidden;
    overflow: clip;
  }
`,RN=k(I)`
  /* Prevent overflow caused by change indicator */
  overflow-x: hidden;
  overflow-y: auto;
`,DN=k(I)`
  box-shadow: 0 1px 0 var(--card-shadow-outline-color);
  position: relative;
  z-index: 10;
  min-height: auto;
`,$N=["top","bottom"];function LN(e){const{floatingBoundary:t,referenceBoundary:n,referenceElement:a,width:r=1}=e,[o,s]=l.useState(!1);return l.useEffect(()=>{s(!0)},[]),i.jsx(FN,{content:i.jsx(BN,{...e}),constrainSize:!0,"data-testid":"popover-edit-dialog","data-ui":"PopoverEditDialog",fallbackPlacements:$N,floatingBoundary:t,open:o,overflow:"auto",placement:"bottom",portal:"default",preventOverflow:!0,referenceBoundary:n,referenceElement:a,width:r})}function BN(e){const{onClose:t,referenceBoundary:n,referenceElement:a,title:r,autoFocus:o}=e;Pa(l.useCallback(u=>{u.key==="Escape"&&t()},[t])),vt(t,a?[a]:[],n);const[s,d]=l.useState(null),c=l.useRef(null);return i.jsx(So,{scrollElement:s,containerElement:c,children:i.jsxs(P,{ref:c,direction:"column",height:"fill",children:[i.jsx(DN,{flex:"none",padding:1,children:i.jsxs(P,{align:"center",children:[i.jsx(I,{flex:1,padding:2,children:i.jsx(E,{weight:"medium",children:r})}),i.jsx(Z,{autoFocus:!!o,icon:un,mode:"bleed",onClick:t,tooltipProps:{content:"Close"}})]})}),i.jsx(RN,{flex:1,children:i.jsx(Xo,{margins:[0,0,1,0],children:i.jsx(I,{padding:3,ref:d,children:e.children})})})]})})}function Dm(e){const{autoFocus:t,defaultType:n,floatingBoundary:a,onClose:r,referenceBoundary:o,referenceElement:s,schemaType:d}=e,{t:c}=L(),u=l.useMemo(()=>NN(d),[d]),m=(u==null?void 0:u.type)||n,p=d.i18nTitleKey?c(d.i18nTitleKey):d.title||d.name,h=c("inputs.portable-text.annotation-editor.title",{schemaType:p}),f=l.useCallback(()=>{r()},[r]),g=u==null?void 0:u.width;return m==="popover"?i.jsx(LN,{autoFocus:t,floatingBoundary:a,onClose:f,referenceBoundary:o,referenceElement:s,title:i.jsx(i.Fragment,{children:h}),width:g,children:e.children}):i.jsx(ON,{onClose:f,title:h,width:g,autoFocus:t,children:e.children})}function VN(e){var t;const{children:n,editorNodeFocused:a,floatingBoundary:r,focused:o,onItemClose:s,onItemOpen:d,onPathFocus:c,path:u,readOnly:m,referenceBoundary:p,renderAnnotation:h,renderBlock:f,renderCustomMarkers:g,renderField:b,renderInlineBlock:v,renderInput:y,renderItem:x,renderPreview:w,schemaType:C,selected:T,value:j}=e,{Markers:A=Gv}=Na().__internal.components,M=Bt(),S=l.useMemo(()=>u.slice(0,u.length-2).concat(["markDefs",{_key:j._key}]),[u,j._key]),[N,D]=l.useState(null),_=tc(Nn(S)),{validation:F}=ql(_==null?void 0:_.node),R=Yl(u),$=l.useMemo(()=>i.jsx("span",{"data-annotation":"",children:n}),[n]),O=l.useCallback(()=>{_&&(ge.blur(M),d(_.node.path))},[M,_,d]),V=l.useCallback(()=>{s(),jm(j)&&ge.removeAnnotation(M,C),ge.focus(M)},[M,s,C,j]),H=l.useCallback(()=>{ge.removeAnnotation(M,C),ge.focus(M)},[M,C]),J=l.useMemo(()=>F.length>0||R.length>0?i.jsx(Ie,{placement:"bottom",portal:"default",content:i.jsx(EN,{children:i.jsx(A,{markers:R,renderCustomMarkers:g,validation:F})}),children:$}):void 0,[A,R,g,$,F]),q=Wr(u,!0),oe=l.useMemo(()=>q.filter(de=>nt(de.path,u)),[u,q]),ie=!!(_!=null&&_.member.open),te=_==null?void 0:_.input,X=(_==null?void 0:_.node.path)||lt,le=N,me=l.useMemo(()=>({__unstable_floatingBoundary:r,__unstable_referenceBoundary:p,__unstable_referenceElement:le,__unstable_textElementFocus:a,children:te,focused:o,markers:R,onClose:V,onOpen:O,onPathFocus:c,onRemove:H,open:ie,parentSchemaType:M.schemaTypes.block,path:X,presence:oe,readOnly:!!m,renderAnnotation:h,renderBlock:f,renderField:b,renderInlineBlock:v,renderInput:y,renderPreview:w,renderItem:x,renderDefault:Jd,schemaType:C,selected:T,textElement:J||$,validation:F,value:j}),[M.schemaTypes.block,a,r,o,te,ie,R,J,X,V,O,c,H,m,p,le,h,f,b,v,y,x,w,oe,C,T,$,F,j]),G=(t=C.components)==null?void 0:t.annotation,ce=l.useCallback(de=>{_!=null&&_.elementRef&&(_.elementRef.current=de),D(de)},[_]);return l.useMemo(()=>i.jsx("span",{ref:ce,style:void 0,children:G?i.jsx(G,{...me}):i.jsx(Jd,{...me})}),[G,me,ce])}const Jd=e=>{const{__unstable_floatingBoundary:t,__unstable_referenceBoundary:n,__unstable_referenceElement:a,children:r,focused:o,markers:s,onClose:d,onOpen:c,onRemove:u,open:m,readOnly:p,selected:h,schemaType:f,textElement:g,validation:b}=e,v=f.name==="link",y=b.some(j=>j.level==="error"),x=b.some(j=>j.level==="warning"),w=s.length>0,{t:C}=L(),T=l.useMemo(()=>y?"critical":x?"caution":v?"primary":"default",[v,y,x]);return i.jsxs(_N,{$toneKey:T,"aria-label":C("inputs.portable-text.annotation-aria-label"),"data-link":v?"":void 0,"data-error":y?"":void 0,"data-warning":x?"":void 0,"data-markers":w||void 0,onClick:p?c:void 0,children:[g,i.jsx(MN,{annotationOpen:m,floatingBoundary:t,onOpen:c,onRemove:u,referenceBoundary:n,referenceElement:a,selected:h,title:f.i18nTitleKey?C(f.i18nTitleKey):f.title||f.name}),m&&i.jsx(Dm,{defaultType:"popover",floatingBoundary:t,onClose:d,autoFocus:o,referenceBoundary:n,referenceElement:a,schemaType:f,children:r})]})};function Ax(){return l.useContext(yS)}function UN(e){const t=l.useMemo(()=>({id:e.id}),[e.id]);return i.jsx(Cv.Provider,{value:t,children:e.children})}function zN(){const e=l.useContext(Cv);if(!e)throw new Error("useDocumentId must be used within a DocumentIdProvider");return e.id}function nc(){return ft(zN())}function ac(e,t){return rn(t,l.useCallback((n,a)=>{e.current&&!n&&a&&kr(e.current,{scrollMode:"always"})},[e]))}const HN=k(E)`
  &[data-status='edited'] {
    --card-icon-color: var(--card-badge-caution-dot-color);
  }
  &[data-status='unpublished'] {
    --card-icon-color: var(--card-badge-default-dot-color);
    opacity: 0.5 !important;
  }
`;function $m({draft:e,published:t}){const n=!!e,a=!!t,r=l.useMemo(()=>n&&!a?"unpublished":"edited",[n,a]);return!n&&!a||!n&&a?null:i.jsx(HN,{"data-status":r,size:1,children:i.jsx(cA,{})})}function Sx(e){var t,n;const{id:a,layout:r,preview:o,refType:s,renderPreview:d,showTypeLabel:c}=e,u=yp(a),m=((t=o.draft)==null?void 0:t._id)||((n=o.published)==null?void 0:n._id)||a,p=l.useMemo(()=>({_id:m,_type:s.name}),[m,s.name]),{draft:h,published:f}=o,g=l.useMemo(()=>({children:i.jsx(I,{paddingLeft:3,children:i.jsxs(et,{space:3,children:[c&&i.jsx(Sn,{mode:"outline",children:s.title}),u&&u.length>0&&i.jsx(Jv,{presence:u}),i.jsx($m,{draft:o.draft,published:o.published})]})}),layout:r,schemaType:s,tooltip:i.jsx(Yp,{draft:h,published:f}),value:p}),[u,h,r,o.draft,o.published,p,f,s,c]);return d(g)}function _x(e){var t,n,a,r,o,s;const{layout:d="default",referenceInfo:c,renderPreview:u,type:m,value:p,showTypeLabel:h}=e,{t:f}=L();if(c.isLoading||c.error)return i.jsx(Xn,{isPlaceholder:!0,layout:d});if(((t=c.result)==null?void 0:t.availability.reason)==="NOT_FOUND"&&p._strengthenOnPublish){const w=m.to.find(T=>{var j;return T.name===((j=p==null?void 0:p._strengthenOnPublish)==null?void 0:j.type)});if(!w)return i.jsx(Jh,{documentId:p._ref,actualType:(n=p._strengthenOnPublish)==null?void 0:n.type,declaredTypes:m.to.map(T=>T.name)});const C=(a=p._strengthenOnPublish)!=null&&a.type?{_id:p._ref,_type:(r=p._strengthenOnPublish)==null?void 0:r.type}:p;return i.jsxs(P,{align:"center",children:[i.jsx(I,{flex:1,children:u({layout:d,schemaType:w,value:C,skipVisibilityCheck:!0})}),i.jsx(I,{children:i.jsx(et,{space:4,children:h&&i.jsx(Sn,{mode:"outline",children:w.title})})})]})}const g=c.result.availability,b=g.reason==="NOT_FOUND",v=g.reason==="PERMISSION_DENIED";if(v||b)return i.jsxs(et,{space:2,children:[i.jsx(I,{padding:1,children:i.jsx(P,{align:"center",children:i.jsx(I,{flex:1,paddingY:2,children:i.jsx(E,{muted:!0,children:f("inputs.reference.error.document-unavailable-title")})})})}),v||b?i.jsx(I,{children:i.jsx(Ie,{portal:!0,content:b?i.jsx(Xh,{title:f("inputs.reference.error.nonexistent-document-title"),icon:tl,children:i.jsx(Pe,{i18nKey:"inputs.reference.error.nonexistent-document-description",t:f,values:{documentId:p._ref}})}):i.jsx(Xh,{title:f("inputs.reference.error.missing-read-permissions-title"),icon:Li,children:f("inputs.reference.error.missing-read-permissions-description")}),children:i.jsx(Ct,{tone:"default",children:i.jsx(tl,{})})})}):null]});const y=(o=c.result)==null?void 0:o.type,x=m.to.find(w=>w.name===y);return x?i.jsx(Sx,{id:p._ref,layout:d,preview:(s=c.result)==null?void 0:s.preview,refType:x,renderPreview:u,showTypeLabel:h}):i.jsx(Jh,{documentId:p._ref,actualType:y||"<unknown>",declaredTypes:m.to.map(w=>w.name)})}function Xh(e){const t=e.icon;return i.jsxs(P,{children:[i.jsx(E,{size:1,children:i.jsx(t,{})}),i.jsxs(I,{flex:1,marginLeft:3,children:[i.jsx(E,{size:1,weight:"medium",children:e.title}),i.jsx(I,{marginTop:3,children:i.jsx(E,{as:"p",muted:!0,size:1,children:e.children})})]})]})}function Jh({declaredTypes:e,documentId:t,actualType:n}){const{t:a}=L();return i.jsxs(P,{align:"center",justify:"flex-start",children:[i.jsx(I,{padding:1,children:i.jsx(P,{align:"center",children:i.jsx(I,{flex:1,paddingY:2,children:i.jsx(E,{muted:!0,children:a("inputs.reference.error.invalid-type-title")})})})}),i.jsx(I,{children:i.jsx(Ie,{portal:!0,content:i.jsx(B,{space:3,children:i.jsx(E,{size:1,children:i.jsx(Pe,{t:a,i18nKey:"inputs.reference.error.invalid-type-description",values:{documentId:t,actualType:n},components:{AllowedTypes:()=>i.jsx(KN,{values:e})}})})}),children:i.jsx(I,{padding:2,children:i.jsx(Ct,{tone:"default",children:i.jsx(tl,{})})})})})]})}function KN(e){const t=Kr({type:"disjunction"}).formatToParts(e.values);return i.jsx(l.Fragment,{children:t.map(n=>n.type==="element"?i.jsx("code",{children:n.value},n.value):n.value)})}const WN={warning:"caution",error:"critical",info:"positive"},GN={warning:i.jsx(Wt,{}),error:i.jsx(Aa,{}),info:i.jsx(Uo,{})};function Lm(e){const{children:t,status:n="warning",title:a,...r}=e;return i.jsx(U,{radius:2,tone:WN[n],...r,"data-ui":"Alert",children:i.jsx(P,{padding:1,children:t&&i.jsx(I,{flex:1,children:i.jsx(Ji,{icon:GN[n],title:a,children:i.jsx(I,{marginLeft:3,marginTop:3,children:t})})})})})}function Ex({schemaType:e,handleRemoveStrengthenOnPublish:t}){const{t:n}=L();return i.jsx(Lm,{padding:1,title:n(e.weak?"inputs.reference.incomplete-reference.finalize-action-title":"inputs.reference.incomplete-reference.strengthen-action-title"),status:"info","data-testid":"alert-reference-published",children:i.jsxs(B,{space:3,children:[i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:n,i18nKey:e.weak?"inputs.reference.incomplete-reference.finalize-action-description":"inputs.reference.incomplete-reference.strengthen-action-description"})}),i.jsx(Z,{mode:"ghost",onClick:t,size:"large",text:n("inputs.reference.incomplete-reference.strengthen-button-label"),tone:"positive"})]})})}const qN=k(U)`
  /* this is a hack to avoid layout jumps while previews are loading
     there's probably better ways of solving this */
  min-height: 33px;
  position: relative;

  /* TextWithTone uses its own logic to set color, and we therefore need */
  /* to override this logic in order to set the correct color in different states */
  &[data-selected],
  &[data-pressed],
  &:active {
    [data-ui='TextWithTone'] {
      color: inherit;
    }
  }
`,Ix=l.forwardRef(function(e,t){const{as:n,documentId:a,documentType:r,...o}=e;return i.jsx(qN,{...o,...a&&r&&{"data-as":"a",forwardedAs:n,documentId:a,documentType:r},"data-ui":"ReferenceLinkCard",ref:t})});function Bm({errorMessage:e,onHandleRetry:t}){const{t:n}=L();return i.jsx(Lm,{padding:1,title:n("inputs.reference.metadata-error.title"),status:"warning","data-testid":"alert-reference-info-failed",children:i.jsxs(B,{space:3,children:[i.jsx(E,{as:"p",muted:!0,size:1,children:e}),i.jsx(Z,{mode:"ghost",onClick:t,size:"large",text:n("inputs.reference.metadata-error.retry-button-label"),tone:"primary"})]})})}function Vm({actualStrength:e,handleFixStrengthMismatch:t}){const n=e==="weak"?"strong":"weak",{t:a}=L();return i.jsx(Lm,{padding:1,title:a("inputs.reference.strength-mismatch.title"),status:"warning","data-testid":"alert-reference-strength-mismatch",children:i.jsxs(B,{space:3,children:[i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:a,i18nKey:e==="weak"?"inputs.reference.strength-mismatch.is-weak-description":"inputs.reference.strength-mismatch.is-strong-description"})}),i.jsx(E,{as:"p",muted:!0,size:1,children:a(n==="weak"?"inputs.reference.strength-mismatch.is-strong-consquences":"inputs.reference.strength-mismatch.is-weak-consquences")}),i.jsx(Z,{mode:"ghost",onClick:t,size:"large",text:a(n==="weak"?"inputs.reference.strength-mismatch.weaken-button-label":"inputs.reference.strength-mismatch.strengthen-button-label"),tone:"caution"})]})})}const Mx=()=>{},Zh={isLoading:!0,result:void 0,error:void 0,retry:Mx},YN={isLoading:!1,result:void 0,error:void 0,retry:Mx};function ic(e,t){const n=l.useMemo(()=>new sn,[]),a=l.useMemo(()=>n.asObservable(),[n]),r=l.useCallback(()=>{n.next({type:"retry"})},[n]),o=l.useMemo(()=>zt(re(null),a).pipe(K(()=>e),gr(s=>s?t(s).pipe(K(d=>({isLoading:!1,result:d,error:void 0,retry:r})),Lt(Zh),ut(d=>(console.error(d),re({isLoading:!1,result:void 0,error:d,retry:r})))):re(YN))),[t,e,a,r]);return Ut(o,Zh)}function XN(e){const t=l.useMemo(()=>({value:e.value}),[e.value]);return i.jsx(fv.Provider,{value:t,children:e.children})}function Qo(e){const t=bi(e),n=l.useContext(fv);if(!n)throw new Error("useFormValue must be used within a FormValueProvider");return ja(n==null?void 0:n.value,t)}const Qh=new WeakMap,ef={title:10,subtitle:5,description:1.5},JN={_id:{weight:1,type:"string"},_type:{weight:1,type:"string"}},ZN=["reference","crossDatasetReference"],es=e=>e?[e,...es(e.type)]:[],tf=e=>(e==null?void 0:e.jsonType)==="array"&&e.of.some(t=>es(t).some(({name:n})=>n==="block")),QN=e=>e?(e==null?void 0:e.jsonType)==="string":!1,eO=e=>Ke(e)&&"search"in e&&Ke(e.search);function Px(e){return typeof e<"u"&&"name"in e}function yo(e,t,n){function a(r,o,s){if(!r)return[];if(s>t)return[];const d=es(r);if(QN(r)||tf(r)){const p=n(r,o);return typeof p!="number"?[]:[{path:o,weight:p,type:tf(r)?"pt":"string"}]}const c=[],u=d.filter(p=>{var h;return p.jsonType==="object"&&!!((h=p.fields)!=null&&h.length)&&!ZN.includes(p.name)});for(const p of u)for(const h of p.fields){const f=Je([o,h.name].filter(Boolean));c.push(...a(h.type,f,s+1))}const m=d.filter(p=>{var h;return p.jsonType==="array"&&!!((h=p.of)!=null&&h.length)});for(const p of m)for(const h of p.of){const f=`${o}[]`;c.push(...a(h,f,s+1))}return c}return Px(e)?a(e,"",0).reduce((r,{path:o,weight:s,type:d})=>(r[o]={weight:s,type:d,path:o},r),{}):{}}const Nx=e=>{var t;const n=es(e).map(a=>a.options).find(eO);return typeof((t=n==null?void 0:n.search)==null?void 0:t.weight)=="number"?n.search.weight:null},Ox=e=>es(e).some(t=>t.hidden)?0:null,Fx=e=>{var t;return typeof((t=Nx(e))!=null?t:Ox(e))=="number"?null:1},tO=(e,t,n)=>{var a;const r=(a=e==null?void 0:e.preview)==null?void 0:a.select;if(!r)return null;const o=Object.fromEntries(Object.entries(r).map(([c,u])=>[u.replace(/\.\d+/g,"[]"),c])),s=yo(e,t,Fx),d=Object.fromEntries(Object.entries(s).map(([c,{type:u}])=>({path:c,type:u})).filter(({path:c})=>o[c]).map(({path:c,type:u})=>[c,{type:u,weight:ef[o[c]]}]));return n?Object.fromEntries(Object.entries(o).map(([c,u])=>[c,{path:c,type:"string",weight:ef[u]}])):yo(e,t,(c,u)=>{const m=d[u];return m?m.weight:null})};function Rx({schemaType:e,maxDepth:t,isCrossDataset:n,processPaths:a=r=>r}){const r=Qh.get(e);if(r)return r;const o=yo(e,t,Nx),s=yo(e,t,Ox),d=yo(e,t,Fx),c=tO(e,t,n),u={...JN,...d,...s,...c,...o},m={typeName:Px(e)?e.name:e.type,paths:a(Object.entries(u).map(([p,{type:h,weight:f}])=>({path:p,weight:f,...h==="pt"&&{mapWith:"pt::text"}})))};return Qh.set(e,m),m}const nO=e=>!!(e.type&&e.type.name==="document"),aO=e=>e.jsonType==="object",iO=e=>e.name.startsWith("sanity.")&&e.name!=="sanity.previewUrlSecret",rO=(e,t=[])=>e.getTypeNames().map(n=>e.get(n)).filter(Ft).filter(n=>nO(n)&&!iO(n)||t.includes(n.name)).filter(aO),oO=1e3,Zd="*",sO="-",lO=/(?:[^\s"]+|"[^"]*")+/g;function cO(e,t){return typeof e=="string"?{query:e,types:t}:{...e,types:e.types.length?e.types:t}}function dO(e){return e.filter(t=>t.weight!==1)}function uO(e,t){return t.types.map(n=>Rx({schemaType:n,maxDepth:e.maxDepth||jo,processPaths:dO})).filter(({paths:n})=>n.length).reduce((n,a)=>({...n,[a.typeName]:a.paths.reduce((r,{path:o,weight:s})=>({...r,weights:{...r.weights,[o]:s}}),{})}),{})}function mO(e=[]){return e.map(({field:t,direction:n})=>({attribute:t,direction:n}),{})}function pO(e){return typeof e<"u"&&e.trim().at(0)===sO}function hO(e){return typeof e<"u"&&e.trim().at(-1)===Zd}function fO(e){var t;const n=((t=e.match(lO))!=null?t:[]).map(s=>s.trim()),a=n.findLastIndex(s=>!pO(s)),r=n[a];if(n.length===0)return Zd;if(hO(r)||typeof r>"u")return n.join(" ");const o=[...n];return o.splice(a,1,`${r}${Zd}`),o.join(" ")}function gO(e,{queryType:t="prefixLast"}){return t==="prefixLast"?fO(e):e}const bO=(e,t,n)=>function(a,r={}){var o;const s=cO(a,e),d=["_type in $__types",r.includeDrafts===!1&&"!(_id in path('drafts.**'))",n.filter?`(${n.filter})`:!1,s.filter?`(${s.filter})`:!1].filter(u=>!!u),c={query:{string:gO(s.query,r)},filter:d.join(" && "),params:{__types:s.types.map(u=>"name"in u?u.name:u.type),...n.params,...s.params},types:uO(r,s),...r.sort?{order:mO(r.sort)}:{},includeAttributes:["_id","_type"],fromCursor:r.cursor,limit:(o=r.limit)!=null?o:oO};return t.observable.request({uri:`/data/textsearch/${t.config().dataset}`,method:"POST",json:!0,body:c,tag:n.tag}).pipe(K(u=>{let m=u.hits.map(p=>p.attributes);return n.unique&&(m=_v(m)),{type:"text",hits:m.map(p=>({hit:p})),nextCursor:u.nextCursor}}))},yO=(e,t)=>{const{phrases:n,words:a}=TO(e),[r,o]=CO(n,t),[s,d]=wO(a,t);return[r+s,[d,o].join(", ")]},vO=e=>typeof e=="string"?e:JSON.stringify(e);function xO(e,t,n=[]){const a=sm(e,r=>r.typeName);return t.map((r,o)=>{var s;const d=(s=a[r._type].paths||[])==null?void 0:s.map((u,m)=>{const p=vO(r[`w${m}`]);if(!p)return{path:u.path,score:0,why:"No match"};const[h,f]=yO(n,p);return{path:u.path,score:h*u.weight,why:`${f} (*${u.weight})`}}),c=d.reduce((u,m)=>u+m.score,0);return{hit:r,resultIndex:t.length-o,score:c,stories:d}})}function CO(e,t){const n=t.toLowerCase().trim();let a=0,r=0;return e.forEach(o=>{n.includes(o)&&(a+=o.length/n.length,r+=o.length)}),a===1?[1,"[Phrase] Exact match"]:[a/2,`[Phrase] Matched ${r} of ${n.length} characters`]}function wO(e,t){const n=za(Bu(lv(br(t)))),a=Ud(e,n),r=Py(n,e),o=a.length/r.length;return o===1?[1,"[Word] Exact match"]:[o/2,`[Word] Matched ${a.length} of ${r.length} terms: [${a.join(", ")}]`]}function TO(e){const t=za(e.map(br)),[n,a]=cv(t,r=>/^".*"$/.test(r));return{phrases:za(n).map(br).map(jO),words:za(a.map(br))}}function jO(e){return e.replace(/^"(.*)"$/,"$1")}const kO=4,AO=1e3,SO=pj([On,Py,Bu]),Dx=({mapWith:e,path:t})=>e?`${e}(${t})`:t;function _O(e,t){const n=SO(t.map(a=>(a.paths||[]).map(r=>Dx(r))));return e.map((a,r)=>n.map(o=>`${o} match $t${r}`)).filter(a=>a.length>0).map(a=>`(${a.join(" || ")})`)}const EO=/([^!@#$%^&*(),\\/?";:{}|[\]+<>\s-])+/g,IO=/(^[.]+)|([.]+$)/;function MO(e){return(e.match(EO)||[]).map(t=>t.replace(IO,""))}function PO(e){const t=[],n=e.replace(/("[^"]*")/g,o=>lv(o).length>1?(t.push(o),""):o),a=t.map(o=>MA(br(o))),r=za(Bu(MO(br(n))));return[...a,...r]}function NO(e){function t(n){return n.mapWith?`${n.mapWith}(${n.field})`:n.field}return(e||[]).map(n=>[t(n),(n.direction||"").toLowerCase()].map(a=>a.trim()).filter(Boolean).join(" ")).join(",")}function OO(e,t={}){var n;const{filter:a,params:r,tag:o}=t,s=e.types.map(x=>Rx({schemaType:x,maxDepth:t.maxDepth||jo,isCrossDataset:t.isCrossDataset})).filter(({paths:x})=>x.length),d=PO(e.query),c=["_type in $__types",t.includeDrafts===!1&&"!(_id in path('drafts.**'))",..._O(d,s),a?`(${a})`:"",e.filter?`(${e.filter})`:""].filter(Boolean),u=s.map(x=>{const w=`_type == "${x.typeName}" => `,C=`{ ${x.paths.map((T,j)=>`"w${j}": ${Dx(T)}`)} }`;return`${w}${C}`}),m=NO((t==null?void 0:t.sort)||[{field:"_id",direction:"asc"}]),p=["_type","_id"],h=u.length>0?`...select(${u.join(`,
`)})`:"",f=p.join(", ")+(h?`, ${h}`:"");let g=`*[${c.join(" && ")}]| order(${m})[0...$__limit]{${f}}`;if(t!=null&&t.__unstable_extendedProjection){const x=t==null?void 0:t.__unstable_extendedProjection,w=p.concat(x).join(", ");g=[`*[${c.join(" && ")}]{${w}}`,`order(${m})[0...$__limit]{${f}}`].join("|")}const b=[`findability-mvi:${kO}`].concat((t==null?void 0:t.comments)||[]).map(x=>`// ${x}`).join(`
`),v=b?`${b}
${g}`:g,y=(n=t==null?void 0:t.limit)!=null?n:AO;return{query:v,params:{...FO(d),__types:s.map(x=>x.typeName),__limit:y,...r||{}},options:{tag:o},searchSpec:s,terms:d}}const FO=e=>{const t={};return e.reduce((n,a,r)=>(n[`t${r}`]=`${a}*`,n),t)};function RO(e,t){return typeof e=="string"?{query:e,types:t}:e.types.length?e:{...e,types:t}}const DO=(e,t,n)=>function(a,r={}){const o=RO(a,e),{query:s,params:d,options:c,searchSpec:u,terms:m}=OO(o,{...n,...r});return t.observable.fetch(s,d,c).pipe(n.unique?K(_v):bt(),K(p=>xO(u,p,m)),r!=null&&r.skipSortByScore?bt():K(p=>zi(p,h=>-h.score)),K(p=>({type:"weighted",hits:p})))},Um=(e,t,n)=>(n.enableLegacySearch?DO:bO)(e,t,n),$O={available:!0,reason:"READABLE"},nf={available:!1,reason:"PERMISSION_DENIED"},af={available:!1,reason:"NOT_FOUND"};function $x(e,t,n){const{publishedId:a,draftId:r}=Sv(t);return e.unstable_observeDocumentPairAvailability(t).pipe(Ee(o=>{if(!o.draft.available&&!o.published.available){const c=o.draft.reason==="PERMISSION_DENIED"||o.published.reason==="PERMISSION_DENIED"?nf:af;return re({id:t,type:void 0,availability:c,preview:{draft:void 0,published:void 0}})}const s={_type:"reference",_ref:r},d={_type:"reference",_ref:a};return Ht([e.observeDocumentTypeFromId(r),e.observeDocumentTypeFromId(a)]).pipe(K(([c,u])=>c||u)).pipe(Ee(c=>{if(!c)return re({id:t,type:void 0,availability:{available:!0,reason:"READABLE"},preview:{draft:void 0,published:void 0}});const u=n.to.find(f=>f.name===c);if(!u)return re({id:t,type:c,availability:{available:!0,reason:"READABLE"},preview:{draft:void 0,published:void 0}});const m=cp(u==null?void 0:u.preview)||[],p=e.observePaths(s,m).pipe(K(f=>f?{_id:r,...sl(f,u)}:void 0),Lt(void 0)),h=e.observePaths(d,m).pipe(K(f=>f?{_id:a,...sl(f,u)}:void 0),Lt(void 0));return Ht([p,h]).pipe(K(([f,g])=>({draft:f,published:g}))).pipe(K(f=>{const g=o.draft.available||o.published.available?$O:o.draft.reason==="PERMISSION_DENIED"||o.published.reason==="PERMISSION_DENIED"?nf:af;return{type:c,id:a,availability:g,preview:{draft:Ke(f.draft)?f.draft:void 0,published:Ke(f.published)?f.published:void 0}}}))}))}))}function LO(e){return e.filter(t=>!t.draft||!t.published).map(t=>t.draft?t.id:kn(t.id))}function BO(e,t){return t.length===0?re([]):e.observable.fetch("*[_id in $ids]._id",{ids:t},{tag:"get-counterpart-ids"})}function VO(e,t,n,a,r){return Um(n.to,e,{...a,enableLegacySearch:r,maxDepth:a.maxFieldDepth||jo})(t,{includeDrafts:!0}).pipe(K(({hits:o})=>o.map(({hit:s})=>s)),K(ym),K(o=>o.slice(0,100)),Ye(o=>BO(e,LO(o)).pipe(K(s=>o.map(d=>{const c=kn(d.id);return{id:d.id,type:d.type,draft:d.draft||s.includes(c)?{_id:c,_type:d.type}:void 0,published:d.published||s.includes(d.id)?{_id:d.id,_type:d.type}:void 0}})))))}function UO(e){const t=l.useRef(e);return t.current=e,t}function zm(e){var t,n,a,r;const{path:o,schemaType:s}=e,d=ot(),c=gn(),{EditReferenceLinkComponent:u,onEditReference:m,activePath:p,initialValueTemplateItems:h}=Ax(),f=Qo([]),g=(t=UO(f).current)==null?void 0:t._type,b=l.useMemo(()=>{var A;return(A=d.get(g))==null?void 0:A.liveEdit},[g,d]),v=((n=s.options)==null?void 0:n.disableNew)===!0,y=(r=(a=e.value)==null?void 0:a._strengthenOnPublish)==null?void 0:r.template,x=l.useMemo(()=>l.forwardRef(function(A,M){return u?i.jsx(u,{...A,ref:M,parentRefPath:o,template:y}):null}),[u,o,y]),w=l.useCallback(A=>{m==null||m({parentRefPath:o,id:A.id,type:A.type,template:A.template})},[m,o]),C=Jt(o,(p==null?void 0:p.path)||[])?p==null?void 0:p.state:"none",T=l.useMemo(()=>v?[]:(h||[]).filter(A=>s.to.some(M=>{var S;return M.name===((S=A.template)==null?void 0:S.schemaType)})).map(A=>{var M;return(M=A.template)!=null&&M.schemaType?{id:A.id,title:A.title||`${A.template.schemaType} from template ${A.template.id}`,type:A.template.schemaType,icon:A.icon,template:{id:A.template.id,params:A.parameters},permission:{granted:A.granted,reason:A.reason}}:void 0}).filter(Ft),[v,h,s.to]),j=l.useCallback(A=>$x(c,A,s),[c,s]);return{selectedState:C,isCurrentDocumentLiveEdit:b,handleEditReference:w,EditReferenceLink:x,createOptions:T,getReferenceInfo:j}}function zO({readOnly:e,hasErrors:t,hasWarnings:n}){return e?"transparent":t?"critical":n?"caution":"default"}const HO={portal:!0,tone:"default"};function KO(e){var t,n,a,r,o,s;const d=l.useRef(null),{schemaType:c,path:u,open:m,inputId:p,children:h,inputProps:f}=e,{readOnly:g,focused:b,renderPreview:v,onChange:y}=e.inputProps,[x,w]=l.useState([]),C=nc(),T=l.useCallback(()=>f.onChange(we()),[f]),j=e.value,{EditReferenceLink:A,getReferenceInfo:M,selectedState:S,isCurrentDocumentLiveEdit:N}=zm({path:u,schemaType:c,value:j});ac(d,m),rn(b,(z,ne)=>{!z&&ne&&d.current&&d.current.focus()});const D=e.validation.some(z=>z.level==="error"),_=e.validation.some(z=>z.level==="warning"),F=ic(j==null?void 0:j._ref,M),R=((t=F.result)==null?void 0:t.type)||((n=j==null?void 0:j._strengthenOnPublish)==null?void 0:n.type),$=R?c.to.find(z=>z.name===R):void 0,O=S==="pressed",V=S==="selected",H=j==null?void 0:j._ref,J=H&&((o=(r=(a=F.result)==null?void 0:a.preview)==null?void 0:r.published)==null?void 0:o._id),q=l.useCallback(()=>{y([c.weak===!0?be(!0,["_weak"]):we(["_weak"]),we(["_strengthenOnPublish"])])},[y,c.weak]),oe=l.useCallback(()=>{y(c.weak===!0?be(!0,["_weak"]):we(["_weak"]))},[y,c]),ie=l.useCallback(()=>{f.onPathFocus(["_ref"])},[f]),te=j!=null&&j._weak?"weak":"strong",X=c.weak===!0?"weak":"strong",le=H&&!F.isLoading&&(j==null?void 0:j._strengthenOnPublish),me=!F.isLoading&&((s=F.result)==null?void 0:s.availability.available)&&H&&te!==X&&!le,G=zO({readOnly:g,hasErrors:D,hasWarnings:_}),ce=!(j!=null&&j._ref)||f.focusPath[0]==="_ref",{t:de}=L(),pe=i.jsxs(i.Fragment,{children:[N&&J&&j._strengthenOnPublish&&i.jsx(Ex,{schemaType:c,handleRemoveStrengthenOnPublish:q}),me&&i.jsx(Vm,{actualStrength:te,handleFixStrengthMismatch:oe}),F.error&&i.jsx(Bm,{errorMessage:F.error.message,onHandleRetry:F.retry})]}),W=l.useMemo(()=>l.forwardRef(function(z,ne){return i.jsx(Ma,{...z,intent:"edit",params:{id:j==null?void 0:j._ref,type:$==null?void 0:$.name},target:"_blank",rel:"noopener noreferrer",ref:ne})}),[$==null?void 0:$.name,j==null?void 0:j._ref]),Y=l.useMemo(()=>g?null:i.jsx(I,{flex:"none",children:i.jsx(ze,{button:i.jsx(wt,{}),id:`${p}-menuButton`,menu:i.jsxs(Be,{children:[!g&&i.jsxs(i.Fragment,{children:[i.jsx(ye,{text:de("inputs.reference.action.clear"),tone:"critical",icon:_t,onClick:T}),i.jsx(ye,{text:de("inputs.reference.action.replace"),icon:um,onClick:ie})]}),!g&&(j==null?void 0:j._ref)&&i.jsx(en,{}),(j==null?void 0:j._ref)&&i.jsx(ye,{as:W,"data-as":"a",text:de("inputs.reference.action.open-in-new-tab"),icon:Wi})]}),popover:HO})}),[T,ie,p,W,g,de,j==null?void 0:j._ref]);return i.jsxs(i.Fragment,{children:[C&&e.actions&&e.actions.length>0&&i.jsx(Jl,{actions:e.actions,documentId:C,documentType:c.name,onActions:w,path:u,schemaType:c}),i.jsx(Xl,{actions:x,focused:!!e.inputProps.focused,path:u,children:i.jsx(Xi,{__internal_comments:e.__internal_comments,__internal_slot:e.__internal_slot,__unstable_headerActions:x,__unstable_presence:e.presence,description:e.description,level:e.level,title:e.title,validation:e.validation,deprecated:e.schemaType.deprecated,children:ce?i.jsx(I,{children:h}):i.jsx(U,{border:!0,radius:2,padding:1,tone:G,children:i.jsxs(B,{space:1,children:[i.jsx(P,{gap:1,align:"center",style:{lineHeight:0},children:i.jsxs(Ia,{children:[i.jsx(Ix,{__unstable_focusRing:!0,as:A,"data-pressed":O?!0:void 0,"data-selected":V?!0:void 0,documentId:j==null?void 0:j._ref,documentType:$==null?void 0:$.name,flex:1,pressed:O,radius:2,ref:d,selected:V,tone:"inherit",children:i.jsx(_x,{value:j,referenceInfo:F,renderPreview:v,type:c})}),i.jsx(I,{children:Y})]})}),pe]})})})})]})}function Lx(e,t){return ct(e.options,t)}const rf=["array","file","image","reference","slug"],WO=["asset","crop","hotspot","_ref","_weak"],GO=["tags"],qO=["slug"];function Hm(e,t){if(!e)return[];if(t.has(e))return[];t.add(e);const n=e.type?Hm(e.type,t):[];return[e,...n]}function YO(e,t){return ua(e)?JO(e,t):XO(e,t)}function XO(e,t){var n,a,r;const{type:o,options:s}=e,d=Bx(o,rf),c=(e==null?void 0:e.jsonType)==="object"?e.fields:void 0,u=(d==null?void 0:d.name)||"";if(qO.includes(u))return 0;const m=rf.includes(u),p=((n=c==null?void 0:c.filter(f=>!WO.includes(f.name)).length)!=null?n:0)>0,h=((r=(a=s==null?void 0:s.list)==null?void 0:a.length)!=null?r:0)>0;return p||h||!m?t:0}function JO(e,t){var n;const{options:a}=e,r=((n=(a==null?void 0:a.list)||[])==null?void 0:n.length)>0,o=GO.includes((a==null?void 0:a.layout)||"");return r&&!o?t:0}function Bx(e,t){if(e!=null&&e.name&&t.includes(e==null?void 0:e.name))return e;if(e)return Bx(e.type,t)}const al=[];function ZO(e){return i.jsx(Kt,{hasFocus:!!e.inputProps.focused,isChanged:e.inputProps.changed,path:e.path,children:e.children})}function of(e){const[t,n]=l.useState(al),a=nc(),r=!!e.inputProps.focused;return i.jsxs(i.Fragment,{children:[a&&e.actions&&e.actions.length>0&&i.jsx(Jl,{actions:e.actions,documentId:a,documentType:e.schemaType.name,onActions:n,path:e.path,schemaType:e.schemaType}),i.jsx(Xl,{actions:t,focused:r,path:e.path,children:i.jsx(Xi,{__internal_slot:e.__internal_slot,__internal_comments:e.__internal_comments,__unstable_headerActions:t,__unstable_presence:e.presence,"data-testid":`field-${e.inputId}`,description:e.description,inputId:e.inputId,level:e.level,title:e.title,validation:e.validation,deprecated:e.schemaType.deprecated,children:i.jsx(Kt,{hasFocus:r,isChanged:e.inputProps.changed,path:e.path,children:e.children})})})]})}function QO(e){const[t,n]=l.useState(al),a=nc(),r=!!e.inputProps.focused;return i.jsxs(i.Fragment,{children:[a&&e.actions&&e.actions.length>0&&i.jsx(Jl,{actions:e.actions,documentId:a,documentType:e.schemaType.name,onActions:n,path:e.path,schemaType:e.schemaType}),i.jsx(Xl,{actions:t,focused:r,path:e.path,children:i.jsx(Zl,{__internal_comments:e.__internal_comments,__internal_slot:e.__internal_slot,__unstable_headerActions:t,__unstable_presence:e.presence,collapsed:e.collapsed,collapsible:e.collapsible,"data-testid":`field-${e.inputId}`,description:e.description,level:e.level,onCollapse:e.onCollapse,onExpand:e.onExpand,title:e.title,validation:e.validation,inputId:e.inputId,deprecated:e.schemaType.deprecated,children:e.children})})]})}function e2(e){const[t,n]=l.useState(al),a=nc(),r=!!e.inputProps.focused,o=e.inputProps.members.find(d=>d.kind==="field"&&d.name==="hotspot"),s=o!=null&&o.open?e.presence:e.presence.concat((o==null?void 0:o.field.presence)||al);return i.jsxs(i.Fragment,{children:[a&&e.actions&&e.actions.length>0&&i.jsx(Jl,{actions:e.actions,documentId:a,documentType:e.schemaType.name,onActions:n,path:e.path,schemaType:e.schemaType}),i.jsx(Xl,{actions:t,focused:r,path:e.path,children:i.jsx(Zl,{__internal_comments:e.__internal_comments,__internal_slot:e.__internal_slot,__unstable_headerActions:t,__unstable_presence:s,collapsed:e.collapsed,collapsible:e.collapsible,description:e.description,level:e.level,onCollapse:e.onCollapse,onExpand:e.onExpand,title:e.title,validation:e.validation,inputId:e.inputId,deprecated:e.schemaType.deprecated,children:e.children})})]})}function t2(e){var t;if((t=e.components)!=null&&t.field)return e.components.field;if(kl(e))return ZO;const n=Hm(e,new Set);return n.some(a=>a.name==="image"||a.name==="file")?e2:n.some(a=>Z0(a))||n.some(a=>a.name==="slug")?of:n.some(a=>gi(a))?KO:e.jsonType!=="object"&&e.jsonType!=="array"?of:QO}function Vx({children:e,workspace:t}){return i.jsx(u0.Provider,{value:t,children:e})}function Dt(){const e=l.useContext(u0);if(!e)throw new Error("Workspace: missing context value");return e}const Ux=0,Yc={isLoading:!0,settings:{partialIndexSettings:{maxFieldDepth:Ux}}};function n2({client:e}){const{projectId:t,dataset:n}=e.config();return e.observable.request({uri:`/projects/${t}/datasets/${n}/settings/indexing`,tag:"search.getPartialIndexSettings"})}const Cs=new Map;function Km(e){var t,n,a,r;const o=(n=(t=Dt().search)==null?void 0:t.unstable_partialIndexing)==null?void 0:n.enabled,s=Xe(qe),d=l.useMemo(()=>e||s,[e,s]),c=l.useMemo(()=>d.config().dataset,[d]);o||Cs.set(c,re(Yc.settings)),Cs.has(c)||Cs.set(c,n2({client:d}).pipe(an()));const u=l.useMemo(()=>Cs.get(c).pipe(K(h=>({isLoading:!1,settings:h})),Lt(Yc),ut(h=>(console.error(h),re({isLoading:!1,enabled:!0,settings:{partialIndexSettings:{maxFieldDepth:Ux}}})))),[c]),m=Ut(u,Yc),p=(r=(a=m==null?void 0:m.settings)==null?void 0:a.partialIndexSettings)==null?void 0:r.maxFieldDepth;return Pk(p)?Math.min(p,jo):jo}function zx(e,t){l.useEffect(()=>{const n=a=>{const r=a.target;if(r instanceof HTMLElement){if(e.some(o=>{var s;return(s=o.current)==null?void 0:s.contains(r)}))return;t(a)}};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[e,t])}const a2=ae`
  grid-template-columns: minmax(0px, 1fr);
`,i2=ae`
  grid-template-columns: 1fr min-content;
`,r2=k(Ze)(e=>e.$narrow?a2:i2),o2=l.forwardRef(function(e,t){const[n,a]=l.useState(null),r=l.useCallback(s=>{s2(t,s),a(s)},[t]),o=Vu(n);return i.jsx(r2,{ref:r,gap:1,$narrow:((o==null?void 0:o.width)||0)<480,children:e.children})});function s2(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const l2={display:"inline-flex"},c2={width:"100%"},d2={portal:!0,tone:"default",constrainSize:!0,fallbackPlacements:["bottom","left","top"],placement:"right",preventOverflow:!0};function u2(e){const{createOptions:t,onCreate:n,id:a,menuRef:r,...o}=e,s=Tt(),{t:d}=L(),c=aE(t);return t.some(u=>u.permission.granted)?t.length>1?i.jsx(ze,{button:i.jsx(Z,{...o,disabled:e.readOnly,text:d("inputs.reference.action.create-new-document-select"),mode:"ghost",icon:Ta,size:"large"}),id:a,menu:i.jsx(Be,{ref:r,children:t.map(u=>i.jsx(Ie,{disabled:u.permission.granted,content:i.jsx(bl,{currentUser:s,context:"create-document-type"}),portal:!0,children:i.jsx("div",{children:i.jsx(ye,{disabled:!u.permission.granted,icon:u.icon,text:c(u).title,onClick:()=>n(u)})})},u.id))}),popover:d2}):i.jsx(Z,{...o,text:d("inputs.reference.action.create-new-document-select"),mode:"ghost",disabled:!t[0].permission.granted||e.readOnly,onClick:()=>n(t[0]),icon:Ta,size:"large"}):i.jsx(Ie,{content:i.jsx(bl,{currentUser:s,context:"create-new-reference"}),children:i.jsx("div",{style:l2,children:i.jsx(Z,{text:d("inputs.reference.action.create-new-document"),mode:"ghost",disabled:!0,icon:Ta,style:c2})})})}function m2(e){const{getReferenceInfo:t,id:n,renderPreview:a}=e,{isLoading:r,result:o,error:s}=ic(n,t),{t:d}=L();if(r)return i.jsxs(B,{space:2,padding:1,children:[i.jsx(it,{style:{maxWidth:320},radius:1,animated:!0}),i.jsx(it,{style:{maxWidth:200},radius:1,size:1,animated:!0})]});if(s)return i.jsx(B,{space:2,padding:1,children:i.jsx(fa,{title:d("inputs.reference.error.failed-to-load-document-title"),children:i.jsx(E,{muted:!0,size:1,children:s.message})})});if(!o)return null;if(o.availability.reason==="PERMISSION_DENIED")return i.jsx(B,{space:2,padding:1,children:d("inputs.reference.error.missing-read-permissions-description")});const c=e.type.to.find(u=>u.name===o.type);return c?o&&c&&i.jsx(Sx,{id:o.id,layout:"default",preview:o.preview,refType:c,renderPreview:a,showTypeLabel:e.type.to.length>1}):i.jsx(B,{space:2,padding:1,children:d("inputs.reference.error.invalid-search-result-type-title",{returnedType:o.type})})}const p2=k(rt)`
  & > div {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }
`,h2=k(E)`
  word-break: break-word;
`,f2=["top-start","bottom-start"],g2=l.forwardRef(function(e,t){const{searchString:n,loading:a,portalRef:r,referenceElement:o,...s}=e,{t:d}=L(),c=e.options&&e.options.length>0,u=l.useCallback(({content:m,hidden:p,inputElement:h,onMouseEnter:f,onMouseLeave:g},b)=>i.jsx(p2,{placement:"bottom-start",fallbackPlacements:f2,arrow:!1,constrainSize:!0,onMouseEnter:f,onMouseLeave:g,content:i.jsx("div",{ref:b,children:c?m:i.jsx(I,{padding:4,children:i.jsx(P,{align:"center",height:"fill",justify:"center",children:i.jsx(h2,{align:"center",muted:!0,children:i.jsx(Pe,{t:d,i18nKey:"inputs.reference.no-results-for-query",values:{searchTerm:n||""}})})})})}),open:!a&&!p,ref:r,portal:!0,referenceElement:o||h,matchReferenceWidth:!0}),[c,d,n,a,r,o]);return i.jsx(Cl,{...s,loading:a,ref:t,renderPopover:u})});function b2(){return l.useContext(Tv)||{menuRef:{current:null},containerRef:{current:null}}}const sf={hits:[],isLoading:!1},y2=()=>!0;function v2(e){return e!==null}function x2(e){var t,n,a,r,o,s;const{createOptions:d,onChange:c,onEditReference:u,onSearch:m,schemaType:p,readOnly:h,id:f,onPathFocus:g,value:b,renderPreview:v,path:y,elementProps:x,focusPath:w}=e,{getReferenceInfo:C}=zm({path:y,schemaType:p,value:b}),[T,j]=l.useState(sf),A=l.useCallback(W=>{const Y=Cn(),z=[Tn({}),be(p.name,["_type"]),be(Y,["_ref"]),be(!0,["_weak"]),be({type:W.type,weak:p.weak,template:W.template},["_strengthenOnPublish"])].filter(Ft);c(z),u({id:Y,type:W.type,template:W.template}),g([])},[c,u,g,p]),M=l.useCallback(W=>{if(!W){c(we()),g([]);return}const Y=T.hits.find(ne=>ne.id===W);if(!Y)throw new Error("Selected an item that wasnt part of the result set");const z=[Tn({}),be(p.name,["_type"]),be(ft(W),["_ref"]),Y.published&&!p.weak?we(["_weak"]):be(!0,["_weak"]),Y.published?we(["_strengthenOnPublish"]):be({type:Y==null?void 0:Y.type,weak:p.weak},["_strengthenOnPublish"])].filter(Ft);c(z),g([])},[c,g,p.name,p.weak,T.hits]),S=l.useCallback(()=>{c(we())},[c]),N=l.useCallback(()=>{b!=null&&b._ref||S()},[S,b==null?void 0:b._ref]),D=l.useCallback(W=>{W.key==="Escape"&&g([])},[g]),_=ic(b==null?void 0:b._ref,C),F=l.useRef(null),{push:R}=Vt(),{t:$}=L(),O=em(W=>W.pipe(Ue(v2),Ee(Y=>zt(re({isLoading:!0}),m(Y).pipe(K(z=>({hits:z,searchString:Y,isLoading:!1})),ut(z=>(R({title:$("inputs.reference.error.search-failed-title"),description:z.message,status:"error",id:`reference-search-fail-${f}`}),console.error(z),re({hits:[]})))))),qn((Y,z)=>({...Y,...z}),sf),bt(j))),V=l.useCallback(()=>{O("")},[O]),H=l.useCallback(W=>{W.key==="Escape"&&g([])},[g]),J=l.useCallback(W=>{var Y,z;const ne=((Y=W.hit.draft)==null?void 0:Y._id)||((z=W.hit.published)==null?void 0:z._id)||W.value;return i.jsx(yte,{forwardedAs:"button",type:"button",radius:2,tone:"inherit",children:i.jsx(m2,{getReferenceInfo:C,id:ne,renderPreview:v,type:p})})},[p,C,v]),q=l.useCallback(()=>{var W,Y,z,ne;return((Y=(W=_.result)==null?void 0:W.preview.draft)==null?void 0:Y.title)||((ne=(z=_.result)==null?void 0:z.preview.published)==null?void 0:ne.title)||""},[(n=(t=_.result)==null?void 0:t.preview.draft)==null?void 0:n.title,(r=(a=_.result)==null?void 0:a.preview.published)==null?void 0:r.title]),oe=l.useCallback(()=>g(["_ref"]),[g]),ie=l.useCallback(W=>{var Y;(Y=F.current)!=null&&Y.contains(W.relatedTarget)||e.elementProps.onBlur(W)},[e.elementProps]),te=((s=(o=_==null?void 0:_.result)==null?void 0:o.availability)==null?void 0:s.reason)==="NOT_FOUND"&&!(b!=null&&b._strengthenOnPublish)&&(b==null?void 0:b._weak);rn((w==null?void 0:w[0])==="_ref",(W,Y)=>{var z;!W&&Y&&((z=x.ref.current)==null||z.focus())});const X=l.useMemo(()=>T.hits.map(W=>({value:W.id,hit:W})),[T.hits]),le=w.length===1&&w[0]==="_ref",{menuRef:me,containerRef:G}=b2(),ce=l.useRef(null),de=l.useRef(null),pe=l.useRef(null);return zx([G,ce,de,pe,me],()=>{le&&N()}),i.jsx(B,{space:1,"data-testid":"reference-input",ref:ce,children:i.jsxs(B,{space:2,children:[te?i.jsx(fa,{"data-testid":"alert-nonexistent-document",title:$("inputs.reference.error.nonexistent-document-title"),suffix:i.jsx(B,{padding:2,children:i.jsx(Z,{text:$("inputs.reference.error.nonexistent-document.clear-button-label"),onClick:S})}),children:i.jsx(E,{size:1,children:i.jsx(Pe,{i18nKey:"inputs.reference.error.nonexistent-document-description",t:$,values:{documentId:b._ref}})})}):null,i.jsxs(o2,{ref:F,children:[i.jsx(g2,{...x,onFocus:oe,onBlur:ie,"data-testid":"autocomplete",loading:T.isLoading,referenceElement:F.current,options:X,radius:2,placeholder:$("inputs.reference.search-placeholder"),onKeyDown:D,readOnly:_.isLoading||h,onQueryChange:O,searchString:T.searchString,onChange:M,filterOption:y2,renderOption:J,renderValue:q,openButton:{onClick:V},portalRef:de,value:b==null?void 0:b._ref}),d.length>0&&i.jsx(u2,{id:`${f}-selectTypeMenuButton`,readOnly:h,createOptions:d,onCreate:A,onKeyDown:H,menuRef:pe})]})]})})}async function C2(e,t,n,a){if(!e)return{};if(typeof e.filter=="function"){const r=n.slice(0,-1),o=Vl(t,r);return await e.filter({document:t,parentPath:r,parent:o,getClient:a})}return{filter:e.filter,params:"filterParams"in e?e.filterParams:void 0}}function w2(e){const t=l.useRef(e);return t.current=e,t}function T2(e){var t,n,a,r;const o=mt(),s=o.getClient(qe),d=ot(),c=Km(),u=gn(),{path:m,schemaType:p}=e,{EditReferenceLinkComponent:h,onEditReference:f,activePath:g,initialValueTemplateItems:b}=Ax(),{enableLegacySearch:v=!1}=o.search,y=Qo([]),x=w2(y),w=(t=x.current)==null?void 0:t._type,C=d.get(w),T=l.useMemo(()=>C==null?void 0:C.liveEdit,[C]),j=((n=p.options)==null?void 0:n.disableNew)===!0,A=o.getClient,M=l.useCallback($=>Ot(C2(p.options,x.current,m,A)).pipe(Ye(({filter:O,params:V})=>VO(s,$,p,{...p.options,filter:O,params:V,tag:"search.reference",maxFieldDepth:c},v)),ut(O=>{var V;const H=O.details&&O.details.type==="queryParseError";return(V=p.options)!=null&&V.filter&&H&&(O.message='Invalid reference filter, please check the custom "filter" option'),Dl(O)})),[p,x,m,A,s,c,v]),S=(r=(a=e.value)==null?void 0:a._strengthenOnPublish)==null?void 0:r.template,N=l.useMemo(()=>l.forwardRef(function($,O){return h?i.jsx(h,{...$,ref:O,parentRefPath:m,template:S}):null}),[h,m,S]),D=l.useCallback($=>{f==null||f({parentRefPath:m,id:$.id,type:$.type,template:$.template})},[f,m]),_=Jt(m,(g==null?void 0:g.path)||[])?g==null?void 0:g.state:"none",F=l.useMemo(()=>j?[]:(b||[]).filter($=>p.to.some(O=>{var V;return O.name===((V=$.template)==null?void 0:V.schemaType)})).map($=>{var O,V,H;return(O=$.template)!=null&&O.schemaType?{id:$.id,title:$.title||`${$.template.schemaType} from template ${(V=$.template)==null?void 0:V.id}`,i18n:$.i18n,type:$.template.schemaType,icon:$.icon,template:{id:(H=$.template)==null?void 0:H.id,params:$.parameters},permission:{granted:$.granted,reason:$.reason}}:void 0}).filter(Ft),[j,b,p.to]),R=l.useCallback(($,O)=>$x(u,$,O),[u]);return i.jsx(x2,{...e,onSearch:M,liveEdit:T,getReferenceInfo:R,selectedState:_,editReferenceLinkComponent:N,createOptions:F,onEditReference:D})}function j2(e){return Ll(e.schemaType)}function k2(e){return wv(e.schemaType)}function A2(e,t,n,a){const r={...e},o=a.y||0,s=a.x||0;return t.top+r.y<=n.top+o?r.y=n.top-t.top+o:t.bottom+r.y>=n.top+n.height-o&&(r.y=n.top+n.height-t.bottom-o),t.left+r.x<=n.left-s?r.x=n.left-t.left+s:t.right+r.x>=n.left+n.width+s&&(r.x=n.left+n.width-t.right+s),r}const S2=e=>({containerNodeRect:t,draggingNodeRect:n,transform:a})=>!n||!t?a:A2(a,n,t,e),Wm="moving",Hx=k(I)`
  ${e=>e.$moving&&ae`
      z-index: 10000;
      /* prevents hover-effects etc on the dragged element  */
      pointer-events: none;
    `}
`,_2={threshold:{x:0,y:.02}},E2={coordinateGetter:ak},I2={duration:200,easing:"ease"};function M2(e){return e==="x"?ik:rk}function P2(e){return e==="x"?ok:sk}const N2=l.memo(function(e){const{items:t,axis:n,onItemMove:a,onItemMoveStart:r,onItemMoveEnd:o,children:s,...d}=e,c=hj(Qp(gj),Qp(fj,E2)),u=l.useCallback(p=>{var h,f,g,b;const{active:v,over:y}=p;v.id!==(y==null?void 0:y.id)&&(a==null||a({fromIndex:(f=(h=v.data.current)==null?void 0:h.sortable)==null?void 0:f.index,toIndex:(b=(g=y==null?void 0:y.data.current)==null?void 0:g.sortable)==null?void 0:b.index})),o==null||o()},[a,o]),m=l.useMemo(()=>[S2({y:4}),...n?[M2(n)]:[]],[n]);return i.jsx(bj,{sensors:c,autoScroll:_2,modifiers:m,collisionDetection:yj,onDragEnd:u,onDragStart:r,children:i.jsx(vj,{items:t,strategy:n?P2(n):void 0,children:i.jsx(Ze,{...d,children:s})})})}),O2=l.forwardRef(function(e,t){const{id:n,children:a,disableTransition:r}=e,{setNodeRef:o,transform:s,transition:d,active:c}=Ny({id:n,transition:r?null:I2}),u=n===(c==null?void 0:c.id),m=l.useMemo(()=>({transform:xj.Translate.toString(s),transition:d,pointerEvents:c?"none":void 0}),[s,d,c]),p=l.useCallback(h=>{o(h),typeof t=="function"?t(h):t&&(t.current=h)},[t,o]);return i.jsx(Hx,{ref:p,style:m,$moving:u,className:u?Wm:"","data-index":e["data-index"],children:a})});function Gm(e){const{onItemMove:t,onItemMoveEnd:n,onItemMoveStart:a,sortable:r,...o}=e,s=l.useCallback(d=>{t==null||t(d)},[t]);return r?i.jsx(N2,{onItemMove:s,onItemMoveStart:a,onItemMoveEnd:n,...o}):i.jsx(Ze,{...o})}const qm=l.forwardRef(function(e,t){const{sortable:n,...a}=e;return i.jsx(Oy.Provider,{value:e.id,children:n?i.jsx(O2,{ref:t,...a}):i.jsx(Hx,{ref:t,...a})})});function Ym(e){return`inset 0 0 0 ${e.width}px ${e.color}`}function rc(e){const{base:t,border:n,focusRing:a}=e,r=a.offset+a.width,o=0-a.offset,s=t?t.bg:"var(--card-bg-color)";return[o>0&&`inset 0 0 0 ${o}px var(--card-focus-ring-color)`,n&&Ym(n),o<0&&`0 0 0 ${0-o}px ${s}`,r>0&&`0 0 0 ${r}px var(--card-focus-ring-color)`].filter(Boolean).join(",")}function Kx(e){return k(e)(t=>{const{$border:n,$radius:a}=t,{card:r,color:o,radius:s}=Re(t.theme),d={width:n?1:0,color:"var(--card-border-color)"};return ae`
        --card-focus-box-shadow: ${Ym(d)};

        border-radius: ${Te(s[a??1])};
        outline: none;
        box-shadow: var(--card-focus-box-shadow);

        &:focus {
          --card-focus-box-shadow: ${rc({border:d,base:o,focusRing:{...r.focusRing,offset:0}})};
        }
      `})}function Wx(e){return e.files&&e.files.length>0?Promise.resolve(Array.from(e.files||[])):Gx(Array.from(e.items||[])).then(On)}function F2(e){const t=Array.from(e.files||[]),n=Array.from(e.items||[]);return t&&t.length>0?Promise.resolve(t):Gx(n).then(On)}function lf(e){return e===null?[]:[e]}function Gx(e){return Promise.all(e.map(t=>{if(t.kind==="file"&&t.webkitGetAsEntry){let n;try{n=t.webkitGetAsEntry()}catch{return lf(t.getAsFile())}return n?n.isDirectory?qx(n):lf(t.getAsFile()):[]}if(t.kind==="file"){const n=t.getAsFile();return Promise.resolve(n?[n]:[])}return t.kind==="string"?(console.warn('DataTransfer with kind="string" is currently not supported'),Promise.resolve([])):(console.warn("Unknown DataTransferItem.kind: %s",t.kind),Promise.resolve([]))}))}function qx(e){if(e.isFile)return new Promise((t,n)=>e.file(t,n)).then(t=>[t]);if(e.isDirectory){const t=e.createReader();return new Promise((n,a)=>t.readEntries(n,a)).then(n=>n.filter(a=>!a.name.startsWith("."))).then(n=>Promise.all(n.map(qx)).then(On))}return Promise.resolve([])}function R2(e){return e.type==="application/portable-text"}function D2(e,t="image/jpeg",n=1){return e.match(/^webkit-fake-url:\/\//)?Promise.reject(new Error("Cannot read image contents from webkit fake url")):new Promise((a,r)=>{const o=new Image;o.crossOrigin="anonymous",o.referrerPolicy="strict-origin-when-cross-origin",o.onload=()=>{const s=document.createElement("canvas");s.width=o.width,s.height=o.height;const d=s.getContext("2d");d==null||d.drawImage(o,0,0,s.width,s.height);try{s.toBlob(a,t,n)}catch(c){r(c)}},o.src=e})}const $2={opacity:0,position:"absolute"};function Yx(e){return l.forwardRef(function(t,n){const{onFiles:a,onFilesOver:r,onFilesOut:o,disabled:s,...d}=t,[c,u]=l.useState(!1),m=l.useRef(null),p=l.useRef(null);l.useImperativeHandle(n,()=>p.current);const h=l.useRef([]),f=l.useCallback(T=>{a==null||a(T)},[a]),g=l.useCallback(T=>{T.target===p.current&&(T.ctrlKey||T.metaKey)&&T.key==="v"&&u(!0)},[]),b=l.useCallback(T=>{Wx(T.clipboardData).then(j=>m.current?j.length>0?j:L2(m.current,"image/jpeg"):[]).then(j=>{var A;f(j),u(!1),(A=p.current)==null||A.focus()})},[f]),v=l.useCallback(T=>{h.current=[],T.preventDefault(),T.stopPropagation();const j=T.nativeEvent.dataTransfer;a&&j&&F2(j).then(A=>{A&&f(A)}),o==null||o()},[f,a,o]),y=l.useCallback(T=>{a&&(T.preventDefault(),T.stopPropagation())},[a]),x=l.useCallback(T=>{const j=Array.from(T.dataTransfer.items).map(A=>({type:A.type,kind:A.kind}));j.some(A=>R2(A))||(T.stopPropagation(),r&&p.current===T.currentTarget&&(h.current=[...new Set(h.current),T.currentTarget],r(j)))},[r]),w=l.useCallback(T=>{T.stopPropagation();const j=h.current.indexOf(T.currentTarget);j>-1&&h.current.splice(j,1),h.current.length===0&&(o==null||o())},[o]),C=l.useRef(!1);return l.useEffect(()=>{var T;!C.current&&c&&m.current?(m.current.focus(),B2(m.current)):C.current&&!c&&((T=m.current)==null||T.focus()),C.current=c},[c]),i.jsxs(i.Fragment,{children:[i.jsx(e,{...d,ref:p,onKeyDown:s?void 0:g,onDragOver:s?void 0:y,onDragEnter:s?void 0:x,onDragLeave:s?void 0:w,onDrop:s?void 0:v,"data-test-id":"file-target"}),!s&&c&&i.jsx("div",{contentEditable:!0,onPaste:b,ref:m,style:$2})]})})}function L2(e,t="image/jpeg"){return e.isContentEditable?new Promise(n=>setTimeout(n,10)).then(()=>Array.from(e.querySelectorAll("img"))).then(n=>(e.innerHTML="",n)).then(n=>Promise.all(n.map(a=>D2(a.src)))).then(n=>n.map(a=>new File([a],"pasted-image.jpg",{type:t}))):Promise.reject(new Error(`Expected element to be contentEditable="true". Instead found a non contenteditable ${e.tagName}`))}function B2(e){const t=document.createRange();t.selectNodeContents(e);const n=window.getSelection();n==null||n.removeAllRanges(),n==null||n.addRange(t)}function V2(e){const{hoveringFiles:t,types:n,resolveUploader:a}=e,r=t.filter(c=>n.some(u=>a(u,c))),o=t.length-r.length,s=n.length>1,{t:d}=L();return i.jsx(i.Fragment,{children:r.length>0?i.jsxs(i.Fragment,{children:[i.jsxs(et,{space:2,children:[i.jsx(E,{children:i.jsx(Qu,{})}),s?d("inputs.files.common.drop-message.drop-to-upload-multi",{count:r.length}):d("inputs.files.common.drop-message.drop-to-upload"),i.jsx(E,{})]}),o>0&&i.jsx(I,{marginTop:4,children:i.jsxs(et,{space:2,children:[i.jsx(E,{muted:!0,size:1,children:i.jsx(Li,{})}),i.jsx(E,{muted:!0,size:1,children:d("inputs.files.common.drop-message.drop-to-upload.rejected-file-message",{count:o})})]})})]}):i.jsxs(et,{space:2,children:[i.jsx(E,{children:i.jsx(Li,{})}),i.jsx(E,{children:d("inputs.files.common.drop-message.drop-to-upload.no-accepted-file-message",{count:t.length})})]})})}const U2=k(wi)`
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background-color: var(--card-bg-color);
  opacity: 0.8;
`,z2=k.div`
  position: relative;
`;function H2(e,t,n){return e.map(a=>({type:a,uploader:t(a,n)})).filter(a=>a.uploader)}function K2(e){const t=Yx(e);return l.forwardRef(function(n,a){const{children:r,resolveUploader:o,onUpload:s,types:d,...c}=n,{push:u}=Vt(),{t:m}=L(),p=l.useCallback((v,y)=>{const{type:x,uploader:w}=y;s==null||s({file:v,schemaType:x,uploader:w})},[s]),h=l.useCallback(v=>{if(!o)return;const y=v.map(C=>({file:C,uploaderCandidates:H2(d,o,C)})),x=y.filter(C=>C.uploaderCandidates.length>0),w=y.filter(C=>C.uploaderCandidates.length===0);w.length>0&&u({closable:!0,status:"warning",title:m("inputs.array.error.cannot-upload-unable-to-convert",{count:w.length}),description:w.map((C,T)=>i.jsxs(P,{gap:2,padding:2,children:[i.jsx(I,{children:i.jsx(E,{weight:"medium",children:C.file.name})}),i.jsx(I,{children:i.jsxs(E,{size:1,children:["(",C.file.type,")"]})})]},T))}),x.forEach(C=>{p(C.file,zi(C.uploaderCandidates,T=>T.uploader.priority)[0])})},[u,o,d,p,m]),[f,g]=l.useState([]),b=l.useCallback(()=>g([]),[]);return i.jsx(z2,{children:i.jsxs(t,{...c,ref:a,onFiles:h,onFilesOver:g,onFilesOut:b,children:[o&&f.length>0&&i.jsx(U2,{zOffset:10,children:i.jsx(V2,{hoveringFiles:f,types:d,resolveUploader:o})}),r]})})})}const W2=k(U)`
  height: 100%;
`,oc=Kx(K2(W2));function G2(e,t){return t.type==="toggle"?{open:!e.open}:{open:!1}}function Qd(e){var t;const[n,a]=l.useReducer(G2,{open:!1}),[r,o]=l.useState(null),s=(t=e.popoverProps.referenceElement)!=null?t:null;vt(l.useCallback(()=>{a({type:"close"})},[]),[r,s]),Pa(l.useCallback(m=>{m.key==="Escape"&&n.open&&(a({type:"close"}),s==null||s.focus())},[n,s]));const{onSelect:d,...c}=e.insertMenuProps,u=l.useCallback(m=>{d(m),a({type:"close"})},[d]);return{popover:l.useMemo(()=>i.jsx(rt,{ref:o,open:n.open,constrainSize:!0,overflow:"hidden",portal:!0,content:i.jsx(q2,{...c,onSelect:u}),...e.popoverProps}),[u,c,e.popoverProps,n]),state:n,send:a}}function q2(e){const{t}=L();return i.jsx(gS,{...e,labels:{"insert-menu.filter.all-items":t("inputs.array.insert-menu.filter.all-items"),"insert-menu.search.no-results":t("inputs.array.insert-menu.search.no-results"),"insert-menu.search.placeholder":t("inputs.array.insert-menu.search.placeholder"),"insert-menu.toggle-grid-view.tooltip":t("inputs.array.insert-menu.toggle-grid-view.tooltip"),"insert-menu.toggle-list-view.tooltip":t("inputs.array.insert-menu.toggle-list-view.tooltip")}})}function Xm(e){var t,n,a,r;const{schemaType:o,readOnly:s,children:d,onValueCreate:c,onItemAppend:u}=e,{t:m}=L(),[p,h]=l.useState(null),[f,g]=l.useState(null),b=l.useCallback(C=>{const T=c(C);u(T)},[c,u]),v=l.useCallback(()=>{b(o.of[0])},[o,b]),y=o.of.length>1?"inputs.array.action.add-item-select-type":"inputs.array.action.add-item",x={icon:Ta,mode:"ghost",size:"large",text:m(y)},w=Qd({insertMenuProps:{...(t=e.schemaType.options)==null?void 0:t.insertMenu,schemaTypes:e.schemaType.of,onSelect:b},popoverProps:{placement:"bottom",fallbackPlacements:["top"],matchReferenceWidth:(r=(a=(n=e.schemaType.options)==null?void 0:n.insertMenu)==null?void 0:a.views)==null?void 0:r.some(C=>C.name==="grid"),referenceBoundary:p,referenceElement:f}});return s?i.jsx(Ie,{portal:!0,content:m("inputs.array.read-only-label"),children:i.jsx(Ze,{children:i.jsx(Z,{...x,"data-testid":"add-read-object-button",disabled:!0})})}):i.jsxs(Ze,{ref:h,gap:1,style:{gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))"},children:[o.of.length===1?i.jsx(Z,{...x,onClick:v,"data-testid":"add-single-object-button"}):i.jsxs(i.Fragment,{children:[i.jsx(Z,{...x,"data-testid":"add-multiple-object-button",selected:w.state.open,onClick:()=>{w.send({type:"toggle"})},ref:g}),w.popover]}),d]})}const Y2=k(Z)(e=>{const{$grid:t,disabled:n}=e;return n?ae``:ae`
    cursor: ${t?"move":"ns-resize"};
  `}),Xx=function(e){const t=l.useContext(Oy),{mode:n="bleed",readOnly:a,...r}=e,{listeners:o,attributes:s}=Ny({id:t,disabled:a}),{t:d}=L();return i.jsx(Y2,{icon:Nk,tooltipProps:{content:d("inputs.array.action.drag.tooltip"),delay:{open:1e3},disabled:!!a},mode:n,"data-ui":"DragHandleButton",...r,...s,...o,disabled:a})},X2=k(P)`
  min-height: 33px;
`,J2=k(P)`
  position: absolute;
  top: 0;
  right: 0;
  height: 33px;
`,eu=k(U)`
  position: absolute;
  top: 0;
  left: 0;
`,Z2=k(U)`
  transition: border-color 250ms;
  box-sizing: border-box;
  position: relative;

  @media (hover: hover) {
    ${eu} {
      opacity: 0;
    }

    &:hover,
    &:focus-within {
      ${eu} {
        opacity: 1;
      }
    }
  }

  .${Wm} & {
    box-shadow:
      0 0 0 0,
      0 8px 17px 2px var(--card-shadow-umbra-color),
      0 3px 14px 2px var(--card-shadow-penumbra-color),
      0 5px 5px -3px var(--card-shadow-ambient-color);
  }

  &[aria-selected='true'] {
    box-shadow: 0 0 0 2px var(--card-focus-ring-color);
  }
`;function Jx(e){const{validation:t,selected:n,tone:a,presence:r,children:o,dragHandle:s,menu:d,footer:c,readOnly:u,...m}=e;return i.jsxs(Z2,{forwardedAs:P,direction:"column",border:!0,selected:n,"aria-selected":n,radius:1,tone:a,...m,children:[o,s&&i.jsx(eu,{margin:1,radius:2,display:"flex",tone:"inherit","data-ui":"DragHandleCard",children:i.jsx(Xx,{$grid:!0,mode:"ghost",readOnly:!!u})}),r&&i.jsx(J2,{align:"center",marginX:1,children:r}),i.jsxs(X2,{align:"center",paddingX:1,sizing:"border",justify:"space-between",children:[i.jsx(P,{children:t}),i.jsx(I,{children:c}),d]})]})}const Q2=k(U)`
  max-width: ${({theme:e})=>e.sanity.container[1]}px;
`;function eF(e){const{value:t,onFocus:n,vertical:a,...r}=e,[o,s]=l.useState(!1),[d,c]=l.useState(null),{t:u}=L();vt(()=>s(!1),[d]);const m=l.useCallback(f=>{(f.key==="Escape"||f.key==="Tab")&&s(!1)},[]),p=l.useCallback(()=>{s(f=>!f)},[]),h=wn(t);return i.jsx(rt,{open:o,ref:c,onKeyDown:m,portal:!0,constrainSize:!0,tone:"default",content:i.jsx(Q2,{margin:1,padding:3,onKeyDown:m,tabIndex:0,overflow:"auto",children:i.jsxs(B,{space:4,children:[i.jsx(I,{children:i.jsx(E,{weight:"medium",children:u("inputs.array.error.type-is-incompatible-title")})}),i.jsx(E,{size:1,children:i.jsx(Pe,{t:u,i18nKey:"inputs.array.error.current-schema-not-declare-description",values:{typeName:h}})}),i.jsx(I,{children:i.jsxs(E,{size:1,children:[i.jsx(nm,{})," ",u("inputs.array.error.can-delete-but-no-edit-description")]})}),i.jsxs(B,{space:2,children:[i.jsx(E,{size:1,weight:"medium",children:u("inputs.array.error.json-representation-description")}),i.jsx(U,{padding:2,overflow:"auto",border:!0,children:i.jsx(xn,{size:1,as:"pre",language:"json",children:JSON.stringify(t,null,2)})})]})]})}),children:i.jsx(U,{as:"button",type:"button",radius:2,tone:"inherit",paddingX:2,paddingY:3,style:{height:"100%"},onFocus:n,onClick:p,onKeyDown:m,__unstable_focusRing:!0,...r,children:i.jsxs(B,{space:4,marginTop:2,children:[i.jsx(I,{margin:1,children:i.jsx(E,{align:"center",size:4,children:i.jsx(mi,{})})}),i.jsx(E,{align:"center",size:1,children:i.jsx(Pe,{t:u,i18nKey:"inputs.array.error.type-is-incompatible-prompt",values:{typeName:h}})})]})})})}const tF={portal:!0,tone:"default"};function nF(e){const{member:t,sortable:n,readOnly:a}=e,r=l.useId(),{onChange:o}=Zn(),{t:s}=L(),d=l.useCallback(()=>{o(je.from([we([{_key:t.key}])]))},[o,t.key]);return i.jsx(Jx,{dragHandle:n,readOnly:a,tone:"caution",style:{height:"100%"},menu:i.jsx(ze,{button:i.jsx(wt,{}),id:`${r}-menuButton`,menu:i.jsx(Be,{children:i.jsx(ye,{text:s("inputs.array.action.remove-invalid-item"),tone:"critical",icon:_t,onClick:d})}),popover:tF}),children:t.error.type==="INVALID_ITEM_TYPE"?i.jsx(eF,{value:t.error.value,vertical:!0}):i.jsx("div",{children:s("inputs.array.error.unexpected-error",{error:t.error.type})})})}function Jm(e=[]){return e.reduce((t,n,a)=>{const r=typeof n;if(r==="number")return`${t}[${n}]`;if(r==="string")return`${t}${a===0?"":"."}${n}`;if(_r(n))return`${t}[_key=="${n._key}"]`;throw new Error(`Unsupported path segment "${n}"`)},"")}function aF(e){return e!==null||e!==void 0}function il(e,t,n){if(!n)throw new Error("missing context");if(e===!0)return[];if(Array.isArray(e))return e.flatMap(o=>il(o,t,n)).filter(aF);if(typeof e=="string")return il({message:e},t,n);if(typeof e.message!="string")throw new Error(`${Jm(n.path)}: Validator must return 'true' if valid or an error message as a string on errors`);const{message:a}=e,r=[];e.path&&r.push(e.path);for(const o of e.paths||[])r.push(o);return r.length?r.map(o=>({path:(n.path||[]).concat(o),level:t||"error",item:{message:a},message:a})):[{level:t||"error",item:{message:a},message:a,path:n.path||[]}]}function iF(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}function Zx(e,t){const{currentLocale:n}=t,a=n.id;if(e[a])return e[a];if(a.includes("-")){const r=a.split("-",1)[0];if(e[r])return e[r]}return e["en-US"]||e["en-GB"]||e.en||"Unknown validation error (not localized)"}function Qx(e){return e!==!0&&typeof e<"u"&&typeof e!="string"&&Ci(e)&&!("message"in e)}function _o(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!_o(e[n],t[n]))return!1;return!0}if(Array.isArray(e)!=Array.isArray(t))return!1;if(e&&t&&typeof e=="object"&&typeof t=="object"){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof Date!=t instanceof Date)return!1;if(e instanceof RegExp&&t instanceof RegExp)return e.toString()==t.toString();if(e instanceof RegExp!=t instanceof RegExp)return!1;for(let a=0;a<n.length;a++)if(n[a]!=="_key"&&!Object.prototype.hasOwnProperty.call(t,n[a]))return!1;for(let a=0;a<n.length;a++){const r=n[a];if(r!=="_key"&&!_o(e[r],t[r]))return!1}return!0}return!1}const rF={}.toString,cf=[Object,Function,Array,String,Boolean,Number,Date,RegExp,Error];function oF(e){for(let t=0;t<cf.length;t++)if(cf[t]===e)return!0;return!1}function eC(e){const t=rF.call(e).slice(8,-1);if(e==null)return t.toLowerCase();const n=e.constructor;return n&&!oF(n)?n.name:t}const df=5e3,uf=e=>{var t;return e.message?e.message:e.results.length===1?(t=e.results[0])==null?void 0:t.message:e.i18n.t("{{messages, list}}",{messages:e.results.map(n=>{var a;return n.message||((a=n.item)==null?void 0:a.message)}),formatParams:{messages:{style:"long",type:e.operation}}})},Zi={type:(e,t,n,{i18n:a})=>{const r=eC(t);return r!==e&&r!=="undefined"?n||a.t("validation:generic.incorrect-type",{actualType:r,expectedType:e}):!0},presence:(e,t,n,{i18n:a})=>t===void 0&&e==="required"?n||a.t("validation:generic.required"):!0,all:async(e,t,n,a)=>{const r=(await Promise.all(e.map(o=>o.validate(t,a)))).flat();return r.length===0?!0:uf({message:n,results:r,operation:"conjunction",i18n:a.i18n})},either:async(e,t,n,a)=>{const r=await Promise.all(e.map(s=>s.validate(t,a))),o=r.flat();return r.find(s=>!s.length)?!0:uf({message:n,results:o,operation:"disjunction",i18n:a.i18n})},valid:(e,t,n,{i18n:a})=>{const r=typeof t;if(r==="undefined")return!0;const o=(r==="number"||r==="string")&&`${t}`,s=o&&o.length>30?`${o.slice(0,30)}…`:o;return e.some(d=>_o(d,t))?!0:n||a.t("validation:generic.not-allowed",o?{context:"hint",replace:{hint:s}}:{})},custom:async(e,t,n,a)=>{const r=setTimeout(()=>{a.environment==="studio"&&console.warn(`Custom validator at ${Jm(a.path)} has taken more than ${df}ms to respond`)},df);let o;try{o=await e(t,a)}finally{clearTimeout(r)}return Qx(o)?Zx(o,a.i18n):typeof o=="string"&&n||o}},sF={...Zi,min:(e,t,n,{i18n:a,type:r})=>{if(!t||t.length>=e)return!0;const o=Rs(r)?"blocks":void 0;return n||a.t("validation:array.minimum-length",{minLength:e,context:o})},max:(e,t,n,{i18n:a,type:r})=>{if(!t||t.length<=e)return!0;const o=Rs(r)?"blocks":void 0;return n||a.t("validation:array.maximum-length",{maxLength:e,context:o})},length:(e,t,n,{i18n:a,type:r})=>{if(!t||t.length===e)return!0;const o=Rs(r)?"blocks":void 0;return n||a.t("validation:array.exact-length",{wantedLength:e,context:o})},presence:(e,t,n,{i18n:a})=>e==="required"&&!t?n||a.t("validation:generic.required",{context:"array"}):!0,valid:(e,t,n,{i18n:a})=>{if(typeof t>"u")return!0;const r=[];for(let s=0;s<t.length;s++){const d=t[s];if(e.some(u=>_o(u,d)))continue;const c=d&&d._key?{_key:d._key}:s;r.push([c])}const o=n||a.t("validation:generic.not-allowed");return r.map(s=>({message:o,path:s}))},unique:(e,t,n,{i18n:a})=>{const r=[];if(!t)return!0;for(let d=0;d<t.length;d++)for(let c=d+1;c<t.length;c++){const u=t[d],m=t[c];_o(u,m)&&(r.indexOf(d)===-1&&r.push(d),r.indexOf(c)===-1&&r.push(c))}const o=r.map(d=>{const c=t[d];return[c&&c._key?{_key:c._key}:d]}),s=n||a.t("validation:array.item-duplicate");return o.map(d=>({message:s,path:d}))}},lF={...Zi,presence:(e,t,n,{i18n:a})=>e==="required"&&typeof t!="boolean"?n||a.t("validation:generic.required",{context:"boolean"}):!0};function mf(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const cF=/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/,pf=(e="",t,n)=>{const a=(n==null?void 0:n.dateFormat)||Ki,r=(n==null?void 0:n.timeFormat)||L0;return Ko(t,e==="date"?a:`${a} ${r}`,e==="date")};function ws(e,t=!1){if(!e)return null;if(e==="now")return new Date;const n=new Date(e),a=isNaN(n.getTime());if(a&&t)throw new Error(`Unable to parse "${e}" to a date`);return a?null:n}const dF={...Zi,type:(e,t,n,{i18n:a})=>typeof t>"u"||cF.test(`${t}`)?!0:n||a.t("validation:date.invalid-format"),min:(e,t,n,{type:a,i18n:r})=>{const o=ws(t),s=ws(e,!0);if(!o||!t||o>=s)return!0;if(!a)throw new Error("`type` was not provided in validation context.");const d=mf(a.options)?a.options:{};return n||r.t("validation:date.minimum",{minDate:pf(a.name,s,d),providedMinDate:e})},max:(e,t,n,{type:a,i18n:r})=>{const o=ws(t),s=ws(e,!0);if(!o||!t||o<=s)return!0;if(!a)throw new Error("`type` was not provided in validation context.");const d=mf(a.options)?a.options:{};return n||r.t("validation:date.maximum",{maxDate:pf(a.name,s,d),providedMaxDate:e})}},uF=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,mF={...Zi,integer:(e,t,n,{i18n:a})=>Number.isInteger(t)?!0:n||a.t("validation:number.non-integer"),precision:(e,t,n,{i18n:a})=>{if(t===void 0)return!0;const r=t.toString().match(uF);return Math.max((r[1]?r[1].length:0)-(r[2]?parseInt(r[2],10):0),0)>e?n||a.t("validation:number.maximum-precision",{limit:e}):!0},min:(e,t,n,{i18n:a})=>t>=e?!0:n||a.t("validation:number.minimum",{minNumber:e}),max:(e,t,n,{i18n:a})=>t<=e?!0:n||a.t("validation:number.maximum",{maxNumber:e}),greaterThan:(e,t,n,{i18n:a})=>t>e?!0:n||a.t("validation:number.greater-than",{threshold:e}),lessThan:(e,t,n,{i18n:a})=>t<e?!0:n||a.t("validation:number.less-than",{threshold:e})},pF=["_key","_type","_weak"],hF={...Zi,presence:(e,t,n,{i18n:a})=>{if(e!=="required")return!0;const r=t&&Object.keys(t).filter(o=>!pF.includes(o));return t===void 0||r&&r.length===0?n||a.t("validation:generic.required",{context:"object"}):!0},reference:async(e,t,n,a)=>{if(!t)return!0;const{type:r,getDocumentExists:o,i18n:s}=a;if(!ji(t))return n||s.t("validation:object.not-reference");if(!r)throw new Error("`type` was not provided in validation context");if("weak"in r&&r.weak)return!0;if(!o)throw new Error("`getDocumentExists` was not provided in validation context");return await o({id:t._ref})?!0:s.t("validation:object.reference-not-published",{documentId:t._ref})},assetRequired:(e,t,n,{i18n:a})=>!t||!t.asset||!t.asset._ref?n||a.t("validation:object.asset-required",{context:e.assetType||""}):!0},Xc="http://sanity",fF=e=>/^\.*\//.test(e),gF=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,bF={...Zi,min:(e,t,n,{i18n:a})=>!t||t.length>=e?!0:n||a.t("validation:string.minimum-length",{minLength:e}),max:(e,t,n,{i18n:a})=>!t||t.length<=e?!0:n||a.t("validation:string.maximum-length",{maxLength:e}),length:(e,t,n,{i18n:a})=>(t||"").length===e?!0:n||a.t("validation:string.exact-length",{wantedLength:e}),uri:(e,t,n,{i18n:a})=>{const r=t||"";if(!r)return!0;const{options:o}=e,{allowCredentials:s,relativeOnly:d}=o,c=o.allowRelative||d;let u;try{u=c?new URL(r,Xc):new URL(r)}catch{return n||a.t("validation:string.url.invalid")}if(d&&u.origin!==Xc)return n||a.t("validation:string.url.not-relative");if(!c&&u.origin===Xc&&fF(r))return n||a.t("validation:string.url.not-absolute");if(!s&&(u.username||u.password))return n||a.t("validation:string.url.includes-credentials");const m=u.protocol.replace(/:$/,"");return o.scheme.some(p=>p.test(m))?!0:n||a.t("validation:string.url.disallowed-scheme",{scheme:m})},stringCasing:(e,t,n,{i18n:a})=>{const r=t||"";return e==="uppercase"&&r!==r.toLocaleUpperCase()?n||a.t("validation:string.uppercase"):e==="lowercase"&&r!==r.toLocaleLowerCase()?n||a.t("validation:string.lowercase"):!0},presence:(e,t,n,{i18n:a})=>e==="required"&&!t?n||a.t("validation:generic.required",{context:"string"}):!0,regex:(e,t,n,{i18n:a})=>{const{pattern:r,name:o,invert:s}=e,d=o||`${r.toString()}`,c=t||"";r.lastIndex=0;const u=r.test(c);return!s&&!u||s&&u?n||(s?a.t("validation:string.regex-match",{name:d}):a.t("validation:string.regex-does-not-match",{name:d})):!0},email:(e,t,n,{i18n:a})=>{const r=`${t||""}`.trim();return!r||gF.test(r)?!0:n||a.t("validation:string.email")}};var yF=Object.defineProperty,vF=(e,t,n)=>t in e?yF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qt=(e,t,n)=>vF(e,typeof t!="symbol"?t+"":t,n);const xF={Boolean:lF,Number:mF,String:bF,Array:sF,Object:hF,Date:dF},tC=e=>e&&e.type?tC(e.type):e,CF=e=>typeof e!="object"||!e?!1:e.type===nC.FIELD_REF,wF=[],hf=Symbol("FIELD_REF"),TF=["Array","Boolean","Date","Number","Object","String"];var Pt;const nC=(Pt=class{constructor(e){qt(this,"_type"),qt(this,"_level"),qt(this,"_required"),qt(this,"_typeDef"),qt(this,"_message"),qt(this,"_rules",[]),qt(this,"_fieldRules"),qt(this,"valueOfField",Pt.valueOfField.bind(Pt)),this._typeDef=e,this.reset()}_mergeRequired(e){if(this._required==="required"||e._required==="required")return"required";if(this._required==="optional"||e._required==="optional")return"optional"}error(e){const t=this.clone();return t._level="error",t._message=e||void 0,t}warning(e){const t=this.clone();return t._level="warning",t._message=e||void 0,t}info(e){const t=this.clone();return t._level="info",t._message=e||void 0,t}reset(){return this._type=this._type||void 0,this._rules=(this._rules||[]).filter(e=>e.flag==="type"),this._message=void 0,this._required=void 0,this._level="error",this._fieldRules=void 0,this}isRequired(){return this._required==="required"}clone(){const e=new Pt;return e._type=this._type,e._message=this._message,e._required=this._required,e._rules=lk(this._rules),e._level=this._level,e._fieldRules=this._fieldRules,e._typeDef=this._typeDef,e}cloneWithRules(e){const t=this.clone(),n=new Set;return e.forEach(a=>{a.flag==="type"&&(t._type=a.constraint),n.add(a.flag)}),t._rules=t._rules.filter(a=>{const r=["type","uri","email"].includes(a.flag),o=n.has(a.flag);return!(r&&o)}).concat(e),t}merge(e){if(this._type&&e._type&&this._type!==e._type)throw new Error("merge() failed: conflicting types");const t=this.cloneWithRules(e._rules);return t._type=this._type||e._type,t._message=this._message||e._message,t._required=this._mergeRequired(e),t._level=this._level==="error"?e._level:this._level,t}type(e){const t=`${e.slice(0,1).toUpperCase()}${e.slice(1)}`;if(!TF.includes(t))throw new Error(`Unknown type "${e}"`);const n=this.cloneWithRules([{flag:"type",constraint:t}]);return n._type=t,n}all(e){return this.cloneWithRules([{flag:"all",constraint:e}])}either(e){return this.cloneWithRules([{flag:"either",constraint:e}])}optional(){const e=this.cloneWithRules([{flag:"presence",constraint:"optional"}]);return e._required="optional",e}required(){const e=this.cloneWithRules([{flag:"presence",constraint:"required"}]);return e._required="required",e}custom(e,t={}){return t.bypassConcurrencyLimit&&Object.assign(e,{bypassConcurrencyLimit:!0}),this.cloneWithRules([{flag:"custom",constraint:e}])}min(e){return this.cloneWithRules([{flag:"min",constraint:e}])}max(e){return this.cloneWithRules([{flag:"max",constraint:e}])}length(e){return this.cloneWithRules([{flag:"length",constraint:e}])}valid(e){const t=Array.isArray(e)?e:[e];return this.cloneWithRules([{flag:"valid",constraint:t}])}integer(){return this.cloneWithRules([{flag:"integer"}])}precision(e){return this.cloneWithRules([{flag:"precision",constraint:e}])}positive(){return this.cloneWithRules([{flag:"min",constraint:0}])}negative(){return this.cloneWithRules([{flag:"lessThan",constraint:0}])}greaterThan(e){return this.cloneWithRules([{flag:"greaterThan",constraint:e}])}lessThan(e){return this.cloneWithRules([{flag:"lessThan",constraint:e}])}uppercase(){return this.cloneWithRules([{flag:"stringCasing",constraint:"uppercase"}])}lowercase(){return this.cloneWithRules([{flag:"stringCasing",constraint:"lowercase"}])}regex(e,t,n){var a,r;const o=typeof t=="string"?t:(a=t==null?void 0:t.name)!=null?a:n==null?void 0:n.name,s=typeof t=="string"?!1:(r=t==null?void 0:t.invert)!=null?r:n==null?void 0:n.invert,d={pattern:e,name:o,invert:s||!1};return this.cloneWithRules([{flag:"regex",constraint:d}])}email(){return this.cloneWithRules([{flag:"email"}])}uri(e){const t=(e==null?void 0:e.scheme)||["http","https"],n=Array.isArray(t)?t:[t];if(!n.length)throw new Error("scheme must have at least 1 scheme specified");const a={options:{scheme:n.map(r=>{if(!(r instanceof RegExp)&&typeof r!="string")throw new Error("scheme must be a RegExp or a String");return typeof r=="string"?new RegExp(`^${iF(r)}$`):r}),allowRelative:(e==null?void 0:e.allowRelative)||!1,relativeOnly:(e==null?void 0:e.relativeOnly)||!1,allowCredentials:(e==null?void 0:e.allowCredentials)||!1}};return this.cloneWithRules([{flag:"uri",constraint:a}])}unique(){return this.cloneWithRules([{flag:"unique"}])}reference(){return this.cloneWithRules([{flag:"reference"}])}fields(e){if(this._type!=="Object")throw new Error("fields() can only be called on an object type");const t=this.cloneWithRules([]);return t._fieldRules=e,t}assetRequired(){const e=tC(this._typeDef);let t;return e&&["image","file"].includes(e.name)?t=e.name==="image"?"image":"file":t="asset",this.cloneWithRules([{flag:"assetRequired",constraint:{assetType:t}}])}async validate(e,{__internal:t={},...n}){const{customValidationConcurrencyLimiter:a}=t,r=e==null;if(r&&this._required==="optional")return wF;const o=this._required===void 0&&r?this._rules.filter(d=>d.flag==="custom"):this._rules,s=this._type&&xF[this._type]||Zi;return(await Promise.all(o.map(async d=>{if(d.flag===void 0)throw new Error('Invalid rule, did not contain "flag"-property');const c=s[d.flag];if(!c){const p=this._type?`type "${this._type}"`:"rule without declared type";throw new Error(`Validator for flag "${d.flag}" not found for ${p}`)}let u="constraint"in d?d.constraint:null;if(CF(u)&&(u=ct(n.parent,u.path)),d.flag==="custom"&&a&&!(u!=null&&u.bypassConcurrencyLimit)){const p=u;u=async(...h)=>{await a.ready();try{return await p(...h)}finally{a.release()}}}const m=Qx(this._message)?Zx(this._message,n.i18n):this._message;try{const p=await c(u,e,m,n);return il(p,this._level,n)}catch(p){const h=`${Jm(n.path)}: Exception occurred while validating value: ${p.message}`;return il({message:h},"error",n)}}))).flat()}},qt(Pt,"FIELD_REF",hf),qt(Pt,"array",e=>new Pt(e).type("Array")),qt(Pt,"object",e=>new Pt(e).type("Object")),qt(Pt,"string",e=>new Pt(e).type("String")),qt(Pt,"number",e=>new Pt(e).type("Number")),qt(Pt,"boolean",e=>new Pt(e).type("Boolean")),qt(Pt,"dateTime",e=>new Pt(e).type("Date")),qt(Pt,"valueOfField",e=>({type:hf,path:e})),Pt),jF=vl(AF);function kF(e){const t=e.indexOf("drafts.")===0;return{published:t?e.slice(7):e,draft:t?e:`drafts.${e}`}}function ff(e){return e.reduce((t,n,a)=>{const r=typeof n=="number",o=_r(n),s=r||o?"[]":`${a===0?"":"."}${n}`;return`${t}${s}`},"")}const gf=(e,t)=>{const{getClient:n,document:a,path:r,type:o}=t,s=o==null?void 0:o.options;if(!a)throw new Error("`document` was not provided in validation context.");if(!r)throw new Error("`path` was not provided in validation context.");const d=(s==null?void 0:s.disableArrayWarning)||!1,{published:c,draft:u}=kF(a._id),m=a._type,p=ff(r.concat("current"));!d&&p.includes("[]")&&t.environment==="studio"&&jF(ff(r));const h=["_type == $docType","!(_id in [$draft, $published])",`${p} == $slug`].join(" && ");return n({apiVersion:"2023-11-13"}).fetch(`!defined(*[${h}][0]._id)`,{docType:m,draft:u,published:c,slug:e},{tag:"validation.slug-is-unique"})};function AF(e){console.warn([`Slug field at path ${e} is within an array and cannot be automatically checked for uniqueness`,'If you need to check for uniqueness, provide your own "isUnique" method',"To disable this message, set `disableArrayWarning: true` on the slug `options` field"].join(`
`))}const SF=async(e,t)=>{var n;if(!e)return!0;const{i18n:a}=t;if(typeof e!="object"||Array.isArray(e))return a.t("validation:slug.not-object");if(!YA(e)||e.current.trim().length===0)return a.t("validation:slug.missing-current");const r=(n=t==null?void 0:t.type)==null?void 0:n.options,o=(r==null?void 0:r.isUnique)||gf,s={...t,parent:t.parent,type:t.type,defaultIsUnique:gf};return await o(e.current,s)?!0:a.t("validation:slug.not-unique",{slug:e.current})},_F={array:!0,boolean:!0,date:!0,number:!0,object:!0,string:!0},EF=e=>e in _F;function Zm(e,t=new Set){return e?t.has(e)?[]:(t.add(e),[...e.type?Zm(e.type,t):[],e]):[]}function IF(e,t){let n=e;EF(t.jsonType)&&(n=n.type(t.jsonType));const a=(t==null?void 0:t.options)&&typeof t.options=="object"&&"list"in t.options&&t.options.list;return Array.isArray(a)&&(n=n.valid(a.map(r=>MF(r,t)))),t.name==="datetime"||t.name==="date"?n.type("Date"):t.name==="url"?n.uri():t.name==="slug"?n.custom(SF,{bypassConcurrencyLimit:!0}):t.name==="reference"?n.reference():t.name==="email"?n.email():n}function aC(e){return e?!("fields"in e)&&e.type?aC(e.type):!("fields"in e)||!Array.isArray(e.fields)?!1:e.fields.some(t=>t.name==="value"):!1}function MF(e,t){return t.jsonType==="object"&&aC(t)||e.value===void 0?e:e.value}function Eo(e){if(!e)return[];const t=e.validation;if(Array.isArray(t))return t.flatMap(a=>Eo({...e,validation:a}));if(t&&typeof t=="object")return[t];const n=Object.values(Zm(e).reduce((a,r)=>(a[r.name]=r,a),{})).reduce(IF,new nC(e));return t?Eo({...e,validation:t(n)}):[n]}function PF(e){return Vs(e,new Set),e}function Vs(e,t){if(!t.has(e)){if(t.add(e),e.validation=Eo(e),"fields"in e)for(const n of e.fields)Vs(n.type,t);if("of"in e)for(const n of e.of)Vs(n,t);if(e.annotations)for(const n of e.annotations)Vs(n,t)}}function NF(e){return e.getTypeNames().forEach(t=>{const n=e.get(t);n&&PF(n)}),e}const OF=typeof window>"u"||typeof document>"u",FF=[aa],RF=vl(function(){const e=DF();return e.init(),{currentLocale:aa,locales:FF,loadNamespaces:e.loadNamespaces,t:e.t}});function DF(){var e;const t={[aa.id]:{}},n=((e=Nv.bundles)==null?void 0:e.filter(q_))||[],a=new Set;for(const r of n)t[aa.id][r.namespace]=r.resources,a.add(r.namespace);return Fy({ns:Array.from(a),defaultNS:ko,initImmediate:!0,partialBundledLanguages:!0,fallbackLng:aa.id,lng:aa.id,supportedLngs:[aa.id],debug:!1,load:"currentOnly",resources:t,interpolation:{escapeValue:OF}})}const $F=function(e,t){const n=Date.now();return window.setTimeout(()=>{e({didTimeout:!1,timeRemaining(){return Math.max(0,Date.now()-n)}})},0)},LF=function(e){return window.clearTimeout(e)},rl=typeof window>"u"?void 0:window,BF=(rl==null?void 0:rl.requestIdleCallback)||$F,VF=(rl==null?void 0:rl.cancelIdleCallback)||LF,UF=e=>t=>{var n;if(typeof t!="object"||!t)return!0;const a=new Set((n=e.fields)==null?void 0:n.map(r=>r.name));return Object.keys(t).filter(r=>!r.startsWith("_")).filter(r=>!a.has(r)).map(r=>({message:`Field '${r}' does not exist on type '${e.name}'`,path:[r]}))},zF=10;Cj(zF);const bf=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),HF=e=>e!=null;function KF(e,t){if(t.length===1)return t[0];const n=$A(e)&&e._type,a=e==null||!n&&eC(e).toLowerCase();return a&&a!=="object"?t.find(r=>r.jsonType===a):t.find(r=>{var o;return((o=r.type)==null?void 0:o.name)===n})||t.find(r=>r.name===n)||t.find(r=>r.name==="object"&&a==="object")}const yf=new WeakMap;function WF({document:e,getClient:t,i18n:n=RF(),schema:a,getDocumentExists:r,environment:o,maxCustomValidationConcurrency:s}){if(typeof(e==null?void 0:e._type)!="string")throw new Error("Tried to validated a value without a '_type'");const d=a.get(e._type);if(!d)return o==="studio"?(console.warn('Schema type for object type "%s" not found, skipping validation',e._type),re([])):re([{level:"warning",message:`Could not find schema type for type '${e._type}', skipping validation`,path:[]}]);let c=yf.get(a);!c&&s&&(c=new PA(s),yf.set(a,c));const u={getClient:t,schema:a,parent:void 0,value:e,path:[],document:e,type:d,i18n:n,getDocumentExists:r,environment:o,customValidationConcurrencyLimiter:c};return Ot(n.loadNamespaces(["validation"])).pipe(Ee(()=>tu(u)),ut(m=>{console.error(m);const p=(m==null?void 0:m.message)||"Unknown error";return re([{level:"error",message:p,item:{message:p},path:[]}])}))}function tu({value:e,type:t,path:n=[],parent:a,customValidationConcurrencyLimiter:r,environment:o,...s}){const d=h=>(t==null?void 0:t.jsonType)==="object"&&Zm(t).find(f=>["object","document","file","image"].includes(f.name))&&o!=="studio"?h.custom(UF(t),{bypassConcurrencyLimit:!0}).warning():h,c=Eo(t),u=c.map(d).map(h=>tn(()=>h.validate(e,{...s,environment:o,parent:a,path:n,type:t,__internal:{customValidationConcurrencyLimiter:r}})));let m=[];const p=c.some(h=>h.isRequired());if((t==null?void 0:t.jsonType)==="object"&&(e||e==null&&p)){const h=t.fields.reduce((f,g)=>(f[g.name]=g.type,f),{});m=m.concat(c.map(f=>f._fieldRules).filter(HF).flatMap(f=>Object.entries(f)).flatMap(([f,g])=>{const b=h[f];return Eo({...b,validation:g}).map(d).map(v=>{const y=bf(e)?e[f]:void 0;return tn(()=>v.validate(y,{...s,parent:e,path:n.concat(f),type:b,environment:o,__internal:{customValidationConcurrencyLimiter:r}}))})})),m=m.concat(t.fields.map(f=>tu({...s,parent:e,value:bf(e)?e[f.name]:void 0,path:n.concat(f.name),type:f.type,environment:o,customValidationConcurrencyLimiter:r})))}return(t==null?void 0:t.jsonType)==="array"&&Array.isArray(e)&&(m=m.concat(e.map((h,f)=>tu({...s,parent:e,value:h,path:n.concat(_r(h)?{_key:h._key}:f),type:KF(h,t.of),environment:o,customValidationConcurrencyLimiter:r})))),tn(()=>at([...u,...m])).pipe(Ye(h=>zt(GF(),h),40),dv(),av(),K(On),K(h=>c.some(f=>f._fieldRules)?wo(h,f=>JSON.stringify(f)):h))}function GF(e){return new Dn(t=>{const n=BF(()=>{t.complete()},void 0);return()=>VF(n)})}var qF={name:"sanity.assetSourceData",title:"Asset Source Data",type:"object",fields:[{name:"name",title:"Source name",description:"A canonical name for the source this asset is originating from",type:"string"},{name:"id",title:"Asset Source ID",description:"The unique ID for the asset within the originating source so you can programatically find back to it",type:"string"},{name:"url",title:"Asset information URL",description:"A URL to find more information about this asset in the originating source",type:"string"}]},YF={name:"sanity.fileAsset",title:"File",type:"document",fieldsets:[{name:"system",title:"System fields",description:"These fields are managed by the system and not editable"}],fields:[{name:"originalFilename",type:"string",title:"Original file name",readOnly:!0},{name:"label",type:"string",title:"Label"},{name:"title",type:"string",title:"Title"},{name:"description",type:"string",title:"Description"},{name:"altText",type:"string",title:"Alternative text"},{name:"sha1hash",type:"string",title:"SHA1 hash",readOnly:!0,fieldset:"system"},{name:"extension",type:"string",title:"File extension",readOnly:!0,fieldset:"system"},{name:"mimeType",type:"string",title:"Mime type",readOnly:!0,fieldset:"system"},{name:"size",type:"number",title:"File size in bytes",readOnly:!0,fieldset:"system"},{name:"assetId",type:"string",title:"Asset ID",readOnly:!0,fieldset:"system"},{name:"uploadId",type:"string",readOnly:!0,hidden:!0,fieldset:"system"},{name:"path",type:"string",title:"Path",readOnly:!0,fieldset:"system"},{name:"url",type:"string",title:"Url",readOnly:!0,fieldset:"system"},{name:"source",type:"sanity.assetSourceData",title:"Source",readOnly:!0,fieldset:"system"}],preview:{select:{title:"originalFilename",path:"path",mimeType:"mimeType",size:"size"},prepare(e){return{title:e.title||e.path.split("/").slice(-1)[0],subtitle:`${e.mimeType} (${(e.size/1024/1024).toFixed(2)} MB)`}}},orderings:[{title:"File size",name:"fileSizeDesc",by:[{field:"size",direction:"desc"}]}]},XF={title:"Geographical Point",name:"geopoint",type:"object",fields:[{name:"lat",type:"number",title:"Latitude"},{name:"lng",type:"number",title:"Longitude"},{name:"alt",type:"number",title:"Altitude"}]},JF={name:"sanity.imageAsset",title:"Image",type:"document",fieldsets:[{name:"system",title:"System fields",description:"These fields are managed by the system and not editable"}],fields:[{name:"originalFilename",type:"string",title:"Original file name",readOnly:!0},{name:"label",type:"string",title:"Label"},{name:"title",type:"string",title:"Title"},{name:"description",type:"string",title:"Description"},{name:"altText",type:"string",title:"Alternative text"},{name:"sha1hash",type:"string",title:"SHA1 hash",readOnly:!0,fieldset:"system"},{name:"extension",type:"string",readOnly:!0,title:"File extension",fieldset:"system"},{name:"mimeType",type:"string",readOnly:!0,title:"Mime type",fieldset:"system"},{name:"size",type:"number",title:"File size in bytes",readOnly:!0,fieldset:"system"},{name:"assetId",type:"string",title:"Asset ID",readOnly:!0,fieldset:"system"},{name:"uploadId",type:"string",readOnly:!0,hidden:!0,fieldset:"system"},{name:"path",type:"string",title:"Path",readOnly:!0,fieldset:"system"},{name:"url",type:"string",title:"Url",readOnly:!0,fieldset:"system"},{name:"metadata",type:"sanity.imageMetadata",title:"Metadata"},{name:"source",type:"sanity.assetSourceData",title:"Source",readOnly:!0,fieldset:"system"}],preview:{select:{id:"_id",title:"originalFilename",mimeType:"mimeType",size:"size"},prepare(e){return{title:e.title||typeof e.path=="string"&&e.path.split("/").slice(-1)[0],media:{asset:{_ref:e.id}},subtitle:`${e.mimeType} (${(Number(e.size)/1024/1024).toFixed(2)} MB)`}}},orderings:[{title:"File size",name:"fileSizeDesc",by:[{field:"size",direction:"desc"}]}]},ZF={name:"sanity.imageCrop",title:"Image crop",type:"object",fields:[{name:"top",type:"number"},{name:"bottom",type:"number"},{name:"left",type:"number"},{name:"right",type:"number"}]},QF={name:"sanity.imageDimensions",type:"object",title:"Image dimensions",fields:[{name:"height",type:"number",title:"Height",readOnly:!0},{name:"width",type:"number",title:"Width",readOnly:!0},{name:"aspectRatio",type:"number",title:"Aspect ratio",readOnly:!0}]},eR={name:"sanity.imageHotspot",title:"Image hotspot",type:"object",fields:[{name:"x",type:"number"},{name:"y",type:"number"},{name:"height",type:"number"},{name:"width",type:"number"}]},tR={name:"sanity.imageMetadata",title:"Image metadata",type:"object",fieldsets:[{name:"extra",title:"Extra metadata…",options:{collapsable:!0}}],fields:[{name:"location",type:"geopoint"},{name:"dimensions",title:"Dimensions",type:"sanity.imageDimensions",fieldset:"extra"},{name:"palette",type:"sanity.imagePalette",title:"Palette",fieldset:"extra"},{name:"lqip",title:"LQIP (Low-Quality Image Placeholder)",type:"string",readOnly:!0},{name:"blurHash",title:"BlurHash",type:"string",readOnly:!0},{name:"hasAlpha",title:"Has alpha channel",type:"boolean",readOnly:!0},{name:"isOpaque",title:"Is opaque",type:"boolean",readOnly:!0}]},nR={name:"sanity.imagePalette",title:"Image palette",type:"object",fields:[{name:"darkMuted",type:"sanity.imagePaletteSwatch",title:"Dark Muted"},{name:"lightVibrant",type:"sanity.imagePaletteSwatch",title:"Light Vibrant"},{name:"darkVibrant",type:"sanity.imagePaletteSwatch",title:"Dark Vibrant"},{name:"vibrant",type:"sanity.imagePaletteSwatch",title:"Vibrant"},{name:"dominant",type:"sanity.imagePaletteSwatch",title:"Dominant"},{name:"lightMuted",type:"sanity.imagePaletteSwatch",title:"Light Muted"},{name:"muted",type:"sanity.imagePaletteSwatch",title:"Muted"}]},aR={name:"sanity.imagePaletteSwatch",title:"Image palette swatch",type:"object",fields:[{name:"background",type:"string",title:"Background",readOnly:!0},{name:"foreground",type:"string",title:"Foreground",readOnly:!0},{name:"population",type:"number",title:"Population",readOnly:!0},{name:"title",type:"string",title:"String",readOnly:!0}]},iR={title:"Slug",name:"slug",type:"object",fields:[{name:"current",title:"Current slug",type:"string",validation:e=>e.required()},{name:"source",title:"Source field",type:"string",hidden:!0}]};const rR=e=>e.severity==="error",oR=[qF,iR,XF,JF,YF,ZF,eR,tR,QF,nR,aR];function sR(e){const t=QA(e.types).getTypes(),n=eS(t),a=n.some(o=>o.problems.some(rR)),r=s0.compile({name:e.name,types:a?[]:[...e.types,...oR].filter(Boolean)});return r._validation=n,NF(r)}function la(e){return typeof e.title=="string"?e.title:e.type?la(e.type):e.name||e.jsonType}const lR=[0,0,1,0];function cR(e){return e.stopPropagation()}function dR(e){return e.stopPropagation()}function iC(e){const{children:t,header:n,id:a,legacy_referenceElement:r,onClose:o,type:s,width:d,autofocus:c}=e,[u,m]=l.useState(null),p=l.useRef(null),h=i.jsx(Xo,{margins:lR,children:i.jsx(I,{ref:p,children:t})});return s==="dialog"?i.jsx(So,{scrollElement:u,containerElement:p,children:i.jsx(En,{__unstable_autoFocus:c,contentRef:m,"data-testid":"edit-portal-dialog",header:n,id:a||"",onClickOutside:o,onClose:o,onDragEnter:cR,onDrop:dR,width:d,children:h})}):i.jsx(gte,{header:n,onClose:o,referenceElement:r,width:d,containerRef:m,children:i.jsx(So,{scrollElement:u,containerElement:p,children:h})})}function Qm(e){return e.reduce((t,n)=>n!=null&&n.children?[...t,n,...Qm(n.children)]:[...t,n],[]).map(({children:t,...n})=>n)}function uR(e,t){var n;const a=Qm(e),r=Tr(t).toLocaleLowerCase();return(n=a==null?void 0:a.filter(o=>Tr(o.title||"").toLocaleLowerCase().includes(r)))==null?void 0:n.sort((o,s)=>{var d,c;const u=(d=o.title)==null?void 0:d.startsWith(r),m=(c=s.title)==null?void 0:c.startsWith(r);return u&&!m?-1:!u&&m?1:0})}function mR(e){const[t,n]=l.useState([]),{observeForPreview:a}=gn(),r=l.useMemo(()=>Qm(e),[e]),o=l.useCallback(s=>{const d=s.path;n(c=>c.some(u=>tt(u.path,d))?c.map(u=>tt(u.path,d)?{...s,title:s==null?void 0:s.title}:u):c.concat(s))},[n]);return l.useEffect(()=>{n([]),r.forEach(s=>{a(s.value,s.schemaType).pipe(K(d=>{var c;return{...s,title:(c=d.snapshot)==null?void 0:c.title}})).subscribe(o).unsubscribe()})},[r,o,a]),t}function sc(e){const t=dw(e),{t:n}=L();return l.useMemo(()=>{var a;return{...t,value:{...(t==null?void 0:t.value)||{},title:((a=t==null?void 0:t.value)==null?void 0:a.title)||n("preview.default.title-fallback")}}},[t,n])}const rC=33,pR=50;function hR(e){const{item:t,onPathSelect:n,selected:a,isFirst:r,renderMenuItemTitle:o}=e,{value:s}=sc({schemaType:t.schemaType,value:t.value}),{title:d}=s;return i.jsx(B,{marginTop:r?void 0:1,children:i.jsx(He,{mode:"bleed",onClick:()=>n(t.path),selected:a,title:d,padding:2,children:i.jsxs(P,{align:"center",gap:3,justify:"space-between",children:[i.jsx(P,{flex:1,children:o(s)}),a&&i.jsx(E,{size:1,children:i.jsx(Gn,{})})]})})})}function fR(e){const{items:t,onPathSelect:n,selectedPath:a,collapsed:r=!1}=e,{t:o}=L(),s=l.useCallback(u=>{const m=t[u];return tt(m.path,a)},[t,a]),d=l.useCallback(u=>{const{title:m,media:p}=u;return r?i.jsxs(P,{align:"center",gap:1,children:[i.jsx(E,{size:1,muted:!0,children:"/"}),i.jsx(Xn,{title:m,media:p,layout:"inline"})]}):i.jsx(Xn,{title:m,media:p,layout:"inline"})},[r]),c=l.useCallback(u=>{const m=tt(u.path,a),p=tt(u.path,t[0].path);return i.jsx(hR,{isFirst:p,item:u,onPathSelect:n,renderMenuItemTitle:d,selected:m})},[d,t,n,a]);return i.jsx(Gi,{activeItemDataAttr:"data-hovered",ariaLabel:o("tree-editing-dialog.breadcrumbs.menu"),autoFocus:Go?void 0:"input","data-testid":"tree-editing-breadcrumbs-menu",getItemDisabled:s,itemHeight:rC,items:t,overscan:5,padding:1,renderItem:c})}const gR=["bottom-start"],bR=k(P)``,yR=k(U)`
  min-height: max-content;
`,vR=k(P)(e=>{const{$maxDisplayedItems:t,$itemHeight:n}=e;return ae`
    --item-height: ${n}px;
    --max-items: ${t};
    --list-padding: 0.5rem;

    position: relative;
    max-height: calc(var(--item-height) * var(--max-items) + var(--list-padding));
    min-height: calc((var(--item-height) * 1));
  `}),xR=k(Ry)(()=>ae`
    [data-ui='Popover__wrapper'] {
      width: 250px;
      display: flex;
      flex-direction: column;
      border-radius: ${({theme:e})=>e.sanity.radius[3]}px;
      position: relative;
      overflow: hidden;
      overflow: clip;
    }
  `);function vf(e){const{button:t,collapsed:n=!1,items:a,menuTitle:r,onPathSelect:o,parentElement:s,selectedPath:d}=e,[c,u]=l.useState(!1),[m,p]=l.useState(null),[h,f]=l.useState(null),g=l.useCallback(()=>{c&&(u(!1),h==null||h.focus())},[h,c]),b=l.useCallback(C=>{const{key:T,shiftKey:j}=C;(j&&T==="Tab"||T==="Escape"||T==="Tab")&&g()},[g]),v=l.useCallback(()=>{u(!c)},[c]),y=l.useCallback(C=>{o(C),u(!1)},[o]);vt(()=>u(!1),[m,h]);const x=i.jsx(bR,{direction:"column",flex:1,forwardedAs:qa,height:"fill",returnFocus:!0,children:i.jsxs(vR,{$itemHeight:rC,$maxDisplayedItems:pR,direction:"column",overflow:"hidden",children:[r&&i.jsx(yR,{borderBottom:!0,padding:3,sizing:"border",children:i.jsx(I,{paddingX:1,sizing:"border",children:i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",weight:"semibold",title:r,children:r})})}),i.jsx(fR,{collapsed:n,items:a,onPathSelect:y,selectedPath:d})]})}),w=l.cloneElement(t,{"aria-expanded":c,"aria-haspopup":"true","data-testid":"tree-editing-breadcrumb-menu-button",id:"tree-breadcrumb-menu-button",onClick:v,ref:f,selected:c});return i.jsx(xR,{animate:!0,constrainSize:!0,content:x,"data-testid":"tree-editing-breadcrumbs-menu-popover",fallbackPlacements:gR,onKeyDown:b,open:c,placement:"bottom-start",portal:!0,ref:p,referenceBoundary:s,children:w})}const xf=5,Cf=[],wf="/",oC=k(He)(({theme:e})=>{var t,n;const{bold:a}=((n=(t=Re(e))==null?void 0:t.font.text)==null?void 0:n.weights)||{};return ae`
    max-height: 1rem;
    overflow: hidden;
    min-width: 2ch;

    &[data-active='true'] {
      [data-ui='Text']:first-child {
        font-weight: ${a};
      }
    }
  `}),CR=k(E)`
  overflow: hidden;
  padding: 8px 0;
`,wR=l.forwardRef(function(e,t){var n;const{item:a,onPathSelect:r,isSelected:o,...s}=e,{value:d}=sc({schemaType:a.schemaType,value:a.value}),c=d.title,u=a.children&&((n=a.children)==null?void 0:n.length)>1;return i.jsx(oC,{"data-active":o?"true":"false",mode:"bleed",onClick:()=>r(a.path),padding:1,ref:t,space:2,title:c,...s,children:i.jsxs(P,{flex:1,align:"center",justify:"flex-start",gap:1,overflow:"hidden",children:[i.jsx(Xn,{title:c,media:d.media,layout:"inline"}),u&&i.jsx(E,{size:0,children:i.jsx(_n,{})})]})})}),Tf=l.forwardRef(function(e,t){const{children:n}=e;return i.jsx(I,{ref:t,children:i.jsx(E,{size:1,children:n})})});function TR(e){const{items:t=Cf,onPathSelect:n,selectedPath:a}=e,[r,o]=l.useState(null),s=m0(r),d=l.useMemo(()=>{const m=s==null?void 0:s.border.width;return m?m<500?3:m<700?4:xf:xf},[s==null?void 0:s.border.width]),c=l.useMemo(()=>{const m=t.length,p=Math.ceil(d/2),h=Math.floor(d/2);return d&&m>d?[...t.slice(0,p-1),t.slice(p-1,m-h),...t.slice(m-h)]:t},[t,d]),u=l.useMemo(()=>c.map((m,p)=>{var h;const f=`${m}-${p}`,g=p<c.length-1;if(Array.isArray(m))return i.jsxs(l.Fragment,{children:[i.jsx(vf,{button:i.jsx(oC,{mode:"bleed",padding:1,children:i.jsx(P,{overflow:"hidden",children:i.jsx(CR,{size:1,weight:"medium",textOverflow:"ellipsis",children:"..."})})}),collapsed:!0,items:m,onPathSelect:n,parentElement:r,selectedPath:a}),g&&i.jsx(Tf,{children:wf})]},f);const b=m.children&&((h=m.children)==null?void 0:h.length)>1,v=tt(m.path,a),y=i.jsx(wR,{item:m,isSelected:v,onPathSelect:n});return i.jsxs(l.Fragment,{children:[!b&&y,b&&i.jsx(vf,{button:y,items:m.children||Cf,onPathSelect:n,menuTitle:la(m.schemaType),parentElement:r,selectedPath:m.path}),g&&i.jsx(Tf,{children:wf})]},f)}),[c,a,n,r]);return i.jsx(P,{align:"center",as:"ol",gap:2,ref:o,children:u})}const sC=k(P).attrs({padding:2,align:"center",sizing:"border"})`
  height: 40px;
  min-height: 40px;
`,lC=51,jR=10;function kR(e){const{item:t,onPathSelect:n,isFirst:a}=e,{value:r}=sc({value:t.value,schemaType:t.schemaType}),o=r.title;return i.jsx(B,{marginTop:a?void 0:1,children:i.jsx(He,{mode:"bleed",onClick:()=>n(t.path),children:i.jsxs(B,{space:2,flex:1,children:[i.jsx(Xn,{title:o,media:r.media,layout:"inline"}),i.jsx(I,{children:i.jsx(E,{muted:!0,size:0,textOverflow:"ellipsis",children:la(t.parentSchemaType)})})]})})})}function AR(e){const{items:t,onPathSelect:n,textInputElement:a}=e,{t:r}=L(),o=l.useCallback(s=>{const d=tt(s.path,t[0].path);return i.jsx(kR,{isFirst:d,item:s,onPathSelect:n})},[t,n]);return i.jsx(Gi,{activeItemDataAttr:"data-hovered",ariaLabel:r("tree-editing-dialog.search.menu-label"),autoFocus:Go?void 0:"input",inputElement:a,itemHeight:lC,items:t,overscan:5,padding:1,renderItem:o})}const SR=["bottom-start"],_R=k(P)``,ER=k(P)(e=>{const{$maxDisplayedItems:t,$itemHeight:n}=e;return ae`
    --item-height: ${n}px;
    --max-items: ${t};
    --list-padding: 0.5rem;

    position: relative;
    max-height: calc(var(--item-height) * var(--max-items) + var(--list-padding));
    min-height: calc((var(--item-height) * 1));
    width: 100%;
  `}),IR=k(Ry)(()=>ae`
    [data-ui='Popover__wrapper'] {
      min-width: 250px;
      display: flex;
      flex-direction: column;
      border-radius: ${({theme:e})=>e.sanity.radius[3]}px;
      position: relative;
      overflow: hidden;
      overflow: clip;
    }
  `),MR=k(nn)`
  border-radius: inherit;
`;function PR(e){const{items:t,onPathSelect:n}=e,[a,r]=l.useState(null),[o,s]=l.useState(""),{t:d}=L(),c=o.length>0,u=mR(t),m=l.useMemo(()=>uR(u,o),[o,u]),p=l.useCallback(()=>s(""),[]),h=l.useCallback(y=>{s(y.target.value)},[]),f=l.useCallback(y=>{n(y),p()},[n,p]),g=l.useCallback(y=>{y.key==="Escape"&&(p(),a==null||a.focus())},[p,a]),b=l.useCallback(()=>{requestAnimationFrame(()=>{p()})},[p]),v=l.useMemo(()=>m.length===0?i.jsx(U,{children:i.jsx(B,{padding:4,sizing:"border",space:3,children:i.jsx(E,{align:"center",muted:!0,size:1,weight:"medium",children:d("tree-editing-dialog.search.no-results-title")})})}):i.jsx(_R,{direction:"column",flex:1,height:"fill",children:i.jsx(U,{children:i.jsx(ER,{$itemHeight:lC,$maxDisplayedItems:jR,direction:"column",overflow:"hidden",children:i.jsx(AR,{items:m,onPathSelect:f,textInputElement:a})})})}),[m,f,a,d]);return i.jsx(IR,{animate:!0,constrainSize:!0,content:v,fallbackPlacements:SR,matchReferenceWidth:!0,open:c,placement:"bottom-start",portal:!0,children:i.jsx(U,{radius:3,children:i.jsx(MR,{fontSize:1,icon:Rn,onBlur:b,onChange:h,onKeyDown:g,placeholder:d("tree-editing-dialog.search-placeholder"),ref:r,value:o})})})}function nu(e,t){return JSON.stringify(e)===JSON.stringify(t)}function Io(e){return e.length===0?!1:e[e.length-1].hasOwnProperty("_key")}function jf(e,t){return e.every((n,a)=>nu(t[a],n))&&Io(e)}function Jc(e){return Io(e)?e:e.slice(0,e.length-1)}function cC(e){return e.some(t=>t.children&&t.children.length>0)}function dC(e,t){var n;return((n=e.children)==null?void 0:n.some(a=>tt(a.path,t)||dC(a,t)))||!1}const NR={block:"center",behavior:"smooth",scrollMode:"if-needed"},OR=k(_a)`
  transition: transform 0.2s ease;

  &[data-expanded='true'] {
    transform: rotate(90deg);
  }
`,FR=k.div`
  min-width: 23px;
  max-width: 23px;
`,RR=k(B)(({theme:e})=>{var t,n;const a=((t=Re(e))==null?void 0:t.space[3])||0,r=(n=Re(e))==null?void 0:n.color._dark,o=Ge.gray[r?900:200].hex;return ae`
    margin-left: ${a+2}px;
    box-sizing: border-box;
    border-left: 1px solid ${o};
  `}),DR=k(P)(({theme:e})=>{var t,n,a;const r=(t=Re(e))==null?void 0:t.color.button.bleed.default.hovered.bg,o=(n=Re(e))==null?void 0:n.color.button.bleed.default.pressed.bg,s=(a=Re(e))==null?void 0:a.color.button.bleed.default.selected.bg;return ae`
    padding: 2px;
    padding-right: 3px;
    box-sizing: border-box;
    transition: inherit;

    &[data-selected='true'] {
      background-color: ${s};
      border-radius: ${e.sanity.radius[2]}px;
    }

    [data-ui='ExpandButton'],
    [data-ui='NavigateButton'] {
      transition: inherit;
      background-color: inherit;
      box-shadow: unset;
    }

    @media (hover: hover) {
      &:hover {
        &[data-selected='false'] {
          background-color: ${r};
          border-radius: ${Re(e).radius[2]}px;

          [data-ui='ExpandButton']:hover {
            background-color: ${o};
          }
        }

        [data-ui='ExpandButton']:hover {
          background-color: ${r};
        }
      }
    }
  `});function uC(e){const{item:t,onPathSelect:n,selectedPath:a,siblingHasChildren:r}=e,{children:o}=t,s=o&&o.length>0,[d,c]=l.useState(!1),{t:u}=Uu(),[m,p]=l.useState(null),h=l.useMemo(()=>tt(t.path,a),[t.path,a]),f=l.useMemo(()=>!Io(t.path),[t.path]),{value:g}=sc({schemaType:t.schemaType,value:t.value}),b=l.useMemo(()=>f?la(t.schemaType):g.title,[f,t.schemaType,g.title]),v=l.useCallback(()=>n(t.path),[t.path,n]),y=l.useCallback(()=>c(w=>!w),[]),x=l.useMemo(()=>s?i.jsx(OR,{"data-expanded":d?"true":"false"}):null,[s,d]);return l.useEffect(()=>{dC(t,a)&&c(!0)},[t,a]),l.useEffect(()=>{!m||!h||kr(m,NR)},[m,h]),i.jsxs(B,{"aria-expanded":d,as:"li",ref:p,role:"treeitem",space:1,children:[i.jsx(U,{"data-as":"button",radius:2,tone:"inherit",children:i.jsxs(DR,{align:"center","data-selected":h,"data-testid":"side-menu-item",children:[x&&i.jsx(He,{"aria-label":`${u(d?"tree-editing-dialog.sidebar.action.collapse":"tree-editing-dialog.sidebar.action.expand")} ${b}`,"data-ui":"ExpandButton",mode:"bleed",onClick:y,padding:2,children:i.jsx(E,{size:0,muted:!0,children:x})}),!x&&r&&i.jsx(FR,{}),i.jsx(B,{flex:1,children:i.jsx(He,{"data-ui":"NavigateButton",mode:"bleed",onClick:v,padding:1,title:b,children:i.jsx(P,{align:"center",children:i.jsx(Xn,{layout:"inline",media:f?i.jsx(ck,{}):g.media,title:b})})})})]})}),d&&s&&i.jsx(RR,{flex:1,forwardedAs:"ul",paddingLeft:1,role:"group",space:1,children:o.map(w=>{const C=cC(o);return i.jsx(uC,{item:w,onPathSelect:n,selectedPath:a,siblingHasChildren:C},Je(w.path))})})]},Je(t.path))}const $R=l.memo(function(e){const{items:t,onPathSelect:n,selectedPath:a}=e;return i.jsx(B,{as:"ul",role:"tree",space:2,"data-testid":"sidebar-tree-list",children:t.map(r=>{const o=cC(t);return i.jsx(uC,{item:r,onPathSelect:n,selectedPath:a,siblingHasChildren:o},Je(r.path))})})}),LR=k.div`
  position: absolute;
  top: 0;
  bottom: 0;
  width: 9px;
  z-index: 201;
  cursor: ew-resize;

  ${({position:e})=>e==="right"?ae`
          right: -4px;
        `:ae`
          left: -4px;
        `}

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    ${({position:e})=>e==="right"?ae`
            right: 4px;
          `:ae`
            left: 4px;
          `}
    bottom: 0;
    transition: opacity 200ms;
  }

  /* Hover effect */
  & > span:nth-child(2) {
    display: block;
    position: absolute;
    top: 0;
    ${({position:e})=>e==="right"?ae`
            right: 0px;
          `:ae`
            left: 0px;
          `}
    width: 9px;
    bottom: 0;
    background-color: var(--card-border-color);
    opacity: 0;
    transition: opacity 150ms;
  }

  @media (hover: hover) {
    &:hover > span:nth-child(2) {
      opacity: 0.2;
    }
  }
`;function BR(e){const{onResize:t,onResizeStart:n,position:a}=e,r=l.useRef(0),o=l.useCallback(s=>{s.preventDefault(),r.current=s.pageX,n();const d=u=>{u.preventDefault(),t(r.current-u.pageX)},c=()=>{window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",c)};window.addEventListener("mousemove",d),window.addEventListener("mouseup",c)},[t,n]);return i.jsxs(LR,{onMouseDown:o,position:a,children:[i.jsx("span",{}),i.jsx("span",{})]})}const VR=k(I)`
  position: relative;
  flex: 1;
  padding-left: 1px;
`;function UR(e){const{as:t,children:n,minWidth:a,maxWidth:r,initialWidth:o,...s}=e,[d,c]=l.useState(null),u=l.useRef(),[m,p]=l.useState(o),h=l.useCallback(()=>{u.current=d==null?void 0:d.offsetWidth},[d]),f=l.useCallback(b=>{const v=u.current;v&&p(Math.min(Math.max(v-b,a),r))},[a,r]),g=l.useMemo(()=>m?{flex:"none",width:m}:{minWidth:a,maxWidth:r},[a,r,m]);return i.jsxs(VR,{as:t,...s,ref:c,style:g,children:[n,i.jsx(BR,{onResize:f,onResizeStart:h,position:"right"})]})}const zR={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},HR=k(U)`
  flex-direction: column;
`,KR=k(hn(B))`
  overflow-x: hidden;
`,WR=k(B)`
  min-height: max-content;
`,GR=l.memo(function(e){const{items:t,onPathSelect:n,selectedPath:a,onOpenToggle:r,open:o,title:s}=e,{t:d}=Uu(),c=l.useMemo(()=>({content:d(o?"tree-editing-dialog.sidebar.action.close":"tree-editing-dialog.sidebar.action.open")}),[o,d]),u=i.jsxs(HR,{borderRight:!o,"data-testid":"tree-editing-sidebar","data-ui":"SidebarCard",display:"flex",forwardedAs:"aside",height:"fill",overflow:"hidden",tone:"transparent",children:[i.jsxs(sC,{align:"center",gap:2,children:[i.jsx(Z,{"data-testid":"tree-editing-sidebar-toggle",icon:dk,mode:"bleed",onClick:r,selected:o,tooltipProps:c}),o&&i.jsx(I,{flex:1,children:i.jsx(E,{size:1,muted:!0,weight:"medium",textOverflow:"ellipsis",children:s})})]}),o&&i.jsx(WR,{padding:2,sizing:"border",children:i.jsx(PR,{items:t,onPathSelect:n})}),i.jsx(Ea,{mode:"wait",children:o&&i.jsx(KR,{animate:"animate",exit:"exit",initial:"initial",overflow:"auto",padding:3,sizing:"border",variants:zR,children:i.jsx($R,{items:t,onPathSelect:n,selectedPath:a})})})]});return o?i.jsx(UR,{maxWidth:450,minWidth:150,initialWidth:250,children:u}):u}),qR=[0,0,1,0],YR=l.memo(function(e){const{breadcrumbs:t,children:n,footer:a,items:r,onPathSelect:o,selectedPath:s,setScrollElement:d,title:c}=e,u=l.useRef(null),m=l.useRef(null),[p,h]=l.useState(!1),f=l.useCallback(()=>h(b=>!b),[]),g=l.useCallback(b=>{u.current=b,d==null||d(b)},[d]);return i.jsxs(P,{height:"fill",overflow:"hidden",children:[i.jsx(GR,{items:r,onOpenToggle:f,onPathSelect:o,open:p,selectedPath:s,title:c}),i.jsxs(P,{direction:"column",flex:1,overflow:"hidden",children:[i.jsx(sC,{align:"center",sizing:"border",gap:2,paddingX:4,children:i.jsx(P,{flex:1,children:i.jsx(TR,{items:t,onPathSelect:o,selectedPath:s})})}),i.jsx(U,{flex:1,id:"tree-editing-form",overflow:"auto",ref:g,children:n&&i.jsx(So,{containerElement:m,scrollElement:u.current,children:i.jsx(Jn,{width:1,ref:m,paddingX:5,paddingY:5,sizing:"border",children:i.jsx(Xo,{margins:qR,children:n})})})}),a]})]})});function mC(e){const t=e.findIndex(n=>n==null?void 0:n.hasOwnProperty("_key"));return t===-1?e:e.slice(0,t)}function ep(e,t){var n;if(!t)return;const a=Ml(t),r=a[0];if(r&&pa(e)){const o=(n=e==null?void 0:e.fields)==null?void 0:n.find(s=>s.name===r);if(o){const s=Je(a.slice(1));return s?ep(o.type,s):o}}}function tp(e,t){const n=wn(t);return n==="object"&&e.of.length===1?e.of[0]:e.of.find(a=>a.name===n)}function XR(e,t){const n=wn(t);return e==null?void 0:e.of.find(a=>a.name===n||a.jsonType===n)}function kf(e){const{arraySchemaType:t,arrayValue:n,itemPath:a,parentPath:r}=e,o=n.map(d=>{const c=[...r,{_key:d._key}],u=tp(t,d);return gi(u)||!u?null:{children:lt,parentSchemaType:t,path:c,schemaType:u,value:d}}).filter(Boolean),s=o.find(d=>tt(d.path,a));return{children:o,parentSchemaType:t,path:a,schemaType:s.schemaType,value:s.value}}function JR(e){var t;const{arraySchemaType:n,arrayValue:a,documentValue:r,openPath:o,rootPath:s,recursive:d}=e;let c=[];const u=[],m=[];return((t=n.options)==null?void 0:t.treeEditing)===!1?{breadcrumbs:m,menuItems:u,relativePath:c,rootTitle:""}:(a.forEach(p=>{var h;const f=[...s,{_key:p._key}],g=tp(n,p);if(!g)return;const b=(g==null?void 0:g.fields)||[],v=[];if(gi(g)||((h=g==null?void 0:g.options)==null?void 0:h.treeEditing)===!1)return;if(jf(f,o)){const x=kf({arraySchemaType:n,arrayValue:a,itemPath:f,parentPath:s});m.push(x)}b.forEach(x=>{var w,C;const T=[...f,x.name],j=ja(r,T),A=$d(x==null?void 0:x.type),M=ua(x.type)&&x.type.of.some(S=>S.name==="block");if(((C=(w=x==null?void 0:x.type)==null?void 0:w.options)==null?void 0:C.treeEditing)!==!1){if(nu(T,o)&&(c=Jc(T)),!A&&!wv(x.type)&&ua(x.type)&&j&&!M){if(jf(T,o)){const N=kf({arraySchemaType:x.type,arrayValue:j,itemPath:T,parentPath:f});m.push(N)}const S=d({schemaType:x,documentValue:r,path:T,initial:!1});v.push({children:(S==null?void 0:S.menuItems)||lt,parentSchemaType:g,path:T,schemaType:x,value:j});return}M&&Je(o).startsWith(Je(T))&&(c=Jc(T))}});const y=$d(g==null?void 0:g.type);nu(f,o)&&(c=Jc(f)),y||u.push({children:v,parentSchemaType:n,path:f,schemaType:g,value:p})}),{breadcrumbs:m,menuItems:u,relativePath:c,rootTitle:""})}const Us=[],au={breadcrumbs:Us,menuItems:Us,relativePath:Us,rootTitle:""};function ZR(e){var t;const{openPath:n}=e,a=[],r=[];let o=[];const s=mC(n),d=ep(e.schemaType,Je(s)),c=la(d==null?void 0:d.type);if(!Ll(d==null?void 0:d.type)||((t=d==null?void 0:d.options)==null?void 0:t.treeEditing)===!1)return au;u({initial:!0,schemaType:d,documentValue:e.documentValue,path:s});function u(m){const{schemaType:p,path:h,initial:f,documentValue:g}=m,b=ja(g,h),v=Array.isArray(b)?b:Us,y=p==null?void 0:p.type,x=JR({arraySchemaType:y,arrayValue:v,documentValue:g,openPath:n,recursive:u,rootPath:h});return x.relativePath.length>0&&(o=x.relativePath),r.unshift(...x.breadcrumbs),f&&a.unshift(...x.menuItems),x}return{breadcrumbs:r,menuItems:a,relativePath:o,rootTitle:c}}function Af(e,t){if(t.length===0)return!1;const n=mC(t),a=ep(e,Je(n));if(Ll(a==null?void 0:a.type)){const r=a.type.of.every(s=>s==null?void 0:s.hasOwnProperty("to")),o=a.type.of.some(s=>(s==null?void 0:s.name)==="block");return!(r||o)}return!1}const QR=[],eD={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},tD={duration:.2,ease:"easeInOut"};function nD(e){return e.renderDefault(e)}const aD=k(wj)(({theme:e})=>{var t;const n=(t=Re(e))==null?void 0:t.space[4];return ae`
    [data-ui='DialogCard'] {
      padding: ${n}px;
      box-sizing: border-box;

      // Make the dialog full height
      & > [data-ui='Card']:first-child {
        flex: 1;
      }
    }
  `}),iD=hn(P);function rD(e){const{onPathFocus:t,onPathOpen:n,openPath:a,rootInputProps:r,schemaType:o}=e,{value:s}=r,{t:d}=L(),[c,u]=l.useState(au),[m,p]=l.useState(null),h=l.useRef(void 0),f=l.useRef(void 0),g=l.useCallback(()=>{m==null||m.scrollTo(0,0)},[m]),b=l.useCallback(C=>{const T=ZR(C);if(tt(T,c))return;const j=T.relativePath,A=j.length===0||!Io(j)?c.relativePath:j;u({...T,relativePath:A})},[c]),v=l.useMemo(()=>Bo(b,1e3),[b]),y=l.useCallback(()=>{v.cancel(),u(au),n(QR),f.current=void 0,h.current=void 0},[v,n]),x=l.useMemo(()=>Af(o,a),[o,a]),w=l.useCallback(C=>{v.cancel(),n(C),Io(C)||t(C)},[v,t,n]);return l.useEffect(()=>{if(!Af(o,a))return;const C=!tt(s,f.current),T=!tt(a,h.current);if(f.current===void 0&&h.current===void 0||T){b({schemaType:o,documentValue:s,openPath:a}),h.current=a;return}if(!(!C&&!T))return f.current=s,h.current=a,v({schemaType:o,documentValue:s,openPath:a}),()=>{v.cancel()}},[o,s,v,a,b]),!x||c.relativePath.length===0?null:i.jsx(aD,{__unstable_hideCloseButton:!0,autoFocus:!1,"data-testid":"tree-editing-dialog",id:"tree-editing-dialog",onClickOutside:y,onClose:y,padding:0,width:3,children:i.jsx(YR,{breadcrumbs:c.breadcrumbs,items:c.menuItems,onPathSelect:w,selectedPath:c.relativePath,title:c.rootTitle,setScrollElement:p,footer:i.jsx(U,{borderTop:!0,children:i.jsx(P,{align:"center",justify:"flex-end",paddingX:3,paddingY:2,sizing:"border",children:i.jsx(He,{"data-testid":"tree-editing-done",text:d("tree-editing-dialog.sidebar.action.done"),onClick:y})})}),children:i.jsx(Ea,{initial:!1,mode:"wait",onExitComplete:g,children:i.jsx(iD,{animate:"animate","data-testid":"tree-editing-dialog-content",direction:"column",exit:"exit",height:"fill",initial:"initial",overflow:"hidden",padding:1,sizing:"border",transition:tD,variants:eD,children:i.jsx(Rm,{...r,relativePath:c.relativePath,renderDefault:nD})},Je(c.relativePath))})})})}function pC({children:e,...t}){const n=l.useContext(Fs),{unstable_sources:a}=Dt();if("source"in t){const{source:r}=t;return i.jsx(Fs.Provider,{value:r,children:e})}if("name"in t){const{name:r}=t,o=a.find(s=>s.name===r);if(!o)throw new Error(`Could not find source with name \`${r}\` in current workspace`);return n===o?i.jsx(i.Fragment,{children:e}):i.jsx(Fs.Provider,{value:o,children:e})}throw new Error("Invalid props passed into SourceProvider. A `name` or a `source` object is required.")}function mt(){const e=l.useContext(Fs);if(!e)throw new Error("Could not find `source` context");return e}function lc(){return l.useContext(gv)}function cc(e){var t,n;const{children:a,legacyEditing:r}=e,{features:o}=mt(),s=lc(),d=l.useMemo(()=>{var c,u;const m=s.legacyEditing||r;return{enabled:((u=(c=o==null?void 0:o.beta)==null?void 0:c.treeArrayEditing)==null?void 0:u.enabled)===!0,legacyEditing:!!m}},[(n=(t=o==null?void 0:o.beta)==null?void 0:t.treeArrayEditing)==null?void 0:n.enabled,r,s.legacyEditing]);return i.jsx(gv.Provider,{value:d,children:a})}function np(e){var t,n;const{t:a}=L(),{onInsert:r,schemaTypes:o}=e,s=Qd({insertMenuProps:{...e.insertMenuOptions,schemaTypes:(t=e.schemaTypes)!=null?t:[],onSelect:h=>{e.onInsert("before",h)}},popoverProps:{referenceElement:e.referenceElement,placement:"top-end",fallbackPlacements:["bottom-end"]}}),d=Qd({insertMenuProps:{...e.insertMenuOptions,schemaTypes:(n=e.schemaTypes)!=null?n:[],onSelect:h=>{e.onInsert("after",h)}},popoverProps:{referenceElement:e.referenceElement,placement:"bottom-end",fallbackPlacements:["top-end"]}}),c=l.useCallback(()=>{o&&(o.length===1?r("before",o[0]):s.send({type:"toggle"}))},[s,r,o]),u=l.useCallback(()=>{o&&(o.length===1?r("after",o[0]):d.send({type:"toggle"}))},[d,r,o]),m=l.useMemo(()=>o?i.jsx(ye,{text:o.length===1?a("inputs.array.action.add-before"):`${a("inputs.array.action.add-before")}...`,icon:Dy,onClick:c}):null,[c,a,o]),p=l.useMemo(()=>o?i.jsx(ye,{text:o.length===1?a("inputs.array.action.add-after"):`${a("inputs.array.action.add-after")}...`,icon:$y,onClick:u}):null,[u,a,o]);return{insertBefore:{...s,menuItem:m},insertAfter:{...d,menuItem:p}}}const oD=k(U)`
  border-top-right-radius: inherit;
  border-top-left-radius: inherit;
  height: 100%;
  position: relative;

  @media (hover: hover) {
    &:hover {
      filter: brightness(95%);
    }
  }

  &:focus:focus-visible {
    box-shadow: 0 0 0 2px var(--card-focus-ring-color);
  }
`;function sD({readOnly:e,hasErrors:t,hasWarnings:n}){return e?"transparent":t?"critical":n?"caution":"default"}const lD={portal:!0,tone:"default"};function cD(e){var t,n,a,r,o,s,d,c;const{schemaType:u,parentSchemaType:m,path:p,readOnly:h,onRemove:f,value:g,open:b,onInsert:v,onFocus:y,onOpen:x,onClose:w,changed:C,focused:T,children:j,inputProps:{renderPreview:A}}=e,{t:M}=L(),S=lc(),N=((t=m==null?void 0:m.options)==null?void 0:t.treeEditing)===!1,D=N||S.legacyEditing,_=b&&(!S.enabled||D),F=((n=m.options)==null?void 0:n.sortable)!==!1,R=m.of,$=l.useRef(null);ac($,b),rn(T,(z,ne)=>{var ee;!z&&ne&&$.current&&((ee=$.current)==null||ee.focus())});const O=g._resolvingInitialValue,V=l.useCallback(()=>{v({items:[{...g,_key:Ao()}],position:"after"})},[v,g]),H=l.useCallback((z,ne)=>{v({items:[qr(ne)],position:z})},[v]),J=Wr(p,!0),q=l.useMemo(()=>J.length===0?null:i.jsx(Yo,{presence:J,maxAvatars:1}),[J]),oe=km(p,!0),ie=l.useMemo(()=>oe.length===0?null:i.jsx(I,{paddingX:1,paddingY:3,children:i.jsx(Gr,{validation:oe,__unstable_showSummary:!0})}),[oe]),te=oe.some(z=>z.level==="error"),X=oe.some(z=>z.level==="warning"),[le,me]=l.useState(null),{insertBefore:G,insertAfter:ce}=np({schemaTypes:R,insertMenuOptions:(a=m.options)==null?void 0:a.insertMenu,onInsert:H,referenceElement:le}),de=l.useMemo(()=>h?null:i.jsxs(i.Fragment,{children:[i.jsx(ze,{ref:me,onOpen:()=>{G.send({type:"close"}),ce.send({type:"close"})},button:i.jsx(wt,{selected:G.state.open||ce.state.open?!0:void 0}),id:`${e.inputId}-menuButton`,menu:i.jsxs(Be,{children:[i.jsx(ye,{text:M("inputs.array.action.remove"),tone:"critical",icon:_t,onClick:f}),i.jsx(ye,{text:M("inputs.array.action.duplicate"),icon:Br,onClick:V}),G.menuItem,ce.menuItem]}),popover:lD}),G.popover,ce.popover]}),[G,ce,V,f,e.inputId,h,M]),pe=sD({readOnly:h,hasErrors:te,hasWarnings:X}),W=i.jsx(Jx,{menu:de,presence:q,validation:ie,tone:pe,radius:2,border:!0,dragHandle:F,selected:_,readOnly:h,children:i.jsxs(oD,{tone:"inherit",overflow:"auto",forwardedAs:"button","data-ui":"PreviewCard","data-as":"button",type:"button",flex:1,tabIndex:0,disabled:O,onClick:x,ref:$,onFocus:y,__unstable_focusRing:!0,children:[A({schemaType:u,value:g,layout:"media",withBorder:!1,withShadow:!1}),O&&i.jsx(It,{fill:!0})]})}),Y=la(u);return i.jsxs(cc,{legacyEditing:N,children:[i.jsx(Kt,{path:p,isChanged:C,hasFocus:!!T,children:W}),_&&i.jsx(iC,{header:h?M("inputs.array.action.view",{itemTypeTitle:Y}):M("inputs.array.action.edit",{itemTypeTitle:Y}),type:((o=(r=m==null?void 0:m.options)==null?void 0:r.modal)==null?void 0:o.type)||"dialog",width:(c=(d=(s=m==null?void 0:m.options)==null?void 0:s.modal)==null?void 0:d.width)!=null?c:1,id:g._key,onClose:w,autofocus:T,legacy_referenceElement:$.current,children:j})]})}const dD=[];function uD(e){var t;const{arrayFunctions:n=Xm,elementProps:a,members:r,onChange:o,onInsert:s,onItemMove:d,onUpload:c,readOnly:u,renderAnnotation:m,renderBlock:p,renderField:h,renderInlineBlock:f,renderInput:g,renderPreview:b,resolveUploader:v,schemaType:y,value:x=dD}=e,{t:w}=L(),C=l.useCallback(S=>{s({items:[S],position:"before",referenceItem:0})},[s]),T=l.useCallback(S=>{s({items:[S],position:"after",referenceItem:-1})},[s]),j=((t=y.options)==null?void 0:t.sortable)!==!1,A=l.useCallback(({key:S,...N})=>i.jsx(cD,{...N},S),[]),M=l.useMemo(()=>r.map(S=>S.key),[r]);return i.jsxs(B,{space:2,children:[i.jsx(oc,{types:y.of,resolveUploader:v,onUpload:c,...a,tabIndex:0,children:i.jsxs(B,{"data-ui":"ArrayInput__content",space:2,children:[(r==null?void 0:r.length)===0&&i.jsx(U,{padding:3,border:!0,radius:2,children:i.jsx(E,{align:"center",muted:!0,size:1,children:y.placeholder||i.jsx(i.Fragment,{children:w("inputs.array.no-items-label")})})}),(r==null?void 0:r.length)>0&&i.jsx(U,{border:!0,radius:1,children:i.jsx(Gm,{columns:[2,3,4],gap:3,padding:1,margin:1,items:M,onItemMove:d,sortable:j,children:r.map(S=>i.jsxs(qm,{sortable:j,id:S.key,flex:1,children:[S.kind==="item"&&i.jsx(Im,{member:S,renderAnnotation:m,renderBlock:p,renderInlineBlock:f,renderItem:A,renderField:h,renderInput:g,renderPreview:b}),S.kind==="error"&&i.jsx(nF,{sortable:j,member:S,readOnly:u})]},S.key))})})]})}),i.jsx(n,{onChange:o,onItemAppend:T,onItemPrepend:C,onValueCreate:qr,readOnly:u,schemaType:y,value:x})]})}const mD=k(U)`
  position: relative;
  border: 1px solid transparent;
  transition: border-color 250ms;

  .${Wm} & {
    border-color: var(--card-shadow-umbra-color);
    box-shadow:
      0 0 0 0,
      0 8px 17px 2px var(--card-shadow-umbra-color),
      0 3px 14px 2px var(--card-shadow-penumbra-color),
      0 5px 5px -3px var(--card-shadow-ambient-color);
  }

  &:hover {
    border-color: var(--card-shadow-umbra-color);
  }

  &[aria-selected='true'] {
    border-color: var(--card-focus-ring-color);
  }
`;function dc(e){const{validation:t,selected:n,tone:a,presence:r,focused:o,children:s,dragHandle:d,menu:c,footer:u,readOnly:m}=e,p=l.useRef(null);return rn(o,(h,f)=>{var g;!h&&f&&((g=p.current)==null||g.focus())}),i.jsx(mD,{ref:p,selected:n,"aria-selected":n,radius:1,padding:1,tone:a,children:i.jsxs(B,{space:1,children:[i.jsxs(P,{align:"center",gap:1,children:[d&&i.jsx(Xx,{paddingY:3,readOnly:m}),i.jsx(I,{flex:1,children:s}),(r||t||c)&&i.jsxs(P,{align:"center",flex:"none",gap:2,style:{lineHeight:0},children:[r&&i.jsx(I,{flex:"none",children:r}),t&&i.jsx(I,{flex:"none",children:t}),c]})]}),u]})})}const pD=k(U)`
  max-width: ${({theme:e})=>e.sanity.container[1]}px;
`;function hC(e){const{value:t,onFocus:n,vertical:a,...r}=e,[o,s]=l.useState(!1),[d,c]=l.useState(null),{t:u}=L();vt(()=>s(!1),[d]);const m=l.useCallback(f=>{(f.key==="Escape"||f.key==="Tab")&&s(!1)},[]),p=l.useCallback(()=>{s(f=>!f)},[]),h=wn(t);return i.jsx(rt,{open:o,ref:c,onKeyDown:m,portal:!0,constrainSize:!0,tone:"default",content:i.jsx(pD,{margin:1,padding:3,onKeyDown:m,tabIndex:0,overflow:"auto",children:i.jsxs(B,{space:4,children:[i.jsx(I,{children:i.jsx(E,{weight:"medium",children:u("inputs.array.error.type-is-incompatible-title")})}),i.jsx(E,{size:1,children:i.jsx(Pe,{t:u,i18nKey:"inputs.array.error.current-schema-not-declare-description",values:{typeName:h}})}),i.jsx(I,{children:i.jsxs(E,{size:1,children:[i.jsx(nm,{})," ",u("inputs.array.error.can-delete-but-no-edit-description")]})}),i.jsxs(B,{space:2,children:[i.jsx(E,{size:1,weight:"medium",children:u("inputs.array.error.json-representation-description")}),i.jsx(U,{padding:2,overflow:"auto",border:!0,children:i.jsx(xn,{size:1,as:"pre",language:"json",children:JSON.stringify(t,null,2)})})]})]})}),children:i.jsx(U,{as:"button",type:"button",radius:2,tone:"inherit",paddingX:2,paddingY:3,flex:1,onFocus:n,onClick:p,onKeyDown:m,__unstable_focusRing:!0,...r,children:i.jsxs(P,{align:"center",children:[i.jsx(I,{marginRight:3,children:i.jsx(E,{children:i.jsx(mi,{})})}),i.jsx(I,{flex:1,children:i.jsx(E,{size:1,textOverflow:"ellipsis",children:i.jsx(Pe,{t:u,i18nKey:"inputs.array.error.type-is-incompatible-prompt",values:{typeName:h}})})})]})})})}const hD={portal:!0,tone:"default"};function fC(e){const{member:t,sortable:n,onRemove:a,readOnly:r}=e,o=l.useId(),{t:s}=L();return i.jsx(I,{paddingX:1,children:i.jsx(dc,{dragHandle:n,readOnly:!!r,tone:"caution",menu:i.jsx(ze,{button:i.jsx(wt,{}),id:`${o}-menuButton`,menu:i.jsx(Be,{children:i.jsx(ye,{text:s("inputs.array.action.remove-invalid-item"),tone:"critical",icon:_t,onClick:a})}),popover:hD}),children:t.error.type==="INVALID_ITEM_TYPE"?i.jsx(hC,{value:t.error.value}):i.jsx("div",{children:s("inputs.array.error.unexpected-error",{error:t.error.type})})})})}function fD(e,t){const n=l.useRef(e),a=n.current,r=t(a,e);return l.useEffect(()=>{r||(n.current=e)}),r?a:e}function gD(){const e=l.useContext(d0);if(!e)throw new Error("VirtualizerScrollInstance: missing context value");return e}const bD=[];function yD(e){var t;const{arrayFunctions:n=Xm,elementProps:a,members:r,onChange:o,onInsert:s,onItemMove:d,onUpload:c,focusPath:u,readOnly:m,renderAnnotation:p,renderBlock:h,renderField:f,renderInlineBlock:g,renderInput:b,renderItem:v,renderPreview:y,resolveUploader:x,schemaType:w,value:C=bD}=e,{t:T}=L(),[j,A]=l.useState(null),{space:M}=Lr().sanity,S=l.useCallback(G=>{s({items:[G],position:"before",referenceItem:0})},[s]),N=l.useCallback(G=>{s({items:[G],position:"after",referenceItem:-1})},[s]),D=fD(l.useMemo(()=>r.map(G=>G.key),[r]),fi),{scrollElement:_,containerElement:F}=gD(),R=l.useRef(null),$=l.useMemo(()=>jn(u[0])?u[0]._key:u[0],[u]),O=l.useCallback(G=>{const ce={...G};if(j!==null&&(ce.startIndex=Math.min(G.startIndex,j),ce.endIndex=Math.max(G.endIndex,j)),$){const de=D.findIndex(pe=>pe===$);de!==-1&&(ce.startIndex=Math.min(ce.startIndex,de),ce.endIndex=Math.max(ce.endIndex,de))}return kS(ce)},[j,$,D]),V=l.useCallback((G,ce)=>{if(!G.scrollElement)return;const de=G.scrollElement,pe=()=>{var W,Y,z,ne;const ee=(Y=(W=F.current)==null?void 0:W.getBoundingClientRect().top)!=null?Y:0,fe=(ne=(z=R.current)==null?void 0:z.getBoundingClientRect().top)!=null?ne:0,Oe=Math.floor(fe-ee);ce(de.scrollTop-Oe)};return pe(),G.scrollElement.addEventListener("scroll",pe,{capture:!1,passive:!0}),()=>{de.removeEventListener("scroll",pe)}},[F]),H=l.useCallback(()=>53,[]),J=Du({count:r.length,estimateSize:H,getScrollElement:l.useCallback(()=>_,[_]),observeElementOffset:V,rangeExtractor:O,getItemKey:l.useCallback(G=>D[G],[D]),scrollToFn:(G,ce,de)=>{G!==de.scrollOffset&&AS(G,ce,de)}}),q=J.getVirtualItems(),oe=l.useCallback(G=>{var ce,de;const{active:pe}=G;A((de=(ce=pe.data.current)==null?void 0:ce.sortable)==null?void 0:de.index)},[]),ie=l.useCallback(()=>{A(null)},[]),te=((t=w.options)==null?void 0:t.sortable)!==!1,X=1,le=1,me=2;return i.jsxs(B,{space:2,ref:R,children:[i.jsx(oc,{$radius:me,types:w.of,resolveUploader:x,onUpload:c,...a,tabIndex:0,children:i.jsx(B,{"data-ui":"ArrayInput__content",space:2,children:r.length===0?i.jsx(U,{padding:3,border:!0,radius:2,children:i.jsx(E,{align:"center",muted:!0,size:1,children:w.placeholder||i.jsx(i.Fragment,{children:T("inputs.array.no-items-label")})})}):i.jsx(U,{border:!0,radius:me,style:{boxSizing:"border-box",height:`${J.getTotalSize()+q.length*M[X]+M[le]}px`,width:"100%",position:"relative"},children:i.jsx(Gm,{axis:"y",gap:X,paddingY:le,items:D,onItemMove:d,onItemMoveStart:oe,onItemMoveEnd:ie,sortable:te,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${q[0].start}px)`},children:q.map(G=>{const ce=r[G.index];return i.jsxs(qm,{ref:J.measureElement,sortable:te,"data-index":G.index,id:ce.key,children:[ce.kind==="item"&&i.jsx(Im,{member:ce,renderAnnotation:p,renderBlock:h,renderField:f,renderInlineBlock:g,renderInput:b,renderItem:v,renderPreview:y}),ce.kind==="error"&&i.jsx(fC,{readOnly:m,sortable:te,member:ce,onRemove:()=>e.onItemRemove(ce.key)})]},G.key)})})})})}),i.jsx(n,{onChange:o,onItemAppend:N,onItemPrepend:S,onValueCreate:qr,readOnly:m,schemaType:w,value:C})]})}function gC(e){var t;return((t=e.schemaType.options)==null?void 0:t.layout)==="grid"?i.jsx(uD,{...e}):i.jsx(yD,{...e})}function ol(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e!="object"&&!Array.isArray(e))return e===t;if(e._key&&e._key===t._key)return!0;if(Array.isArray(e))return!e.length!==t.length?!1:e.every((r,o)=>ol(e[o],t[o]));const n=Object.keys(e),a=Object.keys(e);return n.length!==a.length?!1:n.every(r=>ol(e[r],t[r]))}function Sf(e,t){return e?e.some(n=>ol(n,t)):!1}function vD(e,t){return e.of.find(n=>n.name===wn(t))}const xD=[];function CD(e){var t,n;const{renderPreview:a,schemaType:r,onChange:o,onPathFocus:s,value:d=[],readOnly:c,elementProps:u,path:m,changed:p}=e,h=l.useMemo(()=>{var v;return(((v=r.options)==null?void 0:v.list)||xD).map((y,x)=>_r(y)?y:{...y,_key:`auto-generated-${x}`})},[(t=r.options)==null?void 0:t.list]),f=l.useCallback((v,y)=>{if(!v&&_r(y)){o(we([{_key:y._key}]));return}const x=h.filter(w=>ol(y,w)?v:Sf(d,w));o(x.length>0?be(x):we())},[o,h,d]),g=l.useCallback(v=>{s([v])},[s]),b=((n=r.options)==null?void 0:n.layout)==="grid";return i.jsx(Kt,{path:m,isChanged:p,hasFocus:!1,children:i.jsx(Ze,{gap:2,columns:b?Math.min(h.length,4):1,tabIndex:0,...u,children:h.map((v,y)=>{const x=vD(r,v),w=Sf(d,v),C=!x;return i.jsxs(P,{align:"center",as:"label",muted:C,children:[i.jsx($l,{disabled:C,checked:w,onChange:T=>f(T.currentTarget.checked,v),onFocus:()=>g(y),readOnly:c}),i.jsx(I,{flex:1,marginLeft:2,children:x?a({layout:"default",schemaType:x,value:v}):i.jsx(U,{tone:"caution",radius:2,children:i.jsx(cx,{value:v,onFocus:()=>g(y)})})})]},y)})})})}function wD(e){return!!(e&&typeof e=="object"&&"title"in e&&"value"in e)}function TD(e){return e.map(t=>wD(t)?{title:t.title||pn(String(t.value)),value:t.value}:{title:pn(String(t)),value:t})}function jD(e,t){return e.of.find(n=>n.name===wn(t.value))}function kD(e){var t,n;const{schemaType:a,onChange:r,value:o=[],readOnly:s,path:d,changed:c,onIndexFocus:u,elementProps:m}=e,p=l.useMemo(()=>{var g;return TD(((g=a.options)==null?void 0:g.list)||[])},[(t=a.options)==null?void 0:t.list]),h=(g,b)=>{const v=p.map(y=>y.value).filter(y=>y===b?g:o.includes(y));r(v.length>0?be(v):we())},f=((n=a.options)==null?void 0:n.layout)==="grid";return i.jsx(Kt,{path:d,isChanged:c,hasFocus:!1,children:i.jsx(Ze,{gap:2,columns:f?Math.min(p.length,4):1,...m,children:p.map((g,b)=>{const v=jD(a,g),y=o.includes(g.value),x=!v;return i.jsxs(P,{align:"center",as:"label",muted:x,children:[i.jsx($l,{disabled:x,checked:y,onChange:w=>h(w.currentTarget.checked,g.value),onFocus:()=>u(b),readOnly:s}),i.jsx(I,{padding:2,children:i.jsx(E,{children:g.title})}),!v&&i.jsx(hC,{value:g,onFocus:()=>u(b)})]},b)})})})}function bC(e){return j2(e)?i.jsx(CD,{...e}):i.jsx(kD,{...e})}function AD(e){const{schemaType:t,readOnly:n,children:a,onValueCreate:r,onItemAppend:o}=e,s=l.useId(),{t:d}=L(),c=l.useCallback(h=>{o(r(h))},[r,o]),u=l.useCallback(()=>{c(t.of[0])},[t,c]),m=l.useMemo(()=>({constrainSize:!0,portal:!0}),[]),p=t.of.length>1?"inputs.array.action.add-item-select-type":"inputs.array.action.add-item";return n?i.jsx(Ie,{portal:!0,content:d("inputs.array.read-only-label"),children:i.jsx(Ze,{children:i.jsx(Z,{icon:Ta,mode:"ghost",disabled:!0,size:"large",text:d(p)})})}):i.jsxs(Ze,{gap:1,style:{gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))"},children:[t.of.length===1?i.jsx(Z,{icon:Ta,mode:"ghost",onClick:u,size:"large",text:d(p)}):i.jsx(ze,{button:i.jsx(Z,{icon:Ta,mode:"ghost",size:"large",text:d(p)}),id:s||"",menu:i.jsx(Be,{children:t.of.map((h,f)=>{var g,b;const v=gi(h)&&(h.to||[]).length===1&&h.to[0].icon,y=h.icon||((g=h.type)==null?void 0:g.icon)||v;return i.jsx(ye,{text:h.title||((b=h.type)==null?void 0:b.name),onClick:()=>c(h),icon:y},f)})}),popover:m}),a]})}const SD={portal:!0,tone:"default",placement:"left",constrainSize:!0},_D=l.memo(function(e){const{types:t,onInsert:n}=e,{t:a}=L();return i.jsxs(i.Fragment,{children:[i.jsx(_f,{pos:"before",types:t,onInsert:n,text:a("inputs.array.action.add-before"),icon:Dy}),i.jsx(_f,{pos:"after",types:t,onInsert:n,text:a("inputs.array.action.add-after"),icon:$y})]})});function _f(e){const{types:t,onInsert:n,pos:a,text:r,icon:o}=e;return(t==null?void 0:t.length)===1?i.jsx(ye,{text:r,icon:o,onClick:()=>n(a,t[0])},a):i.jsx(Ly,{text:r,popover:SD,children:t==null?void 0:t.map(s=>i.jsx(ye,{icon:s.icon,text:s.title,onClick:()=>n(a,s)},s.name))},a)}const ED={portal:!0,tone:"default"},ID=l.forwardRef(function(e,t){const{sortable:n,value:a,insertableTypes:r,onInsert:o,onRemove:s,readOnly:d,inputId:c,validation:u,children:m,presence:p,schemaType:h}=e,f=u.filter(C=>C.level==="error").length>0,g=u.filter(C=>C.level==="warning").length>0,b=l.useCallback((C,T)=>{o({position:C,items:[Mm(T)]})},[o]),v=l.useCallback(()=>{a&&o({position:"after",items:[a]})},[o,a]),y=l.useMemo(()=>{if(f)return"critical";if(g)return"caution"},[f,g]),{t:x}=L(),w=i.jsx(ze,{button:i.jsx(wt,{}),id:`${c}-menuButton`,popover:ED,menu:i.jsxs(Be,{children:[i.jsx(ye,{text:x("inputs.array.action.remove"),tone:"critical",icon:_t,onClick:s}),i.jsx(ye,{text:x("inputs.array.action.duplicate"),icon:Br,onClick:v}),i.jsx(_D,{types:r,onInsert:b})]})});return i.jsx(dc,{tone:y,readOnly:!!d,menu:!d&&w,dragHandle:n,presence:p.length===0?null:i.jsx(Yo,{presence:p,maxAvatars:1}),validation:u.length>0?i.jsx(I,{paddingX:1,paddingY:3,children:i.jsx(Gr,{validation:u})}):null,children:i.jsx(P,{align:h?"flex-end":"center",ref:t,children:i.jsx(P,{align:"flex-end",flex:1,children:i.jsx(I,{flex:1,marginRight:2,children:m})})})})});function MD({schemaType:e}){const{t}=L();return i.jsx(U,{padding:3,border:!0,radius:2,children:i.jsx(E,{align:"center",muted:!0,size:1,children:e.placeholder||t("inputs.array.no-items-label")})})}function PD(e,t,n){return ND(e,t,a=>a===n)}function ND(e,t,n){let a=t-1,r=t;const o=e.length;for(;a>-1||r<o;){const s=e[r];if(r<o&&n(s,r))return r;const d=e[a];if(a>-1&&n(d,a))return a;a--,r++}return-1}var OD=Object.defineProperty,FD=(e,t,n)=>t in e?OD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ii=(e,t,n)=>FD(e,typeof t!="symbol"?t+"":t,n);class yC extends l.PureComponent{constructor(t){super(t),Ii(this,"_element",null),Ii(this,"handleAppend",n=>{const{value:a=[],onIndexFocus:r,onItemAppend:o}=this.props;o(n),r(a.length)}),Ii(this,"handlePrepend",n=>{const{onIndexFocus:a,value:r=[],onItemPrepend:o}=this.props;o(n),a(r.length)}),Ii(this,"handleSortEnd",n=>{const{onIndexFocus:a,onMoveItem:r,value:o}=this.props;o&&r(n),a(n.toIndex)}),Ii(this,"handleItemMoveStart",()=>{this.setState({disableTransition:!1})}),Ii(this,"handleItemMoveEnd",()=>{this.setState({disableTransition:!0})}),Ii(this,"renderArrayItem",n=>{var a;const{schemaType:r}=this.props,o=((a=r.options)==null?void 0:a.sortable)!==!1;return i.jsx(ID,{...n,sortable:o,insertableTypes:r.of})}),this.state={disableTransition:!1}}focus(){this._element&&this._element.focus()}getSnapshotBeforeUpdate(t){var n;const{focusPath:a=[],value:r=[]}=t,{focusPath:o=[],value:s=[]}=this.props;if(a[0]===o[0]&&r.length!==s.length){const d=o[0],c=window.getSelection();if(!((c==null?void 0:c.focusNode)instanceof HTMLElement))return null;const u=(n=c.focusNode)==null?void 0:n.querySelector("input,textarea");return u instanceof HTMLInputElement?{prevFocusedIndex:d,restoreSelection:{text:c.toString(),start:u.selectionStart,end:u.selectionEnd,value:u.value}}:{}}return null}componentDidUpdate(t,n,a){var r;const{onIndexFocus:o}=this.props;if(a!=null&&a.restoreSelection&&t.value){const s=t.value[a.prevFocusedIndex],d=PD(this.props.value||[],a.prevFocusedIndex,s);if(d===-1)return;const c=(r=this._element)==null?void 0:r.querySelector(`[data-item-index='${d}'] input,textarea`);if(c instanceof HTMLInputElement){c.focus();try{c.setSelectionRange(a.restoreSelection.start,a.restoreSelection.end)}catch{}}o(d)}}render(){const{schemaType:t,members:n,readOnly:a,renderInput:r,onUpload:o,onItemRemove:s,resolveUploader:d,elementProps:c,arrayFunctions:u=AD,changed:m}=this.props,p=!a&&ct(t,"options.sortable")!==!1,h=n.map(f=>({id:`${f.key}-${f.kind==="item"?f.item.value:"error"}`,member:f}));return i.jsxs(B,{space:2,"data-testid":"array-primitives-input",children:[i.jsx(oc,{types:t.of,resolveUploader:d,onUpload:o,...c,tabIndex:0,children:i.jsx(B,{space:1,children:h.length===0?i.jsx(MD,{schemaType:t}):i.jsx(U,{padding:1,border:!0,children:i.jsx(Gm,{onItemMove:this.handleSortEnd,onItemMoveStart:this.handleItemMoveStart,onItemMoveEnd:this.handleItemMoveEnd,items:h.map(f=>f.id),sortable:p,gap:1,children:h.map(({member:f,id:g},b)=>i.jsxs(qm,{id:g,sortable:p,disableTransition:this.state.disableTransition,children:[f.kind==="item"&&i.jsx(Kt,{path:f.item.path,isChanged:m,hasFocus:!1,children:i.jsx(aP,{member:f,renderItem:this.renderArrayItem,renderInput:r})}),f.kind==="error"&&i.jsx(fC,{readOnly:a,sortable:p,member:f,onRemove:()=>s(b)})]},f.key))})})})}),i.jsx(u,{onChange:this.props.onChange,onItemAppend:this.handleAppend,onItemPrepend:this.handlePrepend,onValueCreate:Mm,readOnly:this.props.readOnly,schemaType:this.props.schemaType,value:this.props.value})]})}}function RD(e){return l.useMemo(()=>{var t;return Array.isArray((t=e.schemaType.options)==null?void 0:t.list)},[e.schemaType])?i.jsx(bC,{...e}):k2(e)?i.jsx(yC,{...e}):i.jsx(gC,{...e})}const DD=k(U)`
  line-height: 1;
`,$D=k(I)`
  align-self: center;
`,LD=k(I)`
  line-height: 0;
`;function BD(e){var t;const{t:n}=L(),{id:a,value:r,schemaType:o,readOnly:s,elementProps:d,validation:c}=e,u=((t=o.options)==null?void 0:t.layout)||"switch",m=typeof r!="boolean",p=r||!1,h=u==="checkbox"?$l:rm,f=s?"transparent":void 0,g=i.jsx(LD,{padding:3,children:i.jsx(h,{label:o.title,...d,checked:p,readOnly:s,indeterminate:m,style:{margin:-4}})});return i.jsx(DD,{border:!0,"data-testid":"boolean-input",radius:2,tone:f,children:i.jsxs(P,{children:[s?i.jsx(Ie,{content:n("inputs.boolean.disabled"),children:g}):g,i.jsx(I,{flex:1,paddingY:2,children:i.jsx(_m,{deprecated:o.deprecated,description:o.description,inputId:a,validation:c,title:o.title})}),i.jsx($D,{paddingX:3,paddingY:1,children:i.jsx(zM,{maxAvatars:1,position:"top"})})]})})}function VD(e){const{date:t,focused:n,isCurrentMonth:a,isToday:r,onSelect:o,selected:s}=e,d=l.useCallback(()=>{o(t)},[t,o]);return i.jsx("div",{"aria-selected":s,"data-ui":"CalendarDay",children:i.jsx(U,{"aria-label":t.toDateString(),"aria-pressed":s,as:"button",__unstable_focusRing:!0,"data-weekday":!0,"data-focused":n?"true":"",role:"button",tabIndex:-1,onClick:d,padding:2,radius:2,selected:s,tone:r||s?"primary":"default",children:i.jsx(E,{muted:!s&&!a,size:1,style:{textAlign:"center"},weight:a?"medium":"regular",children:t.getDate()})})})}const UD=Lo(0,24),zD=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],HD=[1,2,3,4,5,6],KD=(e,t)=>{const n=Ol(e);return Fl({start:n,end:Rl(n)},{weekStartsOn:t===7?0:t})},WD=e=>e.map(t=>[t,...HD.map(n=>gt(t,n))]),GD=e=>{const{weekInfo:t}=Yi();return WD(KD(e,t.firstDay)).map(n=>({number:_l(n[0]),days:n}))};function qD(e){const{weekInfo:{firstDay:t}}=Yi(),n=t===1?e.weekDayNames:[e.weekDayNames[6],...e.weekDayNames.slice(0,6)];return i.jsx(I,{"aria-hidden":e.hidden||!1,"data-ui":"CalendarMonth",children:i.jsxs(Ze,{gap:1,style:{gridTemplateColumns:"repeat(7, minmax(44px, 46px))"},children:[n.map(a=>i.jsx(I,{paddingY:2,children:i.jsx(E,{size:1,weight:"medium",style:{textAlign:"center"},children:a})},a)),GD(e.date).map((a,r)=>a.days.map((o,s)=>{const d=e.focused&&ln(o,e.focused),c=e.selected&&ln(o,e.selected),u=ln(o,new Date),m=e.focused&&Al(o,e.focused);return i.jsx(VD,{date:o,focused:d,isCurrentMonth:m,isToday:u,onSelect:e.onSelect,selected:c},`${r}-${s}`)}))]})})}const Ef={dayPresets:!1,timePresets:!1},uc=l.forwardRef(function({onChange:e,onBlur:t,onKeyPress:n,value:a,...r},o){const[s,d]=l.useState(),c=l.useCallback(h=>{d(h.currentTarget.value)},[]),u=l.useCallback(h=>{h.currentTarget.value!==`${a}`&&e&&e(h),d(void 0)},[e,a]),m=l.useCallback(h=>{u(h),t&&t(h)},[u,t]),p=l.useCallback(h=>{h.key==="Enter"&&u(h),n&&n(h)},[u,n]);return i.jsx(nn,{...r,"data-testid":"date-input",ref:o,value:s===void 0?a:s,onChange:c,onBlur:m,onKeyPress:p})}),YD=e=>{const{onChange:t,...n}=e,a=l.useCallback(r=>{const o=parseInt(r.currentTarget.value,10);isNaN(o)||t(o)},[t]);return i.jsx(uc,{...n,fontSize:1,onChange:a,inputMode:"numeric",padding:2,radius:2})},XD=i.jsx("span",{"data-preserve-focus":!0,style:{overflow:"hidden",position:"absolute",outline:"none"},tabIndex:-1}),If={padding:2},JD=l.forwardRef(function(e,t){const{selectTime:n,onFocusedDateChange:a,selectedDate:r=new Date,focusedDate:o=r,timeStep:s=1,onSelect:d,labels:c,...u}=e,m=l.useCallback(j=>a(j),[a]),p=l.useCallback(j=>m(By(Vy(o,j),1)),[o,m]),h=l.useCallback(j=>p(Number(j.currentTarget.value)),[p]),f=l.useCallback(j=>m(wl(o,j)),[o,m]),g=l.useCallback(j=>m(Uy(o,j)),[o,m]),b=l.useCallback(j=>{d(Va(Di(j,r.getHours()),r.getMinutes()))},[d,r]),v=l.useCallback(j=>{const A=Number(j.currentTarget.value);d(Va(r,A))},[d,r]),y=l.useCallback(j=>{const A=Number(j.currentTarget.value);d(Di(r,A))},[d,r]);l.useCallback((j,A)=>{d(Di(Va(r,A),j))},[d,r]);const x=l.useRef(null);l.useImperativeHandle(t,()=>x.current);const w=l.useCallback(()=>{var j,A;(A=(j=x.current)==null?void 0:j.querySelector('[data-focused="true"]'))==null||A.focus()},[x]),C=l.useCallback(j=>{var A,M;if(!zD.includes(j.key))return;const S=j.currentTarget;if(j.preventDefault(),S.hasAttribute("data-calendar-grid")){w();return}j.key==="ArrowUp"&&a(gt(o,-7)),j.key==="ArrowDown"&&a(gt(o,7)),j.key==="ArrowLeft"&&a(gt(o,-1)),j.key==="ArrowRight"&&a(gt(o,1)),(M=(A=x.current)==null?void 0:A.querySelector("[data-preserve-focus]"))==null||M.focus()},[x,w,a,o]);l.useEffect(()=>{w()},[w]),l.useEffect(()=>{var j;(j=document.activeElement)!=null&&j.matches("[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]")&&w()},[x,w,o]),l.useCallback(()=>b(gt(new Date,-1)),[b]),l.useCallback(()=>b(new Date),[b]),l.useCallback(()=>b(gt(new Date,1)),[b]);const T=l.useCallback(()=>d(new Date),[d]);return i.jsxs(I,{"data-ui":"Calendar",...u,ref:x,children:[i.jsxs(I,{padding:2,children:[Ef.dayPresets,i.jsxs(P,{children:[i.jsx(I,{flex:1,children:i.jsx(ZD,{onChange:h,monthNames:c.monthNames,value:o==null?void 0:o.getMonth()})}),i.jsx(I,{marginLeft:2,children:i.jsx(QD,{moveFocusedDate:f,labels:{goToNextYear:c.goToNextYear,goToPreviousYear:c.goToPreviousYear},onChange:g,value:o.getFullYear()})})]}),i.jsxs(I,{"data-calendar-grid":!0,onKeyDown:C,marginTop:2,overflow:"hidden",tabIndex:0,children:[i.jsx(qD,{weekDayNames:c.weekDayNamesShort,date:o,focused:o,onSelect:b,selected:r}),XD]})]}),n&&i.jsxs(I,{padding:2,style:{borderTop:"1px solid var(--card-border-color)"},children:[i.jsxs(P,{align:"center",children:[i.jsxs(P,{align:"center",flex:1,children:[i.jsx(I,{children:i.jsx(ka,{"aria-label":c.selectHour,fontSize:1,padding:2,radius:2,value:r==null?void 0:r.getHours(),onChange:y,children:UD.map(j=>i.jsx("option",{value:j,children:`${j}`.padStart(2,"0")},j))})}),i.jsx(I,{paddingX:1,children:i.jsx(E,{size:1,children:":"})}),i.jsx(I,{children:i.jsx(ka,{"aria-label":c.selectMinute,fontSize:1,padding:2,radius:2,value:r==null?void 0:r.getMinutes(),onChange:v,children:Lo(0,60,s).map(j=>i.jsx("option",{value:j,children:`${j}`.padStart(2,"0")},j))})})]}),i.jsx(I,{marginLeft:2,children:i.jsx(Z,{text:c.setToCurrentTime,mode:"bleed",onClick:T})})]}),Ef.timePresets]})]})});function ZD(e){const{onChange:t,value:n,monthNames:a}=e;return i.jsx(P,{flex:1,gap:1,children:i.jsx(I,{flex:1,children:i.jsx(ka,{fontSize:1,radius:2,value:n,onChange:t,padding:2,children:a.map((r,o)=>i.jsx("option",{value:o,children:r},o))})})})}function QD(e){const{moveFocusedDate:t,onChange:n,value:a,labels:r}=e,o=l.useCallback(()=>t(-12),[t]),s=l.useCallback(()=>t(12),[t]);return i.jsxs(P,{gap:1,children:[i.jsx(Z,{"aria-label":r.goToPreviousYear,onClick:o,mode:"bleed",icon:Vr,tooltipProps:{content:"Previous year"},...If}),i.jsx(YD,{value:a,onChange:n,radius:0,style:{width:48}}),i.jsx(Z,{"aria-label":r.goToNextYear,onClick:s,mode:"bleed",icon:_a,tooltipProps:{content:"Next year"},...If})]})}const vC=l.forwardRef(function(e,t){const{value:n=new Date,onChange:a,calendarLabels:r,...o}=e,[s,d]=l.useState(),c=l.useCallback(u=>{a(u),d(void 0)},[a]);return i.jsx(JD,{...o,labels:r,ref:t,selectedDate:n,onSelect:c,focusedDate:s||n,onFocusedDateChange:d})}),e$=l.forwardRef(function(e,t){const{value:n,inputValue:a,onInputChange:r,onChange:o,selectTime:s,timeStep:d,calendarLabels:c,...u}=e,[m,p]=l.useState(null),h=l.useRef(null),f=l.useRef(null);l.useImperativeHandle(t,()=>h.current);const[g,b]=l.useState(!1);vt(()=>b(!1),[m]);const v=l.useCallback(()=>{var C,T;(C=h.current)==null||C.focus(),(T=h.current)==null||T.select()},[]),y=l.useCallback(C=>{C.key==="Escape"&&b(!1)},[]),x=l.useCallback(()=>b(!0),[]),w=i.jsx(P,{style:{padding:"5px"},children:i.jsx(Z,{ref:f,icon:Qt,mode:"bleed",onClick:x,style:{display:"block"},"data-testid":"select-date-button",tooltipProps:{content:"Select date"}})});return i.jsx(uc,{ref:h,...u,value:a,onChange:r,suffix:g?i.jsx(Tl,{zOffset:1e3,children:i.jsx(rt,{constrainSize:!0,"data-testid":"date-input-dialog",portal:!0,content:i.jsx(I,{overflow:"auto",children:i.jsx(qa,{onDeactivation:v,children:i.jsx(vC,{calendarLabels:c,selectTime:s,timeStep:d,onKeyUp:y,value:n,onChange:o})})}),open:!0,placement:"bottom",ref:p,children:w})}):w})}),t$=new Date,xC=l.forwardRef(function(e,t){const{id:n,deserialize:a,formatInputValue:r,onChange:o,parseInputValue:s,placeholder:d,readOnly:c,selectTime:u,serialize:m,timeStep:p,value:h,...f}=e,[g,b]=l.useState(null),{t:v}=L();l.useEffect(()=>{b(null)},[h]);const y=l.useCallback(j=>{const A=j.currentTarget.value,M=A===""?null:s(A);M===null?(o(null),typeof h>"u"&&g&&b(null)):M.isValid?o(m(M.date)):b(A)},[s,o,h,g,m]),x=l.useCallback(j=>{o(j?m(j):null)},[m,o]),w=l.useRef(null);l.useImperativeHandle(t,()=>w.current);const C=g?s(g):h?a(h):null,T=g||(C!=null&&C.isValid?r(C.date):h);return c?i.jsx(nn,{value:T,readOnly:!0}):i.jsx(e$,{...f,calendarLabels:e.calendarLabels,id:n,selectTime:u,timeStep:p,placeholder:d||v("inputs.datetime.placeholder",{example:r(t$)}),ref:w,value:C==null?void 0:C.date,inputValue:T||"",readOnly:!!c,onInputChange:y,onChange:x,customValidity:C==null?void 0:C.error})});function n$(e){return e instanceof Date&&!isNaN(e.valueOf())}function ap(e){return{goToTomorrow:e("calendar.action.go-to-tomorrow"),goToToday:e("calendar.action.go-to-today"),goToYesterday:e("calendar.action.go-to-yesterday"),goToNextMonth:e("calendar.action.go-to-next-month"),goToPreviousMonth:e("calendar.action.go-to-previous-month"),goToNextYear:e("calendar.action.go-to-next-year"),goToPreviousYear:e("calendar.action.go-to-previous-year"),setToCurrentTime:e("calendar.action.set-to-current-time"),selectHour:e("calendar.action.select-hour"),selectMinute:e("calendar.action.select-minute"),monthNames:[e("calendar.month-names.january"),e("calendar.month-names.february"),e("calendar.month-names.march"),e("calendar.month-names.april"),e("calendar.month-names.may"),e("calendar.month-names.june"),e("calendar.month-names.july"),e("calendar.month-names.august"),e("calendar.month-names.september"),e("calendar.month-names.october"),e("calendar.month-names.november"),e("calendar.month-names.december")],weekDayNamesShort:[e("calendar.weekday-names.short.monday"),e("calendar.weekday-names.short.tuesday"),e("calendar.weekday-names.short.wednesday"),e("calendar.weekday-names.short.thursday"),e("calendar.weekday-names.short.friday"),e("calendar.weekday-names.short.saturday"),e("calendar.weekday-names.short.sunday")],setToTimePreset:(t,n)=>e("calendar.action.set-to-time-preset",{time:t,date:n})}}const a$=e=>Bl(e,Ki),i$=e=>Ko(e,Ki);function r$(e){var t;const{readOnly:n,onChange:a,schemaType:r,elementProps:o,value:s}=e,d=((t=r.options)==null?void 0:t.dateFormat)||Ki,{t:c}=L(),u=l.useCallback(f=>{a(f===null?we():be(f))},[a]),m=l.useCallback(f=>Ko(f,d),[d]),p=l.useCallback(f=>Bl(f,d),[d]),h=l.useMemo(()=>ap(c),[c]);return i.jsx(xC,{...o,deserialize:a$,formatInputValue:m,onChange:u,parseInputValue:p,placeholder:r.placeholder,calendarLabels:h,readOnly:n,selectTime:!1,serialize:i$,value:s})}function o$(e={}){return{dateFormat:e.dateFormat||Ki,timeFormat:e.timeFormat||L0,timeStep:"timeStep"in e&&Number(e.timeStep)||1}}function CC(e){return e.toISOString()}function s$(e){const t=new Date(e);return n$(t)?{isValid:!0,date:t}:{isValid:!1,error:`Invalid date value: "${e}"`}}function l$(e,t){if(!t||t===1)return e;const n=C0(e),a=w0(n),r=a%t;return CC(r!==0?Va(n,a-r):n)}function c$(e){const{onChange:t,schemaType:n,value:a,elementProps:r}=e,{dateFormat:o,timeFormat:s,timeStep:d}=o$(n.options),{t:c}=L(),u=l.useCallback(f=>{let g=f;g!==null&&d>1&&(g=l$(g,d)),t(g===null?we():be(g))},[t,d]),m=l.useCallback(f=>Ko(f,`${o} ${s}`),[o,s]),p=l.useCallback(f=>Bl(f,`${o} ${s}`),[o,s]),h=l.useMemo(()=>ap(c),[c]);return i.jsx(xC,{...r,calendarLabels:h,onChange:u,deserialize:s$,formatInputValue:m,parseInputValue:p,placeholder:n.placeholder,selectTime:!0,serialize:CC,timeStep:d,value:a})}function d$(e){const{validationError:t,elementProps:n}=e;return i.jsx(nn,{...n,type:"email",inputMode:"email",customValidity:t})}const u$=(e,t)=>{if(typeof e=="function")throw new Error(`Schema type "${(t==null?void 0:t.name)||"<not-found>"}"'s \`validation\` was not run though \`inferFromSchema\``);return e?Array.isArray(e)?e:[e]:[]};function zs(e,t){for(const n of u$(e==null?void 0:e.validation,e))for(const a of n._rules)if(a.flag===t)return a;return null}function wC(e){const{schemaType:t,validationError:n,elementProps:a}=e,r=zs(t,"min"),o=zs(t,"integer"),s=zs(t,"precision"),d=typeof(r==null?void 0:r.constraint)=="number"&&(r==null?void 0:r.constraint)>=0,c=o||(s==null?void 0:s.constraint)===0;return i.jsx(nn,{...a,type:"number",step:"any",inputMode:d?c?"numeric":"decimal":"text",customValidity:n,placeholder:t.placeholder,pattern:d?"[d]*":void 0,max:Number.MAX_SAFE_INTEGER,min:Number.MIN_SAFE_INTEGER,"data-testid":"number-input"})}const m$=l.forwardRef(function(e,t){const{onClick:n}=e,a=l.useCallback(()=>{n==null||n(e.name)},[e.name,n]);return i.jsx(zy,{"data-testid":`group-tab-${e.name}`,id:`${e.name}-tab`,label:e.title,ref:t,...e,onClick:a})}),p$=e=>{const{name:t,title:n,...a}=e,{selected:r}=e;return i.jsx("option",{title:n,value:t,id:`${t}-tab`,"aria-controls":a["aria-controls"],"data-testid":`group-select-${t}`,"aria-selected":r?"true":"false",children:n||t})},h$=k(zu)`
  /* Hide on small screens */
  &[data-eq-max~='0'] [data-ui='TabList'] {
    display: none;
  }

  /* Hide on medium to large screens */
  [data-ui='Select'] {
    display: none;
  }

  /* Show on small screens */
  &[data-eq-max~='0'] [data-ui='Select'] {
    display: block;
  }
`,f$=({inputId:e,groups:t,onClick:n,shouldAutoFocus:a=!0,disabled:r})=>i.jsx(p0,{space:2,"data-testid":"field-group-tabs",children:t.map(o=>i.jsx(m$,{"aria-controls":`${e}-field-group-fields`,autoFocus:a&&o.selected,disabled:r||o.disabled,icon:o==null?void 0:o.icon,name:o.name,onClick:n,selected:!!o.selected,title:o.title||o.name},`${e}-${o.name}-tab`))}),g$=({disabled:e,groups:t,inputId:n,onSelect:a,shouldAutoFocus:r=!0})=>{var o;const s=l.useCallback(c=>{a(c.currentTarget.value)},[a]),{t:d}=L();return i.jsx(ka,{"aria-label":d("inputs.object.field-group-tabs.aria-label"),autoFocus:r,"data-testid":"field-group-select",disabled:e,fontSize:2,muted:!0,onChange:s,value:(o=t.find(c=>c.selected))==null?void 0:o.name,children:t.map(c=>i.jsx(p$,{"aria-controls":`${n}-field-group-fields`,disabled:c.disabled,name:c.name,selected:!!c.selected,title:c.title||c.name},`${n}-${c.name}-tab`))})},b$=l.memo(function({disabled:e=!1,onClick:t,...n}){const a=l.useCallback(r=>{t==null||t(r)},[t]);return i.jsxs(h$,{"data-testid":"field-group-root",children:[i.jsx(f$,{...n,disabled:e,onClick:a}),i.jsx(g$,{...n,disabled:e,onSelect:a})]})}),y$=k(U)`
  margin-bottom: ${({$level:e,theme:t})=>e===0?0:t.sanity.space[5]*-1}px;
  padding-bottom: ${({$level:e,theme:t})=>t.sanity.space[4]}px;
`,v$=k(Ze)`
  align-items: flex-end;
`;function x$(e){const{fieldNames:t,onChange:n,readOnly:a,value:r}=e,o=t.length,s=l.useCallback(c=>{n(we([c]))},[n]),{t:d}=L();return i.jsxs(fa,{status:"warning",title:i.jsx(i.Fragment,{children:d("inputs.object.unknown-fields.warning.title",{count:o})}),children:[i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(i.Fragment,{children:d("inputs.object.unknown-fields.warning.description",{count:o})})}),i.jsxs(Ji,{marginTop:4,open:Ya,title:d("inputs.object.unknown-fields.warning.details.title"),children:[i.jsx(I,{marginBottom:3,children:i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(i.Fragment,{children:d("inputs.object.unknown-fields.warning.details.description",{count:o})})})}),i.jsx(B,{as:"ul",space:3,children:t.map(c=>i.jsx(C$,{fieldName:c,onUnsetClick:s,readOnly:a,value:r==null?void 0:r[c]},c))})]})]})}function C$({fieldName:e,onUnsetClick:t,readOnly:n,value:a}){const r=l.useCallback(()=>{t(e)},[e,t]),{t:o}=L();return i.jsxs(U,{as:"li",overflow:"hidden",radius:2,shadow:1,tone:"caution",children:[i.jsx(U,{padding:3,shadow:1,tone:"inherit",children:i.jsx(xn,{size:1,children:e})}),i.jsx(I,{overflow:"auto",padding:3,children:i.jsx(xn,{language:"json",size:1,children:JSON.stringify(a,null,2)})}),n&&i.jsx(I,{padding:3,children:i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:o,i18nKey:"inputs.object.unknown-fields.read-only.description"})})}),!n&&i.jsx(U,{padding:3,shadow:1,tone:"inherit",children:i.jsx(Z,{icon:_t,mode:"ghost",onClick:r,size:"large",tone:"critical",text:o("inputs.object.unknown-fields.remove-field-button.text")})})]})}const Mf=l.memo(function(e){const{__internal_arrayEditingModal:t=null,groups:n,id:a,level:r,members:o,onChange:s,onFieldGroupSelect:d,renderAnnotation:c,renderBlock:u,renderField:m,renderInlineBlock:p,renderInput:h,renderItem:f,renderPreview:g,schemaType:b,value:v}=e,{columns:y}=b.options||{},x=l.useMemo(()=>{if(!b.fields)return null;const T=b.fields.map(A=>A.name),j=Object.keys(v||{}).filter(A=>!A.startsWith("_")&&!T.includes(A));return j.length===0?null:i.jsx(x$,{fieldNames:j,value:v,onChange:s})},[s,b.fields,v]),w=l.useMemo(()=>n.find(({selected:T})=>T),[n]),C=l.useCallback(()=>i.jsx(TN,{members:o,renderAnnotation:c,renderBlock:u,renderField:m,renderInlineBlock:p,renderInput:h,renderItem:f,renderPreview:g}),[o,c,u,m,p,h,f,g]);return o.length===0?null:i.jsxs(i.Fragment,{children:[t,i.jsxs(B,{space:6,children:[n.length>0?i.jsx(y$,{$level:r,"data-testid":"field-groups",children:i.jsx(b$,{groups:n,inputId:a,onClick:d,shouldAutoFocus:!1})}):null,i.jsx(l.Fragment,{children:y?i.jsx(v$,{columns:y,gap:4,marginTop:1,children:C()}):C()},w==null?void 0:w.name),x]})]})});function w$(e){const t=l.useRef(e.value);t.current=e.value;const n=l.useCallback(a=>ja(t.current,a),[t]);return i.jsx(bv.Provider,{value:n,children:e.children})}function T$(){const e=l.useContext(bv);if(!e)throw new Error("useFormValue must be used within a FormValueProvider");return e}const j$=(e,t)=>{var n;const a=(n=t.options)==null?void 0:n.maxLength;return e?SS(e,{truncate:typeof a=="number"?a:200,symbols:!0}):""};async function k$(e,t,n){var a;return e&&(((a=t.options)==null?void 0:a.slugify)||j$)(e,t,n)}function A$(e){const[t,n]=l.useState(null),a=l.useRef(0),r=l.useCallback(o=>{const s=++a.current;n({status:"pending"}),Promise.resolve().then(()=>e(o)).then(d=>{s===a.current&&n({status:"complete",result:d})},d=>{s===a.current&&n({status:"error",error:d})})},[e]);return[t,r]}function S$(){const{getClient:e}=mt(),t=ot(),n=Tt(),a=os(),r=WT();return l.useMemo(()=>({projectId:a,dataset:r,getClient:e,schema:t,currentUser:n}),[e,t,n,a,r])}function _$(e,t,n){const a=e.slice(0,-1),r=Vl(t,a);return{parentPath:a,parent:r,...n}}async function E$(e,t,n){return typeof e=="function"?e(t,n):Vl(t,e)}function I$(e){var t;const n=T$(),{path:a,value:r,schemaType:o,validation:s,onChange:d,readOnly:c,elementProps:u}=e,m=(t=o.options)==null?void 0:t.source,p=l.useMemo(()=>s.filter(C=>C.level==="error"),[s]),h=S$(),{t:f}=L(),g=l.useCallback(C=>{if(!C){d(je.from(we([])));return}d(je.from([Tn({_type:o.name}),be(C,["current"])]))},[d,o.name]),b=l.useCallback(()=>{if(!m)return Promise.reject(new Error(f("inputs.slug.error.missing-source",{schemaType:o.name})));const C=n([])||{_type:o.name},T=_$(a,C,h);return E$(m,C,T).then(j=>k$(j||"",o,T)).then(j=>g(j))},[m,n,o,a,h,g,f]),[v,y]=A$(b),x=(v==null?void 0:v.status)==="pending",w=l.useCallback(C=>g(C.currentTarget.value),[g]);return i.jsx(B,{space:3,children:i.jsxs(P,{gap:1,children:[i.jsxs(I,{flex:1,children:[i.jsx(nn,{customValidity:p.length>0?p[0].message:"",disabled:x,onChange:w,value:(r==null?void 0:r.current)||"",readOnly:c,...u}),(v==null?void 0:v.status)==="error"&&i.jsx(U,{padding:2,tone:"critical",children:v.error.message})]}),m&&i.jsx(Z,{mode:"ghost",type:"button",disabled:c||x,onClick:y,size:"large",text:(v==null?void 0:v.status)==="pending"?f("inputs.slug.action.generating"):f("inputs.slug.action.generate")})]})})}function TC(e){const{validationError:t,elementProps:n}=e;return i.jsx(nn,{...n,customValidity:t,"data-testid":"string-input"})}const M$=k(Tj)`
  &[data-as='textarea'] {
    resize: vertical;
  }
`;function P$(e){const{schemaType:t,validationError:n,value:a,elementProps:r}=e;return i.jsx(M$,{customValidity:n,value:a||"",placeholder:t.placeholder,rows:typeof t.rows=="number"?t.rows:10,...r})}function N$(e){var t,n;const{schemaType:a,validationError:r,elementProps:o}=e,s=zs(a,"uri"),d=(n=(t=s==null?void 0:s.constraint)==null?void 0:t.options)!=null&&n.allowRelative?"text":"url";return i.jsx(nn,{type:d,inputMode:"url",customValidity:r,...o})}function O$({value:e,onClearValue:t}){const n=l.useMemo(()=>!!(e!=null&&e._ref),[e==null?void 0:e._ref]),{t:a}=L(),r=i.jsx(Pe,{t:a,i18nKey:"inputs.reference.cross-dataset.feature-disabled-description",components:{DocumentationLink:({children:o})=>i.jsx("a",{href:"https://www.sanity.io/docs/cross-dataset-references",target:"_blank",rel:"noreferrer",children:o})}});return i.jsxs(U,{tone:"caution",padding:4,border:!0,radius:2,"data-testid":"alert-cross-dataset-reference-feature-disabled",children:[i.jsxs(P,{gap:4,marginBottom:n?4:void 0,children:[i.jsx(I,{children:i.jsx(E,{size:1,children:i.jsx(Wt,{})})}),i.jsxs(B,{space:3,children:[i.jsx(E,{as:"h2",size:1,weight:"medium",children:a("inputs.reference.cross-dataset.feature-unavailable-title")}),n&&i.jsxs(B,{space:3,children:[i.jsx(E,{as:"p",size:1,children:r}),i.jsx(E,{as:"p",size:1,children:a("inputs.reference.cross-dataset.feature-disabled-actions")})]}),!n&&i.jsx(E,{as:"p",size:1,children:r})]})]}),t&&n&&i.jsx(Z,{icon:Hr,mode:"ghost",onClick:t,text:a("inputs.reference.action.clear"),width:"fill"})]})}const F$=k(P)`
  /* this is a hack to avoid layout jumps while previews are loading
  or the message is not tall enough to fill the card
  there's probably better ways of solving this */
  min-height: 36px;
`;function jC(e){var t,n,a;const{refType:r,showStudioUrlIcon:o,hasStudioUrl:s,showTypeLabel:d,availability:c,preview:u,id:m,dataset:p,projectId:h}=e,f=(c==null?void 0:c.reason)==="NOT_FOUND",g=(c==null?void 0:c.reason)==="PERMISSION_DENIED",b=(t=u.published)==null?void 0:t.media,{t:v}=L(),y=l.useMemo(()=>{if(b){const x=typeof(b==null?void 0:b.asset)<"u"&&Ur(b),w=l.isValidElement(b);return!x&&!w?null:function({dimensions:C}){return w?b:i.jsx("img",{src:jl({dataset:p,projectId:h}).image(b).withOptions(C).url(),alt:v("inputs.reference.image-preview-alt-text"),referrerPolicy:"strict-origin-when-cross-origin"})}}return r!=null&&r.icon?l.createElement(r.icon):null},[b,p,h,r==null?void 0:r.icon,v]);return i.jsxs(F$,{align:"center",justify:"center",flex:1,"data-testid":"preview",children:[c!=null&&c.available?i.jsx(I,{flex:1,children:i.jsx(QT,{title:(n=u.published)==null?void 0:n.title,subtitle:(a=u.published)==null?void 0:a.subtitle,media:y||!1})}):i.jsx(I,{flex:1,children:i.jsx(P,{align:"center",children:i.jsx(I,{flex:1,paddingY:2,children:i.jsx(E,{muted:!0,children:v("inputs.reference.error.document-unavailable-title")})})})}),i.jsx(I,{paddingLeft:3,children:i.jsxs(et,{space:4,children:[r&&d&&i.jsx(Sn,{mode:"outline",children:r.title||r.type}),(g||f)&&i.jsx(I,{children:i.jsx(Ie,{portal:!0,content:v(f?"inputs.reference.referenced-document-does-not-exist":"inputs.reference.referenced-document-insufficient-permissions",{documentId:m}),children:i.jsx(Ct,{tone:"default",children:g?i.jsx(Li,{}):i.jsx(tl,{})})})}),!(f||g)&&o&&i.jsx(I,{children:i.jsx(Ie,{portal:!0,content:v(s?"inputs.reference.document-opens-in-new-tab":"input.reference.document-cannot-be-opened.failed-to-resolve-url"),children:i.jsx(Ct,{size:1,tone:"default",muted:!s,children:i.jsx(Wi,{})})})})]})})]})}const kC=()=>{},Pf={isLoading:!0,result:void 0,error:void 0,retry:kC},R$={isLoading:!1,result:void 0,error:void 0,retry:kC};function AC(e,t){const[n,a]=l.useState(0),r=l.useCallback(()=>{a(d=>d+1)},[]),o=l.useMemo(()=>({_id:e._id,_type:e._type}),[e._id,e._type]),s=l.useMemo(()=>o._id?t(o).pipe(K(d=>({isLoading:!1,result:d,error:void 0,retry:r,retryAttempt:n})),Lt(Pf),ut(d=>(console.error(d),re({isLoading:!1,result:void 0,error:d,retry:r,retryAttempt:n})))):re(R$),[o,t,r,n]);return Ut(s,Pf)}function ip(){return Xe(qe).config().projectId}function D$(e){var t;const{isLoading:n,result:a,error:r}=AC(e.document,e.getReferenceInfo),{t:o}=L(),s=ip();if(n)return i.jsxs(B,{space:2,padding:1,children:[i.jsx(it,{style:{maxWidth:320},radius:1,animated:!0}),i.jsx(it,{style:{maxWidth:200},radius:1,size:1,animated:!0})]});if(r)return i.jsx(B,{space:2,padding:1,children:i.jsx(fa,{title:o("inputs.reference.error.failed-to-load-document-title"),children:i.jsx(E,{muted:!0,size:1,children:r.message})})});if(!a)return null;if(((t=a.availability)==null?void 0:t.reason)==="PERMISSION_DENIED")return i.jsx(B,{space:2,padding:1,children:o("inputs.reference.error.missing-read-permissions-description")});const d=e.referenceType.to.find(c=>c.type===a.type);return d?a&&d&&i.jsx(jC,{id:a.id,availability:a.availability,preview:a.preview,refType:d,dataset:e.referenceType.dataset,projectId:s,showTypeLabel:e.referenceType.to.length>1}):i.jsx(B,{space:2,padding:1,children:o("inputs.reference.error.invalid-search-result-type-title",{returnedType:a.type})})}function Nf(e){var t,n;const{value:a,type:r,showStudioUrlIcon:o,hasStudioUrl:s,referenceInfo:d}=e,{t:c}=L(),u=ip();if(d.isLoading||d.error)return i.jsxs(B,{space:2,padding:1,children:[i.jsx(it,{style:{maxWidth:320},radius:1,animated:!d.error}),i.jsx(it,{style:{maxWidth:200},radius:1,size:1,animated:!d.error})]});const m=r.to.length>1,p=(t=d.result)==null?void 0:t.type,h=r.to.find(f=>f.type===p);return(n=d.result.availability)!=null&&n.available&&!h?i.jsx(B,{space:2,padding:2,children:i.jsx(E,{as:"p",children:i.jsx(Pe,{t:c,i18nKey:"inputs.reference.cross-dataset.invalid-type",values:{typeName:p||"unknown"},components:{JsonValue:()=>i.jsx("pre",{children:JSON.stringify(a,null,2)})}})})}):i.jsx(jC,{availability:d.result.availability,hasStudioUrl:s,showStudioUrlIcon:o,preview:d.result.preview,refType:h,projectId:u,dataset:r.dataset,id:a._ref,showTypeLabel:m})}const $$=k(rt)`
  & > div {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }
`,L$=k(E)`
  word-break: break-word;
`,B$=["top-start","bottom-start"],V$=l.forwardRef(function(e,t){const{searchString:n,loading:a,portalRef:r,referenceElement:o,...s}=e,{t:d}=L(),c=e.options&&e.options.length>0,u=l.useCallback(({content:m,hidden:p,inputElement:h,onMouseEnter:f,onMouseLeave:g},b)=>i.jsx($$,{"data-testid":"autocomplete-popover",placement:"bottom-start",fallbackPlacements:B$,arrow:!1,constrainSize:!0,onMouseEnter:f,onMouseLeave:g,content:i.jsx("div",{ref:b,children:c?m:i.jsx(I,{padding:4,children:i.jsx(P,{align:"center",height:"fill",justify:"center",children:i.jsx(L$,{align:"center",muted:!0,children:i.jsx(Pe,{t:d,i18nKey:"inputs.reference.no-results-for-query",values:{searchTerm:n||""}})})})})}),open:!a&&!p,ref:r,portal:!0,referenceElement:o||h,matchReferenceWidth:!0}),[c,d,n,a,r,o]);return i.jsx(Cl,{...s,ref:t,renderPopover:u})}),Of={hits:[],isLoading:!1},U$=()=>!0,Ff=["_ref"],z$="crossDatasetReferences";function H$(e){var t,n;const{changed:a,focused:r,focusPath:o,getReferenceInfo:s,onChange:d,onPathFocus:c,onSearch:u,path:m,readOnly:p,schemaType:h,validation:f,value:g,elementProps:b}=e,{t:v}=L(),y=ip(),[x,w]=l.useState(Of),C=l.useCallback(z=>{if(!z){d(we()),c([]);return}if(!x.hits.find(ne=>ne.id===z))throw new Error("Selected an item that wasnt part of the result set");d(be({_type:h.name,_ref:ft(z),_projectId:y,_dataset:h.dataset,_weak:h.weak,_key:g==null?void 0:g._key})),c([])},[g==null?void 0:g._key,x.hits,h.name,h.dataset,h.weak,y,d,c]),T=l.useCallback(()=>{d(we())},[d]),j=l.useCallback(z=>{z.key==="Escape"&&(c==null||c([]))},[c]),A=l.useCallback(z=>s(z,h),[s,h]),M=l.useMemo(()=>({_id:g==null?void 0:g._ref}),[g==null?void 0:g._ref]),S=AC(M,A),N=cs(z$),D=l.useRef(null),_=o.length===1&&o[0]==="_ref",F=b.ref;rn({hasFocusAt:_,ref:g==null?void 0:g._ref},(z,ne)=>{var ee;const fe=(z==null?void 0:z.ref)!==ne.ref;((z==null?void 0:z.hasFocusAt)!==ne.hasFocusAt||fe)&&ne.hasFocusAt&&((ee=F.current)==null||ee.focus())});const R=g!=null&&g._weak?"weak":"strong",$=h.weak===!0?"weak":"strong",O=!!(g!=null&&g._ref),V=l.useCallback(()=>{d(h.weak===!0?be(!0,["_weak"]):we(["_weak"]))},[d,h]),{push:H}=Vt(),J=l.useMemo(()=>f.filter(z=>z.level==="error"),[f]),q=l.useCallback(z=>{z.currentTarget===b.ref.current&&(c==null||c([vS]))},[b.ref,c]),oe=l.useCallback(z=>{z.currentTarget===b.ref.current&&(c==null||c(Ff))},[b.ref,c]),ie=l.useCallback(()=>{c==null||c(Ff)},[c]),te=l.useId(),X=em(z=>z.pipe(Ue(Ft),yt(),Ee(ne=>zt(re({isLoading:!0}),u(ne).pipe(K(ee=>({hits:ee,searchString:ne,isLoading:!1})),ut(ee=>(H({title:"Reference search failed",description:ee.message,status:"error",id:`reference-search-fail-${te}`}),console.error(ee),re({hits:[]})))))),qn((ne,ee)=>({...ne,...ee}),Of),bt(w))),le=l.useCallback(()=>{X("")},[X]),me=!S.isLoading&&O&&R!==$,G=(g==null?void 0:g._ref)&&((n=h.studioUrl)==null?void 0:n.call(h,{id:g==null?void 0:g._ref,type:(t=S==null?void 0:S.result)==null?void 0:t.type}))||null,ce=l.useCallback(z=>i.jsx(Co,{as:"button",type:"button",radius:2,children:i.jsx(I,{paddingX:3,paddingY:1,children:i.jsx(D$,{referenceType:h,document:z.hit.published,getReferenceInfo:A})})}),[h,A]),de=_||!(g!=null&&g._ref),pe=l.useRef(null),W=l.useRef(null),Y=l.useRef(null);return zx([pe,W,Y],()=>{_&&c([])}),i.jsxs(i.Fragment,{children:[!N.isLoading&&!N.enabled&&i.jsx(O$,{value:g,onClearValue:T}),(N.isLoading||N.enabled)&&i.jsx(B,{space:1,children:de?i.jsx(B,{space:2,ref:pe,children:i.jsx(Kt,{path:m,isChanged:a,hasFocus:!!r,children:i.jsx("div",{ref:D,children:i.jsx(V$,{...b,"data-testid":"autocomplete",loading:x.isLoading,referenceElement:D.current,portalRef:W,id:te||"",options:x.hits.map(z=>({value:z.id,hit:z})),onFocus:oe,radius:2,placeholder:v("inputs.reference.search-placeholder"),onKeyDown:j,readOnly:p,disabled:S.isLoading,onQueryChange:X,searchString:x.searchString,onChange:C,filterOption:U$,renderOption:ce,openButton:{onClick:le}})})})}):i.jsx(Kt,{path:m,isChanged:a,hasFocus:!!r,children:i.jsxs(U,{padding:0,border:!0,flex:1,radius:1,tone:p?"transparent":S.error||J.length>0?"critical":"default",children:[i.jsxs(P,{align:"center",padding:1,children:[G?i.jsx(Co,{as:"a",target:"_blank",rel:"noopener noreferrer",href:G,"data-as":"a",flex:1,padding:1,paddingRight:3,radius:2,tone:"inherit",__unstable_focusRing:!0,tabIndex:0,onFocus:q,ref:b.ref,children:i.jsx(Nf,{value:g,referenceInfo:S,showStudioUrlIcon:!0,hasStudioUrl:!!G,type:h})}):i.jsx(Co,{flex:1,padding:1,paddingRight:3,radius:2,tone:"inherit",__unstable_focusRing:!0,tabIndex:0,onFocus:q,ref:b.ref,children:i.jsx(Nf,{value:g,referenceInfo:S,showStudioUrlIcon:!0,type:h})}),i.jsx(et,{paddingX:1,children:i.jsx(ze,{button:i.jsx(wt,{"data-testid":"menu-button"}),id:`${te}-menuButton`,menu:i.jsx(Be,{children:!p&&i.jsxs(i.Fragment,{children:[i.jsx(ye,{text:v("inputs.reference.action.clear"),tone:"critical",icon:Hr,"data-testid":"menu-item-clear",onClick:T}),i.jsx(ye,{text:v("inputs.reference.action.replace"),icon:um,"data-testid":"menu-item-replace",onClick:ie})]})}),placement:"right",popover:{portal:!0,tone:"default"}})})]}),me&&i.jsx(Vm,{actualStrength:R,handleFixStrengthMismatch:V}),S.error&&i.jsx(Bm,{errorMessage:S.error.message,onHandleRetry:S.retry})]})})})]})}const K$="cross-dataset-refs",SC={available:!0,reason:"READABLE"},W$={available:!1,reason:"PERMISSION_DENIED"},G$={available:!1,reason:"NOT_FOUND"};function q$(e){const{client:t,documentPreviewStore:n}=e,{dataset:a,projectId:r}=t.config(),o=a&&r?{dataset:a,projectId:r}:void 0;return function(s,d){return(s._type?re(s):n.observeDocumentTypeFromId(s._id,o).pipe(K(c=>({_id:s._id,_type:c})))).pipe(Ee(c=>{if(!c._type)return Y$(t,s._id).pipe(K(h=>({id:s._id,type:void 0,availability:h,preview:{published:void 0}})));const u=d.to.find(h=>h.type===c._type),m=cp(u==null?void 0:u.preview)||[],p=n.observePaths(s,m,o).pipe(K(h=>h&&sl(h,u)));return Ht([p]).pipe(K(([h])=>({type:c._type,id:s._id,availability:SC,preview:{published:Ke(h)?h:void 0}})))}))}}function Y$(e,t){const n={uri:e.getDataUrl("doc",t),json:!0,query:{excludeContent:"true"},tag:`${K$}.availability`};return e.observable.request(n).pipe(K(a=>{const r=sm(a.omitted||[],o=>o.id)[t];return r?r.reason==="existence"?G$:r.reason==="permission"?W$:null:SC}))}function X$(e,t,n,a){return Um(n.to,e,{...a,maxDepth:a.maxFieldDepth})(t,{includeDrafts:!1,isCrossDataset:!0}).pipe(K(({hits:r})=>r.map(({hit:o})=>o)),K(ym),K(r=>r.map(o=>({id:o.id,type:o.type,published:o.published}))))}async function J$(e,t,n,a){if(!e)return{};if(typeof e.filter=="function"){const r=n.slice(0,-1),o=Vl(t,r);return await e.filter({document:t,parentPath:r,parent:o,getClient:a})}return{filter:e.filter,params:"filterParams"in e?e.filterParams:void 0}}function Z$(e){const t=l.useRef(e);return t.current=e,t}function Q$(e){const{path:t,schemaType:n}=e,a=mt(),r=a.getClient(qe),o=gn(),s=a.getClient,{enableLegacySearch:d=!1}=a.search,c=l.useMemo(()=>r.withConfig({dataset:n.dataset,apiVersion:"2023-11-13",ignoreBrowserTokenWarning:!0}).clone(),[r,n.dataset]),u=Km(c),m=Qo([]),p=Z$(m),h=l.useCallback(g=>Ot(J$(n.options,p.current,t,s)).pipe(Ye(({filter:b,params:v})=>X$(c,g,n,{...n.options,filter:b,params:v,tag:"search.cross-dataset-reference",maxFieldDepth:u,enableLegacySearch:d})),ut(b=>{var v;const y=b.details&&b.details.type==="queryParseError";return(v=n.options)!=null&&v.filter&&y&&(b.message='Invalid reference filter, please check the custom "filter" option'),Dl(b)})),[n,p,t,s,c,u,d]),f=l.useMemo(()=>q$({client:c,documentPreviewStore:o}),[c,o]);return i.jsx(H$,{...e,getReferenceInfo:f,onSearch:h})}function Mo(e){const{reference:t,children:n,observeAsset:a,waitPlaceholder:r}=e,o=t==null?void 0:t._ref,s=l.useMemo(()=>a(o),[o,a]),d=Ut(s);return i.jsx(i.Fragment,{children:o&&d?n(d):r})}const eL=k(ye)`
  position: relative;

  & input {
    overflow: hidden;
    overflow: clip;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    position: absolute;
    min-width: 0;
    display: block;
    appearance: none;
    padding: 0;
    margin: 0;
    border: 0;
    opacity: 0;
  }
`,tL=l.forwardRef(function(e,t){const{icon:n,id:a,accept:r,capture:o,multiple:s,onSelect:d,text:c,disabled:u,...m}=e,p=`${a||""}-${l.useId()}`,h=l.useCallback(g=>{d&&g.target.files&&d(Array.from(g.target.files))},[d]),f=l.useCallback(g=>i.jsxs("div",{children:[g,i.jsx("input",{"data-testid":"file-menuitem-input",accept:r,capture:o,id:p,multiple:s,onChange:h,type:"file",value:"",disabled:u})]}),[r,o,u,h,p,s]);return i.jsx(eL,{...m,htmlFor:p,disabled:u,ref:t,icon:n,text:c,renderMenuItem:f})});function _C(e){const{onUpload:t,onReset:n,readOnly:a,accept:r,directUploads:o,browse:s,downloadUrl:d,copyUrl:c}=e,{push:u}=Vt(),{t:m}=L(),p=l.useCallback(()=>{navigator.clipboard.writeText(c||""),u({closable:!0,status:"success",title:m("inputs.files.common.actions-menu.notification.url-copied")})},[c,u,m]);return i.jsxs(i.Fragment,{children:[i.jsx(tL,{icon:Qu,onSelect:t,accept:r,text:m("inputs.files.common.actions-menu.upload.label"),"data-testid":"file-input-upload-button",disabled:a||!o}),s,(d||c)&&i.jsx(en,{}),d&&i.jsx(ye,{as:"a",icon:f0,text:m("inputs.files.common.actions-menu.download.label"),href:d}),c&&i.jsx(ye,{icon:Br,text:m("inputs.files.common.actions-menu.copy-url.label"),onClick:p}),i.jsx(en,{}),i.jsx(ye,{tone:"critical",icon:Hr,text:m("inputs.files.common.actions-menu.clear-field.label"),onClick:n,disabled:a,"data-testid":"file-input-clear"})]})}function nL(e,t){return new Promise((n,a)=>{const r=new XMLHttpRequest;r.onload=()=>{const o=new FileReader;o.onloadend=()=>{var s;const d=(s=o.result)==null?void 0:s.toString(),c=d==null?void 0:d.indexOf(";base64");if(!d||c===-1){a(new Error("Could not convert URL to file"));return}const u=d.slice(11,c);if(!u&&!t){a(new Error("Could not find mime type for image"));return}n(EC(o.result,t||`${Cn()}.${u}`))},o.readAsDataURL(r.response)},r.onerror=o=>{a(o)},r.open("GET",e),r.responseType="blob",r.send()})}function aL(e,t){return new Promise((n,a)=>{const r=e.toString(),o=r.indexOf(";base64");if(!r||o===-1){a(new Error("Could not convert base64 to file"));return}const s=r.slice(11,o);if(!s&&!t){a(new Error("Could not find mime type for image"));return}n(EC(e,t||`${Cn()}.${s}`))})}function EC(e,t){var n;const a=e.split(","),r=(n=a[0].match(/:(.*?);/))==null?void 0:n[1],o=atob(a[1]);let s=o.length;const d=new Uint8Array(s);for(;s--;)d[s]=o.charCodeAt(s);return new File([d],t,{type:r})}function IC({assetFromSource:e,onChange:t,type:n,resolveUploader:a,uploadWith:r,isImage:o}){if(!e)throw new Error("No asset given");if(!Array.isArray(e)||e.length===0)throw new Error("Returned value must be an array with at least one item (asset)");const s=e[0],d=s.assetDocumentProps,c=d==null?void 0:d.originalFilename,u=d==null?void 0:d.label,m=d==null?void 0:d.title,p=d==null?void 0:d.description,h=d==null?void 0:d.creditLine,f=d==null?void 0:d.source,g=o?[we(["hotspot"]),we(["crop"])]:[];switch(s.kind){case"assetDocumentId":t([Tn({_type:n.name}),...g,be({_type:"reference",_ref:s.value},["asset"])]);break;case"file":{const b=a(n,s.value);b&&r(b,s.value,{label:u,title:m,description:p,creditLine:h,source:f});break}case"base64":aL(s.value,c).then(b=>{const v=a(n,b);v&&r(v,b,{label:u,title:m,description:p,creditLine:h,source:f})});break;case"url":nL(s.value,c).then(b=>{const v=a(n,b);v&&r(v,b,{label:u,title:m,description:p,creditLine:h,source:f})});break;default:throw new Error("Invalid value returned from asset source plugin")}}const iL=k(P)`
  pointer-events: none;
`;function MC(e){const{hoveringFiles:t,type:n,readOnly:a,acceptedFiles:r,rejectedFilesCount:o,directUploads:s}=e,d=n==="file",{t:c}=L(),u=l.useMemo(()=>a?i.jsx(h0,{}):t&&o>0||!s?i.jsx(Li,{}):d?i.jsx(El,{}):i.jsx(Ha,{}),[s,t,d,a,o]),m=l.useMemo(()=>{if(!s)return c("inputs.files.common.placeholder.upload-not-supported");if(a)return c("inputs.files.common.placeholder.read-only");if(t&&s&&!a){if(r.length>0)return c("inputs.files.common.placeholder.drop-to-upload",{context:n});if(o>0)return c("inputs.files.common.placeholder.cannot-upload-some-files",{count:o})}return c("inputs.files.common.placeholder.drag-or-paste-to-upload",{context:n})},[r.length,s,t,a,o,c,n]);return i.jsxs(iL,{align:"center",gap:3,justify:"center",paddingLeft:1,children:[i.jsx(E,{muted:!0,size:1,children:u}),i.jsx(E,{size:1,muted:!0,children:m})]})}const PC=Kx(Yx(U)),rL=k(Z).attrs({forwardedAs:"label"})(({theme:e})=>{const{focusRing:t}=e.sanity,n=e.sanity.color.base;return ae`
      &:not([data-disabled='true']) {
        &:focus-within {
          box-shadow: ${rc({base:n,border:{width:1,color:"var(--card-border-color)"},focusRing:t})};
        }
      }

      // The underlying file input is rendered as children within a Sanity UI <Button> component.
      // The below visibly hides it by targeting the input's parent <span> element, which is
      // added by the <Button> component.
      // TODO: refactor, avoid nth-child selector usage
      & > span:nth-child(2) {
        overflow: hidden;
        overflow: clip;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        position: absolute;
        min-width: 0;
        display: block;
        appearance: none;
        padding: 0;
        margin: 0;
        border: 0;
        opacity: 0;
      }
    `}),oL=l.forwardRef(function(e,t){const{icon:n,id:a,accept:r,capture:o,multiple:s,onSelect:d,text:c,disabled:u,...m}=e,p=`${a||""}-${l.useId()}`,h=l.useCallback(f=>{d&&f.target.files&&d(Array.from(f.target.files))},[d]);return i.jsx(rL,{...m,icon:n,text:c,htmlFor:p,disabled:u,children:i.jsx("input",{"data-testid":"file-button-input",accept:r,capture:o,id:p,multiple:s,onChange:h,ref:t,type:"file",value:"",disabled:u})})});function sL(e){const{accept:t,acceptedFiles:n,browse:a,directUploads:r,hoveringFiles:o,onUpload:s,readOnly:d,rejectedFilesCount:c,type:u}=e,[m,p]=l.useState(null),h=m0(m),f=(h==null?void 0:h.border)&&h.border.width<440,{t:g}=L();return i.jsxs(P,{align:f?void 0:"center",direction:f?"column":"row",gap:4,justify:"space-between",paddingY:f?1:void 0,ref:p,children:[i.jsx(P,{flex:1,children:i.jsx(MC,{acceptedFiles:n,directUploads:r,hoveringFiles:o,readOnly:d,rejectedFilesCount:c,type:u})}),i.jsxs(P,{align:"center",gap:1,justify:"center",wrap:"wrap",children:[i.jsx(oL,{accept:t,"data-testid":"file-input-upload-button",disabled:d||!r,icon:Qu,mode:"bleed",onSelect:s,text:g("input.files.common.upload-placeholder.file-input-button.text")}),a]})]})}const NC=l.memo(sL),OC=12e4,lL=k(U)`
  min-height: 82px;
  box-sizing: border-box;
`,cL=k(P)`
  text-overflow: ellipsis;
  overflow: hidden;
  overflow: clip;
`,dL=k(B)`
  position: relative;
  width: 60%;
`,uL=k(xn)`
  position: relative;
  width: 100%;

  code {
    overflow: hidden;
    overflow: clip;
    text-overflow: ellipsis;
    position: relative;
    max-width: 200px;
  }
`,mL=e=>new Date().getTime()-new Date(e).getTime();function FC({uploadState:e,onCancel:t,onStale:n,height:a}){const r=e.file.name;l.useEffect(()=>{mL(e.updatedAt)>OC&&(n==null||n())},[e.updatedAt,n]);const{t:o}=L();return i.jsx(lL,{tone:"primary",padding:4,border:!0,style:{height:a?`${a}px`:void 0},children:i.jsxs(cL,{align:"center",justify:"space-between",height:"fill",direction:"row",gap:2,children:[i.jsxs(dL,{children:[i.jsx(P,{justify:"center",gap:[3,3,2,2],direction:["column","column","row"],children:i.jsx(E,{size:1,children:i.jsx(et,{space:2,children:i.jsx(Pe,{t:o,i18nKey:"input.files.common.upload-progress",components:{FileName:()=>i.jsx(uL,{size:1,children:r||"…"})}})})})}),i.jsx(U,{border:!0,marginTop:3,radius:5,children:i.jsx(Ute,{value:e.progress})})]}),t?i.jsx(Z,{mode:"ghost",onClick:t,text:o("input.files.common.cancel-upload"),tone:"critical"}):null]})})}function RC({onClearStale:e}){const{t}=L();return i.jsxs(U,{tone:"caution",padding:4,border:!0,radius:2,children:[i.jsxs(P,{gap:4,marginBottom:4,children:[i.jsx(I,{children:i.jsx(E,{size:1,children:i.jsx(Wt,{})})}),i.jsxs(B,{space:3,children:[i.jsx(E,{size:1,weight:"medium",children:t("inputs.files.common.stale-upload-warning.title")}),i.jsx(E,{size:1,children:t("inputs.files.common.stale-upload-warning.description",{staleThresholdMinutes:Math.ceil(OC/1e3/60)})})]})]}),i.jsx(Z,{icon:Hr,mode:"ghost",onClick:e,text:t("inputs.files.common.stale-upload-warning.clear"),width:"fill"})]})}function DC(e,t=2){if(e===0)return"0 Bytes";const n=1024,a=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(n));return`${parseFloat((e/Math.pow(n,o)).toFixed(a))} ${r[o]}`}function pL(e){const{originalFilename:t,size:n,children:a,muted:r,disabled:o,onClick:s,isMenuOpen:d,onMenuOpen:c,setMenuButtonElement:u}=e,[m,p]=l.useState(null),[h,f]=l.useState(null),g=l.useCallback(()=>c(!0),[c]);Pa(l.useCallback(y=>{d&&(y.key==="Escape"||y.key==="Tab")&&(c(!1),h==null||h.focus())},[d,c,h])),vt(l.useCallback(y=>{h!=null&&h.contains(y.target)||c(!1)},[h,c]),[m]);const b=l.useCallback(y=>{u(y),f(y)},[u]);l.useEffect(()=>{d&&(m==null||m.focus())},[d,m]);const{t:v}=L();return i.jsxs(P,{wrap:"nowrap",justify:"space-between",align:"center",children:[i.jsx(U,{as:r||o?void 0:"button",radius:2,padding:2,tone:"inherit",onClick:s,flex:1,children:i.jsxs(P,{wrap:"nowrap",align:"center",children:[i.jsx(U,{padding:3,tone:"transparent",shadow:1,radius:1,children:i.jsx(E,{muted:r,children:i.jsx(El,{})})}),i.jsxs(B,{flex:1,space:2,marginLeft:3,children:[i.jsx(E,{size:1,textOverflow:"ellipsis",muted:r,"data-testid":"file-name",weight:"medium",children:t}),i.jsx(E,{size:1,muted:!0,"data-testid":"file-size",children:DC(n)})]})]})}),i.jsx(I,{padding:2,children:i.jsx(P,{justify:"center",children:i.jsx(rt,{content:i.jsx(Be,{ref:p,children:a}),id:"file-actions-menu",portal:!0,open:d,constrainSize:!0,children:i.jsx(wt,{"aria-label":v("inputs.file.actions-menu.file-options.aria-label"),"data-testid":"options-menu-button",onClick:g,ref:b})})})})]})}function Rf(){return i.jsxs(P,{align:"center",justify:"flex-start",padding:2,children:[i.jsx(Ti,{padding:3,radius:1,animated:!0}),i.jsxs(B,{flex:1,space:2,marginLeft:3,children:[i.jsx(it,{style:{width:"100%"},radius:1,animated:!0}),i.jsx(it,{style:{width:"100%"},radius:1,animated:!0})]})]})}function hL({onClearValue:e}){const{t}=L();return i.jsxs(U,{tone:"caution",padding:4,border:!0,radius:2,children:[i.jsxs(P,{gap:4,marginBottom:4,children:[i.jsx(I,{children:i.jsx(E,{size:1,children:i.jsx(Wt,{})})}),i.jsxs(B,{space:3,children:[i.jsx(E,{size:1,weight:"medium",children:t("inputs.file.invalid-file-warning.title")}),i.jsx(E,{size:1,children:t("inputs.file.invalid-file-warning.description")})]})]}),i.jsx(Z,{icon:Hr,mode:"ghost",onClick:e,text:t("inputs.file.invalid-file-warning.reset-button.text"),width:"fill"})]})}const fL=k(U)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,gL=k(P)`
  height: 100%;
`;var bL=Object.defineProperty,yL=(e,t,n)=>t in e?bL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xt=(e,t,n)=>yL(e,typeof t!="symbol"?t+"":t,n);function vL({children:e}){return e}const xL=["asset"];class CL extends l.PureComponent{constructor(t){super(t),xt(this,"_assetFieldPath"),xt(this,"uploadSubscription",null),xt(this,"browseButtonElement",null),xt(this,"state",{isUploading:!1,selectedAssetSource:null,hoveringFiles:[],isStale:!1,isMenuOpen:!1}),xt(this,"toast",null),xt(this,"handleRemoveButtonClick",()=>{const{path:n,value:a}=this.props,r=typeof n.slice(-1)[0]!="string",o=Object.keys(a||{}),s=o.filter(c=>!["_type","_key","_upload","asset"].includes(c)).length===0,d=["asset"].concat(o.filter(c=>["_upload"].includes(c))).map(c=>we([c]));this.props.onChange(je.from(s&&!r?we():d))}),xt(this,"handleCancelUpload",()=>{this.cancelUpload()}),xt(this,"handleClearUploadState",()=>{this.setState({isStale:!1}),this.clearUploadStatus()}),xt(this,"handleStaleUpload",()=>{this.setState({isStale:!0})}),xt(this,"handleClearField",()=>{this.props.onChange(we(["asset"]))}),xt(this,"handleSelectFiles",n=>{const{directUploads:a,readOnly:r}=this.props,{hoveringFiles:o}=this.state;a&&!r?this.uploadFirstAccepted(n):o.length>0&&this.handleFilesOut()}),xt(this,"handleSelectFileFromAssetSource",n=>{this.setState({selectedAssetSource:n})}),xt(this,"handleAssetSourceClosed",()=>{var n;this.setState({selectedAssetSource:null}),(n=this.browseButtonElement)==null||n.focus()}),xt(this,"setBrowseButtonElement",n=>{this.browseButtonElement=n}),xt(this,"uploadWith",(n,a,r={})=>{const{schemaType:o,onChange:s,client:d,t:c}=this.props,{source:u}=r,m={metadata:ct(o,"options.metadata"),storeOriginalFilename:ct(o,"options.storeOriginalFilename"),source:u};this.cancelUpload(),this.setState({isUploading:!0}),s(je.from([Tn({_type:o.name})])),this.uploadSubscription=n.upload(d,a,o,m).subscribe({next:p=>{p.patches&&s(je.from(p.patches))},error:p=>{var h;console.error(p),(h=this.toast)==null||h.push({status:"error",description:c("inputs.file.upload-failed.description"),title:c("inputs.file.upload-failed.title")}),this.clearUploadStatus()},complete:()=>{this.setState({isUploading:!1})}})}),xt(this,"handleSelectAssetFromSource",n=>{const{onChange:a,schemaType:r,resolveUploader:o}=this.props;IC({assetFromSource:n,onChange:a,type:r,resolveUploader:o,uploadWith:this.uploadWith}),this.setState({selectedAssetSource:null})}),xt(this,"handleFileTargetFocus",n=>{var a;n.currentTarget===n.target&&n.currentTarget===((a=this.props.elementProps.ref)==null?void 0:a.current)&&this.props.elementProps.onFocus(n)}),xt(this,"handleFilesOver",n=>{this.setState({hoveringFiles:n})}),xt(this,"handleFilesOut",()=>{this.setState({hoveringFiles:[]})}),xt(this,"handleUpload",({file:n,uploader:a})=>{this.uploadWith(a,n)}),xt(this,"setToast",n=>{this.toast=n}),this._assetFieldPath=t.path.concat(xL)}clearUploadStatus(){var t;(t=this.props.value)!=null&&t._upload&&this.props.onChange(je.from([we(["_upload"])]))}cancelUpload(){this.uploadSubscription&&(this.uploadSubscription.unsubscribe(),this.clearUploadStatus())}uploadFirstAccepted(t){const{schemaType:n}=this.props,a=t.map(r=>{var o,s;return{file:r,uploader:(s=(o=this.props).resolveUploader)==null?void 0:s.call(o,n,r)}}).find(r=>r.uploader);a&&this.uploadWith(a.uploader,a.file),this.setState({isMenuOpen:!1})}renderUploadState(t){const{isUploading:n}=this.state;return i.jsx(FC,{uploadState:t,onCancel:n?this.handleCancelUpload:void 0,onStale:this.handleStaleUpload})}renderAssetSource(){const{selectedAssetSource:t}=this.state,{value:n,schemaType:a,observeAsset:r,t:o}=this.props;if(!t)return null;const s=ct(a,"options.accept",""),d=t.component;return n&&n.asset?i.jsx(Mo,{observeAsset:r,reference:n.asset,waitPlaceholder:i.jsx(Rf,{}),children:c=>i.jsx(d,{selectedAssets:[c],selectionType:"single",assetType:"file",accept:s,dialogHeaderTitle:o("inputs.file.dialog.title"),onClose:this.handleAssetSourceClosed,onSelect:this.handleSelectAssetFromSource})}):i.jsx(d,{selectedAssets:[],selectionType:"single",assetType:"file",accept:s,dialogHeaderTitle:o("inputs.file.dialog.title"),onClose:this.handleAssetSourceClosed,onSelect:this.handleSelectAssetFromSource})}renderAsset(){const{value:t,changed:n,readOnly:a,elementProps:r}=this.props,{hoveringFiles:o,isStale:s}=this.state,d=!!(t!=null&&t._upload||t!=null&&t.asset);return t&&typeof t.asset<"u"&&!(t!=null&&t._upload)&&!ch(t)?()=>i.jsx(hL,{onClearValue:this.handleClearField}):c=>i.jsxs(i.Fragment,{children:[s&&i.jsx(I,{marginBottom:2,children:i.jsx(RC,{onClearStale:this.handleClearUploadState})}),i.jsx(Kt,{path:this._assetFieldPath,hasFocus:!!c.focused,isChanged:n,children:t!=null&&t._upload?this.renderUploadState(t._upload):i.jsx(PC,{...r,onFocus:this.handleFileTargetFocus,tabIndex:0,disabled:!!a,onFiles:this.handleSelectFiles,onFilesOver:this.handleFilesOver,onFilesOut:this.handleFilesOut,tone:this.getFileTone(),$border:d||o.length>0,style:{padding:1},sizing:"border",radius:2,children:i.jsxs("div",{style:{position:"relative"},children:[!(t!=null&&t.asset)&&this.renderUploadPlaceholder(),t!=null&&t.asset&&o.length>0?this.renderAssetMenu(this.getFileTone()):null,!(t!=null&&t._upload)&&(t==null?void 0:t.asset)&&this.renderPreview()]})})})]})}renderPreview(){const{value:t,readOnly:n,assetSources:a,schemaType:r,directUploads:o,observeAsset:s,t:d}=this.props,{isMenuOpen:c}=this.state,u=t==null?void 0:t.asset;if(!u)return null;const m=ct(r,"options.accept","");let p=a&&(a==null?void 0:a.length)===0?null:i.jsx(ye,{icon:Rn,text:d("inputs.file.browse-button.text"),onClick:()=>{this.setState({isMenuOpen:!1}),this.handleSelectFileFromAssetSource(a[0])},disabled:n,"data-testid":"file-input-browse-button"});return a.length>1&&(p=a.map(h=>i.jsx(ye,{text:(h.i18nKey?d(h.i18nKey):h.title)||pn(h.name),onClick:()=>{this.setState({isMenuOpen:!1}),this.handleSelectFileFromAssetSource(h)},icon:h.icon||Ha,disabled:n,"data-testid":`file-input-browse-button-${h.name}`},h.name))),i.jsx(Mo,{reference:u,observeAsset:s,waitPlaceholder:i.jsx(Rf,{}),children:({originalFilename:h,extension:f,url:g,size:b})=>{const v=h||`download.${f}`;let y,x;return ch(t)&&(x=`${g}?dl`,y=g),i.jsx(pL,{size:b,originalFilename:v,muted:!n,onMenuOpen:w=>this.setState({isMenuOpen:w}),isMenuOpen:c,setMenuButtonElement:this.setBrowseButtonElement,children:i.jsx(_C,{onUpload:this.handleSelectFiles,browse:p,onReset:this.handleRemoveButtonClick,downloadUrl:x,copyUrl:y,readOnly:n,accept:m,directUploads:o})})}})}renderAssetMenu(t){const{schemaType:n,readOnly:a,directUploads:r,resolveUploader:o}=this.props,{hoveringFiles:s}=this.state,d=s.filter(u=>o==null?void 0:o(n,u)),c=s.length-d.length;return i.jsx(fL,{radius:2,tone:t,children:i.jsx(gL,{align:"center",justify:"center",gap:2,flex:1,children:i.jsx(MC,{readOnly:a,hoveringFiles:s,acceptedFiles:d,rejectedFilesCount:c,directUploads:r,type:"file"})})})}renderBrowser(){const{assetSources:t,readOnly:n,directUploads:a,id:r,t:o}=this.props;return t.length===0?null:t.length>1&&!n&&a?i.jsx(ze,{id:`${r}_assetFileButton`,ref:this.setBrowseButtonElement,button:i.jsx(Z,{mode:"bleed",text:o("inputs.file.multi-browse-button.text"),"data-testid":"file-input-multi-browse-button",icon:Rn}),"data-testid":"input-select-button",menu:i.jsx(Be,{children:t.map(s=>i.jsx(ye,{text:s.title,onClick:()=>{this.setState({isMenuOpen:!1}),this.handleSelectFileFromAssetSource(s)},icon:s.icon||Ha,disabled:n,"data-testid":`file-input-browse-button-${s.name}`},s.name))})}):i.jsx(Z,{text:o("inputs.file.browse-button.text"),icon:Rn,mode:"bleed",onClick:()=>{this.setState({isMenuOpen:!1}),this.handleSelectFileFromAssetSource(t[0])},"data-testid":"file-input-browse-button",disabled:n,ref:this.setBrowseButtonElement})}renderUploadPlaceholder(){const{readOnly:t,schemaType:n,directUploads:a,resolveUploader:r}=this.props,{hoveringFiles:o}=this.state,s=o.filter(u=>r==null?void 0:r(n,u)),d=o.length-s.length,c=ct(n,"options.accept","");return i.jsx(i.Fragment,{children:i.jsx(U,{tone:t?"transparent":"inherit",border:!0,paddingX:3,paddingY:2,radius:2,style:o.length===0?{borderStyle:"dashed"}:{borderStyle:"dashed",borderColor:"transparent"},children:i.jsx(NC,{browse:this.renderBrowser(),onUpload:this.handleSelectFiles,readOnly:t,hoveringFiles:o,acceptedFiles:s,rejectedFilesCount:d,type:"file",accept:c,directUploads:a})})})}getFileTone(){const{directUploads:t,schemaType:n,value:a,readOnly:r,resolveUploader:o}=this.props,{hoveringFiles:s}=this.state,d=s.filter(u=>o==null?void 0:o(n,u)),c=s.length-d.length;return s.length>0&&(c>0||!t)?"critical":!(a!=null&&a._upload)&&!r&&s.length>0?"primary":a!=null&&a._upload&&a!=null&&a.asset&&r?"transparent":"default"}render(){const{members:t,renderAnnotation:n,renderBlock:a,renderInlineBlock:r,renderItem:o,renderInput:s,renderField:d,renderPreview:c,t:u}=this.props,{selectedAssetSource:m}=this.state;return i.jsxs(i.Fragment,{children:[i.jsx(tj,{ref:this.setToast}),t.map(p=>p.kind==="field"&&(p.name==="crop"||p.name==="hotspot")?null:p.kind==="field"?i.jsx(Zo,{member:p,renderAnnotation:n,renderInlineBlock:r,renderBlock:a,renderInput:p.name==="asset"?this.renderAsset():s,renderField:p.name==="asset"?vL:d,renderItem:o,renderPreview:c},p.key):p.kind==="fieldSet"?i.jsx(Fm,{member:p,renderAnnotation:n,renderBlock:a,renderField:d,renderInlineBlock:r,renderInput:s,renderItem:o,renderPreview:c},p.key):p.kind==="error"?i.jsx(ec,{member:p},p.key):i.jsx(i.Fragment,{children:u("inputs.file.error.unknown-member-kind",{kind:p.kind})})),m&&this.renderAssetSource()]})}}function wL(e){var t;const n=(t=e.schemaType.options)==null?void 0:t.sources,a=gn(),{file:r}=Na().__internal,o=Xe(qe),{t:s}=L(),d=l.useCallback((m,p)=>r.directUploads?Om(m,p):null,[r.directUploads]),c=l.useMemo(()=>n||r.assetSources,[r,n]),u=l.useCallback(m=>bx(a,m),[a]);return i.jsx(CL,{...e,t:s,client:o,assetSources:c,directUploads:r.directUploads,observeAsset:u,resolveUploader:d})}const TL=["asset"];function jL(e,t){const{elementProps:n,handleClearUploadState:a,handleFilesOut:r,handleFilesOver:o,handleFileTargetFocus:s,handleSelectFiles:d,hoveringFiles:c,inputProps:u,isStale:m,readOnly:p,renderAssetMenu:h,renderPreview:f,renderUploadPlaceholder:g,renderUploadState:b,tone:v,value:y}=e,x=!!(y!=null&&y._upload||y!=null&&y.asset),w=l.useMemo(()=>u.path.concat(TL),[u.path]);return i.jsxs(i.Fragment,{children:[m&&i.jsx(I,{marginBottom:2,children:i.jsx(RC,{onClearStale:a})}),i.jsx(Kt,{path:w,hasFocus:!!u.focused,isChanged:u.changed,children:y!=null&&y._upload?b(y._upload):i.jsxs(PC,{...n,onFocus:s,tabIndex:0,disabled:!!p,onFiles:d,onFilesOver:o,onFilesOut:r,tone:v,$border:x||c.length>0,sizing:"border",radius:2,children:[!(y!=null&&y.asset)&&g(),!(y!=null&&y._upload)&&(y==null?void 0:y.asset)&&i.jsxs("div",{style:{position:"relative"},ref:t,children:[f(),h()]})]})})]})}const kL=l.memo(l.forwardRef(jL)),$C=k(et)`
  position: absolute;
  top: 0;
  right: 0;
`,AL=()=>i.jsx($C,{padding:2,children:i.jsx(Ti,{style:{width:"25px",height:"25px"},animated:!0})});function SL(e){const{onEdit:t,children:n,showEdit:a,setHotspotButtonElement:r,setMenuButtonElement:o,onMenuOpen:s,isMenuOpen:d}=e,[c,u]=l.useState(null),[m,p]=l.useState(null),h=l.useCallback(()=>s(!d),[s,d]);Pa(l.useCallback(b=>{d&&(b.key==="Escape"||b.key==="Tab")&&(s(!1),m==null||m.focus())},[d,s,m])),vt(l.useCallback(b=>{m!=null&&m.contains(b.target)||s(!1)},[m,s]),[c]);const f=l.useCallback(b=>{o(b),p(b)},[o]);l.useEffect(()=>{d&&(c==null||c.focus())},[d,c]);const{t:g}=L();return i.jsx(Ia,{children:i.jsxs($C,{"data-buttons":!0,space:1,padding:2,children:[a&&i.jsx(Z,{"aria-label":g("inputs.image.actions-menu.edit-details.aria-label"),"data-testid":"options-menu-edit-details",icon:Ok,mode:"ghost",onClick:t,ref:r,tooltipProps:{content:g("inputs.image.actions-menu.crop-image-tooltip")}}),i.jsx(rt,{id:"image-actions-menu",content:i.jsx(Be,{ref:u,children:n}),portal:!0,open:d,constrainSize:!0,children:i.jsx(wt,{"aria-label":g("inputs.image.actions-menu.options.aria-label"),"data-testid":"options-menu-button",mode:"ghost",onClick:h,ref:f})})]})})}function _L(e){const{assetSources:t,directUploads:n,handleOpenDialog:a,handleRemoveButtonClick:r,handleSelectFiles:o,handleSelectImageFromAssetSource:s,imageUrlBuilder:d,isImageToolEnabled:c,isMenuOpen:u,observeAsset:m,readOnly:p,schemaType:h,setHotspotButtonElement:f,setMenuButtonElement:g,setMenuOpen:b,value:v}=e,{t:y}=L(),x=l.useMemo(()=>ct(h,"options.accept","image/*"),[h]),w=v==null?void 0:v.asset,C=v&&w&&c;if(!w)return null;let T=t&&t.length===0?null:i.jsx(ye,{icon:Rn,text:y("inputs.image.browse-menu.text"),onClick:()=>{b(!1),s(t[0])},disabled:p,"data-testid":"file-input-browse-button"});return t&&t.length>1&&(T=t.map(j=>i.jsx(ye,{text:(j.i18nKey?y(j.i18nKey):j.title)||pn(j.name),onClick:()=>{b(!1),s(j)},icon:j.icon||Ha,"data-testid":`file-input-browse-button-${j.name}`,disabled:p},j.name))),i.jsx(ML,{accept:x,browseMenuItem:T,directUploads:n,handleOpenDialog:a,handleRemoveButtonClick:r,handleSelectFiles:o,imageUrlBuilder:d,isMenuOpen:u,observeAsset:m,readOnly:p,reference:w,schemaType:h,setHotspotButtonElement:f,setMenuButtonElement:g,setMenuOpen:b,showAdvancedEditButton:!!C,value:v})}const EL=l.memo(_L);function IL(e){const{accept:t,browseMenuItem:n,directUploads:a,handleOpenDialog:r,handleRemoveButtonClick:o,handleSelectFiles:s,imageUrlBuilder:d,isMenuOpen:c,observeAsset:u,readOnly:m,reference:p,setHotspotButtonElement:h,setMenuButtonElement:f,setMenuOpen:g,showAdvancedEditButton:b,value:v}=e,y=p==null?void 0:p._ref,x=l.useMemo(()=>u(y),[y,u]),w=Ut(x);if(!y||!w)return i.jsx(AL,{});const{_id:C,originalFilename:T,extension:j}=w;let A,M;if(Ur(v)){const S=T||`download.${j}`;M=d.image(C).forceDownload(S).url(),A=d.image(C).url()}return i.jsx(SL,{isMenuOpen:c,onEdit:r,onMenuOpen:g,setHotspotButtonElement:h,setMenuButtonElement:f,showEdit:!!b,children:i.jsx(_C,{onUpload:s,browse:n,onReset:o,downloadUrl:M,copyUrl:A,readOnly:m,directUploads:a,accept:t})})}const ML=l.memo(IL);function PL(e){const{handleAssetSourceClosed:t,handleSelectAssetFromSource:n,observeAsset:a,schemaType:r,selectedAssetSource:o,value:s}=e,d=l.useMemo(()=>ct(r,"options.accept","image/*"),[r]);if(!o)return null;const{component:c}=o;return s&&s.asset?i.jsx(Mo,{observeAsset:a,reference:s.asset,children:u=>i.jsx(c,{selectedAssets:[u],assetType:"image",accept:d,selectionType:"single",onClose:t,onSelect:n})}):i.jsx(c,{selectedAssets:[],selectionType:"single",assetType:"image",accept:d,onClose:t,onSelect:n})}const NL=l.memo(PL),OL={portal:!0};function FL(e,t){const{assetSources:n,readOnly:a,directUploads:r,id:o,setMenuOpen:s,handleSelectImageFromAssetSource:d}=e,{t:c}=L();return n&&n.length===0?null:n&&n.length>1&&!a&&r?i.jsx(ze,{id:`${o}_assetImageButton`,ref:t,button:i.jsx(Z,{"data-testid":"file-input-multi-browse-button",icon:Rn,iconRight:_n,mode:"bleed",text:c("inputs.image.browse-menu.text")}),menu:i.jsx(Be,{children:n.map(u=>i.jsx(ye,{text:(u.i18nKey?c(u.i18nKey):u.title)||pn(u.name),onClick:()=>{s(!1),d(u)},icon:u.icon||Ha,disabled:a,"data-testid":`file-input-browse-button-${u.name}`},u.name))}),popover:OL}):i.jsx(Z,{text:c("inputs.image.browse-menu.text"),icon:Rn,mode:"bleed",onClick:()=>{s(!1),d(n[0])},"data-testid":"file-input-browse-button",disabled:a})}const RL=l.memo(l.forwardRef(FL)),Df=k(I)`
  position: relative;
  padding-bottom: calc(${({ratio:e=3/2})=>1/e} * 100%);

  & > div {
    position: absolute;
    top: ${({padding:e=0})=>e}px;
    left: ${({padding:e=0})=>e}px;
    right: ${({padding:e=0})=>e}px;
    bottom: ${({padding:e=0})=>e}px;
  }
`,Ka={x:.5,y:.5,height:1,width:1},Wa={top:0,left:0,right:0,bottom:0};function DL(e={}){const t=$f(e.image)||1,n=e.hotspot||Ka,a=e.crop||Wa,r=$f(e.container)||t*LL(a),o=e.align||{x:"center",y:"center"},s=$L(t,{hotspot:n,crop:a},{aspect:r,align:o}),d=BC(LC(100/r));return{debug:{result:s},container:{overflow:"hidden",position:"relative",width:"100%",height:d},padding:{marginTop:d},crop:{position:"absolute",overflow:"hidden",height:ei(s.crop.height),width:ei(s.crop.width),top:ei(s.crop.top),left:ei(s.crop.left)},image:{position:"absolute",height:ei(s.image.height),width:ei(s.image.width),top:ei(s.image.top),left:ei(s.image.left)}}}function $f(e){if(!e)return null;if("aspectRatio"in e)return e.aspectRatio;if("height"in e||"width"in e){if(typeof e.height!="number"&&typeof e.width!="number")throw new Error(`Height and width must be numbers, got ${JSON.stringify(e)}`);return e.width/e.height}return null}function LC(e,t=2){const n=Math.pow(10,t);return Math.round(e*n)/n}function $L(e,t,n){const a=t.crop,r=n.aspect,o=n.align,s=1-a.left-a.right,d=1-a.top-a.bottom,c={top:-a.top/d,left:-a.left/s,width:1/s,height:1/d},u=s/d*e,m={x:(t.hotspot.x-a.left)/s,y:(t.hotspot.y-a.top)/d,height:t.hotspot.height/d,width:t.hotspot.width/s},p=1/m.width,h=1/m.height*u/r,f=Math.min(p,h);let g;const b=u<=r;b?g=1:g=u/r;let v,y;if(g>f){v="letterbox";let x;const w=g-f;b?x=1-w:x=f,y={width:x,height:x/u*r,left:0,top:0};const C=m.x*y.width-m.width*y.width/2;switch(o.x){case"left":y.left=b?0:-C;break;case"right":y.left=b?1-y.width:C;break;case"center":y.left=b?(1-y.width)/2:-C;break;default:throw new Error(`Invalid x alignment: '${o.x}'. Must be either 'left', 'right' or 'center'`)}const T=m.y*y.height-m.height*y.height/2;switch(o.y){case"top":y.top=b?-T:0;break;case"bottom":y.top=T;break;case"center":y.top=b?-T:(1-y.height)/2;break;default:throw new Error(`Invalid y alignment: '${o.y}'. Must be either 'top', 'bottom' or 'center'`)}}else if(b){v="full_width";let x=-m.y/u*r+.5;const w=g/u*r;x>0?x=0:-x>w-1&&(x=-(w-1)),y={width:g,height:w,left:0,top:x}}else{v="full_height";const x=g;let w=.5-m.x*g;w>0?w=0:-w>x-1&&(w=-(x-1)),y={width:x,height:g/u*r,top:0,left:w}}return{method:v,crop:y,image:c}}function LL(e){const t=1-e.top-e.bottom;return(1-e.left-e.right)/t}function BC(e){return e===0?0:`${e}%`}function ei(e){return BC(LC(e*100))}const BL=k.div`
  position: relative;
  width: 100%;
`,VL=Kn("sanity-imagetool");function UL(e,t){const n=1/t,a=t*n,r=a-(e.left+e.right)*a,o=n-(e.top+e.bottom)*n;return r/o}const zL=l.memo(function(e){const{alignX:t="center",alignY:n="center",alt:a,aspectRatio:r="none",className:o="",crop:s=Wa,hotspot:d=Ka,onError:c,onLoad:u,src:m,srcAspectRatio:p,srcSet:h,style:f}=e,[g,b]=l.useState(null),v=l.useRef(null),y=l.useRef(null),x=l.useCallback(()=>{if(v.current)if(r==="auto"){const T=v.current.parentNode;l.startTransition(()=>b(T.offsetWidth/T.offsetHeight))}else b(null)},[r]);l.useEffect(()=>{const T=y.current;return T&&T.src&&T.complete&&T.naturalWidth!==void 0&&(VL("Image '%s' already loaded, refreshing (from cache) to trigger onLoad / onError",m),T.src=T.src),x(),window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}},[m,x]);const w=l.useMemo(()=>r==="none"?s?UL(s,p):p:r==="auto"?g:r||null,[r,g,s,p]),C=l.useMemo(()=>DL({container:{aspectRatio:w||p},image:{aspectRatio:p},hotspot:d,crop:s,align:{x:t,y:n}}),[t,n,s,d,p,w]);return i.jsx(BL,{className:`${o}`,style:f,ref:v,children:i.jsxs("div",{style:C.container,children:[i.jsx("div",{style:C.padding}),i.jsx("div",{style:C.crop,children:i.jsx("img",{ref:y,src:m,alt:a,srcSet:h,onLoad:u,onError:c,style:C.image})})]})})});function HL(e){const{src:t,children:n}=e,[a,r]=l.useState(!0),[o,s]=l.useState(null),[d,c]=l.useState(null);return l.useEffect(()=>{s(null),c(null),r(!0);const u=new Image;u.onload=()=>{s(u),c(null),r(!1)},u.onerror=()=>{c(new Error(`Could not load image from ${JSON.stringify(t)}`)),r(!1)},u.referrerPolicy="strict-origin-when-cross-origin",u.src=t},[t]),n({image:o,error:d,isLoading:a})}function KL(e){const{image:t,maxHeight:n,maxWidth:a,children:r}=e,o=l.useRef(null),[s,d]=l.useState(!1);return l.useLayoutEffect(()=>{if(!o.current){const v=document.createElement("canvas");v.style.display="none",o.current=v,d(!0)}const c=t.width/t.height,u=Math.min(t.width,a),m=Math.min(t.height,n),p=t.width>t.height,h=p?u:m*c,f=p?u/c:m;o.current.width=h,o.current.height=f;const g=o.current.getContext("2d");g&&g.drawImage(t,0,0,t.width,t.height,0,0,h,f);const b=o.current;return document.body.appendChild(b),()=>{document.body.removeChild(b)}},[t,n,a]),!o.current||!s?null:r(o.current)}var WL=Object.defineProperty,GL=(e,t,n)=>t in e?WL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wa=(e,t,n)=>GL(e,typeof t!="symbol"?t+"":t,n);class iu{constructor(t,n){wa(this,"x"),wa(this,"y"),this.x=t,this.y=n}}class Lf{constructor(t,n,a){wa(this,"y"),wa(this,"_left"),wa(this,"_right"),this.y=t,this._left=n,this._right=a}get right(){return new iu(this._right,this.y)}get left(){return new iu(this._left,this.y)}get length(){return this._right-this._left}}class qL{constructor(t){wa(this,"rect"),this.rect=t}get top(){return new Lf(this.rect.top,this.rect.left,this.rect.right)}get bottom(){return new Lf(this.rect.bottom,this.rect.left,this.rect.right)}}class kt{constructor(t=0,n=0,a=0,r=0){wa(this,"left"),wa(this,"top"),wa(this,"width"),wa(this,"height"),this.left=t,this.top=n,this.width=a,this.height=r}static fromEdges({left:t,right:n,top:a,bottom:r}){return new kt(t,a,1-t-n,1-a-r)}setTopLeft(t,n){return new kt(t,n,this.width||0,this.height||0)}setSize(t,n){return new kt(this.left||0,this.top||0,t,n)}setCenter(t,n){const a=this.width||0,r=this.height||0;return new kt(t-a/2,n-r/2,a||0,r||0)}get center(){return new iu(this.left+this.width/2,this.top+this.height/2)}get corners(){return new qL(this)}get right(){return this.left+this.width}get bottom(){return this.top+this.height}multiply(t){return new kt((this.left||0)+this.width*t.left,(this.top||0)+this.height*t.top,this.width*t.width,this.height*t.height)}grow(t){return new kt(this.left-t,this.top-t,this.width+t*2,this.height+t*2)}shrink(t){return this.grow(-t)}cropRelative(t){const n=this.top+t.top*this.height,a=this.left+t.left*this.width,r=this.height*t.height,o=this.width*t.width;return new kt(a,n,o,r)}clamp(t){let{left:n,top:a,width:r,height:o}=this;return t.width<r&&(r=t.width,n=t.left),t.height<o&&(o=t.height,a=t.top),n+r>t.left+t.width&&(n=t.right-r),a+o>t.top+t.height&&(a=t.bottom-o),new kt(Math.max(n,t.left),Math.max(a,t.top),r,o)}}function Bf(e,t){const n={x:t.center.x,y:t.center.y},a=t.width/2,r=t.height/2;if(a<=0||r<=0)return!1;const o={x:e.x-n.x,y:e.y-n.y};return Math.pow(o.x,2)/Math.pow(a,2)+Math.pow(o.y,2)/Math.pow(r,2)<=1}function Vf({x:e,y:t},n){return Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.radius,2)}function Zc(e,t){return e.x>=t.left&&e.x<=t.left+t.width&&e.y>=t.top&&e.y<=t.top+t.height}function VC(e,t){return{x:t.center.x-t.width/2*Math.cos(e),y:t.center.y-t.height/2*Math.sin(e)}}const YL="data:image/png;base64,AAACAAEAICACAAcABQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8=",XL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAABdSURBVEjH7ZA7DsAwCEMN6v2vTCdESpLKQRl5gxfzMQDNRQyWlEK83QAIRh3cH/QbIhQwMDl8gORl7A16WD/xxAdq6N6SgycKUblf41+wbFBT44RiCi11NU3TLHgBxRUUD4ITqnIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMDEtMjFUMDA6MTM6NDMrMDE6MDC74T7AAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEyLTA0LTAyVDA0OjEzOjM3KzAyOjAwQJ35wQAAAABJRU5ErkJggg==",JL=l.forwardRef(function(e,t){const{readOnly:n,onDragStart:a,onDragEnd:r,onDrag:o,...s}=e,d=l.useRef(null),c=l.useRef(null),u=l.useRef(!1),m=l.useCallback(b=>{if(n||!d.current)return;if(u.current){Ts("Start cancelled, already a drag in progress");return}u.current=!0;const v=ed(b);Ts("Drag started %o",v),a(Qc(v.x,v.y,d.current.getBoundingClientRect())),c.current=v},[a,n]),p=l.useCallback(b=>{if(!u.current||n||!c.current)return;const v=ed(b),y=e3(v,c.current);o(y),Ts("moving by %o",y),c.current=v},[o,n]),h=l.useCallback(()=>{!u.current||n||!c.current||!d.current||(u.current=!1,r(Qc(c.current.x,c.current.y,d.current.getBoundingClientRect())),c.current=null)},[r,n]),f=l.useCallback(b=>{if(!u.current||n||!d.current)return;const v=ed(b);r(Qc(v.x,v.y,d.current.getBoundingClientRect())),u.current=!1,c.current=null,Ts("Done moving %o",v)},[r,n]);l.useEffect(()=>(document.body.addEventListener("pointermove",p),document.body.addEventListener("pointerup",f),document.body.addEventListener("pointerleave",h),document.body.addEventListener("pointercancel",h),()=>{document.body.removeEventListener("pointermove",p),document.body.removeEventListener("pointerup",f),document.body.removeEventListener("pointerleave",h),document.body.removeEventListener("pointercancel",h)}),[p,h,f]);const g=l.useCallback(b=>{d.current=b,typeof t=="function"?t(b):t&&(t.current=b)},[t]);return i.jsx(QL,{ref:g,onPointerDown:n?void 0:m,...s})}),ZL=l.memo(JL),Ts=Kn("sanity-imagetool"),QL=k.canvas`
  display: block;
  position: relative;
  max-width: calc(100% - 0.5em); /* to prevent overlap with change bar */
  max-height: calc(100% + 1em);
  user-select: none;
  // Enable only multi-finger panning and zooming within this element.
  // This prevents single finger panning when manipulating drag handles,
  // which can cause unwanted scrolling in the underlying document body.
  touch-action: pinch-zoom;
`;function Qc(e,t,n){return{x:e-n.left,y:t-n.top}}function ed(e){return{x:e.clientX,y:e.clientY}}function e3(e,t){return{x:e.x-t.x,y:e.y-t.y}}function t3({context:e,image:t,MARGIN_PX:n,scale:a}){const r=new kt().setSize(t.width,t.height).shrink(n*a);e.save(),e.fillStyle="white",e.clearRect(0,0,t.width,t.height),e.globalAlpha=.3,e.drawImage(t,r.left,r.top,r.width,r.height),e.restore()}function n3({clampedValue:e,context:t,HOTSPOT_HANDLE_SIZE:n,image:a,MARGIN_PX:r,opacity:o,readOnly:s,scale:d}){const c=new kt().setSize(a.width,a.height),{hotspot:u,crop:m}=e,p=r*d;t.save(),b(),h(),t.clip(),g(),t.restore(),s||v(Math.PI*1.25);function h(){t.save();const y=c.shrink(p).multiply(u),x=y.height/y.width;t.scale(1,x),t.beginPath(),t.globalAlpha=o,t.arc(y.center.x,y.center.y/x,Math.abs(y.width/2),0,2*Math.PI,!1),t.strokeStyle="white",t.lineWidth=1.5*d,t.stroke(),t.closePath(),t.restore()}function f(y,x,w,C,T,j,A,M){t.save(),t.drawImage(a,y,x,w,C,T,j,A,M),t.restore()}function g(){const y=c.multiply(u),x=c.shrink(p).multiply(u);f(y.left,y.top,y.width,y.height,x.left,x.top,x.width,x.height)}function b(){const y=c.cropRelative(m),x=c.shrink(p).cropRelative(m);t.save(),f(y.left,y.top,y.width,y.height,x.left,x.top,x.width,x.height),t.globalAlpha=.5,t.fillStyle="black",t.fillRect(x.left,x.top,x.width,x.height),t.restore()}function v(y){t.save();const x=n*d,w=c.shrink(p).multiply(u),C=VC(y,w);t.beginPath(),t.arc(C.x,C.y,x,0,2*Math.PI,!1),t.fillStyle="rgb(255,255,255)",t.fill(),t.closePath(),t.restore(),t.beginPath(),t.arc(C.x,C.y,x,0,2*Math.PI,!1),t.strokeStyle="rgb(0, 0, 0)",t.lineWidth=.5*d,t.stroke(),t.closePath()}}function a3({context:e,hotspotRect:t,image:n,MARGIN_PX:a,scale:r}){e.save();const o=a*r;e.setLineDash&&e.setLineDash([2*r,2*r]),e.lineWidth=.5*r,e.strokeStyle="rgba(200, 200, 200, 0.5)",s(t.center.x),d(t.center.y),e.strokeStyle="rgba(150, 150, 150, 0.5)",d(t.top),d(t.bottom),s(t.left),s(t.right),e.restore();function s(u){c(u,o,u,n.height-o)}function d(u){c(o,u,n.width-o,u)}function c(u,m,p,h){e.beginPath(),e.moveTo(u,m),e.lineTo(p,h),e.stroke(),e.closePath()}}function i3({context:e,cropRect:t}){e.save(),e.beginPath(),e.fillStyle="rgba(66, 66, 66, 0.9)",e.lineWidth=1,e.rect(t.left,t.top,t.width,t.height),e.stroke(),e.closePath(),e.restore()}function r3({context:e,cropHandles:t,cropping:n,opacity:a}){e.save(),UC.forEach(r=>{e.fillStyle=n===r?`rgba(202, 54, 53, ${a})`:`rgba(230, 230, 230, ${a+.4})`;const{left:o,top:s,height:d,width:c}=t[r];e.fillRect(o,s,c,d),e.beginPath(),e.fillStyle=`rgba(66, 66, 66, ${a})`,e.rect(o,s,c,d),e.closePath(),e.stroke()}),e.restore()}const UC=["left","right","top","topLeft","topRight","bottom","bottomLeft","bottomRight"];function o3({clampedValue:e,context:t,cropHandles:n,cropping:a,cropRect:r,HOTSPOT_HANDLE_SIZE:o,hotspotRect:s,image:d,MARGIN_PX:c,pointerPosition:u,ratio:m,readOnly:p,scale:h}){t.save(),t.scale(m,m);const f=!p&&u?.8:.2;t3({context:t,image:d,MARGIN_PX:c,scale:h}),n3({clampedValue:e,context:t,HOTSPOT_HANDLE_SIZE:o,image:d,MARGIN_PX:c,opacity:f,readOnly:p,scale:h}),a3({context:t,hotspotRect:s,image:d,MARGIN_PX:c,scale:h}),i3({context:t,cropRect:r}),p||r3({context:t,cropHandles:n,cropping:a,opacity:f}),t.restore()}const s3=k.div`
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
`;function l3(){const[e,t]=l.useState(null),[n,a]=l.useState(0),[r,o]=l.useState(0),s=l.useMemo(()=>({height:n,width:r}),[n,r]);return l.useEffect(()=>{if(e)return a(e.clientHeight),o(e.clientWidth),mh.observe(e,d=>{a(Math.round(d.contentRect.height)),o(Math.round(d.contentRect.width))}),()=>{mh.unobserve(e)}},[e]),[s,t]}var c3=Object.defineProperty,d3=(e,t,n)=>t in e?c3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ti=(e,t,n)=>d3(e,typeof t!="symbol"?t+"":t,n);const ru=8,u3=12,m3=10;function p3(e){const t=e.top>e.bottom,n=e.left>e.right;return{top:t?e.bottom:e.top,bottom:t?e.top:e.bottom,left:n?e.right:e.left,right:n?e.left:e.right}}function h3(e,t){return!(!e||!e.crop||e.crop.top+t.top<0||e.crop.left+t.left<0||e.crop.right+t.right<0||e.crop.bottom+t.bottom<0)}function Uf(e,t){const{top:n,right:a,bottom:r,left:o}=e.crop||Wa,s={hotspot:e.hotspot,crop:{top:n+(t.top||0)>0?n:0,right:a+(t.right||0)>0?a:0,bottom:r+(t.bottom||0)>0?r:0,left:o+(t.left||0)>0?o:0}},d={top:n+(t.top||0)>0&&t.top||0,right:a+(t.right||0)>0&&t.right||0,bottom:r+(t.bottom||0)>0&&t.bottom||0,left:o+(t.left||0)>0&&t.left||0};return{value:s,delta:d}}function f3(e){switch(e){case"left":case"right":return"col-resize";case"top":case"bottom":return"row-resize";case"topRight":case"bottomLeft":return"nesw-resize";case"topLeft":case"bottomRight":return"nwse-resize";default:return null}}function g3(e){const{image:t,readOnly:n,onChange:a,onChangeEnd:r,value:o}=e,s=Ky(),[d,c]=l3(),u=l.useMemo(()=>t.width/d.width,[d.width,t.width]),m=l.useMemo(()=>{const g=o.hotspot||Ka,b=new kt().setSize(g.width,g.height).setCenter(g.x,g.y);return new kt().setSize(t.width,t.height).shrink(ru*u).multiply(b)},[t.height,t.width,u,o.hotspot]),p=l.useMemo(()=>new kt().setSize(t.width,t.height).shrink(ru*u).cropRelative(kt.fromEdges(o.crop||Wa).clamp(new kt(0,0,1,1))),[t.height,t.width,u,o.crop]),h=l.useMemo(()=>{const g=p,b=u3*u,v=b/2,y=new kt(0,0,b,b);return{left:y.setTopLeft(g.left-v,g.center.y-v),right:y.setTopLeft(g.right-v,g.center.y-v),top:y.setTopLeft(g.center.x-v,g.top-v),topLeft:y.setTopLeft(g.left-v,g.top-v),topRight:y.setTopLeft(g.right-v,g.top-v),bottom:y.setTopLeft(g.center.x-v,g.bottom-v),bottomLeft:y.setTopLeft(g.left-v,g.bottom-v),bottomRight:y.setTopLeft(g.right-v,g.bottom-v)}},[p,u]),f=l.useMemo(()=>{const g=kt.fromEdges(o.crop||Wa).clamp(new kt(0,0,1,1)),b=o.hotspot||Ka,v=new kt(0,0,1,1).setSize(b.width,b.height).setCenter(b.x,b.y).clamp(g);return{crop:g,hotspot:v}},[o.crop,o.hotspot]);return i.jsx(y3,{actualSize:d,hotspotRect:m,cropRect:p,cropHandles:h,clampedValue:f,image:t,onChange:a,onChangeEnd:r,ratio:s,readOnly:n,scale:u,setCanvasObserver:c,value:o})}const b3=l.memo(g3);class y3 extends l.PureComponent{constructor(){super(...arguments),ti(this,"state",{cropping:!1,cropMoving:!1,moving:!1,resizing:!1,pointerPosition:null}),ti(this,"canvas"),ti(this,"handleDragStart",({x:t,y:n})=>{const a={x:t*this.props.scale,y:n*this.props.scale},r=Bf(a,this.props.hotspotRect),o=Vf(a,this.getDragHandleCoords()),s=this.getActiveCropHandleFor(a),d=Zc(a,this.props.cropRect);s?this.setState({cropping:s}):o?this.setState({resizing:!0}):r?this.setState({moving:!0}):d&&this.setState({cropMoving:!0})}),ti(this,"handleDrag",t=>{this.state.cropping?this.emitCrop(this.state.cropping,t):this.state.cropMoving?this.emitCropMove(t):this.state.moving?this.emitMove(t):this.state.resizing&&this.emitResize(t)}),ti(this,"handleDragEnd",()=>{const{onChange:t,onChangeEnd:n}=this.props;this.setState({moving:!1,resizing:!1,cropping:!1,cropMoving:!1});const{hotspot:a,crop:r}=this.props.clampedValue,o=p3(r),s={crop:{top:o.top,bottom:1-o.bottom,left:o.left,right:1-o.right},hotspot:{x:a.center.x,y:a.center.y,height:Math.abs(a.height),width:Math.abs(a.width)}};t(s),n&&n(s)}),ti(this,"handlePointerOut",()=>{this.setState({pointerPosition:null})}),ti(this,"handlePointerMove",t=>{const n=t.currentTarget.getBoundingClientRect();this.setState({pointerPosition:{x:(t.clientX-n.left)*this.props.scale,y:(t.clientY-n.top)*this.props.scale}})}),ti(this,"setCanvas",t=>{t&&(this.canvas=t),this.props.setCanvasObserver(t)})}getActiveCropHandleFor({x:t,y:n}){const a=this.props.cropHandles;for(const r of UC)if(Zc({x:t,y:n},a[r]))return r;return!1}emitMove(t){const{image:n,value:a,onChange:r}=this.props,o=this.props.scale,s={x:t.x*o/n.width,y:t.y*o/n.height};r(v3(a,s))}emitCropMove(t){const{image:n,onChange:a,value:r}=this.props,o=this.props.scale,s=t.x*o/n.width,d=-t.x*o/n.width,c=t.y*o/n.height,u=-t.y*o/n.height,m={left:s,right:d,top:c,bottom:u};h3(r,m)&&a(zf(r,m))}emitCrop(t,n){const{image:a,onChange:r,value:o}=this.props,s=this.props.scale;let d=0,c=0,u=0,m=0;t=="left"||t==="topLeft"||t==="bottomLeft"?d=n.x*s/a.width:(t=="right"||t==="topRight"||t==="bottomRight")&&(c=-n.x*s/a.width),t=="top"||t==="topLeft"||t==="topRight"?u=n.y*s/a.height:(t=="bottom"||t==="bottomLeft"||t==="bottomRight")&&(m=-n.y*s/a.height);const p={left:d,right:c,top:u,bottom:m},h=Uf(o,p).value,f=Uf(o,p).delta;r(zf(h,f))}emitResize(t){const{image:n,onChange:a,value:r}=this.props,o=this.props.scale,s={x:t.x*o*2/n.width,y:t.y*o*2/n.height};a(x3(r,{height:s.y,width:s.x}))}getDragHandleCoords(){const t=this.props.hotspotRect,n=VC(Math.PI*1.25,t);return{x:n.x,y:n.y,radius:8*this.props.scale}}getCursor(){const{pointerPosition:t}=this.state,{readOnly:n}=this.props;if(!t||n)return"auto";const a=this.state.cropping||this.getActiveCropHandleFor(t);if(a)return f3(a)||"auto";const r=Vf(t,this.getDragHandleCoords());if(this.state.resizing||r)return"move";if(this.state.moving||this.state.cropMoving)return`url(${XL}), move`;const o=Bf(t,this.props.hotspotRect),s=Zc(t,this.props.cropRect);return o||s?`url(${YL}), move`:"auto"}componentDidMount(){const{canvas:t}=this;t&&this.draw({canvas:t})}componentDidUpdate(){const{canvas:t}=this;t&&this.draw({canvas:t})}draw({canvas:t}){const n=t.getContext("2d");if(!n)return;const{clampedValue:a,cropHandles:r,cropRect:o,hotspotRect:s,image:d,ratio:c,readOnly:u,scale:m}=this.props,{cropping:p,pointerPosition:h}=this.state;o3({clampedValue:a,context:n,cropHandles:r,cropping:p,cropRect:o,HOTSPOT_HANDLE_SIZE:m3,hotspotRect:s,image:d,MARGIN_PX:ru,pointerPosition:h,ratio:c,readOnly:u,scale:m});const f=t.style.cursor,g=this.getCursor();f!==g&&(t.style.cursor=g)}render(){const{image:t,readOnly:n,ratio:a}=this.props;return i.jsx(s3,{children:i.jsx(ZL,{readOnly:n,ref:this.setCanvas,onDrag:this.handleDrag,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,onPointerMove:this.handlePointerMove,onPointerOut:this.handlePointerOut,height:t.height*a,width:t.width*a})})}}function v3(e,t){const n=e&&e.hotspot||Ka;return{...e,hotspot:{...n,x:n.x+t.x,y:n.y+t.y}}}function x3(e,t){const n=e&&e.hotspot||Ka;return{...e,hotspot:{...n,height:n.height+t.height,width:n.width+t.width}}}function zf(e,t){const n=e&&e.crop||Wa;return{...e,crop:{left:n.left+(t.left||0),right:n.right+(t.right||0),top:n.top+(t.top||0),bottom:n.bottom+(t.bottom||0)}}}function Po(e){return i.jsx(HL,{src:e.src,children:({isLoading:t,image:n,error:a})=>t?i.jsx(It,{showText:!0}):a?i.jsx("div",{children:a.message}):n?i.jsx(KL,{image:n,maxHeight:Po.maxHeight,maxWidth:Po.maxWidth,children:r=>i.jsx(b3,{image:r,...e})}):null})}Po.maxHeight=500;Po.maxWidth=1e3;const C3="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w3(e){return e.startsWith("blob:")}function T3(e){return new Dn(t=>{const n=document.createElement("img");let a=!1;const r=()=>{a=!0,t.next(n),t.complete()},o=()=>{a=!0,t.error(new Error(`Could not load image from ${w3(e)?"blob":e}`))};return n.onload=r,n.onerror=o,n.src=e,()=>{n.onload=null,n.onerror=null,a||(n.src=C3)}})}const Hf={isLoading:!0};function j3(e){const[t,n]=l.useState(Hf);return l.useEffect(()=>{n(Hf);const a=T3(e).subscribe({error:r=>{n({isLoading:!1,error:r})},next:r=>{n({image:r,isLoading:!1})}});return()=>{a.unsubscribe()}},[e]),t}const Kf=["hotspot"],Wf=[["3:4",3/4],["Square",1/1],["16:9",16/9],["Panorama",4/1]],Gf={crop:Wa,hotspot:Ka},k3=k.div`
  min-height: 6em;
`;function A3(e){return i.jsx(P,{align:"center",justify:"center",padding:4,style:{overflowWrap:"break-word"},children:e.children})}function S3(e){const{imageUrl:t,value:n,changed:a,level:r,path:o,focusPath:s=lt,presence:d,onChange:c,schemaType:u,onPathFocus:m,readOnly:p,elementProps:h}=e,[f,g]=l.useState(n||Gf),{image:b,isLoading:v,error:y}=j3(t),x=l.useCallback(()=>{m(Kf)},[m]);l.useEffect(()=>{g(n||Gf)},[n]);const w=s[0]==="hotspot";rn(w,j=>{var A;!j&&w&&((A=h.ref.current)==null||A.focus())});const C=l.useCallback(j=>{if(p)return;const A=u.fields.find(D=>D.name==="crop"&&D.type.name!=="object"),M=u.fields.find(D=>D.type.name!=="object"&&D.name==="hotspot"),S=A?{_type:A.type.name,...j.crop||Wa}:j.crop,N=M?{_type:M.type.name,...j.hotspot||Ka}:j.hotspot;c([be(S,["crop"]),be(N,["hotspot"])])},[c,p,u.fields]),{t:T}=L();return i.jsx(Xi,{title:T("inputs.imagetool.title"),level:r,description:T("inputs.imagetool.description"),deprecated:u.deprecated,__unstable_presence:d,children:i.jsxs("div",{children:[i.jsx(U,{__unstable_checkered:!0,__unstable_focusRing:!0,tabIndex:0,ref:h.ref,onFocus:x,children:i.jsx(Kt,{path:o.concat(Kf),hasFocus:s[0]==="hotspot",isChanged:a,children:i.jsxs(Df,{ratio:3/2,children:[(v||y)&&i.jsx(A3,{children:y?i.jsx(U,{padding:4,radius:2,tone:"critical",border:!0,children:i.jsx(E,{children:T("inputs.imagetool.load-error",{errorMessage:y.message})})}):i.jsx(It,{showText:!0})}),!v&&b&&i.jsx(I,{margin:1,children:i.jsx(Po,{value:f,src:b.src,readOnly:!!p,onChangeEnd:C,onChange:g})})]})})}),i.jsx(I,{marginTop:3,children:i.jsx(Ze,{columns:Wf.length,gap:1,children:Wf.map(([j,A])=>i.jsxs("div",{children:[i.jsx(An,{as:"h4",size:0,children:j}),i.jsx(I,{marginTop:2,children:i.jsx(Df,{ratio:A,children:i.jsx(U,{__unstable_checkered:!0,children:!v&&b?i.jsx(zL,{aspectRatio:A,src:b.src,srcAspectRatio:b.width/b.height,hotspot:f.hotspot||Ka,crop:f.crop||Wa}):i.jsx(k3,{})})})})]},A))})})]})})}const _3=l.memo(function(e){const{handleCloseDialog:t,inputProps:n,imageInputProps:a,isImageToolEnabled:r}=e,{t:o}=L(),{changed:s,id:d,imageUrlBuilder:c,value:u}=a,m=r&&u&&u.asset,p=l.useMemo(()=>u!=null&&u.asset?c.image(u.asset).url():"",[c,u==null?void 0:u.asset]);return i.jsx(En,{__unstable_autoFocus:!1,header:o("inputs.image.hotspot-dialog.title"),id:`${d}_dialog`,onClickOutside:t,onClose:t,width:1,children:i.jsx(Xo,{children:i.jsx(B,{space:5,children:m&&(u==null?void 0:u.asset)&&i.jsx(S3,{...a,imageUrl:p,value:u,presence:n.presence,changed:s})})})})}),qf=30,E3=k(U)`
  position: relative;
  width: 100%;
  overflow: hidden;
  overflow: clip;
  min-height: 3.75rem;
  max-height: 20rem;

  & > div[data-container] {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex !important;
    align-items: center;
    justify-content: center;
  }

  & img {
    max-width: 100%;
    max-height: 100%;
  }
`,I3=k(P)(({$drag:e,$tone:t})=>{const n=xr.color.light[t].card.enabled.fg,a=Hy(xr.color.light[t].card.enabled.bg,.8);return ae`
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    backdrop-filter: ${e?"blur(10px)":""};
    color: ${t?n:""};
    background-color: ${e?a:"transparent"};
  `}),M3=k(P)`
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
`,P3=e=>{const t=new URLSearchParams(e.split("?")[1]).get("rect");return t?[t.split(",")[2],t.split(",")[3]].map(Number):e.split("-")[1].split(".")[0].split("x").map(Number)};function N3(e){const{drag:t,readOnly:n,isRejected:a,src:r,initialHeight:o,...s}=e,[d,c]=l.useState(!1),[u,m]=l.useState(null),p=Vu(u),h=(p==null?void 0:p.width)||0,f=t?a||n?"critical":"primary":"default",g=qf*document.documentElement.clientHeight/100,[b,v]=P3(r),y=b/v,x=(b>h?h/y:v)<g?null:`${qf}vh`;l.useEffect(()=>{c(!1)},[r]);const w=l.useCallback(()=>{c(!0)},[]),{t:C}=L();return i.jsxs(E3,{...s,ref:m,style:{height:o&&!d?o:x},tone:"transparent",children:[i.jsxs(U,{"data-container":!0,tone:"inherit",children:[!d&&i.jsx(Yf,{cardTone:"transparent",drag:!0,content:i.jsx(It,{showText:!0})}),i.jsx("img",{src:r,"data-testid":"hotspot-image-input",alt:e.alt,onLoad:w,referrerPolicy:"strict-origin-when-cross-origin"})]}),t&&i.jsx(Yf,{cardTone:f,drag:t,content:i.jsxs(i.Fragment,{children:[i.jsx(I,{marginBottom:3,children:i.jsx(An,{children:i.jsx(O3,{isRejected:a,readOnly:n})})}),i.jsx(E,{size:1,children:C(F3({isRejected:a,readOnly:n}))})]})})]})}function O3({isRejected:e,readOnly:t}){return e?i.jsx(Li,{}):t?i.jsx(h0,{}):i.jsx(Ha,{})}function F3({isRejected:e,readOnly:t}){return e?"inputs.image.drag-overlay.this-field-is-read-only":t?"inputs.image.drag-overlay.cannot-upload-here":"inputs.image.drag-overlay.drop-to-upload-image"}function Yf({cardTone:e,drag:t,content:n}){return i.jsx(I3,{justify:"flex-end",padding:3,$drag:t,$tone:e,children:i.jsx(M3,{direction:"column",align:"center",justify:"center",children:n})})}const R3=l.memo(function(e){const{directUploads:t,handleOpenDialog:n,hoveringFiles:a,imageUrlBuilder:r,initialHeight:o,readOnly:s,resolveUploader:d,schemaType:c,value:u}=e,m=l.useMemo(()=>Ur(u),[u]);return!u||!m?null:i.jsx(D3,{directUploads:t,handleOpenDialog:n,hoveringFiles:a,imageUrlBuilder:r,initialHeight:o,readOnly:s,resolveUploader:d,schemaType:c,value:u})});function D3(e){const{directUploads:t,handleOpenDialog:n,hoveringFiles:a,imageUrlBuilder:r,initialHeight:o,readOnly:s,resolveUploader:d,schemaType:c,value:u}=e,{t:m}=L(),p=l.useMemo(()=>a.filter(b=>d(c,b)),[a,d,c]),h=l.useMemo(()=>a.length-p.length,[p,a]),f=Ky(),g=l.useMemo(()=>r.width(2e3).fit("max").image(u).dpr(f).auto("format").url(),[f,r,u]);return i.jsx(N3,{alt:m("inputs.image.preview-uploaded-image"),drag:!(u!=null&&u._upload)&&a.length>0,initialHeight:o,isRejected:h>0||!t,onDoubleClick:n,readOnly:s,src:g})}function $3(e){const{directUploads:t,handleSelectFiles:n,hoveringFiles:a,readOnly:r,renderBrowser:o,resolveUploader:s,schemaType:d}=e,c=l.useMemo(()=>a.filter(p=>s(d,p)),[a,s,d]),u=l.useMemo(()=>ct(d,"options.accept","image/*"),[d]),m=a.length-c.length;return i.jsx("div",{style:{padding:1},children:i.jsx(U,{tone:r?"transparent":"inherit",border:!0,paddingX:3,paddingY:2,radius:2,style:a.length===0?{}:{borderColor:"transparent"},children:i.jsx(NC,{browse:o(),onUpload:n,readOnly:r,hoveringFiles:a,acceptedFiles:c,rejectedFilesCount:m,type:"image",accept:u,directUploads:t})})})}const L3=l.memo($3);function B3({onClearValue:e}){const{t}=L();return i.jsxs(U,{tone:"caution",padding:4,border:!0,radius:2,children:[i.jsxs(P,{gap:4,marginBottom:4,children:[i.jsx(I,{children:i.jsx(E,{size:1,children:i.jsx(Wt,{})})}),i.jsxs(B,{space:3,children:[i.jsx(E,{size:1,weight:"medium",children:t("inputs.image.invalid-image-warning.title")}),i.jsx(E,{size:1,children:t("inputs.image.invalid-image-warning.description")})]})]}),i.jsx(Z,{icon:Hr,mode:"ghost",onClick:e,text:t("inputs.image.invalid-image-warning.reset-button.text"),width:"fill"})]})}function V3(e){const{assetSources:t,client:n,directUploads:a,elementProps:r,focusPath:o,id:s,imageUrlBuilder:d,members:c,observeAsset:u,onChange:m,onPathFocus:p,path:h,readOnly:f,renderAnnotation:g,renderBlock:b,renderField:v,renderInlineBlock:y,renderInput:x,renderItem:w,renderPreview:C,resolveUploader:T,schemaType:j,value:A}=e,{push:M}=Vt(),{t:S}=L(),[N,D]=l.useState(null),[_,F]=l.useState(!1),[R,$]=l.useState([]),[O,V]=l.useState(!1),[H,J]=l.useState(null),[q,oe]=l.useState(null),[ie,te]=l.useState(!1),X=l.useRef(null),le=l.useRef({el:null,height:0}),me=l.useCallback(ve=>{var dt;ve?(le.current.el=ve,le.current.height=ve.offsetHeight):(le.current.height=((dt=le.current.el)==null?void 0:dt.offsetHeight)||0,le.current.el=null)},[]),G=l.useCallback(()=>{const ve=R.filter(Ln=>T(j,Ln)),dt=R.length-ve.length;return R.length>0&&(dt>0||!a)?"critical":!(A!=null&&A._upload)&&!f&&R.length>0?"primary":f||A!=null&&A._upload&&A!=null&&A.asset?"transparent":"default"},[a,R,f,T,j,A==null?void 0:A._upload,A==null?void 0:A.asset]),ce=l.useCallback(()=>ct(j,"options.hotspot")===!0,[j]),de=l.useCallback(()=>typeof h.slice(-1)[0]!="string",[h]),pe=l.useCallback(()=>{A!=null&&A._upload&&m(we(["_upload"]))},[m,A==null?void 0:A._upload]),W=l.useCallback(()=>{X.current&&(X.current.unsubscribe(),pe())},[pe]),Y=l.useCallback((ve,dt,Ln={})=>{const{label:Bn,title:ds,description:Pc,creditLine:Nc,source:Oc}=Ln,us={metadata:ct(j,"options.metadata"),storeOriginalFilename:ct(j,"options.storeOriginalFilename"),label:Bn,title:ds,description:Pc,creditLine:Nc,source:Oc};W(),F(!0),m(Tn({_type:j.name})),X.current=ve.upload(n,dt,j,us).subscribe({next:ms=>{ms.patches&&m(ms.patches)},error:ms=>{console.error(ms),M({status:"error",description:S("inputs.image.upload-error.description"),title:S("inputs.image.upload-error.title")}),pe()},complete:()=>{m([we(["hotspot"]),we(["crop"])]),F(!1)}})},[W,pe,n,m,M,j,S]),z=l.useCallback(ve=>{const dt=ve.map(Ln=>({file:Ln,uploader:T(j,Ln)})).find(Ln=>Ln.uploader);dt&&Y(dt.uploader,dt.file),te(!1)},[T,j,Y]),ne=l.useCallback(()=>{m([we(["asset"]),we(["crop"]),we(["hotspot"])]),le.current.el=null,le.current.height=0},[m]),ee=l.useCallback(()=>{const ve=Object.keys(A||{}),dt=ve.filter(Bn=>!["_type","_key","_upload","asset","crop","hotspot"].includes(Bn)).length===0,Ln=["asset"].concat(ve.filter(Bn=>["crop","hotspot","_upload"].includes(Bn))).map(Bn=>we([Bn]));m(dt&&!de()?we():Ln),le.current.el=null,le.current.height=0},[m,A,de]),fe=l.useCallback(()=>{p(["hotspot"])},[p]),Oe=l.useCallback(()=>{p([]),H==null||H.focus()},[H,p]),Se=l.useCallback(ve=>{IC({assetFromSource:ve,onChange:m,type:j,resolveUploader:T,uploadWith:Y,isImage:!0}),D(null)},[m,T,j,Y]),De=l.useCallback(ve=>{var dt;ve.currentTarget===ve.target&&ve.currentTarget===((dt=r.ref)==null?void 0:dt.current)&&r.onFocus(ve)},[r]),Fe=l.useCallback(ve=>{$(ve.filter(dt=>dt.kind!=="string"))},[]),Qe=l.useCallback(()=>{$([])},[]),ht=l.useCallback(()=>{W()},[W]),Q=l.useCallback(()=>{V(!1),pe()},[pe]),ue=l.useCallback(()=>{V(!0)},[]),se=l.useCallback(ve=>{a&&!f?z(ve):R.length>0&&Qe()},[a,Qe,R.length,f,z]),he=l.useCallback(ve=>{D(ve)},[]),_e=l.useCallback(()=>{D(null),q==null||q.focus()},[q]),Ne=l.useCallback(()=>i.jsx(R3,{directUploads:a,handleOpenDialog:fe,hoveringFiles:R,imageUrlBuilder:d,initialHeight:le.current.height,readOnly:f,resolveUploader:T,schemaType:j,value:A}),[a,fe,R,d,f,T,j,A]),$e=l.useCallback(()=>i.jsx(EL,{assetSources:t,directUploads:a,handleOpenDialog:fe,handleRemoveButtonClick:ee,handleSelectFiles:se,handleSelectImageFromAssetSource:he,imageUrlBuilder:d,isImageToolEnabled:ce(),isMenuOpen:ie,observeAsset:u,readOnly:f,schemaType:j,setHotspotButtonElement:J,setMenuButtonElement:oe,setMenuOpen:te,value:A}),[t,a,fe,ee,se,he,d,ce,ie,u,f,j,A]),Ce=l.useCallback(()=>i.jsx(RL,{assetSources:t,readOnly:f,directUploads:a,id:s,setMenuOpen:te,handleSelectImageFromAssetSource:he}),[t,a,he,s,f]),Le=l.useCallback(()=>i.jsx(L3,{directUploads:a,handleSelectFiles:se,hoveringFiles:R,readOnly:f,renderBrowser:Ce,resolveUploader:T,schemaType:j}),[a,se,R,f,Ce,T,j]),Me=l.useCallback(ve=>i.jsx(FC,{uploadState:ve,onCancel:_?ht:void 0,onStale:ue,height:le.current.height}),[ht,ue,_]),ke=l.useCallback(()=>A&&typeof A.asset<"u"&&!(A!=null&&A._upload)&&!Ur(A)?()=>i.jsx(B3,{onClearValue:ne}):ve=>i.jsx(kL,{ref:me,elementProps:r,handleClearUploadState:Q,handleFilesOut:Qe,handleFilesOver:Fe,handleFileTargetFocus:De,handleSelectFiles:se,hoveringFiles:R,inputProps:ve,isStale:O,readOnly:f,renderAssetMenu:$e,renderPreview:Ne,renderUploadPlaceholder:Le,renderUploadState:Me,tone:G(),value:A}),[r,G,ne,Q,De,Qe,Fe,se,R,O,f,$e,Ne,Le,Me,me,A]),Mt=l.useCallback(ve=>i.jsx(_3,{isImageToolEnabled:ce(),handleCloseDialog:Oe,imageInputProps:e,inputProps:ve}),[Oe,ce,e]),ga=l.useCallback(()=>i.jsx(NL,{handleAssetSourceClosed:_e,handleSelectAssetFromSource:Se,observeAsset:u,schemaType:j,selectedAssetSource:N,value:A}),[_e,Se,u,j,N,A]),bn=l.useMemo(()=>c.find(ve=>ve.kind==="field"&&ve.name==="hotspot"),[c]);return i.jsxs(B,{space:5,"data-testid":"image-input",children:[c.map(ve=>ve.kind==="field"&&(ve.name==="crop"||ve.name==="hotspot")?null:ve.kind==="field"?i.jsx(Zo,{member:ve,renderAnnotation:g,renderBlock:b,renderInlineBlock:y,renderInput:ve.name==="asset"?ke():x,renderField:ve.name==="asset"?z3:v,renderItem:w,renderPreview:C},ve.key):ve.kind==="fieldSet"?i.jsx(Fm,{member:ve,renderAnnotation:g,renderBlock:b,renderField:v,renderInlineBlock:y,renderInput:x,renderItem:w,renderPreview:C},ve.key):ve.kind==="error"?i.jsx(ec,{member:ve},ve.key):i.jsx(i.Fragment,{children:S("inputs.image.error.unknown-member-kind",{kind:ve.kind})})),bn&&o[0]==="hotspot"&&i.jsx(Rm,{...e,absolutePath:bn.field.path,renderInput:Mt}),N&&ga()]})}const U3=l.memo(V3);function z3({children:e}){return e}function H3(e){var t;const n=(t=e.schemaType.options)==null?void 0:t.sources,{image:a}=Na().__internal,r=gn(),o=Xe(qe),s=a.directUploads,d=l.useCallback((h,f)=>s?Om(h,f):null,[s]),c=l.useMemo(()=>n||a.assetSources,[a,n]),u=l.useMemo(()=>jl(o),[o]),m=l.useCallback(h=>gx(r,h),[r]),{t:p}=L();return i.jsx(U3,{...e,t:p,client:o,assetSources:c,directUploads:s,imageUrlBuilder:u,observeAsset:m,resolveUploader:d})}const Xf={document:Mf,object:Mf,array:RD,boolean:BD,number:wC,text:P$,email:d$,datetime:c$,date:r$,url:N$,image:H3,file:wL,string:TC,slug:I$,crossDatasetReference:Q$},K3=Et({version:1,name:"Portable Text Editor Expanded",description:"The portable text editor was expanded"}),W3=Et({version:1,name:"Portable Text Editor Collapsed",description:"The portable text editor was collapsed"}),G3=Et({version:1,name:"Portable Text Editor Invalid Value Ignored",description:"The portable text got an invalid value from the form and pressed button to ignore it"}),q3=Et({version:1,name:"Portable Text Editor Invalid Value Resolved",description:"The portable text got an invalid value from the form and pressed button to resolve it."}),Y3=k.div`
  position: relative;
`,zC=k.div`
  z-index: 13;
  opacity: 0;
  transition: opacity 300ms linear;
`,HC=k(U)`
  border: 1px solid var(--card-border-color);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 12;
  transition: opacity 150ms ease-in-out;
  opacity: 0;
  box-sizing: border-box;
`,X3=k(P)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  &:hover,
  &:focus {
    & ${HC} {
      opacity: 0.9;
    }

    & ${zC} {
      opacity: 1;
    }
  }
`,J3=()=>typeof window<"u"&&"ontouchstart"in window||typeof navigator<"u"&&navigator.maxTouchPoints>0;function Z3(e){const{children:t,message:n,onActivate:a,isOverlayActive:r}=e,[o,s]=l.useState(!1),{t:d}=L(),c=l.useCallback(()=>{a&&a()},[a]),u=l.useCallback(g=>{r&&g.code==="Space"&&a&&(g.preventDefault(),a())},[r,a]),m=l.useCallback(()=>{r&&a&&a()},[r,a]),p=l.useCallback(()=>{s(!0)},[]),h=l.useCallback(()=>{s(!1)},[]),f=l.useMemo(()=>{const g=J3();let b;g?b="tap":o?b="click-focused":b="click";const v=n||d("inputs.portable-text.activate-on-focus-message",{context:b});return i.jsx(E,{weight:"medium",children:v})},[o,n,d]);return i.jsxs(Y3,{onBlur:h,onClick:c,onFocus:p,onKeyDown:u,onDragEnter:m,children:[r&&i.jsxs(X3,{"data-testid":"activate-overlay",tabIndex:0,align:"center",justify:"center",children:[i.jsx(HC,{radius:2}),i.jsx(zC,{children:f})]}),t]})}const Q3=k.div(e=>{const{color:t,input:n,radius:a}=Re(e.theme),r={color:t.input.default.enabled.border,width:n.border.width};return ae`
    --input-box-shadow: ${Ym(r)};

    position: relative;

    & [data-wrapper] {
      overflow: hidden;
      overflow: clip;
      position: relative;
      z-index: 1;
      padding: ${n.border.width}px;
    }

    & [data-border] {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      box-shadow: var(--input-box-shadow);
      z-index: 2;
      border-radius: ${a[2]}px;
      pointer-events: none;
    }

    &:not([data-read-only])[data-focused] [data-border] {
      --input-box-shadow: ${rc({base:t,border:r,focusRing:n.text.focusRing})};
    }
  `}),eB=k(wi)`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;

  & > div {
    height: 100%;
  }
`,no=[1,2,3,4,5,6,7,8,9],Jf=["●","○","■"],Zf=["number","lower-alpha","lower-roman"],tB={em:"em","strike-through":"s",underline:"u",strong:"strong",code:"code"},nB={h1:{paddingTop:5,paddingBottom:4},h2:{paddingTop:4,paddingBottom:4},h3:{paddingTop:4,paddingBottom:3},h4:{paddingTop:4,paddingBottom:3},h5:{paddingTop:4,paddingBottom:3},h6:{paddingTop:4,paddingBottom:2},normal:{paddingTop:2,paddingBottom:3},blockquote:{paddingTop:2,paddingBottom:3}},aB=k.span(({theme:e})=>{const t=e.sanity.color.dark;return ae`
    /* Make sure the annotation styling is visible */
    &[data-mark='code'] {
      color: inherit;
      mix-blend-mode: ${t?"screen":"multiply"};
    }
  `});function iB(e){const{value:t,focused:n,selected:a,children:r,schemaType:o}=e,s=tB[t],d=o.component,c=l.useCallback(u=>i.jsx(aB,{as:s,"data-mark":t,children:u.children}),[s,t]);return l.useMemo(()=>{const u={focused:n,renderDefault:c,schemaType:o,selected:a,title:o.title,value:t};return d?i.jsx(d,{...u,children:r}):i.jsx(c,{...u,children:r})},[d,c,r,n,o,a,t])}function Fi(e){return`list-level-${e}`}const KC=k.div(({theme:e})=>{const{radius:t,space:n,color:a}=e.sanity,r=Hy(a.spot.yellow,.2);return ae`
    position: absolute;
    border-radius: ${t[3]}px;
    top: -${n[2]}px;
    bottom: -${n[1]+n[1]}px;
    left: ${n[4]+n[1]}px;
    right: ${n[1]}px;
    background-color: ${r};
    pointer-events: none;
  `}),WC=k(Kt)(()=>ae`
    width: 1px;
    height: 100%;

    & > div {
      height: 100%;
    }
  `);function rB(e){const{allowedDecorators:t,block:n,onChange:a}=e;let r;return o=>{r=Array.isArray(o)?o:[o],r=r.map(d=>kv(d,{allowedDecorators:t}));const s=[di(r,"after",[{_key:n._key}])];return a(je.from(s))}}function oB(e){const{allowedDecorators:t,block:n,onChange:a}=e;return r=>{const o=[be(kv(r,{allowedDecorators:t}),[{_key:n._key}])];return a(je.from(o))}}function sB(e){const{block:t,onChange:n}=e;return()=>{const a=[we([{_key:t._key}])];return n(je.from(a))}}const lB=k.div`
  display: flex;
  pointer-events: all;
`;function GC(e){const t=Bt(),{block:n,onChange:a,renderBlockActions:r}=e,o=l.useMemo(()=>t.schemaTypes.decorators.map(d=>d.value),[t]),s=l.useMemo(()=>{if(r){const d={block:n,value:ge.getValue(t),set:oB({allowedDecorators:o,block:n,onChange:a}),unset:sB({block:n,onChange:a}),insert:rB({allowedDecorators:o,block:n,onChange:a})};return r(d)}},[r,n,t,a,o]);return s?i.jsx(lB,{contentEditable:!1,children:s}):null}function cB(e){const{$level:t}=e,{color:n,font:a,radius:r,space:o}=Re(e.theme),s=Zf[(t-1)%Zf.length],d=Jf[(t-1)%Jf.length];return ae`
    --marker-bg-color: transparent;

    mix-blend-mode: ${n._dark?"screen":"multiply"};
    position: relative;

    & > [data-ui='TextBlock_inner'] {
      position: relative;
      flex: 1;
    }

    & > div:before {
      content: '';
      position: absolute;
      top: -${o[1]}px;
      bottom: -${o[1]}px;
      left: -${o[1]}px;
      right: -${o[1]}px;
      border-radius: ${r[2]}px;
      background-color: var(--marker-bg-color);
      // This is to make sure the marker is always behind the text
      z-index: -1;
      pointer-events: none;
    }

    &[data-markers] {
      --marker-bg-color: ${n._dark?Ge.purple[950].hex:Ge.purple[50].hex};
    }

    &[data-warning] {
      --card-border-color: ${n.button.ghost.caution.enabled.border};
      --marker-bg-color: ${n.button.ghost.caution.hovered.bg};
    }

    &[data-error] {
      --card-border-color: ${n.button.ghost.critical.enabled.border};
      --marker-bg-color: ${n.button.ghost.critical.hovered.bg};
    }

    & [data-list-prefix] {
      position: absolute;
      margin-left: -4.5rem;
      width: 3.75rem;
      text-align: right;
      box-sizing: border-box;
    }

    &[data-list-item='number'] [data-list-prefix] {
      font-variant-numeric: tabular-nums;

      & > span:before {
        content: counter(${Fi(t)}) '.';
        content: counter(${Fi(t)}, ${s}) '.';
      }
    }

    &[data-list-item='bullet'] [data-list-prefix] {
      & > span {
        position: relative;
        top: -0.1875em;

        &:before {
          content: '${d}';
          font-size: 0.46666em;
        }
      }
    }

    & [data-text] {
      overflow-wrap: anywhere;
      text-transform: none;
      white-space: pre-wrap;
      font-family: ${a.text.family};
      flex: 1;

      *::selection {
        background-color: ${i0(n.focusRing,.3)};
      }
    }
  `}const dB=k.div(cB),uB=k(I)`
  position: relative;
  display: flex;
`,mB=k.div`
  user-select: none;
  white-space: nowrap;
`,pB=k(I)`
  line-height: 0;
  width: 25px;
  position: relative;
`,hB=k(P)(({theme:e})=>{const{fonts:t,space:n}=e.sanity,a=t.text.sizes[1],r=t.text.sizes[2],o=a.lineHeight-a.ascenderHeight-a.descenderHeight,s=r.lineHeight-r.ascenderHeight-r.descenderHeight,d=0-(o+n[2]+n[2]-s)/2;return ae`
    user-select: none;
    position: absolute;
    right: 0;
    top: ${d}px;
  `}),fB=k(I)`
  max-width: 250px;
`,gB=k(P)`
  position: relative;
  padding-left: ${({$level:e})=>e?e*32:0}px;
`,bB=k.div(({theme:e,$hasChanges:t})=>{const{space:n}=e.sanity;return ae`
      position: absolute;
      width: ${n[2]}px;
      right: 0;
      top: 0;
      bottom: 0;
      padding-left: ${n[1]}px;
      padding-right: ${n[2]}px;
      user-select: none;

      ${!t&&ae`
        display: none;
      `}
    `}),Ja=k.div`
  display: block;
`,rp=({children:e,...t})=>i.jsx(E,{"data-testid":"text-style--normal",...t,children:i.jsx(Ja,{children:e})}),qC=({children:e,...t})=>i.jsx(An,{as:"h1","data-testid":"text-style--h1",size:5,...t,children:i.jsx(Ja,{children:e})}),YC=({children:e,...t})=>i.jsx(An,{as:"h2","data-testid":"text-style--h2",size:4,...t,children:i.jsx(Ja,{children:e})}),XC=({children:e,...t})=>i.jsx(An,{as:"h3","data-testid":"text-style--h3",size:3,...t,children:i.jsx(Ja,{children:e})}),JC=({children:e,...t})=>i.jsx(An,{as:"h4","data-testid":"text-style--h4",size:2,...t,children:i.jsx(Ja,{children:e})}),ZC=({children:e,...t})=>i.jsx(An,{as:"h5","data-testid":"text-style--h5",size:1,...t,children:i.jsx(Ja,{children:e})}),QC=({children:e,...t})=>i.jsx(An,{as:"h6","data-testid":"text-style--h6",size:0,...t,children:i.jsx(Ja,{children:e})}),yB=k.blockquote`
  position: relative;
  display: block;
  margin: 0;
  padding-left: ${({theme:e})=>e.sanity.space[3]}px;

  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: -4px;
    bottom: -4px;
    width: 3px;
    background: var(--card-border-color);
  }
`,ew=({children:e,...t})=>i.jsx(yB,{"data-testid":"text-style--blockquote",...t,children:i.jsx(E,{as:"p",children:e})}),td={normal:rp,h1:qC,h2:YC,h3:XC,h4:JC,h5:ZC,h6:QC,blockquote:ew};function vB(e){const{children:t,floatingBoundary:n,focused:a,isFullscreen:r,onItemClose:o,onItemOpen:s,onPathFocus:d,path:c,readOnly:u,referenceBoundary:m,renderBlock:p,renderAnnotation:h,renderBlockActions:f,renderCustomMarkers:g,renderField:b,renderInlineBlock:v,renderInput:y,renderItem:x,renderPreview:w,schemaType:C,selected:T,spellCheck:j,value:A}=e,{Markers:M}=Na().__internal.components,[S,N]=l.useState(!1),D=Yl(c),_=tc(Nn(c)),F=Bt(),{onChange:R}=Zn(),$=Wr(c,!0),O=l.useMemo(()=>$.filter(fe=>nt(fe.path,c)||fe.path.slice(-3)[1]==="children"&&fe.path.length-c.length===2),[c,$]),V=l.useCallback(()=>N(!0),[]),H=l.useCallback(()=>N(!1),[]),{validation:J,hasError:q,hasWarning:oe,hasInfo:ie}=ql(_==null?void 0:_.node),te=!!g&&D.length>0,X=q||oe||te||ie,le=l.useCallback(()=>{_&&s(_.node.path)},[s,_]),me=l.useCallback(()=>{const fe={path:c.slice(-1),offset:0},Oe={focus:fe,anchor:fe};ge.delete(F,Oe,{mode:"blocks"}),ge.focus(F)},[c,F]),G=l.useMemo(()=>i.jsxs(gB,{align:"flex-start",$level:A==null?void 0:A.level,children:[A.listItem&&i.jsx(mB,{contentEditable:!1,children:i.jsx(E,{"data-list-prefix":"",children:i.jsx(Ja,{})})}),i.jsx("div",{"data-text":"",style:void 0,children:t})]}),[A.listItem,A.level,t]),ce=l.useMemo(()=>r&&!f?{paddingX:5}:r&&f?{paddingLeft:5,paddingRight:2}:f?{paddingLeft:3,paddingRight:2}:{paddingX:3},[r,f]),de=l.useMemo(()=>A.listItem?{paddingY:2}:nB[A.style||"normal"]||{paddingY:2},[A]),pe=!!(_!=null&&_.member.open),W=F.schemaTypes.portableText,Y=l.useMemo(()=>{var fe;return{__unstable_floatingBoundary:n,__unstable_referenceBoundary:m,__unstable_referenceElement:((fe=_==null?void 0:_.elementRef)==null?void 0:fe.current)||null,children:G,focused:a,markers:D,onClose:o,onOpen:le,onPathFocus:d,onRemove:me,open:pe,parentSchemaType:W,path:(_==null?void 0:_.node.path)||lt,presence:O,readOnly:!!u,renderAnnotation:h,renderBlock:p,renderDefault:tw,renderField:b,renderInput:y,renderInlineBlock:v,renderItem:x,renderPreview:w,schemaType:C,selected:T,validation:J,value:A}},[n,a,pe,D,_==null?void 0:_.elementRef,_==null?void 0:_.node.path,o,le,d,me,W,u,m,h,p,b,v,y,x,w,C,T,G,O,J,A]),z=l.useMemo(()=>X&&i.jsx(fB,{children:i.jsx(M,{markers:D,renderCustomMarkers:g,validation:J})})||null,[M,D,g,X,J]),ne=f&&!u,ee=r&&_;return l.useMemo(()=>i.jsx(I,{...de,"data-testid":"text-block","data-text-block":"",ref:_==null?void 0:_.elementRef,style:void 0,children:i.jsx(uB,{"data-testid":"text-block__wrapper",children:i.jsxs(P,{"data-text-block-inner":"",flex:1,...ce,children:[i.jsx(I,{flex:1,children:i.jsx(Ie,{content:z,disabled:!X,placement:"top",portal:"editor",children:i.jsx(dB,{$level:A.level||1,"data-error":q?"":void 0,"data-list-item":A.listItem,"data-markers":te?"":void 0,"data-read-only":u,"data-testid":"text-block__text","data-warning":oe?"":void 0,spellCheck:j,children:p&&p(Y)})})}),ne&&i.jsx(pB,{contentEditable:!1,marginRight:3,children:i.jsx(hB,{children:a&&i.jsx(GC,{block:A,onChange:R,renderBlockActions:f})})}),ee&&i.jsx(bB,{$hasChanges:_.member.item.changed,contentEditable:!1,onMouseEnter:V,onMouseLeave:H,children:i.jsx(WC,{hasFocus:a,isChanged:_.member.item.changed,path:_.member.item.path,withHoverEffect:!1})}),S&&i.jsx(KC,{})]})})}),[ne,ee,Y,a,V,H,q,te,oe,ce,_,R,de,u,p,f,S,j,z,X,A])}const tw=e=>i.jsx(i.Fragment,{children:e.children}),xB=k(U)`
  &[data-fullscreen='true'] {
    height: 100%;
  }

  &[data-fullscreen='false'] {
    min-height: 5em;
    resize: vertical;
    overflow: auto;
    height: 19em;
  }

  &:not([hidden]) {
    display: flex;
  }

  flex-direction: column;
`,CB=k(U)`
  z-index: 10;
  line-height: 0;
`,wB=k(U)`
  position: relative;
  overflow: hidden;
  overflow: clip;

  & > [data-portal] {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;

    & > * {
      pointer-events: initial;
    }
  }

  &::selection,
  *::selection {
    background-color: transparent;
  }
`,TB=k(u_)`
  position: relative;
  overflow: auto;
  height: 100%;
  display: flex;
  flex-direction: column;

  & > * {
    flex: 1;
    min-height: auto;
  }
`,jB=k(U)`
  height: 100%;
  width: 100%;
  counter-reset: ${no.map(e=>Fi(e)).join(" ")};
  overflow: hidden;
  overflow: clip;

  & > div {
    height: 100%;
  }

  & .pt-editable {
    display: block;
    width: 100%;
    height: 100%;

    ${no.map(e=>ae`
        & > .pt-list-item-number[class~='pt-list-item-level-${e}'] {
          counter-increment: ${Fi(e)};
        }
      `)}

    & > .pt-list-item-bullet + .pt-list-item-number,
    & > .pt-list-item-number + .pt-list-item-bullet {
      margin-top: ${({theme:e})=>e.sanity.space[3]}px;
      counter-reset: ${no.map(e=>Fi(e)).join(" ")};
    }

    & > :not(.pt-list-item) + .pt-list-item {
      margin-top: ${({theme:e})=>e.sanity.space[2]}px;
    }

    /* Reset the list count if the element is not a numbered list item */
    & > :not(.pt-list-item-number) {
      counter-reset: ${no.map(e=>Fi(e)).join(" ")};
    }

    ${no.slice(1).map(e=>ae`
        & > .pt-list-item-level-${e} + .pt-list-item-level-${e-1} {
          counter-reset: ${Fi(e)};
        }
      `)}

    & > .pt-list-item + :not(.pt-list-item) {
      margin-top: ${({theme:e})=>e.sanity.space[3]}px;
    }

    & > :first-child {
      padding-top: ${({$isFullscreen:e,theme:t})=>t.sanity.space[e?5:3]}px;
    }

    padding-bottom: ${({$isFullscreen:e,theme:t})=>t.sanity.space[e?9:5]}px;

    & > .pt-block {
      margin: 0 auto;
      max-width: ${e=>Re(e.theme).container[1]}px;
    }

    /* & > .pt-block {
      & .pt-inline-object {
      }
    } */

    & .pt-drop-indicator {
      pointer-events: none;
      border: 1px solid var(--card-focus-ring-color) !important;
      height: 0px !important;
      border-radius: ${e=>Re(e.theme).radius[2]}px;
      margin-top: -3px;
      left: calc(
        ${({$isFullscreen:e,theme:t})=>e?Te(t.sanity.space[5]):Te(t.sanity.space[3])} - 1px
      );
      right: calc(
        ${({$isFullscreen:e,theme:t})=>e?Te(t.sanity.space[5]):Te(t.sanity.space[3])} - 1px
      );
      width: calc(
        100% -
          ${({$isFullscreen:e,theme:t})=>e?Te(t.sanity.space[5]*2):Te(t.sanity.space[3]*2)} + 2px
      ) !important;
    }
  }
`;function kB(e){return l.useMemo(()=>(t,n)=>{if(ge.getSelection(t)){const a=n.startContainer.parentElement;if(!a)return;kr(a,{scrollMode:"if-needed",boundary:e,block:"nearest",inline:"nearest"})}},[e])}function AB(){const e=Bt();return l.useMemo(()=>{var t;const n=(t=e.schemaTypes.block.options)==null?void 0:t.spellCheck,a=typeof navigator>"u"?!1:/Chrome\/96/.test(navigator.userAgent);return n===void 0&&a===!0?!1:n},[e])}const Qf=e=>i.jsx(i.Fragment,{children:e.children}),SB=e=>{const{block:t,children:n,schemaType:a,selected:r,focused:o,level:s,value:d}=e,{title:c,component:u}=a;return l.useMemo(()=>{const m={block:t,focused:o,level:s,renderDefault:Qf,schemaType:a,selected:r,title:c,value:d};return u?i.jsx(u,{...m,children:n}):i.jsx(Qf,{...m,children:n})},[u,t,n,o,s,a,r,c,d])},_B=e=>{const{block:t,focused:n,children:a,selected:r,schemaType:o}=e,s=l.useMemo(()=>(t.style&&td[t.style]?td[t.style]:td[0])||rp,[t.style]),d=l.useCallback(c=>i.jsx(s,{children:i.jsx(Ja,{"data-testid":`text-style--${t.style}`,children:c.children})}),[s,t.style]);return l.useMemo(()=>{const c=o.component,{title:u,value:m}=o,p={block:t,focused:n,renderDefault:d,schemaType:o,selected:r,title:u,value:m};return c?i.jsx(c,{...p,children:a}):i.jsx(d,{...p,children:a})},[d,t,a,n,o,r])},EB=k.div`
  border-right: 1px solid var(--card-border-color);
  height: auto;

  &[data-hidden] {
    opacity: 0;
  }
`;function nw(e){const{hidden:t,...n}=e;return i.jsx(EB,{"data-ui":"CollapseMenuDivider","data-hidden":t?"":void 0,...n})}const IB={portal:!0,constrainSize:!0},op=l.forwardRef(function(e,t){const{disableRestoreFocusOnClose:n,menuButton:a,menuButtonProps:r,menuOptions:o,onMenuClose:s}=e;return i.jsx(ze,{__unstable_disableRestoreFocusOnClose:n,id:"menu-button",ref:t,onClose:s,popover:IB,...r,button:a,menu:i.jsx(Be,{children:o.map((d,c)=>{const{collapsedProps:u={},expandedProps:m={},tooltipProps:p={},tooltipText:h,dividerBefore:f,fontSize:g,padding:b,text:v,icon:y,selected:x,...w}=d.props;return i.jsxs(l.Fragment,{children:[f&&c!==0&&i.jsx(en,{}),i.jsx(ye,{text:v,icon:y,pressed:x,...w})]},d.key)})})})});function aw(e){const{onIntersectionChange:t,children:n,options:a,...r}=e,[o,s]=l.useState(null);return l.useEffect(()=>{const d=o==null?void 0:o.closest('[data-ui="Flex"]');if(!d)return;const c=new IntersectionObserver(t,a);return c.observe(d),()=>{c.unobserve(d),c.disconnect()}},[o,t,a]),i.jsxs(P,{...r,children:[n,i.jsx("span",{hidden:!0,ref:s})]})}const eg=3,MB=ae`
  list-style: none;
  display: flex;
  white-space: nowrap;

  &[data-hidden='true'] {
    opacity: 0;
    visibility: hidden;
  }
`,PB=k(P)`
  padding: ${eg}px;
  margin: -${eg}px;
  box-sizing: border-box;
`,NB=k(P)`
  border-radius: inherit;
  position: relative;
`,iw=k(P)`
  width: max-content;
  &[data-hidden='true'] {
    visibility: hidden;
    position: relative;
    margin-top: -1px;
    height: 1px;
  }
`,OB=k(aw)`
  ${MB}
`;function FB(e){return!!e}const rw=l.forwardRef(function(e,t){const{children:n,collapsed:a,disableRestoreFocusOnClose:r,onMenuClose:o,menuButtonProps:s,...d}=e,c=l.useMemo(()=>l.Children.toArray(n).filter(FB),[n]),u=l.useMemo(()=>(s==null?void 0:s.button)||i.jsx(wt,{}),[s]);return a?i.jsx(op,{ref:t,disableRestoreFocusOnClose:r,menuButton:u,menuButtonProps:s,menuOptions:c,onMenuClose:o}):i.jsx(RB,{...d,ref:t,disableRestoreFocusOnClose:r,menuButtonProps:s,menuOptions:c,onMenuClose:o})}),RB=l.forwardRef(function(e,t){const{collapseText:n=!0,disableRestoreFocusOnClose:a,gap:r,menuOptions:o,menuButtonProps:s,onMenuClose:d,...c}=e,[u,m]=l.useState(null),[p,h]=l.useState({}),[f,g]=l.useState({}),b=l.useMemo(()=>({root:u,threshold:.99,rootMargin:"2px"}),[u]),v=l.useMemo(()=>o.map(S=>S.key),[o]),y=l.useMemo(()=>[...Ys(v,Object.keys(p)),...Ys(v,Object.keys(f))],[v,p,f]),x=l.useMemo(()=>o.filter(S=>{const N=p[S.key];return N&&!N.intersects}),[p,o]),w=l.useCallback((S,N)=>{h(D=>{const _=N.key;if(_===null)throw new Error("Expected element to have a non-null key");const F={intersects:S.isIntersecting,element:N},R=D[_];return!R||R.intersects!==F.intersects?{...D,[_]:F}:D})},[]),C=l.useCallback((S,N)=>{g(D=>{const _=N.key;if(_===null)throw new Error("Expected child element to have a non-null key");const F=D[_],R={intersects:S.isIntersecting,element:N};return(F==null?void 0:F.intersects)===R.intersects?D:{...D,[_]:R}})},[]),T=l.useMemo(()=>o.map(S=>{const{collapsedProps:N}=S.props,D=N,_=n?void 0:S.props.text;return l.cloneElement(S,{...D,text:_})}),[o,n]),j=l.useMemo(()=>o.filter(S=>{const N=f[S.key];return(N==null?void 0:N.intersects)===!1}),[o,f]),A=x.length>0?T.filter(S=>{const N=f[S.key];return(N==null?void 0:N.intersects)===!0}):o,M=l.useMemo(()=>(s==null?void 0:s.button)||i.jsx(wt,{}),[s]);return i.jsxs(PB,{align:"center","data-ui":"CollapseMenu",overflow:"hidden",sizing:"border",ref:t,...c,children:[i.jsxs(NB,{direction:"column",flex:1,justify:"center",ref:m,children:[i.jsx(iw,{gap:r,children:y.length===0&&A.map((S,N)=>{const{dividerBefore:D,tooltipText:_="",tooltipProps:F={}}=S.props,R=!S.key||!(S.key in p)||j.includes(S);return i.jsxs(l.Fragment,{children:[D&&N!==0&&i.jsx(nw,{hidden:R}),i.jsx(Ie,{portal:!0,disabled:!_,content:_,...F,children:i.jsx(P,{children:l.cloneElement(S,{disabled:S.props.disabled||R,"aria-hidden":R})})})]},S.key)})}),i.jsx(tg,{gap:r,elements:o,intersectionOptions:b,onIntersectionChange:w}),i.jsx(tg,{gap:r,elements:T,intersectionOptions:b,onIntersectionChange:C})]}),j.length>0&&i.jsx(P,{marginLeft:r,children:i.jsx(op,{disableRestoreFocusOnClose:a,menuButton:M,menuButtonProps:s,menuOptions:j,onMenuClose:d})})]})}),tg=l.memo(function(e){const{elements:t,gap:n,intersectionOptions:a,onIntersectionChange:r}=e;return i.jsx(iw,{"data-hidden":!0,"aria-hidden":"true",gap:n,overflow:"hidden",children:t.map((o,s)=>{const{dividerBefore:d}=o.props;return i.jsxs(l.Fragment,{children:[d&&s!==0&&i.jsx(nw,{hidden:!0}),i.jsx(OB,{options:a,onIntersectionChange:c=>r(c[0],o),children:i.jsx(P,{children:l.cloneElement(o,{disabled:!0,"aria-hidden":!0})})})]},o.key)})})}),ow=l.forwardRef(function(e,t){const{collapsedProps:n={},expandedProps:a={},tooltipProps:r={},tooltipText:o,dividerBefore:s,...d}=e;return i.jsx(Z,{"data-ui":"CollapseMenuButton",...d,ref:t})}),DB=k.div`
  width: 1em;
  height: 1em;
  border-radius: inherit;
  background-origin: content-box;
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  transform: scale(0.7);
`;function $B(e){const{icon:t,active:n}=e,a=l.useMemo(()=>({backgroundImage:`url(${t})`,filter:n?"invert(100%)":"invert(0%)"}),[n,t]);return i.jsx(DB,{style:a})}function LB(e,t,n,a){return e.schemaTypes.decorators.map(r=>{const o=Object.keys(n.marks||{}).find(d=>{var c;return((c=n.marks)==null?void 0:c[d])===r.value});let s=[];return o&&(s=[o]),{type:"format",disabled:t,icon:r==null?void 0:r.icon,key:r.value,handle:()=>{ge.toggleMark(e,r.value),ge.focus(e)},hotkeys:s,title:r.i18nTitleKey&&a?a(r.i18nTitleKey):r.title}})}function BB(e,t,n){return e.schemaTypes.lists.map(a=>({type:"listStyle",key:a.value,disabled:t,icon:a==null?void 0:a.icon,handle:()=>{ge.toggleList(e,a.value)},title:a.i18nTitleKey&&n?n(a.i18nTitleKey):a.title}))}function VB(e){return ct(e,"icon")||ct(e,"type.icon")||ct(e,"type.to.icon")||ct(e,"type.to[0].icon")}function UB(e,t,n,a){const r=e.schemaTypes,o=ge.focusChild(e),s=o&&o.text;return r.annotations.map(d=>({type:"annotation",disabled:!s||t,icon:VB(d),key:d.name,handle:c=>{c?(ge.removeAnnotation(e,d),ge.focus(e)):n(d)},title:d.i18nTitleKey&&a?a(d.i18nTitleKey):d.title||xl(d.name)}))}function zB(e,t,n,a,r){return[{name:"format",actions:LB(e,t,a,r)},{name:"list",actions:BB(e,t,r)},{name:"annotation",actions:UB(e,t,n,r)}]}function HB(e){return e.styles.map(t=>({key:`style-${t.value}`,style:t.value,styleComponent:t&&t.component,title:t.title,i18nTitleKey:t.i18nTitleKey}))}function ng(e,t){const n=ct(e,"to[0].icon");return e.icon||e.type&&e.type.icon||n||t}function KB(e,t,n,a){const r=e.blockObjects.map((s,d)=>({handle:()=>n(s),icon:ng(s,IS),inline:!1,key:`block-${d}`,type:s})),o=e.inlineObjects.map((s,d)=>({handle:()=>a(s),icon:ng(s,MS),inline:!0,key:`inline-${d}`,type:s}));return r.concat(o).filter(s=>{var d;return!((d=s.type)!=null&&d.hidden)})}const WB={link:ma},GB={strong:Fk,em:Rk,"strike-through":Dk,underline:$k,code:Lk},qB={number:Bk,bullet:Ds};function YB(e,t){return e.icon?typeof e.icon=="string"?i.jsx($B,{active:t,icon:e.icon}):e.icon:e.type==="annotation"?WB[e.key]||mi:e.type==="listStyle"?qB[e.key]||mi:GB[e.key]||mi}function mc(){const e=Bt(),t=Hi();return l.useMemo(()=>ge.focusBlock(e),[e,t])}function XB({hotkeys:e,onMemberOpen:t,resolveInitialValue:n,disabled:a}){const r=Bt(),{t:o}=L(),s=l.useCallback(async d=>{const c=await n(d),u=ge.addAnnotation(r,d,c);u&&u.markDefPath&&t(u.markDefPath)},[r,t,n]);return l.useMemo(()=>r?zB(r,a,s,e,o):[],[a,r,s,e,o])}function JB({actions:e}){const t=Bt(),n=Hi();return Wo(l.useMemo(()=>e.filter(a=>a.type==="annotation"?ge.isAnnotationActive(t,a.key):a.type==="listStyle"?ge.hasListStyle(t,a.key):ge.isMarkActive(t,a.key)).map(a=>a.key),[t,n]))}function ZB({items:e}){const t=Bt(),n=mc(),a=Hi();return Wo(l.useMemo(()=>e.filter(r=>ge.hasBlockStyle(t,r.style)).map(r=>r.style),[n,a]))}const QB=l.memo(rw),e4={constrainSize:!0,portal:!0},t4=l.memo(function(e){const{disabled:t,groups:n,isFullscreen:a,collapsed:r}=e,o=mc(),s=Bt(),d=Hi(),{t:c}=L(),u=d&&jn(d.anchor.path[0])&&jn(d.focus.path[0])?d.anchor.path[0]._key!==(d==null?void 0:d.focus.path[0]._key):(d==null?void 0:d.anchor.path[0])!==(d==null?void 0:d.focus.path[0]),m=(o==null?void 0:o._type)!==s.schemaTypes.block.name,p=!m&&Array.isArray(o.children)&&o.children.length===1&&(o==null?void 0:o.children[0].text)==="",h=t||m,f=l.useMemo(()=>n.reduce((w,C)=>w.concat(C.actions.map((T,j)=>j===0?{...T,firstInGroup:!0}:T)),[]),[n]),g=JB({actions:f}),b=l.useCallback(()=>{ge.focus(s)},[s]),v=a?"bottom":"top",y=l.useMemo(()=>f.map(w=>{const C=w.type==="annotation"&&(p||u),T=p?c("user-menu.action.portable-text.annotation-disabled_empty-block",{name:w.title||w.key}):c("user-menu.action.portable-text.annotation-disabled_multiple-blocks",{name:w.title||w.key}),j=g.includes(w.key);return i.jsx(ow,{"aria-label":c("toolbar.portable-text.action-button-aria-label",{action:w.title||w.key}),"data-testid":`action-button-${w.key}`,disabled:h||C,mode:"bleed",dividerBefore:w.firstInGroup,icon:YB(w,j),onClick:()=>w.handle(j),selected:j,text:w.title||w.key,tooltipText:C?T:w.title||w.key,tooltipProps:{disabled:h,placement:v,portal:"default"}},w.key)}),[f,g,h,p,u,c,v]),x=l.useMemo(()=>({button:i.jsx(wt,{"data-testid":"action-menu-button",disabled:h,tooltipProps:{placement:v}}),popover:e4}),[h,v]);return i.jsx(QB,{"data-testid":"action-menu-auto-collapse-menu",collapsed:r,disableRestoreFocusOnClose:!0,gap:1,menuButtonProps:x,onMenuClose:b,children:y})}),n4=l.memo(ze),a4=k(Hu)`
  // Change the border color variable used by BlockQuote
  // to make the border visible when the MenuItem is selected
  &[data-selected] {
    [data-option='blockquote'] {
      --card-border-color: var(--card-muted-fg-color);
    }
  }
`,i4={h1:e=>i.jsx(qC,{children:e}),h2:e=>i.jsx(YC,{children:e}),h3:e=>i.jsx(XC,{children:e}),h4:e=>i.jsx(JC,{children:e}),h5:e=>i.jsx(ZC,{children:e}),h6:e=>i.jsx(QC,{children:e}),normal:e=>i.jsx(rp,{children:e}),blockquote:e=>i.jsx(ew,{"data-option":"blockquote",children:e})},r4=e=>e.preventDefault(),ao={key:"style-none",style:"",title:"No style",i18nTitleKey:"inputs.portable-text.style.none"},o4=l.memo(function(e){const{disabled:t,items:n,boundaryElement:a}=e,r=Bt(),o=mc(),{t:s}=L(),d={constrainSize:!0,placement:"bottom-start",portal:"default",referenceBoundary:a},c=t||(o?r.schemaTypes.block.name!==o._type:!1),u=ZB({items:n}),{activeItems:m,items:p}=l.useMemo(()=>{const y=n.filter(w=>u.includes(w.style));let x=n;return y.length===0&&x.length>1&&(x=x.concat([ao]),y.push(ao)),{activeItems:y,items:x}},[u,n]),h=l.useMemo(()=>m.length>1?s("inputs.portable-text.style.multiple"):m.length!==1?ao.i18nTitleKey?s(ao.i18nTitleKey):ao.title:m[0].i18nTitleKey?s(m[0].i18nTitleKey):m[0].title,[m,s]),f=l.useCallback(y=>{o&&y.style!==o.style&&(ge.toggleBlockStyle(r,y.style),ge.focus(r))},[r,o]),g=l.useCallback(y=>{const{style:x,styleComponent:w}=y,C=i4[x],T=y.i18nTitleKey?s(y.i18nTitleKey):(y==null?void 0:y.title)||y.style,j=typeof w=="function"?w:void 0;return C&&!j?C(T):j?i.jsx(j,{children:T}):i.jsx(E,{children:T})},[s]),b=l.useMemo(()=>i.jsx(Z,{disabled:c,iconRight:_n,justify:"space-between",mode:"bleed",onClick:r4,text:h,width:"fill"}),[c,h]),v=l.useMemo(()=>i.jsx(Be,{disabled:c,children:p.map(y=>i.jsx(a4,{pressed:m.includes(y),onClick:c?void 0:()=>f(y),children:g(y)},y.key))}),[c,m,f,p,g]);return i.jsx(n4,{popover:d,id:"block-style-select",button:b,menu:v})}),s4=l.memo(rw),l4={constrainSize:!0,portal:!0},c4=l.memo(function(e){const{disabled:t,items:n,isFullscreen:a,collapsed:r}=e,{t:o}=L(),s=mc(),d=Bt(),c=s&&s._type!==d.schemaTypes.block.name,u=l.useCallback(()=>{ge.focus(d)},[d]),m=a?"bottom":"top",p=l.useMemo(()=>n.map(f=>{const g=f.type.title||Wy(f.type.name);return i.jsx(ow,{"aria-label":o(f.inline?"inputs.portable-text.action.insert-inline-object-aria-label":"inputs.portable-text.action.insert-block-aria-label",{typeName:g}),mode:"bleed",disabled:t||c&&f.inline===!0,icon:f.icon,onClick:f.handle,text:g,tooltipText:o(f.inline?"inputs.portable-text.action.insert-inline-object":"inputs.portable-text.action.insert-block",{typeName:g}),tooltipProps:{disabled:t,placement:m,portal:"default"}},f.key)}),[t,c,n,o,m]),h=l.useMemo(()=>({button:i.jsx(wt,{"data-testid":"insert-menu-button",disabled:t,tooltipProps:{placement:m}}),popover:l4}),[t,m]);return i.jsx(s4,{"data-testid":"insert-menu-auto-collapse-menu",collapsed:r,collapseText:!1,disableRestoreFocusOnClose:!0,gap:1,menuButtonProps:h,onMenuClose:u,children:p})}),d4=k(P)`
  width: 100%;
`,u4=k(I)`
  width: 8em;
`,m4=k(P)`
  border-right: 1px solid var(--card-border-color);
`,p4=k(I)`
  ${({$withInsertMenu:e})=>e&&ae`
      max-width: max-content;
      border-right: 1px solid var(--card-border-color);
    `}
`,h4=k(I)`
  border-left: 1px solid var(--card-border-color);
`,f4=300,g4=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),b4=l.memo(function({actionGroups:e,blockStyles:t,collapsible:n,disabled:a,insertMenuItems:r,isFullscreen:o,onToggleFullscreen:s}){const{t:d}=L(),c=e.reduce((v,y)=>v+y.actions.length,0)>0,u=r.length>0,[m,p]=l.useState(null),h=Vu(m),f=n&&h?(h==null?void 0:h.width)<400:!1,g=t.length>1;ej({rootElement:m});const b=l.useCallback(v=>{v.preventDefault()},[]);return i.jsxs(d4,{align:"center",ref:p,onMouseDown:b,children:[g&&i.jsx(m4,{flex:f?1:void 0,children:i.jsx(u4,{padding:o?2:1,"data-testid":"block-style-select",children:i.jsx(o4,{disabled:a,items:t,boundaryElement:m})})}),i.jsxs(P,{flex:1,children:[c&&i.jsx(p4,{flex:f?void 0:1,padding:o?2:1,$withInsertMenu:u,children:i.jsx(t4,{disabled:a,collapsed:f,groups:e,isFullscreen:o})}),u&&i.jsx(I,{flex:f?void 0:1,padding:o?2:1,children:i.jsx(c4,{disabled:a,collapsed:f,items:r,isFullscreen:o})})]}),i.jsx(h4,{padding:o?2:1,children:i.jsx(Z,{"aria-label":d("inputs.portable-text.action.expand-editor"),icon:o?jj:kj,mode:"bleed",onClick:s,tooltipProps:{content:d(o?"inputs.portable-text.action.collapse-editor":"inputs.portable-text.action.expand-editor"),hotkeys:[`${g4?"Cmd":"Ctrl"}`,"Enter"],placement:o?"bottom":"top",portal:"default"}})})]})});function y4(e){const{collapsible:t,hotkeys:n,isFullscreen:a,readOnly:r,onMemberOpen:o,onToggleFullscreen:s}=e,d=Bt(),c=Hi(),u=gp(),m=r||!c,{push:p}=Vt(),h=l.useCallback(x=>{let w=!1;const C=setTimeout(()=>{w=!0,p({id:"resolving-initial-value",status:"info",title:"Resolving initial value…"})},f4);return u(x,{}).then(T=>(w&&p({id:"resolving-initial-value",status:"info",duration:500,title:"Initial value resolved"}),T)).catch(T=>{p({title:"Could not resolve initial value",id:"resolving-initial-value",description:`Unable to resolve initial value for type: ${x.name}: ${T.message}.`,status:"error"})}).finally(()=>clearTimeout(C))},[p,u]),f=l.useCallback(async x=>{const w=await h(x),C=ge.insertBlock(d,x,w);C&&o(C)},[d,o,h]),g=l.useCallback(async x=>{const w=await h(x),C=ge.insertChild(d,x,w);C&&o(C)},[d,o,h]),b=XB({hotkeys:n,onMemberOpen:o,resolveInitialValue:h,disabled:!0}),v=l.useMemo(()=>HB(d.schemaTypes),[d]),y=l.useMemo(()=>KB(d.schemaTypes,m,f,g),[m,d,f,g]);return i.jsx(b4,{actionGroups:b,blockStyles:v,collapsible:t,disabled:m,insertMenuItems:y,isFullscreen:a,onToggleFullscreen:s})}const v4={outline:"none"},x4="root",C4=k.span(e=>{const{color:t}=Re(e.theme);return ae`
    color: ${t.input.default.enabled.placeholder};
  `}),w4=e=>i.jsx(iB,{...e}),T4=e=>i.jsx(_B,{...e}),j4=e=>i.jsx(SB,{...e});function k4(e){const{elementRef:t,hideToolbar:n,hotkeys:a,initialSelection:r,isActive:o,isFullscreen:s,onCopy:d,onItemOpen:c,onPaste:u,onToggleFullscreen:m,path:p,readOnly:h,rangeDecorations:f,renderAnnotation:g,renderBlock:b,renderChild:v,renderEditable:y,scrollElement:x,setPortalElement:w,setScrollElement:C,ariaDescribedBy:T}=e,{id:j}=Na(),{t:A}=L(),{isTopLayer:M}=xi(),{element:S}=am();Pa(l.useCallback($=>{!M||!s||$.key==="Escape"&&m()},[m,s,M]));const N=l.useCallback(()=>i.jsx(C4,{"data-testid":"pt-input-placeholder",children:A("inputs.portable-text.empty-placeholder")}),[A]),D=AB(),_=kB(x),F=l.useMemo(()=>{const $={"aria-describedby":T,hotkeys:a,onCopy:d,onPaste:u,rangeDecorations:f,ref:t,renderAnnotation:g,renderBlock:b,renderChild:v,renderDecorator:w4,renderListItem:j4,renderPlaceholder:N,renderStyle:T4,scrollSelectionIntoView:_,selection:r,spellCheck:D,style:v4},O=V=>i.jsx(F0,{...$,...Yn(V,["renderDefault"])});return y?y({...$,renderDefault:O}):O($)},[T,t,a,r,d,u,f,g,b,v,y,N,_,D]),R=l.useCallback($=>{c(p.concat($))},[c,p]);return i.jsxs(xB,{"data-fullscreen":s,"data-testid":"pt-editor",children:[o&&!n&&i.jsx(Ia,{children:i.jsx(CB,{"data-testid":"pt-editor__toolbar-card",shadow:1,children:i.jsx(y4,{collapsible:j===x4,hotkeys:a,isFullscreen:s,onMemberOpen:R,onToggleFullscreen:m,readOnly:h})})}),i.jsxs(wB,{flex:1,tone:h?"transparent":"default",children:[i.jsx(TB,{ref:C,children:i.jsx("div",{children:i.jsx(jB,{$isFullscreen:s,tone:h?"transparent":"default",children:i.jsx(Gu,{element:s?x:S,children:F})})})}),i.jsx("div",{"data-portal":"",ref:w})]})]})}function A4(e){const t=Bt(),[n]=l.useState(()=>e);return n!==e&&console.warn("Make sure that hotkeys are a stable object across renders, or there will be issues with key handling in the Portable Text Editor."),l.useMemo(()=>{const a={marks:{}};return t.schemaTypes.decorators.forEach(r=>{switch(r.value){case"strong":a.marks["mod+b"]=r.value;break;case"em":a.marks["mod+i"]=r.value;break;case"underline":a.marks["mod+u"]=r.value;break;case"code":a.marks["mod+'"]=r.value;break}}),{marks:{...a.marks,...(n||{}).marks},custom:n.custom}},[t,n])}function S4(e){const{focusPath:t,boundaryElement:n,onItemClose:a}=e,r=AN(),o=Bt(),s=Hi();l.useLayoutEffect(()=>{var d,c,u,m,p;if(t.length===0||s!=null&&s.focus.path&&nt(s.focus.path,t.slice(0,s.focus.path.length)))return;const h=r.find(b=>b.member.item.focused),f=r.find(b=>b.member.open),g=h||f;if(g&&(d=g.elementRef)!=null&&d.current){n&&(kr(n,{scrollMode:"if-needed",block:"start",inline:"start"}),kr(g.elementRef.current,{scrollMode:"if-needed",boundary:n,block:"nearest",inline:"start"}));const b=g.kind==="textBlock",v=t.length===1;if(b||v){const y=b&&_r(t[2])?t[2]._key:void 0,x=y&&Array.isArray((c=g.node.value)==null?void 0:c.children)?(u=g.node.value)==null?void 0:u.children.find(j=>j._key===y):void 0,w=x&&x._type==="span"&&t.length===4&&t[1]==="children"&&t[3]==="text"||!1,C=b&&(t.length===3&&t[1]==="children"||w);let T=[];C?T=t.slice(0,3):b&&v&&Array.isArray((m=g.node.value)==null?void 0:m.children)?T=[t[0],"children",{_key:(p=g.node.value)==null?void 0:p.children[0]._key}]:v&&(T=[{_key:g.key}]),T.length&&(ge.select(o,{anchor:{path:T,offset:0},focus:{path:T,offset:0}}),b&&ge.focus(o))}}},[n,o,t,a,r,s==null?void 0:s.focus.path])}const _4=k(U)(M4),E4=k.span`
  display: block;
  max-width: calc(5em + 80px);
  position: relative;
`,I4=k(I)`
  max-width: 250px;
`;function M4({theme:e}){var t,n,a;const{color:r,radius:o}=e.sanity;return ae`
    line-height: 0;
    border-radius: ${o[2]}px;
    padding: 2px;
    box-shadow: inset 0 0 0 1px var(--card-border-color);
    height: calc(1em - 1px);
    margin-top: 0.0625em;
    cursor: default;

    &:not([hidden]) {
      display: inline-flex;
      align-items: center;
      vertical-align: top;
    }

    &[data-ready-only] {
      cursor: default;
    }

    &[data-focused] {
      box-shadow: inset 0 0 0 1px ${(t=r.selectable)==null?void 0:t.primary.selected.border};
      color: ${(n=r.selectable)==null?void 0:n.primary.pressed.fg};
    }

    &[data-selected] {
      background-color: ${(a=r.selectable)==null?void 0:a.primary.pressed.bg};
    }

    &:not([data-focused]):not([data-selected]) {
      @media (hover: hover) {
        &:hover {
          --card-border-color: ${r.input.default.hovered.border};
        }
      }
    }

    &[data-markers] {
      --card-bg-color: ${r.dark?Ge.purple[950].hex:Ge.purple[50].hex};
    }

    &[data-warning] {
      --card-bg-color: ${r.muted.caution.hovered.bg};

      @media (hover: hover) {
        &:hover {
          --card-border-color: ${r.muted.caution.hovered.border};
        }
      }
    }

    &[data-invalid] {
      --card-bg-color: ${r.input.invalid.enabled.bg};
      --card-border-color: ${r.input.invalid.enabled.border};

      @media (hover: hover) {
        &:hover {
          --card-border-color: ${r.input.invalid.hovered.border};
        }
      }
    }
  `}const P4=["top","bottom"];function N4(e){const{floatingBoundary:t,onClosePopover:n,onEdit:a,onDelete:r,referenceBoundary:o,referenceElement:s,title:d,open:c}=e,{sanity:u}=Lr(),{t:m}=L(),p=l.useRef(null),h=l.useRef(null),f=u.color.dark?"light":"dark";Pa(l.useCallback(v=>{v.key==="Escape"&&(v.preventDefault(),v.stopPropagation(),n())},[n]));const g=l.useCallback(v=>{var y;if(!((y=h.current)!=null&&y.disabled)){v.preventDefault(),v.stopPropagation();try{r(v)}catch(x){console.error(x)}finally{h.current&&(h.current.disabled=!0)}}},[r]),b=l.useMemo(()=>i.jsx(I,{padding:1,children:i.jsxs(et,{space:1,children:[i.jsx(I,{padding:2,children:i.jsx(E,{weight:"medium",size:1,children:d})}),i.jsx(Z,{"aria-label":m("inputs.portable-text.inline-object.edit-aria-label"),icon:Sr,mode:"bleed",onClick:a,ref:p,tooltipProps:{content:m("inputs.portable-text.inline-object.edit")}}),i.jsx(Z,{"aria-label":m("inputs.portable-text.inline-object.remove-aria-label"),ref:h,icon:_t,mode:"bleed",onClick:g,tone:"critical",tooltipProps:{content:m("inputs.portable-text.inline-object.remove")}})]})}),[g,a,d,m]);return i.jsx(rt,{constrainSize:!0,content:b,fallbackPlacements:P4,floatingBoundary:t,open:c,placement:"top",portal:!0,referenceBoundary:o,referenceElement:s,scheme:f})}const O4=e=>{var t;const{floatingBoundary:n,focused:a,onItemClose:r,onItemOpen:o,onPathFocus:s,path:d,readOnly:c,referenceBoundary:u,relativePath:m,renderAnnotation:p,renderBlock:h,renderCustomMarkers:f,renderField:g,renderItem:b,renderInlineBlock:v,renderInput:y,renderPreview:x,schemaType:w,selected:C,value:T}=e,{Markers:j}=Na().__internal.components,A=Bt(),M=Yl(d),S=tc(Nn(d)),{validation:N,hasError:D,hasInfo:_,hasWarning:F}=ql(S==null?void 0:S.node),R=A.schemaTypes.block,$=M.length>0,O=l.useMemo(()=>({anchor:{path:m,offset:0},focus:{path:m,offset:0}}),[m]),V=l.useCallback(()=>{ge.delete(A,O,{mode:"children"}),ge.focus(A)},[O,A]),H=l.useCallback(()=>{S&&(ge.blur(A),o(S.node.path))},[A,o,S]),J=l.useCallback(()=>{r(),ge.select(A,O),ge.focus(A)},[r,A,O]),q=!!(S!=null&&S.member.open),oe=S==null?void 0:S.input,ie=(S==null?void 0:S.node.path)||lt,te=(t=S==null?void 0:S.elementRef)==null?void 0:t.current,X=Wr(d,!0),le=l.useMemo(()=>X.filter(de=>nt(de.path,d)),[d,X]),me=l.useMemo(()=>({__unstable_floatingBoundary:n,__unstable_referenceBoundary:u,__unstable_referenceElement:te,children:oe,focused:a,onClose:J,onOpen:H,onPathFocus:s,onRemove:V,open:q,markers:M,member:S==null?void 0:S.member,parentSchemaType:R,path:ie,presence:le,readOnly:!!c,renderAnnotation:p,renderBlock:h,renderDefault:sw,renderField:g,renderInlineBlock:v,renderInput:y,renderItem:b,renderPreview:x,schemaType:w,selected:C,value:T,validation:N}),[n,a,oe,q,M,S==null?void 0:S.member,ie,J,H,s,V,R,c,u,te,p,h,g,v,y,b,x,le,w,C,N,T]),G=D||F||_||$,ce=l.useMemo(()=>G&&i.jsx(I4,{children:i.jsx(j,{markers:M,validation:N,renderCustomMarkers:f})})||null,[j,M,f,G,N]);return l.useMemo(()=>i.jsx("span",{ref:S==null?void 0:S.elementRef,contentEditable:!1,children:i.jsx(Ie,{placement:"bottom",portal:"editor",disabled:q?!0:!G,content:ce,children:v&&i.jsx("span",{style:{position:"relative"},children:v(me)})})}),[me,S==null?void 0:S.elementRef,v,ce,G,q])},sw=e=>{const{__unstable_floatingBoundary:t,__unstable_referenceBoundary:n,__unstable_referenceElement:a,children:r,focused:o,markers:s,onClose:d,onOpen:c,onRemove:u,open:m,readOnly:p,renderPreview:h,schemaType:f,selected:g,validation:b,value:v}=e,{t:y}=L(),x=s.length>0,[w,C]=l.useState(!1),T=(f==null?void 0:f.title)||f.name,j=b.filter(D=>D.level==="error").length>0,A=b.filter(D=>D.level==="warning").length>0,M=l.useCallback(()=>{C(!1),c()},[c]);l.useEffect(()=>{C(m?!1:!!o)},[o,m]);const S=l.useMemo(()=>{if(j)return"critical";if(A)return"caution";if(g||o)return"primary"},[o,j,A,g]),N=l.useCallback(()=>{C(!1)},[]);return i.jsxs(i.Fragment,{children:[i.jsx(_4,{"aria-label":y("inputs.portable-text.inline-block.aria-label"),"data-focused":o||void 0,"data-invalid":j||void 0,"data-markers":x||void 0,"data-read-only":p||void 0,"data-selected":g||void 0,"data-warning":A||void 0,forwardedAs:"span",onClick:p?M:void 0,onDoubleClick:M,tone:S,children:i.jsx(E4,{children:h({layout:"inline",schemaType:f,skipVisibilityCheck:!0,value:v,fallbackTitle:"Click to edit"})})}),a&&i.jsx(N4,{floatingBoundary:t,onClosePopover:N,onDelete:u,onEdit:M,open:w,referenceBoundary:n,referenceElement:a,title:T}),m&&i.jsx(Dm,{defaultType:"popover",onClose:d,autoFocus:o,floatingBoundary:t,referenceBoundary:n,referenceElement:a,schemaType:f,children:r})]})};function F4(e){const{changed:t,elementRef:n,focused:a,focusPath:r=lt,elementProps:o,hasFocusWithin:s,hideToolbar:d,hotkeys:c,isActive:u,isFullscreen:m,onActivate:p,onCopy:h,onItemClose:f,onItemOpen:g,onItemRemove:b,onPaste:v,onPathFocus:y,onToggleFullscreen:x,onUpload:w,path:C,rangeDecorations:T,readOnly:j,renderAnnotation:A,renderBlock:M,renderBlockActions:S,renderCustomMarkers:N,renderEditable:D,renderField:_,renderInlineBlock:F,renderInput:R,renderItem:$,renderPreview:O,resolveUploader:V,value:H}=e,J=Bt(),q=am().element,[oe,ie]=l.useState(null),[te,X]=l.useState(null),le=l.useCallback(()=>{x()},[x]),me=l.useMemo(()=>({...c,custom:{"mod+enter":x,...(c==null?void 0:c.custom)||{}}}),[c,x]),G=A4(me),ce=H&&S?S:void 0,de=H&&N?N:void 0,[pe,W]=l.useState(null),Y=l.useCallback(Q=>{const{children:ue,focused:se,path:he,selected:_e,schemaType:Ne,value:$e}=Q;return i.jsx(vB,{floatingBoundary:q,focused:se,isFullscreen:m,onItemClose:f,onItemOpen:g,onItemRemove:b,onPathFocus:y,path:C.concat(he),readOnly:j,referenceBoundary:te,renderAnnotation:A,renderField:_,renderInlineBlock:F,renderInput:R,renderItem:$,renderBlockActions:ce,renderCustomMarkers:de,renderPreview:O,renderBlock:M,schemaType:Ne,selected:_e,value:$e,children:ue})},[ce,de,q,m,f,g,b,y,C,j,A,M,_,F,R,$,O,te]),z=l.useCallback(Q=>{const{focused:ue,path:se,selected:he,schemaType:_e,value:Ne}=Q;return i.jsx(c6,{floatingBoundary:q,focused:ue,isFullscreen:m,onItemClose:f,onItemOpen:g,onItemRemove:b,onPathFocus:y,path:C.concat(se),readOnly:j,referenceBoundary:te,relativePath:se,renderAnnotation:A,renderBlock:M,renderBlockActions:ce,renderCustomMarkers:de,renderField:_,renderInlineBlock:F,renderInput:R,renderItem:$,renderPreview:O,schemaType:_e,selected:he,value:Ne})},[q,te,m,f,g,b,y,C,j,A,M,ce,de,_,F,R,$,O]),ne=l.useCallback(Q=>{const{value:ue}=Q;return ue._type===J.schemaTypes.block.name?Y(Q):z(Q)},[J.schemaTypes.block.name,z,Y]),ee=l.useCallback(Q=>{const{children:ue,focused:se,path:he,selected:_e,schemaType:Ne,value:$e}=Q;return $e._type===J.schemaTypes.span.name?ue:i.jsx(O4,{floatingBoundary:q,focused:se,onItemClose:f,onItemOpen:g,onPathFocus:y,path:C.concat(he),readOnly:j,referenceBoundary:te,relativePath:he,renderAnnotation:A,renderBlock:M,renderCustomMarkers:N,renderField:_,renderInlineBlock:F,renderInput:R,renderItem:$,renderPreview:O,schemaType:Ne,selected:_e,value:$e})},[J.schemaTypes.span.name,q,f,g,y,C,j,te,A,M,N,_,F,R,$,O]),fe=l.useCallback(Q=>{const{children:ue,focused:se,path:he,selected:_e,schemaType:Ne,value:$e}=Q;return i.jsx(VN,{editorNodeFocused:se,floatingBoundary:q,focused:!!a,onItemClose:f,onItemOpen:g,onPathFocus:y,path:C.concat(he),readOnly:j,referenceBoundary:te,renderAnnotation:A,renderBlock:M,renderCustomMarkers:N,renderField:_,renderInlineBlock:F,renderInput:R,renderItem:$,renderPreview:O,schemaType:Ne,selected:_e,value:$e,children:ue})},[q,te,a,f,g,y,C,j,A,M,N,_,F,R,$,O]),Oe=o["aria-describedby"],[Se]=l.useState(()=>{if(s)return{anchor:{path:r,offset:0},focus:{path:r,offset:0}}}),De=l.useMemo(()=>i.jsx(oc,{types:J.schemaTypes.portableText.of,resolveUploader:V,onUpload:w,tabIndex:-1,children:i.jsx(k4,{ariaDescribedBy:Oe,elementRef:n,initialSelection:Se,hideToolbar:d,hotkeys:G,isActive:u,isFullscreen:m,onItemOpen:g,onCopy:h,onPaste:v,onToggleFullscreen:le,path:C,rangeDecorations:T,readOnly:j,renderAnnotation:fe,renderBlock:ne,renderChild:ee,renderEditable:D,setPortalElement:W,scrollElement:te,setScrollElement:X})}),[Oe,J.schemaTypes.portableText.of,G,fe,ne,ee,n,le,d,Se,u,m,h,g,v,C,w,V,T,j,D,te]),Fe=Wu(),Qe=l.useMemo(()=>({collapsed:oe,default:Fe.element,editor:pe,expanded:Fe.element}),[Fe.element,pe,oe]);S4({focusPath:r,boundaryElement:te,onItemClose:f});const ht=a||s;return i.jsx(cc,{legacyEditing:!0,children:i.jsx(_S,{__unstable_elements:Qe,element:Fe.element,children:i.jsx(Z3,{onActivate:p,isOverlayActive:!u,children:i.jsx(Kt,{disabled:m,hasFocus:!!a,isChanged:t,path:C,children:i.jsxs(Q3,{"data-focused":ht?"":void 0,"data-read-only":j?"":void 0,children:[i.jsx(I,{"data-wrapper":"",ref:ie,children:i.jsx(hm,{__unstable_name:m?"expanded":"collapsed",children:m?i.jsx(eB,{children:De}):De})}),i.jsx("div",{"data-border":""})]})})})})})}function R4(e){return i.jsx(jv.Provider,{value:e.markers,children:e.children})}function D4(e){return i.jsx(fm.Provider,{value:e.memberItems,children:e.children})}function $4(e){const{onChange:t,onIgnore:n,resolution:a,readOnly:r}=e,o=ha(),{t:s}=L(),d=l.useCallback(()=>{a&&(t({type:"mutation",patches:a.patches}),o.log(q3,{PTEInvalidValueId:a.i18n.description,PTEInvalidValueDescription:a.description}))},[t,a,o]),c=l.useCallback(()=>{o.log(G3),n()},[n,o]);return a?i.jsx(fa,{title:i.jsx(i.Fragment,{children:s("inputs.portable-text.invalid-value.title")}),suffix:i.jsxs(B,{padding:2,children:[a.action&&i.jsxs(Ze,{columns:[1,2],gap:1,children:[i.jsx(He,{mode:"ghost",onClick:c,text:s("inputs.portable-text.invalid-value.ignore-button.text")}),!r&&i.jsx(He,{onClick:d,text:i.jsx(Pe,{t:s,i18nKey:a.i18n.action,values:a.i18n.values}),tone:"caution"})]}),i.jsx(I,{padding:3,children:a.action&&i.jsx(E,{as:"p",muted:!0,size:1,children:s("inputs.portable-text.invalid-value.action-disclaimer")})})]}),children:i.jsxs(B,{space:3,children:[i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(Pe,{t:s,i18nKey:a.i18n.description,values:a.i18n.values})}),i.jsx(U,{border:!0,overflow:"auto",padding:2,tone:"inherit",children:i.jsx(xn,{language:"json",children:JSON.stringify(a.item,null,2)})})]})}):null}const si=6,L4={animate:{opacity:1,scaleX:1,scaleY:1},exit:{opacity:0,scaleX:0,scaleY:.5},initial:{opacity:0,scaleX:0,scaleY:.5}},B4={duration:.3,ease:"easeInOut",type:"spring",bounce:0},V4={animate:{opacity:1},exit:{opacity:0},initial:{opacity:0}},U4={duration:.2,delay:.15},z4=k.span(({theme:e,$tints:t})=>{var n;const a=(n=Re(e))==null?void 0:n.color._dark,r=t[a?400:500].hex,o=t[a?900:50].hex;return ae`
    --presence-cursor-bg: ${r};
    --presence-cursor-fg: ${o};

    border-left: 1px solid transparent;
    border-color: var(--presence-cursor-bg);
    margin-left: -1px;
    position: relative;
    word-break: normal;
    white-space: normal;
    mix-blend-mode: unset;
    pointer-events: none;
  `}),H4=k.div`
  background-color: var(--presence-cursor-bg);
  border-radius: 50%;
  width: ${si}px;
  height: ${si}px;
  position: absolute;
  top: -${si-1}px;
  left: -0.5px;
  transform: translateX(-50%);
  mix-blend-mode: unset;
  z-index: 0;
  pointer-events: all;

  // Increase the hit area of the cursor dot
  &:before {
    content: '';
    position: absolute;
    top: -${si/2}px;
    left: 50%;
    transform: translateX(-50%);
    width: ${si*2}px;
    height: ${si*3}px;
    opacity: 0.5;
  }
`,K4=k(hn(I))(({theme:e})=>{var t;const n=(t=Re(e))==null?void 0:t.radius[4];return ae`
    position: absolute;
    top: -${si*1.5}px;
    left: -${si*.75}px;
    transform-origin: left;
    white-space: nowrap;
    padding: 3px 6px;
    box-sizing: border-box;
    border-radius: ${n}px;
    background-color: var(--presence-cursor-bg);
    z-index: 1;
    mix-blend-mode: unset;
    user-select: none;
  `}),W4=k(hn(E))`
  color: var(--presence-cursor-fg);
  mix-blend-mode: unset;
`;function G4(e){const{children:t,user:n}=e,{tints:a}=zv(n.id),[r,o]=l.useState(!1),s=l.useCallback(()=>o(!0),[]),d=l.useCallback(()=>o(!1),[]),c=l.useMemo(()=>{var u;return`presence-cursor-${(u=n.displayName)==null?void 0:u.split(" ").join("-")}`},[n.displayName]);return i.jsxs(i.Fragment,{children:[i.jsxs(z4,{$tints:a,contentEditable:!1,"data-testid":c,onMouseEnter:s,onMouseLeave:d,children:[i.jsx(Ea,{children:r&&i.jsx(K4,{animate:"animate",exit:"exit",flex:1,initial:"initial",transition:B4,variants:L4,children:i.jsx(W4,{animate:"animate",exit:"exit",initial:"initial",size:0,transition:U4,variants:V4,weight:"medium",children:n.displayName})})}),i.jsx(H4,{})]}),t]})}function q4(e){const{path:t}=e,n=Wv(),[a,r]=l.useState([]),[o,s]=l.useState([]),d=l.useRef(a),c=l.useCallback(u=>{const{rangeDecoration:m,newSelection:p}=u;s(h=>h.map(f=>{var g,b;return((g=f.payload)==null?void 0:g.sessionId)===((b=m.payload)==null?void 0:b.sessionId)?{...m,selection:p}:f}))},[]);return l.useEffect(()=>{const u=n.filter(h=>Jt(t,h.path)&&!tt(t,h.path)),m=u.map(h=>({...h.selection,sessionId:h.sessionId})),p=d.current.map(h=>({...h.selection,sessionId:h.sessionId}));if(!tt(m,p)){const h=u.length>0?u:lt;r(h),d.current=h}},[n,t]),l.useEffect(()=>{const u=a.map(m=>{if(!m.selection)return null;const p={focus:m.selection.focus,anchor:m.selection.focus};return{component:({children:h})=>i.jsx(G4,{user:m.user,children:h}),selection:p,onMoved:c,payload:{sessionId:m.sessionId}}});s(u.filter(Boolean))},[a,c]),o}function Y4(e,t,n){return e.map(a=>({type:a,uploader:t(a,n),parentType:a})).filter(a=>a.uploader)}function X4(e){const{path:t}=e,{patchChannel:n}=Na().__internal;return{subscribe:l.useCallback(a=>n.subscribe(({snapshot:r,patches:o})=>{const s=o.filter(d=>ou(d.path,t)).map(d=>({...d,path:d.path.slice(t.length)}));s.length&&a({shouldReset:Q4(t,o),snapshot:Ke(r)?e5(r,t):{},patches:s})}),[t,n])}}function J4(e,t){const n=typeof e;return n!==typeof t?!1:n==="object"?fi(e,t):e===t}function ou(e,t){if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t)||e.length<t.length)return!1;for(let n=0,a=t.length;n<a;n++)if(!J4(t[n],e[n]))return!1;return!0}function Z4(e,t){return e.length===0||ou(t,e)&&!ou(e,t)}function Q4(e,t){return t.some(n=>Z4(n.path,e)&&(n.type==="set"||n.type==="unset"))}function e5(e,t){return t.reduce((n,a)=>typeof a=="object"?ES(n,a):ct(n,a),e)}function t5(e){const{editorRef:t,elementProps:n,hotkeys:a,initialActive:r,initialFullscreen:o,markers:s=lt,onChange:d,onCopy:c,onEditorChange:u,onFullScreenChange:m,onInsert:p,onItemRemove:h,onPaste:f,onPathFocus:g,path:b,readOnly:v,rangeDecorations:y,renderBlockActions:x,renderCustomMarkers:w,renderEditable:C,schemaType:T,value:j,resolveUploader:A,onUpload:M}=e,{onBlur:S,ref:N}=n,D=l.useRef(null),_=t||D,F=q4(l.useMemo(()=>({path:e.path}),[e.path])),{subscribe:R}=X4({path:b}),{t:$}=L(),[O,V]=l.useState(!1),[H,J]=l.useState(null),[q,oe]=l.useState(o??!1),[ie,te]=l.useState(r??!1),[X,le]=l.useState(!1),[me,G]=l.useState(!1),ce=ha(),de=Vt(),pe=l.useMemo(()=>new sn,[]),W=l.useMemo(()=>pe.asObservable(),[pe]),Y=l.useCallback(()=>{oe(se=>{const he=!se;return he?ce.log(K3):ce.log(W3),m==null||m(he),he})},[m,ce]);l.useEffect(()=>{H&&j!==H.value&&J(null)},[H,j]),l.useEffect(()=>R(({patches:se,snapshot:he})=>{pe.next({patches:se,snapshot:he})}),[pe,R]);const z=SN(e);l.useEffect(()=>{me&&te(!0)},[me]);const ne=l.useCallback(()=>{const se=ee.current,he=se==null?void 0:se.focus.path;if(!he)return;const _e=he.length===3&&he[1]==="children"&&jn(he[2])&&!z.some(Ne=>jn(he[2])&&Ne.member.key===he[2]._key)?he.concat(["text"]):he;l.startTransition(()=>{g(_e,{selection:se})})},[g,z]),ee=l.useRef(null),fe=l.useCallback(se=>{switch(se.type){case"mutation":d(ag(se.patches));break;case"connection":se.value==="offline"?le(!0):se.value==="online"&&le(!1);break;case"selection":ee.current=se.selection,ne();break;case"focus":te(!0),G(!0);break;case"blur":S(se.event),G(!1);break;case"undo":case"redo":d(ag(se.patches));break;case"invalidValue":J(se);break;case"error":de.push({status:se.level,description:se.description});break}_.current&&u&&u(se,_.current)},[_,u,d,ne,S,de]);l.useEffect(()=>{V(!1)},[j]);const Oe=l.useCallback(()=>{V(!0)},[]),Se=l.useMemo(()=>H&&H.resolution?i.jsx(I,{marginBottom:2,children:i.jsx($4,{onChange:fe,onIgnore:Oe,resolution:H.resolution,readOnly:X||v})}):null,[fe,Oe,H,X,v]),De=l.useCallback(()=>{ie||(te(!0),_.current&&ge.focus(_.current))},[_,ie]),Fe=l.useRef([]),Qe=l.useMemo(()=>{const se=[...y||[],...F],he=Gl(Fe.current,se);return Fe.current=he,he},[F,y]),ht=l.useCallback((se,he)=>{const{type:_e,uploader:Ne}=he;M==null||M({file:se,schemaType:_e,uploader:Ne})},[M]),Q=l.useCallback(se=>{if(!A)return;const he=se.map($e=>({file:$e,uploaderCandidates:Y4(T.of,A,$e)})),_e=he.filter($e=>$e.uploaderCandidates.length>0),Ne=he.filter($e=>$e.uploaderCandidates.length===0);Ne.length>0&&de.push({closable:!0,status:"warning",title:$("inputs.array.error.cannot-upload-unable-to-convert",{count:Ne.length}),description:Ne.map(($e,Ce)=>i.jsxs(P,{gap:2,padding:2,children:[i.jsx(I,{children:i.jsx(E,{weight:"medium",children:$e.file.name})}),i.jsx(I,{children:i.jsxs(E,{size:1,children:["(",$e.file.type,")"]})})]},Ce))}),_e.forEach($e=>{ht($e.file,zi($e.uploaderCandidates,Ce=>Ce.uploader.priority)[0])})},[de,A,T,ht,$]),ue=l.useCallback(se=>{const{event:he}=se,_e=he.type==="paste"?"paste":"drop",Ne=!!he.clipboardData.getData("text/html"),$e=!!he.clipboardData.getData("text/plain");return _e==="paste"&&Ne&&$e||Wx(he.clipboardData).then(Ce=>Ce.length>0?Ce:[]).then(Ce=>{Q(Ce)}),f==null?void 0:f(se)},[Q,f]);return i.jsxs(I,{children:[!O&&Se,(!H||O)&&i.jsx(R4,{markers:s,children:i.jsx(D4,{memberItems:z,children:i.jsx(ge,{patches$:W,onChange:fe,maxBlocks:void 0,ref:_,readOnly:X||v,schemaType:T,value:j,children:i.jsx(F4,{...e,elementRef:N,hasFocusWithin:me,hotkeys:a,isActive:ie,isFullscreen:q,onActivate:De,onItemRemove:h,onCopy:c,onInsert:p,onPaste:ue,onToggleFullscreen:Y,rangeDecorations:Qe,renderBlockActions:x,renderCustomMarkers:w,renderEditable:C})})})})]})}function ag(e){return e.map(t=>({...t,patchType:Bi}))}function su(e){return`inset 0 0 0 ${e.width}px ${e.color}`}function n5(e){const{base:t,border:n,focusRing:a}=e,r=a.offset+a.width,o=0-a.offset,s=t?t.bg:"var(--card-bg-color)";return[o>0&&`inset 0 0 0 ${o}px var(--card-focus-ring-color)`,n&&su(n),o<0&&`0 0 0 ${0-o}px ${s}`,r>0&&`0 0 0 ${r}px var(--card-focus-ring-color)`].filter(Boolean).join(",")}const a5=k(U)(e=>{const{theme:t}=e,{focusRing:n,input:a,radius:r}=t.sanity,o=t.sanity.color.input,s=Te(t.sanity.space[1]);return{position:"relative",borderRadius:`${r[1]}px`,color:o.default.enabled.fg,boxShadow:su({color:o.default.enabled.border,width:a.border.width}),"& > .content":{position:"relative",lineHeight:0,margin:`-${s} 0 0 -${s}`},"& > .content > div":{display:"inline-block",verticalAlign:"top",padding:`${s} 0 0 ${s}`},"&:not([data-read-only])":{cursor:"text"},"@media(hover:hover):not([data-disabled]):not([data-read-only]):hover":{borderColor:o.default.hovered.border},"&:not([data-disabled]):not([data-read-only])[data-focused]":{boxShadow:n5({border:{color:o.default.enabled.border,width:a.border.width},focusRing:n})},"*:disabled + &":{color:o.default.disabled.fg,backgroundColor:o.default.disabled.bg,boxShadow:su({color:o.default.disabled.border,width:a.border.width})}}}),i5=k.input(e=>{const{theme:t}=e,n=t.sanity.fonts.text,a=t.sanity.color.input,r=t.sanity.space[2],o=t.sanity.fonts.text.sizes[2];return{appearance:"none",background:"none",border:0,borderRadius:0,outline:"none",fontSize:Te(o.fontSize),lineHeight:o.lineHeight/o.fontSize,fontFamily:n.family,fontWeight:n.weights.regular,margin:0,display:"block",minWidth:"1px",maxWidth:"100%",boxSizing:"border-box",paddingTop:Te(r-o.ascenderHeight),paddingRight:Te(r),paddingBottom:Te(r-o.descenderHeight),paddingLeft:Te(r),"&:not(:invalid):not(:disabled)":{color:a.default.enabled.fg},"&:not(:invalid):disabled":{color:a.default.disabled.fg}}}),r5=k(I)(e=>{const{theme:t}=e,n=t.sanity.color.input;return ae`
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    pointer-events: none;
    --card-fg-color: ${n.default.enabled.placeholder};
  `}),o5=k(I)`
  // This is needed to make textOverflow="ellipsis" work properly for the Text primitive
  max-width: 100%;
`,lw=l.forwardRef((e,t)=>{const{disabled:n,onChange:a,onFocus:r,placeholder:o,readOnly:s,value:d=[],...c}=e,{t:u}=L(ko),[m,p]=l.useState(""),h=!n&&!s,[f,g]=l.useState(!1),b=l.useRef(null),v=l.useRef(null);l.useImperativeHandle(t,()=>b.current);const y=l.useCallback(A=>{if(Aj(A.target)&&A.target.closest('[data-ui="Tag"]'))return;const M=b.current;M&&setTimeout(()=>M.focus(),0)},[]),x=l.useCallback(()=>{g(!1)},[]),w=l.useCallback(A=>{p(A.currentTarget.value)},[]),C=l.useCallback(A=>{g(!0),r&&r(A)},[r]),T=l.useCallback(A=>{if(A.key==="Enter"&&(A.preventDefault(),A.stopPropagation(),a&&m)){const M=d.concat([{value:m}]);p(""),a&&a(M)}},[m,a,d]),j=l.useCallback(A=>{if(!a)return;const M=d.slice(0);M.splice(A,1),a(M)},[a,d]);return l.useEffect(()=>{const A=b.current;A&&(A.style.width="0",A.style.width=`${A.scrollWidth}px`)},[m]),i.jsxs(a5,{"data-disabled":n?"":void 0,"data-focused":f?"":void 0,"data-read-only":s?"":void 0,"data-ui":"TagInput",onPointerDown:y,overflow:"auto",padding:1,ref:v,children:[h&&i.jsx(r5,{hidden:!!(m||d.length),padding:3,children:i.jsx(E,{textOverflow:"ellipsis",children:o||u("inputs.tags.placeholder",{context:typeof window<"u"&&"ontouchstart"in window?"touch":void 0})})}),i.jsxs("div",{className:"content",children:[d.map((A,M)=>i.jsx(o5,{children:i.jsx(s5,{enabled:h,index:M,muted:!h,onRemove:j,tag:A})},`tag-${M}`)),i.jsx("div",{children:i.jsx(i5,{...c,disabled:!h,onBlur:x,onChange:w,onFocus:C,onKeyDown:T,ref:b,type:"text",value:m})},"tag-input")]})]})});lw.displayName="TagInput";function s5(e){const{enabled:t,index:n,muted:a,onRemove:r,tag:o}=e,s=l.useCallback(()=>{r(n)},[n,r]);return i.jsx(U,{"data-ui":"Tag",radius:2,tone:"transparent",children:i.jsxs(P,{align:"center",gap:1,children:[i.jsx(I,{flex:1,paddingY:2,paddingLeft:2,children:i.jsx(E,{muted:a,textOverflow:"ellipsis",children:o.value})}),t&&i.jsx(Z,{icon:un,mode:"bleed",onClick:s,tooltipProps:{content:"Remove"}})]})})}function l5(e){const{onChange:t,readOnly:n,value:a=[],elementProps:r,path:o,changed:s}=e,d=l.useMemo(()=>a==null?void 0:a.map(u=>({value:u})),[a]),c=l.useCallback(u=>{t(u.length===0?we():be(u.map(m=>m.value)))},[t]);return i.jsx(Kt,{path:o,isChanged:s,hasFocus:!1,children:i.jsx(lw,{onChange:c,readOnly:n,value:d,...r})})}const c5=["string","number","boolean"];function d5(e){return e.of.every(t=>c5.includes(t.jsonType))}function u5(e){return e.of.length===1&&Ca("string",e.of[0])}function m5(e){var t;return((t=e.options)==null?void 0:t.layout)==="tags"}function p5(e){return e.of.some(t=>Ca("block",t))}function h5(e){var t;return!!((t=e.options)!=null&&t.list)}function f5(e){return u5(e)&&m5(e)?l5:h5(e)?bC:d5(e)?yC:p5(e)?t5:gC}function g5(e){return cm(e)?e:{title:xl(`${e}`),value:e}}const ig={title:"",value:void 0};function cw(e){var t,n;const{value:a,readOnly:r,validationError:o,schemaType:s,onChange:d,path:c,changed:u,focused:m,elementProps:p}=e,h=l.useMemo(()=>{var T;return(((T=s.options)==null?void 0:T.list)||[]).map(g5)},[(t=s.options)==null?void 0:t.list]),f=h.find(T=>T.value===a),g=s.options&&s.options.layout==="radio",b=l.useCallback(T=>{const j=Number(T);return h[j]},[h]),v=l.useCallback(T=>String(h.indexOf(T)),[h]),y=l.useId(),x=l.useCallback(T=>{d(je.from(typeof(T==null?void 0:T.value)>"u"?we():be(T.value)))},[d]),w=l.useCallback(T=>{const j=b(T.currentTarget.value);if(!j){x(ig);return}x(j)},[x,b]),C=g?i.jsx(b5,{...p,value:f,inputId:y,items:h,direction:((n=s.options)==null?void 0:n.direction)||"vertical",customValidity:o,onChange:x,readOnly:r}):i.jsx(ka,{...p,customValidity:o,value:v(f),readOnly:r,onChange:w,children:[ig,...h].map((T,j)=>i.jsx("option",{value:j-1,children:T.title},`${j-1}`))});return i.jsx(Kt,{path:c,isChanged:u,hasFocus:!!m,children:C})}const b5=l.forwardRef(function(e,t){const{items:n,value:a,onChange:r,onFocus:o,readOnly:s,customValidity:d,direction:c,inputId:u}=e;return i.jsx(U,{border:!0,padding:3,radius:2,children:i.jsx(c==="horizontal"?et:B,{space:3,role:"group",children:n.map((m,p)=>i.jsx(y5,{customValidity:d,inputId:u,item:m,onChange:r,onFocus:o,readOnly:s,ref:p===0?t:null,value:a},p))})})}),y5=l.forwardRef(function(e,t){const{customValidity:n,inputId:a,item:r,onChange:o,onFocus:s,readOnly:d,value:c}=e,u=l.useCallback(()=>{o(r)},[r,o]);return i.jsxs(P,{as:"label",align:"center",children:[i.jsx(Sj,{ref:t,checked:c===r,onChange:u,onFocus:s,readOnly:d,customValidity:n,name:a}),i.jsx(I,{marginLeft:2,children:i.jsx(E,{size:1,weight:"medium",children:r.title})})]})});function v5(e){return Lx(e,"list")?cw:wC}function x5(e){return Lx(e,"list")?cw:TC}function C5(e){if(Ca("array",e))return f5(e);if(Ca("reference",e))return T2;if(Ca("string",e))return x5(e);if(Ca("number",e))return v5(e)}function w5(e){var t;if((t=e.components)!=null&&t.input)return e.components.input;const n=C5(e);if(n)return n;const a=Hm(e,new Set).reduce((o,s)=>(o[s.name]=s,o),{}),r=Object.values(a).find(o=>Xf[o.name]);if(r)return Xf[r.name];throw new Error(`Could not find input component for schema type \`${e.name}\``)}function T5(e){var t;return(t=e.components)!=null&&t.preview?e.components.preview:Xn}function j5({readOnly:e,hasErrors:t,hasWarnings:n}){return e?"transparent":t?"critical":n?"caution":"default"}const k5={portal:!0,tone:"default"},A5={position:"relative"};function S5(e){var t,n,a,r,o,s,d,c;const{schemaType:u,parentSchemaType:m,path:p,readOnly:h,onRemove:f,value:g,open:b,onInsert:v,onFocus:y,onOpen:x,onClose:w,changed:C,focused:T,children:j,inputProps:{renderPreview:A}}=e,{t:M}=L(),S=lc(),N=((t=m==null?void 0:m.options)==null?void 0:t.treeEditing)===!1,D=N||S.legacyEditing,_=b&&(!S.enabled||D),F=((n=m.options)==null?void 0:n.sortable)!==!1,R=m.of,$=l.useRef(null);ac($,b),rn(T,(z,ne)=>{var ee;!z&&ne&&$.current&&((ee=$.current)==null||ee.focus())});const O=g._resolvingInitialValue,V=l.useCallback(()=>{v({items:[{...g,_key:Ao()}],position:"after"})},[v,g]),H=l.useCallback((z,ne)=>{v({items:[qr(ne)],position:z})},[v]),J=Wr(p,!0),q=l.useMemo(()=>J.length===0?null:i.jsx(Yo,{presence:J,maxAvatars:1}),[J]),oe=km(p,!0),ie=l.useMemo(()=>oe.length===0?null:i.jsx(I,{paddingX:1,paddingY:3,children:i.jsx(Gr,{validation:oe,__unstable_showSummary:!0})}),[oe]),te=oe.some(z=>z.level==="error"),X=oe.some(z=>z.level==="warning"),[le,me]=l.useState(null),{insertBefore:G,insertAfter:ce}=np({schemaTypes:R,insertMenuOptions:(a=m.options)==null?void 0:a.insertMenu,onInsert:H,referenceElement:le}),de=l.useMemo(()=>h?null:i.jsxs(i.Fragment,{children:[i.jsx(ze,{ref:me,onOpen:()=>{G.send({type:"close"}),ce.send({type:"close"})},button:i.jsx(wt,{selected:G.state.open||ce.state.open?!0:void 0}),id:`${e.inputId}-menuButton`,menu:i.jsxs(Be,{children:[i.jsx(ye,{text:M("inputs.array.action.remove"),tone:"critical",icon:_t,onClick:f}),i.jsx(ye,{text:M("inputs.array.action.duplicate"),icon:Br,onClick:V}),G.menuItem,ce.menuItem]}),popover:k5}),G.popover,ce.popover]}),[G,ce,V,f,e.inputId,h,M]),pe=j5({readOnly:h,hasErrors:te,hasWarnings:X}),W=i.jsx(dc,{menu:de,presence:q,validation:ie,tone:pe,focused:T,dragHandle:F,selected:b,readOnly:!!h,children:i.jsxs(U,{as:"button",type:"button",tone:"inherit",radius:1,disabled:O,onClick:x,ref:$,onFocus:y,__unstable_focusRing:!0,style:A5,children:[A({schemaType:e.schemaType,value:e.value,layout:"default",skipVisibilityCheck:!0}),O&&i.jsx(It,{fill:!0})]})}),Y=la(u);return i.jsxs(cc,{legacyEditing:N,children:[i.jsx(Kt,{path:p,isChanged:C,hasFocus:!!T,children:i.jsx(I,{paddingX:1,children:W})}),_&&i.jsx(iC,{header:h?M("inputs.array.action.view",{itemTypeTitle:Y}):M("inputs.array.action.edit",{itemTypeTitle:Y}),type:((o=(r=m==null?void 0:m.options)==null?void 0:r.modal)==null?void 0:o.type)||"dialog",width:(c=(d=(s=m==null?void 0:m.options)==null?void 0:s.modal)==null?void 0:d.width)!=null?c:1,id:g._key,onClose:w,autofocus:T,legacy_referenceElement:$.current,children:j})]})}function _5(e){const{menuRef:t,containerRef:n}=e;return i.jsx(Tv.Provider,{value:{menuRef:t,containerRef:n},children:e.children})}function E5({readOnly:e,hasErrors:t,hasWarnings:n}){return e?"transparent":t?"critical":n?"caution":"default"}const I5={portal:!0,tone:"default"};function M5(e){var t,n,a,r,o,s,d,c;const{schemaType:u,parentSchemaType:m,path:p,readOnly:h,onRemove:f,value:g,open:b,onInsert:v,presence:y,validation:x,inputId:w,changed:C,focused:T,children:j,inputProps:{onChange:A,focusPath:M,onPathFocus:S,renderPreview:N,elementProps:D}}=e,_=((t=m.options)==null?void 0:t.sortable)!==!1,F=m.of,R=l.useRef(null),$=l.useRef(null),O=l.useRef(null),{EditReferenceLink:V,getReferenceInfo:H,selectedState:J,isCurrentDocumentLiveEdit:q}=zm({path:p,schemaType:u,value:g});ac(R,b),rn(T,(Le,Me)=>{var ke;!Le&&Me&&R.current&&((ke=R.current)==null||ke.focus())});const oe=e.validation.some(Le=>Le.level==="error"),ie=e.validation.some(Le=>Le.level==="warning"),te=g._resolvingInitialValue,X=l.useCallback(()=>{v({items:[{...g,_key:Ao()}],position:"after"})},[v,g]),le=l.useCallback((Le,Me)=>{v({items:[{...qr(Me),_key:Ao()}],position:Le})},[v]),me=ic(g==null?void 0:g._ref,H),G=g._ref,ce=((n=me.result)==null?void 0:n.type)||((a=g==null?void 0:g._strengthenOnPublish)==null?void 0:a.type),de=G&&((s=(o=(r=me.result)==null?void 0:r.preview)==null?void 0:o.published)==null?void 0:s._id),pe=l.useCallback(()=>{A([u.weak===!0?be(!0,["_weak"]):we(["_weak"]),we(["_strengthenOnPublish"])])},[A,u.weak]),W=ce?u.to.find(Le=>Le.name===ce):void 0,Y=J==="pressed",z=J==="selected",ne=E5({readOnly:h,hasErrors:oe,hasWarnings:ie}),ee=!G||M[0]==="_ref",{t:fe}=L(),Oe=l.useMemo(()=>l.forwardRef(function(Le,Me){return i.jsx(Ma,{...Le,intent:"edit",params:{id:g==null?void 0:g._ref,type:W==null?void 0:W.name},target:"_blank",rel:"noopener noreferrer",ref:Me})}),[W==null?void 0:W.name,g==null?void 0:g._ref]),Se=l.useCallback(()=>{S(G&&ee?[]:["_ref"])},[G,ee,S]),[De,Fe]=l.useState(null),{insertBefore:Qe,insertAfter:ht}=np({schemaTypes:F,insertMenuOptions:(d=m.options)==null?void 0:d.insertMenu,onInsert:le,referenceElement:De}),Q=l.useMemo(()=>h?null:i.jsxs(i.Fragment,{children:[i.jsx(ze,{ref:Fe,onOpen:()=>{Qe.send({type:"close"}),ht.send({type:"close"})},button:i.jsx(wt,{selected:Qe.state.open||ht.state.open?!0:void 0}),id:`${w}-menuButton`,menu:i.jsxs(Be,{ref:$,children:[!h&&i.jsxs(i.Fragment,{children:[i.jsx(ye,{text:fe("inputs.reference.action.remove"),tone:"critical",icon:_t,onClick:f}),i.jsx(ye,{text:fe(G&&ee?"inputs.reference.action.replace-cancel":"inputs.reference.action.replace"),icon:G&&ee?un:um,onClick:Se}),i.jsx(ye,{text:fe("inputs.reference.action.duplicate"),icon:Br,onClick:X}),Qe.menuItem,ht.menuItem]}),!h&&!ee&&G&&i.jsx(en,{}),!ee&&G&&i.jsx(ye,{as:Oe,"data-as":"a",text:fe("inputs.reference.action.open-in-new-tab"),icon:Wi})]}),popover:I5}),Qe.popover,ht.popover]}),[X,Se,G,w,Qe,ht,ee,f,Oe,h,fe]),ue=l.useCallback(()=>{A(u.weak===!0?be(!0,["_weak"]):we(["_weak"]))},[A,u]),se=g!=null&&g._weak?"weak":"strong",he=u.weak===!0?"weak":"strong",_e=G&&!me.isLoading&&(g==null?void 0:g._strengthenOnPublish),Ne=!me.isLoading&&((c=me.result)==null?void 0:c.availability.available)&&G&&se!==he&&!_e,$e=i.jsxs(i.Fragment,{children:[q&&de&&g._strengthenOnPublish&&i.jsx(Ex,{schemaType:u,handleRemoveStrengthenOnPublish:pe}),Ne&&i.jsx(Vm,{actualStrength:se,handleFixStrengthMismatch:ue}),me.error&&i.jsx(Bm,{errorMessage:me.error.message,onHandleRetry:me.retry})]}),Ce=i.jsx(_5,{menuRef:$,containerRef:O,children:i.jsx(dc,{dragHandle:_,readOnly:!!h,presence:!ee&&y.length>0&&i.jsx(Yo,{presence:y,maxAvatars:1}),validation:!ee&&x.length>0&&i.jsx(Gr,{validation:x}),menu:Q,footer:ee?void 0:$e,tone:ee?void 0:ne,focused:T,children:ee?i.jsx(I,{padding:1,ref:O,children:i.jsx(Zl,{title:u.title,description:u.description,__unstable_presence:y,validation:x,inputId:w,deprecated:u.deprecated,children:j})}):i.jsxs(Ix,{as:V,tone:"inherit",radius:2,documentId:g==null?void 0:g._ref,documentType:W==null?void 0:W.name,disabled:te,__unstable_focusRing:!0,selected:z,pressed:Y,"data-selected":z?!0:void 0,"data-pressed":Y?!0:void 0,...D,children:[i.jsx(_x,{value:g,referenceInfo:me,renderPreview:N,type:u}),te&&i.jsx(It,{fill:!0})]})})});return i.jsx(Kt,{path:p,isChanged:C,hasFocus:!!T,children:i.jsx(I,{paddingX:1,children:Ce})})}function P5(e){var t;return(t=e.components)!=null&&t.item?e.components.item:gi(e)?M5:S5}function N5(e){const{children:t}=e,[{error:n,info:a},r]=l.useState({error:null,info:{}}),o=l.useCallback(()=>r({error:null,info:{}}),[]);return n?i.jsx(O5,{error:n,info:a,onRetry:o}):i.jsx(dm,{onCatch:r,children:t})}function O5(e){const{error:t,info:n,onRetry:a}=e;if(t instanceof Fv||t instanceof kT)throw t;const{t:r}=L(),o=l.useMemo(()=>Ke(t)&&typeof t.message=="string"&&t.message,[t]),s=l.useMemo(()=>Ke(t)&&typeof t.stack=="string"&&t.stack,[t]);return l.useMemo(()=>typeof(n==null?void 0:n.componentStack)=="string"&&n.componentStack,[n==null?void 0:n.componentStack]),tS(a),i.jsx(fa,{status:"error",title:i.jsx(i.Fragment,{children:r("form.error.unhandled-runtime-error.title")}),children:i.jsxs(B,{space:4,children:[i.jsx(E,{as:"p",muted:!0,size:1,children:i.jsx(i.Fragment,{children:r("form.error.unhandled-runtime-error.error-message",{message:o})})}),s&&i.jsx(I,{children:i.jsxs(B,{space:2,children:[i.jsx(E,{as:"p",size:1,children:i.jsx(i.Fragment,{children:r("form.error.unhandled-runtime-error.call-stack.title")})}),i.jsx(U,{border:!0,radius:2,overflow:"auto",padding:4,tone:"inherit",children:s&&i.jsx(xn,{size:1,style:{maxHeight:"40vh"},children:s})})]})},"call-stack"),Ya]})})}const F5={isLoading:!0},R5={isLoading:!1};function dw(e){const{enabled:t=!0,ordering:n,schemaType:a,value:r}=e||{},{observeForPreview:o}=gn(),s=l.useMemo(()=>!t||!r||!a?re(R5):o(r,a,{ordering:n}).pipe(K(d=>({isLoading:!1,value:d.snapshot||void 0})),ut(d=>re({isLoading:!1,error:d}))),[t,o,n,r,a]);return Ut(s,F5)}const D5=typeof window>"u"?$t:Sa(window,"orientationchange").pipe(an(1)),$5=typeof window>"u"?$t:Sa(window,"resize").pipe(an(1)),L5=typeof window>"u"?$t:Sa(window,"scroll",{passive:!0,capture:!0}).pipe(an(1)),uw=150;function B5(){return typeof window<"u"&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in IntersectionObserverEntry.prototype?("isIntersecting"in IntersectionObserverEntry.prototype||Object.defineProperty(IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0):!1}const V5=B5()?U5():z5();function U5(){const e=new sn,t=new IntersectionObserver(n=>{n.forEach(a=>{e.next(a)})},{threshold:0,rootMargin:`${uw}px`});return function(n){return new Dn(a=>(t.observe(n),a.next(),()=>t.unobserve(n))).pipe(Ye(()=>e.asObservable()),Ue(a=>a.target===n),K(a=>({isIntersecting:a.isIntersecting})))}}function z5(){function e(){return{left:0,right:window.innerWidth,top:0,bottom:window.innerHeight}}function t(a,r,o){return a.left<=r.right+o&&a.right>=r.left-o&&a.top<=r.bottom+o&&a.bottom>=r.top-o}function n(a){return()=>t(a.getBoundingClientRect(),e(),uw)}return function(a){const r=n(a);return at(re(r()),$5,L5,D5).pipe(K(r),K(o=>({isIntersecting:o})))}}const H5=typeof window>"u"?$t:Sa(document,"visibilitychange").pipe(an(1));function K5(e){const{element:t,hideDelay:n=0}=e,[a,r]=l.useState(!1);return l.useEffect(()=>{if(!t)return;const o=zt(re(!document.hidden),H5.pipe(K(c=>{var u;return c.target instanceof Document?!((u=c==null?void 0:c.target)!=null&&u.hidden):!1}))).pipe(yt()),s=V5(t).pipe(K(c=>c.isIntersecting)),d=o.pipe(Ee(c=>c?s:re(!1)),Ee(c=>c?re(!0):re(!1).pipe(NA(n))),yt()).subscribe(r);return()=>d.unsubscribe()},[t,n]),a}const W5=2e3;function G5(e){return q5(e==null?void 0:e._upload)}function io(e){return $s(e)?e:void 0}function q5(e){var t,n;if(!Ke(e))return;const a=typeof e.progress=="number"?e.progress:0,r=io(e.initiated||e.createdAt),o=io(e.updated||e.updatedAt),s=io((t=e==null?void 0:e.file)==null?void 0:t.name),d=io((n=e==null?void 0:e.file)==null?void 0:n.type),c=io(e.previewImage);if(r&&o&&s&&d)return{progress:a,createdAt:r,updatedAt:o,file:{name:s,type:d},previewImage:c}}function sp(e){const{layout:t,value:n,component:a,style:r,schemaType:o,skipVisibilityCheck:s,...d}=e,{t:c}=L(),[u,m]=l.useState(null),p=K5({element:s?null:u,hideDelay:W5}),h=dw({enabled:s||p,schemaType:o,value:n}),f=l.useMemo(()=>({...r,minWidth:(r==null?void 0:r.minWidth)||1,minHeight:(r==null?void 0:r.minHeight)||1}),[r]),g=l.useMemo(()=>G5(n),[n]),b=l.useMemo(()=>{var v,y;return g!=null&&g.previewImage?i.jsx("img",{alt:c("preview.image.file-is-being-uploaded.alt-text"),src:g.previewImage}):(v=h==null?void 0:h.value)!=null&&v.media?(y=h==null?void 0:h.value)==null?void 0:y.media:o.icon},[h,o,g,c]);return i.jsx("div",{ref:m,style:f,children:l.createElement(a,{...d,...(h==null?void 0:h.value)||{},media:b,error:h==null?void 0:h.error,isPlaceholder:h==null?void 0:h.isLoading,layout:t,schemaType:o})})}function Y5(){return i.jsxs(E,{size:1,children:["This is a example custom marker, please implement ",i.jsx("code",{children:"renderCustomMarkers"})," function."]})}const X5={publish:()=>{},subscribe:()=>(console.warn("No patch channel provided to form-builder. If you need input based patch updates, please provide one"),()=>{})};function J5(e){const{__internal_fieldActions:t=lt,__internal_patchChannel:n=X5,autoFocus:a,changesOpen:r,children:o,collapsedFieldSets:s,collapsedPaths:d,file:c,filterField:u,focusPath:m,focused:p,groups:h,id:f,image:g,onChange:b,onFieldGroupSelect:v,onPathBlur:y,onPathFocus:x,onPathOpen:w,onSetFieldSetCollapsed:C,onSetPathCollapsed:T,presence:j,readOnly:A,renderAnnotation:M,renderBlock:S,renderField:N,renderInlineBlock:D,renderInput:_,renderItem:F,renderPreview:R,schemaType:$,unstable:O,validation:V}=e,H=l.useMemo(()=>({patchChannel:n,components:{ArrayFunctions:Xm,CustomMarkers:(O==null?void 0:O.CustomMarkers)||Y5,Markers:(O==null?void 0:O.Markers)||Gv},field:{actions:t},file:{assetSources:c.assetSources,directUploads:(c==null?void 0:c.directUploads)!==!1},filterField:u||(()=>!0),image:{assetSources:g.assetSources,directUploads:(g==null?void 0:g.directUploads)!==!1},onChange:b}),[t,c.assetSources,c==null?void 0:c.directUploads,u,g.assetSources,g==null?void 0:g.directUploads,b,n,O==null?void 0:O.CustomMarkers,O==null?void 0:O.Markers]),J=l.useMemo(()=>({__internal:H,autoFocus:a,changesOpen:r,collapsedFieldSets:s,collapsedPaths:d,focusPath:m,focused:p,groups:h,id:f,readOnly:A,renderAnnotation:M,renderBlock:S,renderField:N,renderInlineBlock:D,renderInput:_,renderItem:F,renderPreview:R,schemaType:$}),[H,a,r,s,d,m,p,h,f,A,M,S,N,D,_,F,R,$]);return i.jsx(E0.Provider,{value:J,children:i.jsx(Jo,{onChange:b,onFieldGroupSelect:v,onPathBlur:y,onPathFocus:x,onPathOpen:w,onSetPathCollapsed:T,onSetFieldSetCollapsed:C,children:i.jsx(UN,{id:f,children:i.jsx(yI,{presence:j,children:i.jsx(CI,{validation:V,children:i.jsx(PI,{children:o})})})})})})}function Z5(e){const{__internal_fieldActions:t,__internal_patchChannel:n,autoFocus:a,changesOpen:r,children:o,collapsedFieldSets:s,collapsedPaths:d,focusPath:c,focused:u,groups:m,id:p,onChange:h,onPathBlur:f,onPathFocus:g,onPathOpen:b,onFieldGroupSelect:v,onSetPathCollapsed:y,onSetFieldSetCollapsed:x,presence:w,readOnly:C,schemaType:T,validation:j}=e,{file:A,image:M}=mt().form,S=pw(),N=hw(),D=lp(),_=fw(),F=gw(),R=bw(),$=yw(),O=l.useCallback(te=>i.jsx(S,{...te}),[S]),V=l.useCallback(te=>i.jsx(N,{...te}),[N]),H=l.useCallback(te=>i.jsx(_,{...te}),[_]),J=l.useCallback(te=>i.jsx(sp,{component:D,...te}),[D]),q=l.useCallback(te=>i.jsx(F,{...te}),[F]),oe=l.useCallback(te=>i.jsx(R,{...te}),[R]),ie=l.useCallback(te=>i.jsx($,{...te}),[$]);return i.jsx(J5,{__internal_fieldActions:t,__internal_patchChannel:n,autoFocus:a,changesOpen:r,collapsedFieldSets:s,collapsedPaths:d,file:A,focusPath:c,focused:u,groups:m,id:p,image:M,onChange:h,onPathBlur:f,onPathFocus:g,onPathOpen:b,onFieldGroupSelect:v,onSetPathCollapsed:y,onSetFieldSetCollapsed:x,presence:w,readOnly:C,renderAnnotation:ie,renderBlock:q,renderField:V,renderInlineBlock:oe,renderInput:O,renderItem:H,renderPreview:J,schemaType:T,validation:j,children:o})}function Q5(e){const{__internal_fieldActions:t,__internal_patchChannel:n,autoFocus:a,changesOpen:r,collapsedFieldSets:o,collapsedPaths:s,focused:d,focusPath:c,groups:u,id:m,members:p,onChange:h,onFieldGroupSelect:f,onPathBlur:g,onPathFocus:b,onPathOpen:v,onSetFieldSetCollapsed:y,onSetPathCollapsed:x,openPath:w=lt,presence:C,readOnly:T,schemaType:j,validation:A,value:M}=e,S=l.useCallback(ee=>x([ee],!0),[x]),N=l.useCallback(ee=>x([ee],!1),[x]),D=l.useCallback(()=>g(lt),[g]),_=l.useCallback(()=>b(lt),[b]),F=l.useCallback(ee=>h(je.from(ee)),[h]),R=l.useRef(null),$=l.useCallback(ee=>f(lt,ee),[f]),O=l.useCallback(ee=>v([ee]),[v]),V=l.useCallback(()=>v([]),[v]),H=l.useCallback(ee=>y([ee],!0),[y]),J=l.useCallback(ee=>y([ee],!1),[y]),q=pw(),oe=hw(),ie=lp(),te=fw(),X=gw(),le=bw(),me=yw(),G=l.useCallback(ee=>i.jsx(N5,{children:i.jsx(q,{...ee})}),[q]),ce=l.useCallback(ee=>i.jsx(oe,{...ee}),[oe]),de=l.useCallback(({key:ee,...fe})=>i.jsx(te,{...fe},ee),[te]),pe=l.useCallback(ee=>i.jsx(sp,{component:ie,...ee}),[ie]),W=l.useCallback(ee=>i.jsx(X,{...ee}),[X]),Y=l.useCallback(ee=>i.jsx(le,{...ee}),[le]),z=l.useCallback(ee=>i.jsx(me,{...ee}),[me]),ne=l.useMemo(()=>({focusPath:c,elementProps:{ref:R,id:m,onBlur:D,onFocus:_,"aria-describedby":void 0},changed:p.some(ee=>ee.kind==="field"&&ee.field.changed),focused:d,groups:u,id:m,level:0,members:p,onChange:F,onFieldClose:V,onFieldCollapse:S,onFieldSetCollapse:H,onFieldExpand:N,onFieldSetExpand:J,onPathFocus:b,onFieldOpen:O,onFieldGroupSelect:$,path:lt,presence:lt,readOnly:T,renderAnnotation:z,renderBlock:W,renderField:ce,renderInlineBlock:Y,renderInput:G,renderItem:de,renderPreview:pe,schemaType:j,validation:lt,value:M}),[c,d,u,D,F,V,S,H,N,J,_,O,$,m,p,b,T,z,W,ce,Y,G,de,pe,j,M]);return i.jsx(Z5,{__internal_fieldActions:t,__internal_patchChannel:n,autoFocus:a,changesOpen:r,collapsedFieldSets:o,collapsedPaths:s,focusPath:c,focused:d,groups:u,id:m,onChange:h,onPathBlur:g,onPathFocus:b,onPathOpen:v,onFieldGroupSelect:f,onSetPathCollapsed:x,onSetFieldSetCollapsed:y,presence:C,validation:A,readOnly:T,schemaType:j,children:i.jsx(w$,{value:M,children:i.jsx(XN,{value:M,children:i.jsx(fP,{actions:t,children:i.jsx(cc,{children:i.jsx(e6,{rootInputProps:ne,onPathOpen:v,openPath:w,renderInput:G})})})})})})}function e6(e){const{rootInputProps:t,onPathOpen:n,openPath:a,renderInput:r}=e,o=lc(),s=t.id==="root",d=o.enabled&&s&&i.jsx(rD,{onPathFocus:t.onPathFocus,onPathOpen:n,openPath:a,rootInputProps:t,schemaType:t.schemaType});return r({...t,__internal_arrayEditingModal:d})}const t6=k(U)(e=>{const{color:t,radius:n,space:a}=e.theme.sanity,r=ae`
    pointer-events: none;
    content: '';
    position: absolute;
    top: -${a[1]}px;
    bottom: -${a[1]}px;
    left: -${a[1]}px;
    right: -${a[1]}px;
    border-radius: ${n[2]}px;
    mix-blend-mode: ${t.dark?"screen":"multiply"};
  `;return ae`
    box-shadow: 0 0 0 1px var(--card-border-color);
    border-radius: ${n[1]}px;
    pointer-events: all;
    position: relative;

    &[data-focused] {
      --card-border-color: var(--card-focus-ring-color);
    }

    &:not([data-focused]):not([data-selected]) {
      @media (hover: hover) {
        &:hover {
          --card-border-color: ${t.input.default.hovered.border};
        }
      }
    }

    &[data-markers] {
      &:after {
        ${r}
        background-color: ${t.dark?Ge.purple[950].hex:Ge.purple[50].hex};
      }
    }

    &[data-warning] {
      &:after {
        ${r}
        background-color: ${t.muted.caution.hovered.bg};
      }

      @media (hover: hover) {
        &:hover {
          --card-border-color: ${t.muted.caution.hovered.border};
        }
      }
    }

    &[data-invalid] {
      &:after {
        ${r}
        background-color: ${t.input.invalid.enabled.bg};
      }

      @media (hover: hover) {
        &:hover {
          --card-border-color: ${t.input.invalid.hovered.border};
        }
      }
    }
  `}),n6=k(P)`
  display: block;
  position: relative;
  width: 100%;
  user-select: none;
  pointer-events: all;
`,a6=k.div(({theme:e,$hasChanges:t})=>{const{space:n}=e.sanity;return ae`
      position: absolute;
      width: ${n[2]}px;
      right: 0;
      top: 0;
      bottom: 0;
      padding-left: ${n[1]}px;
      padding-right: ${n[2]}px;
      user-select: none;

      ${!t&&ae`
        display: none;
      `}

      [data-dragged] & {
        visibility: hidden;
      }
    `});k(P)`
  position: relative;

  [data-dragged] > & {
    opacity: 0.5;
  }
`;const i6=k(I)`
  width: 25px;
  position: relative;
  flex-shrink: 0;
  user-select: none;

  [data-dragged] & {
    visibility: hidden;
  }
`,r6=k(P)`
  position: absolute;
  right: 0;
  [data-dragged] & {
    visibility: hidden;
  }
`,o6=k(I)`
  max-width: 250px;
`,s6={constrainSize:!0,placement:"bottom",portal:"default",tone:"default"};function l6(e){const{children:t,focused:n,isOpen:a,onOpen:r,onRemove:o,readOnly:s,value:d}=e,{t:c}=L(),u=l.useId(),m=l.useRef(null),p=l.useRef(!1),h=l.useMemo(()=>ji(d)?l.forwardRef(function(g,b){return i.jsx(Ma,{...g,intent:"edit",params:{id:d._ref},ref:b})}):void 0,[d]);l.useEffect(()=>{a&&(p.current=!1)},[a]),Pa(l.useCallback(g=>{n&&g.key==="Tab"&&m.current&&!p.current&&!a&&(g.preventDefault(),g.stopPropagation(),m.current.focus(),p.current=!0)},[n,a]));const f=l.useCallback(g=>{g.preventDefault(),g.stopPropagation(),o()},[o]);return i.jsxs(P,{children:[i.jsx(I,{flex:1,children:t}),i.jsx(I,{children:i.jsx(ze,{button:i.jsx(Z,{"aria-label":c("inputs.portable-text.block.open-menu-aria-label"),icon:$u,mode:"bleed",paddingY:3,tabIndex:n?0:1,tooltipProps:{content:"Open menu"}}),ref:m,id:u,menu:i.jsx(Be,{children:i.jsxs(i.Fragment,{children:["_ref"in d&&d._ref&&i.jsx(ye,{as:h,"data-as":"a",icon:ma,text:c("inputs.portable-text.block.open-reference")}),s&&i.jsx(ye,{icon:bS,onClick:r,text:c("inputs.portable-text.block.view")}),!s&&i.jsx(ye,{icon:Sr,onClick:r,text:c("inputs.portable-text.block.edit")}),!s&&i.jsx(ye,{icon:_t,onClick:f,text:c("inputs.portable-text.block.remove"),tone:"critical"})]})}),popover:s6})})]})}function c6(e){var t;const{floatingBoundary:n,focused:a,isFullscreen:r,onItemClose:o,onItemOpen:s,onPathFocus:d,path:c,readOnly:u,referenceBoundary:m,relativePath:p,renderAnnotation:h,renderBlock:f,renderBlockActions:g,renderCustomMarkers:b,renderField:v,renderInlineBlock:y,renderInput:x,renderItem:w,renderPreview:C,schemaType:T,selected:j,value:A}=e,{onChange:M}=Zn(),{Markers:S}=Na().__internal.components,[N,D]=l.useState(!1),_=Yl(c),F=Bt(),R=tc(Nn(c)),$=l.useRef(!1),O=l.useMemo(()=>({anchor:{path:p,offset:0},focus:{path:p,offset:0}}),[p]),V=l.useCallback(()=>D(!0),[]),H=l.useCallback(()=>D(!1),[]),J=l.useCallback(()=>{R&&(ge.blur(F),s(R.node.path))},[F,R,s]),q=l.useCallback(()=>{o(),ge.select(F,O),ge.focus(F)},[o,F,O]),oe=l.useCallback(()=>{if(!$.current)try{ge.delete(F,O,{mode:"blocks"})}catch(Fe){console.error(Fe)}finally{$.current=!0}},[F,O]);l.useEffect(()=>()=>{$.current&&ge.focus(F)},[F]);const ie=l.useMemo(()=>r&&!g?{paddingX:5}:r&&g?{paddingLeft:5,paddingRight:2}:g?{paddingLeft:3,paddingRight:2}:{paddingX:3},[r,g]),{validation:te,hasError:X,hasWarning:le,hasInfo:me}=ql(R==null?void 0:R.node),G=F.schemaTypes.portableText,ce=_.length>0,de=Wr(c,!0),pe=l.useMemo(()=>de.filter(Fe=>nt(Fe.path,c)),[c,de]),W=X||le||me||ce,Y=l.useMemo(()=>W&&i.jsx(o6,{children:i.jsx(S,{markers:_,validation:te,renderCustomMarkers:b})})||null,[S,_,b,W,te]),z=!!(R!=null&&R.member.open),ne=R==null?void 0:R.input,ee=(R==null?void 0:R.node.path)||lt,fe=(t=R==null?void 0:R.elementRef)==null?void 0:t.current,Oe=l.useMemo(()=>({__unstable_floatingBoundary:n,__unstable_referenceBoundary:m,__unstable_referenceElement:fe||null,children:ne,focused:a,markers:_,onClose:q,onOpen:J,onPathFocus:d,onRemove:oe,open:z,parentSchemaType:G,path:ee,presence:pe,readOnly:!!u,renderAnnotation:h,renderBlock:f,renderDefault:mw,renderField:v,renderInlineBlock:y,renderInput:x,renderItem:w,renderPreview:C,schemaType:T,selected:j,validation:te,value:A}),[n,fe,ne,a,_,q,J,d,oe,z,G,ee,pe,u,m,h,f,v,y,x,w,C,T,j,te,A]),Se=g&&A&&!u,De=r&&R;return l.useMemo(()=>i.jsx(I,{ref:R==null?void 0:R.elementRef,contentEditable:!1,children:i.jsx(P,{"data-object-block":"",paddingBottom:1,marginY:3,style:void 0,children:i.jsxs(n6,{"data-object-block-inner":"",...ie,children:[i.jsx(I,{flex:1,children:i.jsx(Ie,{placement:"top",portal:"editor",disabled:z?!0:!W,content:Y,children:i.jsx("div",{children:f&&f(Oe)})})}),Se&&i.jsx(i6,{contentEditable:!1,marginRight:3,children:i.jsx(r6,{children:a&&i.jsx(GC,{block:A,onChange:M,renderBlockActions:g})})}),De&&i.jsx(a6,{$hasChanges:R.member.item.changed,contentEditable:!1,onMouseEnter:V,onMouseLeave:H,children:i.jsx(WC,{hasFocus:a,isChanged:R.member.item.changed,path:R.member.item.path,withHoverEffect:!1})}),N&&i.jsx(KC,{})]})})}),[Se,De,Oe,a,H,V,ie,R,M,f,g,N,Y,W,A,z])}const mw=e=>{const{__unstable_floatingBoundary:t,__unstable_referenceBoundary:n,__unstable_referenceElement:a,children:r,focused:o,markers:s,onClose:d,onOpen:c,onRemove:u,open:m,readOnly:p,renderPreview:h,schemaType:f,selected:g,value:b,validation:v}=e,{t:y}=L(),x=hS(b),w=v.filter(M=>M.level==="error").length>0,C=v.filter(M=>M.level==="warning").length>0,T=s.length>0,j=g||o?"primary":"default",A=l.useCallback(M=>{M.preventDefault(),M.stopPropagation(),c()},[c]);return i.jsxs(i.Fragment,{children:[i.jsx(t6,{"aria-label":y("inputs.portable-text.block.aria-label"),"data-focused":o?"":void 0,"data-image-preview":x?"":void 0,"data-invalid":w?"":void 0,"data-markers":T?"":void 0,"data-read-only":p?"":void 0,"data-selected":g?"":void 0,"data-testid":"pte-block-object","data-warning":C?"":void 0,flex:1,onDoubleClick:A,padding:x?0:1,tone:j,children:h({actions:i.jsx(l6,{isOpen:m,focused:o,onOpen:c,onRemove:u,readOnly:p,value:b}),layout:x?"blockImage":"block",schemaType:f,skipVisibilityCheck:!0,value:b})}),m&&i.jsx(Dm,{floatingBoundary:t,defaultType:"dialog",onClose:d,autoFocus:o,schemaType:f,referenceBoundary:n,referenceElement:a,children:r})]})};function d6(e){var t;return(t=e.components)!=null&&t.block?e.components.block:Hl(e)?tw:mw}function u6(e){var t;return(t=e.components)!=null&&t.inlineBlock?e.components.inlineBlock:sw}function m6(e){var t;return(t=e.components)!=null&&t.annotation?e.components.annotation:Jd}function Qi(e){const{componentResolver:t,componentProps:n}=e;if(!n.schemaType)throw new Error("the `schemaType` property must be defined");const a=t(n.schemaType),r=l.useCallback(o=>{var s;if(!((s=o.schemaType)!=null&&s.type))throw new Error("Attempted to render form component of non-existent parent type");const{components:d,...c}=o.schemaType,u=t(c);return l.createElement(u,o)},[t]);return l.createElement(a,{...n,renderDefault:r})}function p6(e){return Qi({componentProps:e,componentResolver:w5})}function h6(e){return Qi({componentProps:e,componentResolver:t2})}function f6(e){return Qi({componentProps:e,componentResolver:P5})}function g6(e){return Qi({componentProps:e,componentResolver:T5})}function b6(e){return Qi({componentProps:e,componentResolver:d6})}function y6(e){return Qi({componentProps:e,componentResolver:u6})}function v6(e){return Qi({componentProps:e,componentResolver:m6})}function x6(e){var t,n;return(n=(t=e.form)==null?void 0:t.components)==null?void 0:n.input}function C6(e){var t,n;return(n=(t=e.form)==null?void 0:t.components)==null?void 0:n.field}function w6(e){var t,n;return(n=(t=e.form)==null?void 0:t.components)==null?void 0:n.preview}function T6(e){var t,n;return(n=(t=e.form)==null?void 0:t.components)==null?void 0:n.item}function j6(e){var t,n;return(n=(t=e.form)==null?void 0:t.components)==null?void 0:n.block}function k6(e){var t,n;return(n=(t=e.form)==null?void 0:t.components)==null?void 0:n.inlineBlock}function A6(e){var t,n;return(n=(t=e.form)==null?void 0:t.components)==null?void 0:n.annotation}function pw(){return Ai({defaultComponent:p6,pick:x6})}function hw(){return Ai({defaultComponent:h6,pick:C6})}function lp(){return Ai({defaultComponent:g6,pick:w6})}function fw(){return Ai({defaultComponent:f6,pick:T6})}function gw(){return Ai({defaultComponent:b6,pick:j6})}function bw(){return Ai({defaultComponent:y6,pick:k6})}function yw(){return Ai({defaultComponent:v6,pick:A6})}function vw(e){const t=lp();return i.jsx(sp,{...e,component:t})}const S6={block:ine,blockImage:tne,compact:Tte,default:QT,detail:Ote,inline:cne,media:Yte};function _6(){return i.jsx(Ar,{className:"sanity-studio__preview-fallback-icon"})}function Xn(e){const{icon:t,layout:n,media:a,imageUrl:r,title:o,tooltip:s,...d}=e,c=Xe(qe),u=l.useMemo(()=>jl(c),[c]),m=l.useCallback(v=>{const{dimensions:y}=v;return i.jsx("img",{alt:$s(o)?o:void 0,referrerPolicy:"strict-origin-when-cross-origin",src:u.image(a).width(y.width||100).height(y.height||100).fit(y.fit).dpr(y.dpr||1).url()||""})},[u,a,o]),p=l.useCallback(()=>l.createElement(t||_6),[t]),h=l.useMemo(()=>t===!1?!1:zr.isValidElementType(a)||l.isValidElement(a)?a:Ur(a)?m:$s(r)?i.jsx("img",{src:r,alt:$s(o)?o:void 0,referrerPolicy:"strict-origin-when-cross-origin"}):p,[t,r,a,p,m,o]),f=l.useMemo(()=>({...d,media:h,title:o}),[h,d,o]),g=S6[n||"default"],b=l.createElement(g,f);return s?i.jsx(Ie,{content:s,disabled:!s,fallbackPlacements:["top-end"],placement:"bottom-end",children:i.jsx("div",{children:b})}):b}const xw=["_id","_rev","_type"],E6=[...xw,"_key"],rg={available:!0,reason:"READABLE"},I6={available:!1,reason:"PERMISSION_DENIED"},M6={available:!1,reason:"NOT_FOUND"},P6={title:"Invalid preview config",subtitle:"Check the error log in the console",media:i.jsx(Wt,{})};function Hs(e,t){let n,a={},r=0;return function(...s){return new Dn(d=>{clearTimeout(n),n=setTimeout(o,t);const c={args:s,observer:d,completed:!1},u=r++;return a[u]=c,()=>{c.completed=!0}})};function o(){const s=a;a={};const d=Object.keys(s).filter(u=>{const m=s[u];return m&&!m.completed});if(d.length===0)return;const c=d.map(u=>{const m=s[u];return m&&m.args}).filter(Ft);e(c).subscribe({next(u){u.forEach((m,p)=>{const h=s[d[p]];h&&!h.completed&&h.observer.next(u[p])})},complete(){d.forEach(u=>{const m=s[u];m&&!m.completed&&m.observer.complete()})},error(u){d.forEach(m=>{const p=s[m];p&&!p.completed&&p.observer.error(u)})}})}}const N6=11164;function O6(e){let t=[],n=0;const a=[];for(const r of e)n+r.length+1>=N6&&(a.push(t),t=[],n=0),n+=r.length+1,t.push(r);return a.includes(t)||a.push(t),a}function F6(e,t){return e.push(...t),e}function Cw(e,t){function n(s){const d=kn(s),c=ft(s);return Ht([a(d),a(c)]).pipe(yt(fi),K(([u,m])=>({draft:u,published:m})))}function a(s){return t({_ref:s},[["_rev"]]).pipe(K(d=>Ke(d)&&!!("_rev"in d&&d!=null&&d._rev)),yt(),Ee(d=>d?re(rg):r(s)))}const r=Hs(function(s){const d=[...new Set(On(s))];return Ot(O6(d)).pipe(Ye(o,10),OA(F6,[]),K(c=>s.map(([u])=>c[d.indexOf(u)])))},1);function o(s){return tn(()=>{const d={uri:e.getDataUrl("doc",s.join(",")),json:!0,query:{excludeContent:"true"},tag:"preview.documents-availability"};return e.observable.request(d).pipe(K(c=>{const u=sm(c.omitted||[],m=>m.id);return s.map(m=>{const p=u[m];if(!p)return rg;if(p.reason==="existence")return M6;if(p.reason==="permission")return I6;throw new Error(`Unexpected reason for omission: "${p.reason}"`)})}))})}return{observeDocumentPairAvailability:n}}function ww(e){return Object.keys(e)}function og(e,t,n){return{...e,[t]:n}}function R6(e={}){return t=>new Dn(n=>t.subscribe(n)).pipe(Ee(n=>{const a=ww(n).map(r=>{const o=n[r];return LA(o)?Ot(o).pipe(K(s=>[r,s])):re([r,o])});return e.wait?Ht(a).pipe(K(r=>r.reduce((o,[s,d])=>og(o,s,d),{}))):Ot(a).pipe(dv(),qn((r,[o,s])=>og(r,o,s),{}))}))}function D6(e){return e.reduce((t,n)=>(t[n]=void 0,t),{})}function $6(e,t){return t.filter(n=>!(n[0]in e))}function L6(e){return ji(e)?e._ref:"_id"in e?e._id:void 0}function lu(e,t,n,a){if(!e||typeof e!="object")return re(e);const r=L6(e),o=r?{...e,_id:r}:{...e};o._type==="reference"&&(delete o._type,delete o._ref,delete o._weak,delete o._dataset,delete o._projectId,delete o._strengthenOnPublish);const s=$6(o,t);if(r&&s.length>0){const u=za(s.map(p=>p[0])),m=Q0(e)?{projectId:e._projectId,dataset:e._dataset}:a;return n(r,u,m).pipe(Ee(p=>p===null?re(null):lu({...D6(u),...ji(e)?{...e,...m}:e,...p},t,n,m)))}const d={};t.forEach(u=>{const[m,...p]=u;d[m]||(d[m]=[]),d[m].push(p)});const c=Object.keys(d).reduce((u,m)=>{const p=d[m].filter(h=>h.length>0);return p.length===0?u[m]=Ke(e)?e[m]:void 0:u[m]=lu(e[m],p,n,a),u},o);return re(c).pipe(R6({wait:!0}))}function B6(e){return e.map(t=>typeof t=="string"?t.split("."):t)}function V6(e){const{observeFields:t}=e;return{observePaths(n,a,r){return lu(n,B6(a),t,r)}}}const U6=[["_createdAt"],["_updatedAt"]];function cp(e){const t=e==null?void 0:e.select;return t?(Object.values(t).map(n=>String(n).split("."))||[]).concat(U6):void 0}function z6(e){return Array.isArray(e)&&(e.length===0||e.some(Fn))}function H6(e){const t=Array.isArray(e)&&e.find(Fn);return!t||!t.children?"":t.children.filter(Ua).map(n=>n.text).join("")}const K6=["_id","_type","_upload","_createdAt","_updatedAt"],Pr=[],cu=(()=>{let e={};return{add:(t,n,a)=>{e[t.name]||(e[t.name]=[]),e[t.name].push({error:a,type:t,value:n})},getAll(){return e},clear(){e={}}}})(),W6=Bo(()=>{const e=cu.getAll(),t=On(Object.keys(e).map(n=>{const a=e[n];return wo(a,r=>r.error.message)})).length;t!==0&&(console.groupCollapsed(`%cHeads up! Got ${t===1?"error":`${t} errors`} while preparing data for preview. Click for details.`,"color: #ff7e7c"),Object.keys(e).forEach(n=>{const a=e[n],r=a[0];console.group(`Check the preview config for schema type "${n}": %o`,r.type.preview),wo(a,o=>o.error.message).forEach(o=>{var s;if(o.error.type==="returnValueError"){const d=typeof((s=o.type.preview)==null?void 0:s.prepare)=="function",{value:c,error:u}=o;console.log(`Encountered an invalid ${d?"return value when calling prepare(%o)":"value targeted by preview.select"}:`,c),console.error(u)}if(o.error.type==="prepareError"){const{value:d,error:c}=o;console.log("Encountered an error when calling prepare(%o):",d),console.error(c)}}),console.groupEnd()}),console.groupEnd(),cu.clear())},1e3),ro=e=>t=>{const n=typeof t;return t===null||n==="undefined"||n==="string"||n==="number"||n==="boolean"?Pr:[up("returnValueError",new Error(`The "${e}" field should be a string, number, boolean, undefined or null, instead saw ${dp(t)}`))]},G6={media:()=>Pr,title:ro("title"),subtitle:ro("subtitle"),description:ro("description"),imageUrl:ro("imageUrl"),date:ro("date")};function dp(e,t=!0){if(Ke(e)){const n=Object.keys(e),a=n.length>3?"...":"";return`${t?"object with keys ":""}{${n.slice(0,3).join(", ")}${a}}`}if(Array.isArray(e)){const n=e.length>3?"...":"";return`${t?"array with ":""}[${e.map(a=>dp(a,!1))}${n}]`}return`the ${typeof e} ${e}`}function q6(e,t){if(typeof t>"u")return Pr;const n=G6[e];return n&&n(t)||Pr}function up(e,t){return Object.assign(t,{type:e})}function Y6(e){return!Ci(e)||e===null?[up("returnValueError",new Error(`Invalid return value. Expected a plain object with at least a 'title' field, instead saw ${dp(e)}`))]:Object.entries(e).reduce((t,[n,a])=>[...t,...q6(n,a)],Pr)}function X6(e){return{...e,errors:[...e.errors||[],...Y6(e.returnValue)]}}function J6(e){return ww(e).reduce((t,n)=>{const a=e[n];return{...t,[n]:z6(a)?H6(a):a}},{})}function Tw(e,t,n={}){var a;const r=(a=e.preview)==null?void 0:a.prepare;try{return{returnValue:r?r(t,n):J6(t),errors:Pr}}catch(o){return{returnValue:null,errors:[up("prepareError",o)]}}}function sg(e,t,n){return e.errors.forEach(a=>cu.add(t,n,a)),W6(),P6}function Z6(e){const t=e.options&&typeof e.options=="object"?e.options:!1;if(!t||!("list"in t))return!1;const n=t.list;return Array.isArray(n)}function Q6(e){return Z6(e)?e.options.list.map(t=>cm(t)?t:{title:t,value:t}):void 0}function sl(e,t,n={}){var a,r;const o=typeof((a=t.preview)==null?void 0:a.prepare)=="function",s=((r=t.preview)==null?void 0:r.select)||{},d=Object.keys(s).reduce((m,p)=>{var h;const f="fields"in t?t:null,g=s[p],b=(h=f==null?void 0:f.fields)==null?void 0:h.find(y=>y.name===g),v=b&&Q6(b.type);if(!o&&v){const y=v&&v.find(x=>x.value===ct(e,s[p]));m[p]=y?y.value:ct(e,s[p])}else m[p]=ct(e,s[p]);return m},{}),c=Tw(t,d,n);if(c.errors.length>0)return sg(c,t,d);const u=X6(c);return u.errors.length>0?sg(u,t,d):{...zd(e,K6),...c.returnValue}}function eV(e){return Ci(e)}function tV(e){return Ci(e)}function nV(e){const{observeDocumentTypeFromId:t,observePaths:n}=e;return function a(r,o,s,d){if(Z0(o)){if(!Q0(r))return re({snapshot:void 0});const u={projectId:r._projectId,dataset:r._dataset};return t(r._ref,u).pipe(Ee(m=>{if(m){const p=o.to.find(h=>h.type===m);return a(r,p,{},u)}return re({snapshot:void 0})}))}if(gi(o))return tV(r)?t(r._ref).pipe(Ee(u=>{if(u){const m=o.to.find(p=>p.name===u);return a(r,m)}return re({snapshot:void 0})})):re({snapshot:void 0});const c=cp(o.preview);return c?n(r,c,d).pipe(K(u=>({type:o,snapshot:u&&sl(u,o,s)}))):re({type:o,snapshot:r&&eV(r)?Tw(o,r,s).returnValue:null})}}function aV(e,t){const{observeDocumentPairAvailability:n}=Cw(e,t),a=[["_updatedAt"],["_createdAt"],["_type"]];return{observePathsDocumentPair:r};function r(o,s){const{draftId:d,publishedId:c}=Sv(o);return n(d).pipe(Ee(u=>{if(!u.draft.available&&!u.published.available)return re({id:c,type:null,draft:{availability:u.draft,snapshot:void 0},published:{availability:u.published,snapshot:void 0}});const m=[...s,...a];return Ht([t({_type:"reference",_ref:d},m),t({_type:"reference",_ref:c},m)]).pipe(K(([p,h])=>{const f=Ke(p)&&"_type"in p&&p._type||Ke(h)&&"_type"in h&&h._type||null;return{id:c,type:typeof f=="string"?f:null,draft:{availability:u.draft,snapshot:p},published:{availability:u.published,snapshot:h}}}))}))}}function iV(e){return(t,n)=>t===n?!0:!t||!n||typeof t!="object"||typeof n!="object"?!1:e.every(a=>t[a]===n[a])}const rV=e=>e;function oV(e,t=rV){let n,a;for(let r=0;r<e.length;r++){if(r===0){n=t(e[r]);continue}if(a=t(e[r]),n!==a)return!1;n=a}return!0}function sV(e){return KA(e.reduce((t,[n,a],r)=>{const o=zi(a.join(","),WA).join(".");t[o]||(t[o]={fields:a,ids:[],map:[]});const s=t[o].ids.length;return t[o].ids[s]=n,t[o].map[s]=r,t},{}))}function lV(e){return JSON.stringify(e)}const cV=e=>ZS(e)?`"${e}": @${QS(e)}`:e;function dV({ids:e,fields:t}){const n=[...xw,...t];return`*[_id in [${e.map(lV).join(",")}]][0...${e.length}]{${n.map(cV).join(",")}}`}function uV(e){return`[${e.map(dV).join(",")}][0...${e.length}]`}function mV(e,t){return e.reduce((n,a,r)=>(t[r].map.forEach((o,s)=>{const d=t[r].ids[s],c=a.find(u=>u._id===d);n[o]=c||null}),n),[])}function pV(e){const{observePaths:t,versionedClient:n}=e;let a;const r=()=>{if(!a){const w=Ot(n.listen('*[!(_id in path("_.**"))]',{},{events:["welcome","mutation"],includeResult:!1,visibility:"query",tag:"preview.global"})).pipe(da()),C=w.pipe(Ue(j=>j.type==="welcome"),an({refCount:!0,bufferSize:1}));C.subscribe();const T=w.pipe(Ue(j=>j.type==="mutation"));a={welcome$:C,mutations$:T}}return a};function o(w){const C=r();return at(C.welcome$,C.mutations$.pipe(Ue(T=>T.documentId===w)))}function s(w){return function(C){const T=sV(C);return w.observable.fetch(uV(T),{},{tag:"preview.document-paths"}).pipe(K(j=>mV(j,T)))}}const d=Hs(s(n),100),c=Hs(s(n),1e3);function u(w,C){return o(w).pipe(Ee(T=>T.type==="welcome"||T.visibility==="query"?d(w,C).pipe(Ye(j=>zt(re(j),j===void 0?c(w,C):[]))):c(w,C)))}const m={},p=vl(function(w){const C=n.withConfig(w),T=s(C);return Hs(T,10)},w=>w.dataset+w.projectId),h=1e4,f=Sa(document,"visibilitychange").pipe(Lt(0),K(()=>document.visibilityState==="visible"),Ee(w=>w?mn(0,h):$t),da());function g(w,C,T){return f.pipe(Lt(0)).pipe(Ee(()=>p(T)(w,C)))}function b(w,C,T){let j=null;const A=at(tn(()=>j===null?$t:re(j)),T?g(w,C,T):u(w,C)).pipe(bt(M=>j=M),an({refCount:!0,bufferSize:1}));return{id:w,fields:C,changes$:A}}function v(w,C,T){const j=T?`${T.projectId}:${T.dataset}:${w}`:`$current$-${w}`;j in m||(m[j]=[]);const A=m[j];Ys(C,On(A.map(S=>S.fields))).length>0&&A.push(b(w,C,T));const M=A.filter(S=>S.fields.some(N=>C.includes(N))).map(S=>S.changes$);return Ht(M).pipe(K(S=>S.filter(Boolean)),Ue(S=>oV(S,N=>N._rev)),K(S=>S.length===0?null:y(S,C)),yt(iV(C)))}return{observeFields:v};function y(w,C){return[...E6,...C].reduce((T,j)=>{const A=x(w,j);return A!==void 0&&(T[j]=A),T},{})}function x(w,C){let T;return w.some(j=>C in j?(T=j[C],!0):!1),T}}function hV({client:e}){const t=e.withConfig({apiVersion:"1"}),n=(u,m,p)=>r(u,m,p),{observeFields:a}=pV({observePaths:n,versionedClient:t}),{observePaths:r}=V6({observeFields:a});function o(u,m){return r({_type:"reference",_ref:u},["_type"],m).pipe(K(p=>Ke(p)&&typeof p._type=="string"?p._type:void 0),yt())}const s=nV({observeDocumentTypeFromId:o,observePaths:r}),{observeDocumentPairAvailability:d}=Cw(t,r),{observePathsDocumentPair:c}=aV(t,r);return{observePaths:r,observeForPreview:s,observeDocumentTypeFromId:o,unstable_observeDocumentPairAvailability:d,unstable_observePathsDocumentPair:c}}const fV=e=>e.liveEdit===!0;function pc(e,t,n,a){const r=fV(t)?re({snapshot:null}):e.observeForPreview({_type:"reference",_ref:kn(n)},t),o=e.observeForPreview({_type:"reference",_ref:ft(n)},t);return Ht([r,o]).pipe(K(([s,d])=>({draft:s.snapshot?{title:a,...s.snapshot||{}}:null,isLoading:!1,published:d.snapshot?{title:a,...d.snapshot||{}}:null})),Lt({draft:null,isLoading:!0,published:null}))}const gV=e=>({title:i.jsx("em",{children:e.title?String(e.title):"Missing document"}),subtitle:i.jsx("em",{children:e.title?`Missing document ID: ${e._id}`:`Document ID: ${e._id}`}),media:()=>i.jsx(Wt,{})}),jw=({value:e,draft:t,published:n})=>{const a=t||n;return a?dA({},a,e,(r,o)=>typeof o>"u"?r:o):gV(e)},bV=Ul(([e,t])=>Ot(e.getUser(t).catch(n=>(console.error(n),null))));function Oa(e){const t=bp();return bV(l.useMemo(()=>[t,e],[e,t]))}function Tt(){const{currentUser:e}=mt();return e}const lg=e=>{const t=e.LOCAL,n=e.document.HEAD;return t&&{...t,_type:(n||t)._type,_rev:(n||t)._rev,_updatedAt:new Date().toISOString()}},cg=e=>({type:"snapshot",document:e}),dg=e=>e.document,yV=e=>{const t=new sn,n=new tv(!0),a=new sn,r=new sn,o=new sn,s=new sn,d=y=>{const x=new BA(y);return x.onMutation=({mutation:w,remote:C})=>{a.next({type:"mutation",document:lg(x),mutations:w.mutations,origin:C?"remote":"local"})},x.onRemoteMutation=w=>{o.next({type:"remoteMutation",head:x.document.HEAD,transactionId:w.transactionId,timestamp:w.timestamp,author:w.identity,effects:w.effects})},x.onRebase=(w,C,T)=>{r.next({type:"rebase",document:w,remoteMutations:C,localMutations:T})},x.onConsistencyChanged=w=>{n.next(w)},x.commitHandler=w=>s.next(w),x},c=e.pipe(qn((y,x)=>x.type==="snapshot"?(y&&y.commit(),d(x.document||null)):y===null?(console.warn('Ignoring event of type "%s" since buffered document has not yet been set up with snapshot',x.type),null):y,null),Ue(y=>y!==null),yt(),oa(1),va()),u=e.pipe(Ue(y=>y.type==="mutation"),bo(c),K(([y,x])=>(x.arrive(new sh(y)),lg(x)))),m=t.pipe(bo(c),bt(([y,x])=>{y.type==="mutation"&&x.add(new sh({mutations:y.mutations})),y.type==="commit"&&x.commit()}),Cr($t),da()),p=y=>t.next(y),h=y=>p({type:"mutation",mutations:y}),f=y=>h([y]),g=()=>{c.pipe(hi(1),bt(y=>y.commit())).subscribe()},b=at(c.pipe(K(y=>y.LOCAL)),a.pipe(K(dg)),r.pipe(K(dg)),u).pipe(K(cg),oa(1),va()),v=at(c.pipe(K(y=>y.document.HEAD),K(cg)),o).pipe(oa(1),va());return{updates$:at(b,m,a,r),consistency$:n.pipe(yt(),oa(1),va()),remoteSnapshot$:v,commitRequest$:s,addMutation:f,addMutations:h,commit:g}},vV=e=>t=>{const{_id:n,_rev:a,_updatedAt:r,...o}=t;return{_id:e,...o}},ug=(e,t)=>{const n=yV(t),a=vV(e),r={delete:{id:e}};return{events:n.updates$,consistency$:n.consistency$,remoteSnapshot$:n.remoteSnapshot$,commitRequest$:n.commitRequest$,patch:o=>o.map(s=>({patch:{...s,id:e}})),create:o=>({create:a(o)}),createIfNotExists:o=>({createIfNotExists:a(o)}),createOrReplace:o=>({createOrReplace:a(o)}),delete:()=>r,mutate:o=>n.addMutations(o),commit:()=>n.commit()}},xV={type:"pending",phase:"begin"},CV={type:"pending",phase:"end"};function wV(e){return e.type==="mutation"}function TV(e){return e.transactionTotalEvents>1}function jV(e){const t=om(e.filter(n=>n.type==="mutation"),n=>n.transactionId);return Object.values(t).every(n=>n.length===n[0].transactionTotalEvents)}function kV(e,t,n={}){const{publishedId:a,draftId:r}=t;return tn(()=>e.observable.listen("*[_id == $publishedId || _id == $draftId]",{publishedId:a,draftId:r},{includeResult:!1,events:["welcome","mutation","reconnect"],effectFormat:"mendoza",tag:n.tag||"document.pair-listener"})).pipe(gr(s=>s.type==="welcome"?o().pipe(gr(d=>[mg(r,d.draft),mg(a,d.published)])):re(s)),qn((s,d)=>{if(!wV(d))return{next:[d],buffer:[]};const c=s.buffer.length>0,u=TV(d);if(!u&&!c)return{next:[d],buffer:[]};if(!u)return{next:[],buffer:s.buffer.concat(d)};const m=s.buffer.concat(d);return jV(m)?{next:m.concat(CV),buffer:[]}:{next:m.length===1?[xV]:[],buffer:m}},{next:[],buffer:[]}),Ye(s=>s.next),gr(s=>window.SLOW?mn(1e4).pipe(K(()=>s)):re(s)));function o(){return e.observable.getDocuments([r,a],{tag:"document.snapshots"}).pipe(K(([s,d])=>({draft:s,published:d})))}}function mg(e,t){return{type:"snapshot",documentId:e,document:t}}const pg=e=>t=>t.type!=="reconnect"&&t.type!=="pending"&&t.documentId===e;function js(e){return t=>({...t,version:e})}function AV(e){if(!e._id)throw new Error("Expected document to have an _id")}function SV(e,t){const{resultRev:n,...a}=e;return a.mutations.flatMap(r=>{const o=Object.values(r);if(o.length>1)throw new Error("Did not expect multiple mutations in the same payload");return o[0].id||o[0]._id}).every(r=>r===t)}function _V(e,t){return t.mutations.flatMap(n=>{if(n.createIfNotExists)return[];if(n.create)return AV(n.create),{actionType:"sanity.action.document.create",publishedId:e.publishedId,attributes:n.create,ifExists:"fail"};if(n.patch)return{actionType:"sanity.action.document.edit",draftId:e.draftId,publishedId:e.publishedId,patch:Yn(n.patch,"id")};throw new Error("Cannot map mutation to action")})}function EV(e,t,n){return SV(n,t.publishedId)?kw(e,n):e.observable.action(_V(t,n),{tag:"document.commit",transactionId:n.transactionId})}function kw(e,t){const{resultRev:n,...a}=t;return e.dataRequest("mutate",a,{visibility:"async",returnDocuments:!1,tag:"document.commit",skipCrossDatasetReferenceValidation:!0})}function IV(e,t,n,a){return Ot(a?EV(e,t,n.mutation.params):kw(e,n.mutation.params)).pipe(bt({error:r=>{"statusCode"in r&&typeof r.statusCode=="number"&&r.statusCode>=400&&r.statusCode<=500?n.cancel(r):n.failure(r)},next:()=>n.success()}))}function Aw(e,t,n){const{publishedId:a,draftId:r}=t,o=new sn,s=kV(e,t).pipe(da({connector:()=>o})),d=s.pipe(Ue(h=>h.type==="reconnect")),c=ug(r,s.pipe(Ue(pg(r)))),u=ug(a,s.pipe(Ue(pg(a)))),m=s.pipe(Ue(h=>h.type==="pending")),p=at(c.commitRequest$,u.commitRequest$).pipe(Ye(h=>n.pipe(hi(1),Ye(f=>IV(e,t,h,f)))),Ye(()=>$t),da());return{transactionsPendingEvents$:m,draft:{...c,events:at(p,d,c.events).pipe(K(js("draft"))),consistency$:c.consistency$,remoteSnapshot$:c.remoteSnapshot$.pipe(K(js("draft")))},published:{...u,events:at(p,d,u.events).pipe(K(js("published"))),consistency$:u.consistency$,remoteSnapshot$:u.remoteSnapshot$.pipe(K(js("published")))},complete:()=>o.complete()}}function Za(e,t){const n=Object.create(null);return(...a)=>{const r=t(...a);return r in n||(n[r]=e(...a)),n[r]}}function _i(e,t,n){var a,r;const o=e.config();return`${(a=o.dataset)!=null?a:""}-${(r=o.projectId)!=null?r:""}-${t.publishedId}-${n}`}const mp=Za((e,t,n,a)=>new Dn(r=>{const o=Aw(e,t,a);return r.next(o),o.complete}).pipe(oa(1),va()),_i);function MV(e){return e.type==="snapshot"}function hg(e){return{snapshots$:e.events.pipe(Ue(MV),K(t=>t.document),oa(1),va()),patch:e.patch,create:e.create,createIfNotExists:e.createIfNotExists,createOrReplace:e.createOrReplace,delete:e.delete,mutate:e.mutate,commit:e.commit}}const pp=Za((e,t,n,a)=>mp(e,t,n,a).pipe(K(({published:r,draft:o,transactionsPendingEvents$:s})=>({transactionsPendingEvents$:s,published:hg(r),draft:hg(o)})),oa(1),va()),_i),Qn=(e,t)=>{var n;return((n=e.get(t))==null?void 0:n.liveEdit)===!0},PV={enabled:!0},fg={enabled:!1},Sw=Za((e,t,n)=>{const a=Qn(e.schema,n);return pp(e.client,t,n,e.serverActionsEnabled).pipe(Ee(r=>Ht([r.draft.snapshots$,r.published.snapshots$,r.transactionsPendingEvents$.pipe(K(o=>o.phase==="begin"?PV:fg),Lt(fg))])),K(([r,o,s])=>({id:t.publishedId,type:n,draft:r,published:o,liveEdit:a,ready:!0,transactionSyncLock:s})),Lt({id:t.publishedId,type:n,draft:null,published:null,liveEdit:a,ready:!1,transactionSyncLock:null}),oa(1),va())},(e,t,n)=>_i(e.client,t,n)),_w=Za((e,t,n,a)=>mp(e,t,n,a).pipe(Ee(({draft:r,published:o})=>Ht([r.consistency$,o.consistency$])),K(([r,o])=>r&&o),yt(),oa(1),va()),_i),Ew=Za((e,t,n)=>pp(e.client,t,n,e.serverActionsEnabled).pipe(Ee(a=>Ht([a.draft.snapshots$,a.published.snapshots$,e.serverActionsEnabled]).pipe(K(([r,o,s])=>({...e,serverActionsEnabled:s,idPair:t,typeName:n,snapshots:{draft:r,published:o},draft:a.draft,published:a.published})))),oa(1),va()),(e,t,n)=>_i(e.client,t,n)),Iw={disabled:()=>!1,execute:({draft:e,published:t})=>(e.commit(),t.commit(),$t)},ll={disabled:({snapshots:e})=>e.draft||e.published?!1:"NOTHING_TO_DELETE",execute:({client:e,schema:t,idPair:n,typeName:a})=>{const r=e.observable.transaction().delete(n.publishedId);return Qn(t,a)?r.commit({tag:"document.delete"}):r.delete(n.draftId).commit({tag:"document.delete",skipCrossDatasetReferenceValidation:!0})}},Mw={disabled:({snapshots:e})=>e.draft?e.published?!1:"NOT_PUBLISHED":"NO_CHANGES",execute:({client:e,idPair:t})=>e.observable.transaction().delete(t.draftId).commit({tag:"document.discard-changes"})},NV=["_createdAt","_updatedAt"],Pw={disabled:({snapshots:e})=>e.published||e.draft?!1:"NOTHING_TO_DUPLICATE",execute:({schema:e,client:t,snapshots:n,typeName:a},r)=>{const o=n.draft||n.published;if(!o)throw new Error("cannot execute on empty document");return t.observable.create({...Yn(o,NV),_id:Qn(e,a)?r:kn(r),_type:o._type},{tag:"document.duplicate"})}},Nw={disabled:()=>!1,execute:({schema:e,snapshots:t,idPair:n,draft:a,published:r,typeName:o},s=[],d)=>{Qn(e,o)?r.mutate([r.createIfNotExists({_type:o,...d}),...r.patch(s)]):a.mutate([a.createIfNotExists({...d,...t.published,_id:n.draftId,_type:o}),...a.patch(s)])}};function du(e){return ji(e)?e._strengthenOnPublish?Yn(e,["_strengthenOnPublish"].concat(e._strengthenOnPublish.weak?[]:["_weak"])):e:typeof e!="object"||!e?e:Array.isArray(e)?e.map(du):Object.fromEntries(Object.entries(e).map(([t,n])=>[t,du(n)]))}const Ow={disabled:({schema:e,typeName:t,snapshots:n})=>Qn(e,t)?"LIVE_EDIT_ENABLED":n.draft?!1:n.published?"ALREADY_PUBLISHED":"NO_CHANGES",execute:({client:e,idPair:t,snapshots:n})=>{if(!n.draft)throw new Error('cannot execute "publish" when draft is missing');const a=du(Yn(n.draft,"_updatedAt")),r=e.observable.transaction();if(!n.draft)throw new Error('cannot execute "publish" when draft is missing');return n.published?(r.patch(t.publishedId,{unset:["_revision_lock_pseudo_field_"],ifRevisionID:n.published._rev}),r.createOrReplace({...a,_id:t.publishedId,_type:n.draft._type})):r.create({...a,_id:t.publishedId,_type:n.draft._type}),r.delete(t.draftId),r.commit({tag:"document.publish",visibility:"async"})}},Fw={disabled:()=>!1,execute:({historyStore:e,schema:t,idPair:n,typeName:a},r)=>{const o=Qn(t,a)?n.publishedId:n.draftId;return e.restore(n.publishedId,o,r)}},Rw={disabled:({schema:e,snapshots:t,typeName:n})=>Qn(e,n)?"LIVE_EDIT_ENABLED":t.published?!1:"NOT_PUBLISHED",execute:({client:e,idPair:t,snapshots:n})=>{let a=e.observable.transaction().delete(t.publishedId);return n.published&&(a=a.createIfNotExists({...Yn(n.published,"_updatedAt"),_id:t.draftId,_type:n.published._type})),a.commit({tag:"document.unpublish",visibility:"async",skipCrossDatasetReferenceValidation:!0})}},cl={disabled:({snapshots:e})=>e.draft||e.published?!1:"NOTHING_TO_DELETE",execute:({client:e,schema:t,idPair:n,typeName:a,snapshots:r})=>Qn(t,a)?e.observable.transaction().delete(n.publishedId).commit({tag:"document.delete"}):r.published?e.observable.action({actionType:"sanity.action.document.delete",includeDrafts:r.draft?[n.draftId]:[],publishedId:n.publishedId},{tag:"document.delete",skipCrossDatasetReferenceValidation:!0}):e.observable.action({actionType:"sanity.action.document.discard",draftId:n.draftId},{tag:"document.delete"})},Dw={disabled:({snapshots:e})=>e.draft?e.published?!1:"NOT_PUBLISHED":"NO_CHANGES",execute:({client:e,idPair:t})=>e.observable.action({actionType:"sanity.action.document.discard",draftId:t.draftId},{tag:"document.discard-changes"})},$w={disabled:()=>!1,execute:({schema:e,snapshots:t,idPair:n,draft:a,published:r,typeName:o},s=[],d)=>{if(Qn(e,o)){const m=r.patch(s),p=t.published?m:[r.createIfNotExists({_type:o,...d})];r.mutate(p);return}const c=a.patch(s);if(t.published){a.mutate([a.createIfNotExists({...d,...t.published,_id:n.draftId,_type:o}),...c]);return}const u=t.draft?[]:[a.create({...d,_id:n.draftId,_type:o})];a.mutate([...u,...c])}},Lw={disabled:({schema:e,typeName:t,snapshots:n})=>Qn(e,t)?"LIVE_EDIT_ENABLED":n.draft?!1:n.published?"ALREADY_PUBLISHED":"NO_CHANGES",execute:({client:e,idPair:t,snapshots:n})=>{var a;if(!n.draft)throw new Error('cannot execute "publish" when draft is missing');return e.observable.action({actionType:"sanity.action.document.publish",draftId:t.draftId,publishedId:t.publishedId,ifPublishedRevisionId:(a=n.published)==null?void 0:a._rev},{tag:"document.publish"})}},Bw={disabled:()=>!1,execute:({snapshots:e,historyStore:t,schema:n,idPair:a,typeName:r},o)=>{const s=Qn(n,r)?a.publishedId:a.draftId;return t.restore(a.publishedId,s,o,{fromDeleted:!e.draft&&!e.published,useServerDocumentActions:!0})}},Vw={disabled:({schema:e,snapshots:t,typeName:n})=>Qn(e,n)?"LIVE_EDIT_ENABLED":t.published?!1:"NOT_PUBLISHED",execute:({client:e,idPair:t})=>e.observable.action({actionType:"sanity.action.document.unpublish",draftId:t.draftId,publishedId:t.publishedId},{tag:"document.unpublish",skipCrossDatasetReferenceValidation:!0})};function OV(e){return typeof e>"u"?re(null):e}const Uw={del:ll,delete:ll,publish:Ow,patch:Nw,commit:Iw,discardChanges:Mw,unpublish:Rw,duplicate:Pw,restore:Fw},FV={...Uw,del:cl,delete:cl,discardChanges:Dw,patch:$w,publish:Lw,unpublish:Vw,restore:Bw},RV=(e,t,n,a)=>{const r=a?FV[e]:Uw[e];return tn(()=>at(re(null),OV(r.execute(t,...n)))).pipe(FA())},zw=new sn;function Hw(e,t,n,a){zw.next({operationName:e,idPair:t,typeName:n,extraArgs:a})}const DV=["publish","unpublish","discardChanges","delete"],Kw=Za(e=>{const t=zw.pipe(ev(a=>a.idPair.publishedId),Ye(a=>a.pipe(Ee(r=>Ew(e,r.idPair,r.typeName).pipe(hi(1),Ee(o=>{const s=DV.includes(r.operationName);s&&(o.published.commit(),o.draft.commit());const d=_w(e.client,r.idPair,r.typeName,e.serverActionsEnabled).pipe(Ue(Boolean));return(s?d.pipe(hi(1)):re(!0)).pipe(Ee(()=>RV(r.operationName,o,r.extraArgs,o.serverActionsEnabled)))}),K(()=>({type:"success",args:r})),ut(o=>re({type:"error",args:r,error:o})))))),da()),n=t.pipe(Ue(a=>a.type==="success"&&a.args.operationName==="patch"),Zs(1e3,Qs,{leading:!0,trailing:!0}),gr(a=>window.SLOW?mn(1e4).pipe(K(()=>a)):re(a)),bt(a=>{Hw("commit",a.args.idPair,a.args.typeName,[])}));return at(t,n.pipe(Cr($t)))},e=>{var t,n;const a=e.client.config();return`${(t=a.dataset)!=null?t:""}-${(n=a.projectId)!=null?n:""}${e.serverActionsEnabled?"-serverActionsEnabled":""}`}),$V={isValidating:!0,validation:[]};function LV(e){return uv(e,(t,n)=>(ji(n)&&t.add(n._ref),t),new Set)}const BV=[],VV=(e,t)=>e(t).pipe(K(({published:n})=>n.available)),UV=200,zV=1e3;function nd(){return an({bufferSize:1,refCount:!0})}const HV=Za((e,{draftId:t,publishedId:n},a)=>{const r=Sw(e,{draftId:t,publishedId:n},a).pipe(K(({draft:c,published:u})=>c||u),Zs(UV,Qs,{trailing:!0}),yt((c,u)=>(c==null?void 0:c._rev)===(u==null?void 0:u._rev)?!0:fi(Yn(c,"_rev","_updatedAt"),Yn(u,"_rev","_updatedAt"))),nd()),o=r.pipe(K(c=>LV(c)),Ye(c=>Ot(c))).pipe(ev(c=>c,{duration:()=>mn(1e3*60*30)}),Ye(c=>c.pipe(jA(),Ye(u=>VV(e.observeDocumentPairAvailability,u).pipe(K(m=>[u,m]))))),qn((c,[u,m])=>c[u]===m?c:{...c,[u]:m},{}),yt(fi),nd()),s=({id:c})=>RA(o.pipe(c0(u=>c in u),K(u=>u[c]))),d=o.pipe(r0(1),Zs(zV,Qs,{leading:!0,trailing:!0}));return Ht([r,zt(re(null),d)]).pipe(K(([c])=>c),B0(c=>tn(()=>c!=null&&c._type?zt(re({isValidating:!0,revision:c._rev}),WF({document:c,getClient:e.getClient,getDocumentExists:s,i18n:e.i18n,schema:e.schema,environment:"studio"}).pipe(K(u=>({validation:u,isValidating:!1})))):re({validation:BV,isValidating:!1}))),qn((c,u)=>({...c,...u}),$V),nd())},(e,t,n)=>_i(e.client,t,n)),KV=Za((e,t,n,a)=>mp(e,t,n,a).pipe(Ee(({draft:r,published:o})=>at(r.events,o.events))),_i);function Fa(e){return{disabled:"NOT_READY",execute:()=>{throw new Error(`Called ${e} before it was ready.`)}}}const WV={commit:Fa("commit"),delete:Fa("delete"),del:Fa("del"),publish:Fa("publish"),patch:Fa("patch"),discardChanges:Fa("discardChanges"),unpublish:Fa("unpublish"),duplicate:Fa("duplicate"),restore:Fa("restore")},GV=(e,t,n)=>(...a)=>Hw(e,t,n,a);function Yt(e,t,n){return{disabled:t.disabled(n),execute:GV(e,n.idPair,n.typeName)}}function qV(e){const t={commit:Yt("commit",Iw,e),delete:Yt("delete",ll,e),del:Yt("delete",ll,e),publish:Yt("publish",Ow,e),patch:Yt("patch",Nw,e),discardChanges:Yt("discardChanges",Mw,e),unpublish:Yt("unpublish",Rw,e),duplicate:Yt("duplicate",Pw,e),restore:Yt("restore",Fw,e)};return e.serverActionsEnabled?{...t,delete:Yt("delete",cl,e),del:Yt("delete",cl,e),discardChanges:Yt("discardChanges",Dw,e),patch:Yt("patch",$w,e),publish:Yt("publish",Lw,e),unpublish:Yt("unpublish",Vw,e),restore:Yt("restore",Bw,e)}:t}const YV=Za((e,t,n)=>{const a=Kw(e),r=Ew(e,t,n).pipe(K(qV));return zt(re(WV),at(a.pipe(Ye(()=>$t)),r)).pipe(an({refCount:!0,bufferSize:1}))},(e,t,n)=>_i(e.client,t,n));function Vi(e){return Ci(e)}function hp(e,t){const n={...e,...t};return Object.keys(n).forEach(a=>{const r=t[a],o=e[a];Vi(r)&&Vi(o)&&(n[a]=hp(o,r))}),n}const XV=["_dataset","_projectId","_strengthenOnPublish","_key","_ref","_type","_weak"];function JV(e){return e&&e.length>0?`"${e}"`:e}function gg(e,t){const n=a=>`Template "${t.id}" initial value: ${a}`;if(!Vi(e))throw new Error(n("resolved to a non-object"));if(e._type&&t.schemaType!==e._type)throw new Error(n(`includes "_type"-property (${e._type}) that does not match template (${t.schemaType})`));try{return uu(e)}catch(a){throw a.message=n(a.message),a}}function uu(e,t=[],n=!1){if(Array.isArray(e))return e.map((r,o)=>{if(Array.isArray(r))throw new Error(`multidimensional arrays are not supported (at path "${Je(t)}")`);return uu(r,t.concat(o),!0)});if(!Vi(e))return e;const a=n&&!e._key?{_key:Sl()}:{};return t.length>0&&!e._type&&e._ref&&(a._type="reference"),e._ref&&ZV(e,t),Object.keys(e).reduce((r,o)=>(r[o]=uu(e[o],t.concat([o])),r),a)}function ZV(e,t=[]){if(!e._type&&e.type)throw new Error(`Reference is missing "_type", but has a "type" property at path "${Je(t)}"`);const n=Object.keys(e).filter(a=>!XV.includes(a));if(n.length>0){const a=n.length>1?"properties":"property";throw new Error(`Disallowed ${a} found in reference: ${n.map(JV).join(", ")} at path "${Je(t)}"`)}}function QV(e){return Vi(e)&&typeof e.serialize=="function"}const bg=new WeakMap;async function hc(e,t,n,a){var r;const o=a==null?void 0:a.useCache;if(typeof e=="function"){const s=bg.get(e),d=JSON.stringify([t,n.projectId,n.dataset,(r=n.currentUser)==null?void 0:r.id]);if(o&&s!=null&&s[d])return s[d];const c=e(t,n);return o&&bg.set(e,{...s,[d]:c}),c}return e}async function Ww(e,t,n={},a,r){if(QV(t))return Ww(e,t.serialize(),n,a,r);const{id:o,schemaType:s,value:d}=t;if(!d)throw new Error(`Template "${o}" has invalid "value" property`);let c=await hc(d,n,a,r);if(!Vi(c))throw new Error(`Template "${o}" has invalid "value" property - must be a plain object or a resolver function returning a plain object`);Vi(c)&&!Object.keys(c).length&&(c={_type:s}),c=gg(c,t);const u=e.get(s);if(!u)throw new Error(`Could not find schema type with name "${s}".`);const m=hp(await fc(u,n,fp,a,r)||{},c);return gg(m,t)}function e8(e,t){const n=wn(t);return n==="object"&&e.of.length===1?e.of[0]:e.of.find(a=>a.name===n)}const fp=10;function fc(e,t,n=fp,a,r){return n<=0?Promise.resolve(void 0):pa(e)?n8(e,t,n,a,r):ua(e)?t8(e,t,n,a,r):hc(e.initialValue,t,a,r)}async function t8(e,t,n,a,r){const o=await hc(e.initialValue,void 0,a,r);if(Array.isArray(o))return Promise.all(o.map(async s=>{const d=e8(e,s);return pa(d)?{...s,...await fc(d,t,n-1,a,r),_key:Sl()}:s}))}async function n8(e,t,n,a,r){const o={...await hc(e.initialValue,t,a,r)||{}},s={};await Promise.all(e.fields.map(async c=>{const u=await fc(c.type,t,n-1,a,r);u!=null&&(s[c.name]=u)}));const d=hp(s,o);if(!Vk(d))return e.name!=="object"&&(d._type=e.name),d}const yg={type:"loading"};function a8(e,t,n,a,r){const o=n.observePaths({_type:"reference",_ref:kn(a.documentId)},["_type"]),s=n.observePaths({_type:"reference",_ref:ft(a.documentId)},["_type"]);return at(o.pipe(K(d=>({draft:d}))),s.pipe(K(d=>({published:d})))).pipe(qn((d,c)=>({...d,...c}),{}),Ue(d=>"draft"in d&&"published"in d),K(d=>d.draft||d.published),yt((d,c)=>!!d!=!!c),uA(25)).pipe(Ee(d=>{if(d)return re({type:"success",value:null});if(!a.templateName)return re({isResolving:!1,initialValue:void 0});const c=t.find(m=>m.id===a.templateName);if(!c)return console.warn('Template "%s" not defined, using empty initial value',a.templateName),re({isResolving:!1,initialValue:void 0});const u=Ot(Ww(e,c,a.templateParams,r)).pipe(K(m=>({isResolving:!1,initialValue:m}))).pipe(ut(m=>(console.group("Failed to resolve initial value"),console.error(m),console.error("Template ID: %s",a.templateName),console.error("Parameters: %o",a.templateParams),console.groupEnd(),re({type:"error",error:m}))));return at(re({isResolving:!0}),u).pipe(Ee(({isResolving:m,initialValue:p,resolveError:h})=>h?re({type:"error",message:"Failed to resolve initial value"}):m?re(yg):re({type:"success",value:p})))}),Lt(yg),yt())}const i8=(e,t,n,a)=>tn(()=>e.observable.fetch(t,n,{tag:a.tag,filterResponse:!0,perspective:a.perspective})),r8=(e,t,n,a)=>tn(()=>e.listen(t,n,{events:["welcome","mutation","reconnect"],includeResult:!1,visibility:"query",tag:a.tag}));function vg(e){return e.type==="welcome"}function o8(e,t,n={},a={}){const r=typeof t=="string"?t:t.fetch,o=typeof t=="string"?t:t.listen,s=r8(e,o,n,a).pipe(Ye((p,h)=>h===0&&!vg(p)?Dl(()=>new Error(p.type==="reconnect"?"Could not establish EventSource connection":`Received unexpected type of first event "${p.type}"`)):re(p)),da()),[d,c]=mA(s,vg),u=p=>!a.transitions||p.type!=="mutation"?!0:a.transitions.includes(p.transition),m=()=>i8(e,r,n,a);return at(d.pipe(hi(1)),c.pipe(Ue(u),Zs(a.throttleTime||1e3,Qs,{leading:!0,trailing:!0}))).pipe(B0(p=>p.type==="mutation"&&p.visibility!=="query"?mn(1200).pipe(Ye(m)):m()))}function s8(e,t,n="*"){if(n&&n!=="*")return re(n);const a="*[_id in [$documentId, $draftId]]._type",r=ft(t),o=kn(r);return e.observable.fetch(a,{documentId:r,draftId:o}).pipe(K(s=>s[0]))}function oo(e){if(bm(e))throw new Error("editOpsOf does not expect a draft id.");return{publishedId:e,draftId:kn(e)}}function l8({getClient:e,documentPreviewStore:t,historyStore:n,initialValueTemplates:a,schema:r,i18n:o,serverActionsEnabled:s}){const d=t.unstable_observeDocumentPairAvailability,c=e(qe),u={client:c,getClient:e,observeDocumentPairAvailability:d,historyStore:n,schema:r,i18n:o,serverActionsEnabled:s};return{checkoutPair(m){return Aw(c,m,s)},initialValue(m,p){return a8(r,a,t,m,p)},listenQuery(m,p,h){return o8(c,m,p,h)},resolveTypeForDocument(m,p){return s8(c,m,p)},pair:{consistencyStatus(m,p){return _w(u.client,oo(m),p,s)},documentEvents(m,p){return KV(u.client,oo(m),p,s)},editOperations(m,p){return YV(u,oo(m),p)},editState(m,p){return Sw(u,oo(m),p)},operationEvents(m,p){return Kw({client:c,historyStore:n,schema:r,serverActionsEnabled:s}).pipe(Ue(h=>h.args.idPair.publishedId===m&&h.args.typeName===p),K(h=>{const{operationName:f,idPair:g}=h.args;return h.type==="success"?{type:"success",op:f,id:g.publishedId}:{type:"error",op:f,id:g.publishedId,error:h.error}}))},validation(m,p){return HV(u,oo(m),p)}}}}function c8(){const e=mt(),t=ot(),n=Tt(),a=os(),r=WT(),o=e.getClient;return l.useMemo(()=>({projectId:a,dataset:r,getClient:o,schema:t,currentUser:n}),[o,t,n,a,r])}function gp(){const e=c8();return l.useCallback((t,n)=>fc(t,n,fp,e),[e])}const ad=new WeakMap,Gw=1e3*120,xg=mn(Gw);function d8(e){const{dataset:t}=e.config();return mn(0,Gw).pipe(gr(()=>e.observable.request({uri:`/data/actions/${t}`,withCredentials:!0}).pipe(K(n=>n.actions),pA({first:2e3,with:()=>re(!1)}),ut(()=>re(!1)))),da({connector:()=>new hA(1),resetOnComplete:()=>xg,resetOnRefCountZero:()=>xg}))}const qw=e=>(ad.has(e)||ad.set(e,d8(e)),ad.get(e));function u8(e,t){const n=e.get(t);if(!n)throw new Error(`No such schema type: ${t}`);return n}function m8({grantsStore:e,permission:t,draft:n,published:a,liveEdit:r}){const o=n||a,s=o===n?"draft":"published",{checkDocumentPermission:d}=e;switch(t){case"delete":return r?[["delete published document (live-edit)",d("update",a)]]:[["delete draft document",d("update",n)],["delete published document",d("update",a)]];case"discardDraft":return r?[]:[["delete draft document",d("update",n)]];case"publish":return r?[]:[["update published document at its current state",d("update",a)],["delete draft document",d("update",n)],["create published document from draft",d("create",n&&{...n,_id:ft(n._id)})]];case"unpublish":return r?[]:[["update draft document at its current state",d("create",n)],["delete published document",d("update",a)],["create draft document from published version",d("create",a&&{...a,_id:kn(a._id)})]];case"update":return r?[["update published document (live-edit)",d("update",a)]]:[[`update ${s} document`,d("update",o)]];case"duplicate":return r?[["create new published document from existing document (live-edit)",d("create",{...a,_id:"dummy-id"})]]:[[`create new draft document from existing ${s} document`,d("create",{...o,_id:kn("dummy-id")})]];default:throw new Error(`Could not match permission: ${t}`)}}function p8({client:e,grantsStore:t,schema:n,id:a,permission:r,type:o,serverActionsEnabled:s}){if(o==="*")return re({granted:!1,reason:"Type specified was `*`"});const d=!!u8(n,o).liveEdit;return pp(e,{draftId:kn(a),publishedId:ft(a)},o,s).pipe(Ee(c=>Ht([c.draft.snapshots$,c.published.snapshots$]).pipe(K(([u,m])=>({draft:u,published:m})))),Ee(({draft:c,published:u})=>{const m=m8({grantsStore:t,permission:r,draft:c,published:u,liveEdit:d}).map(([p,h])=>h.pipe(K(({granted:f,reason:g})=>({granted:f,reason:f?"":`not allowed to ${p}: ${g}`,label:p,permission:r}))));return m.length?Ht(m).pipe(K(p=>{const h=p.every(g=>g.granted),f=h?"":`Unable to ${r}:
	${p.filter(g=>!g.granted).map(g=>g.reason).join(`
	`)}`;return{granted:h,reason:f}})):re({granted:!0,reason:""})}))}const h8=Ul(p8);function Yw({id:e,type:t,permission:n,client:a,schema:r,grantsStore:o}){var s;const d=Xe(qe),c=ot(),u=kU(),m=Dt(),p=l.useMemo(()=>a||d,[d,a]),h=l.useMemo(()=>r||c,[c,r]),f=l.useMemo(()=>o||u,[u,o]),g=l.useMemo(()=>{var b;const v=(b=m.__internal_serverDocumentActions)==null?void 0:b.enabled;return typeof v=="boolean"?re(v):qw(p)},[p,(s=m.__internal_serverDocumentActions)==null?void 0:s.enabled]);return h8(l.useMemo(()=>({client:p,schema:h,grantsStore:f,id:e,permission:n,type:t,serverActionsEnabled:g}),[p,f,e,n,h,t,g]))}function f8(e,t=UA){return n=>{const a=n;let r=null,o=null;const s=new sn,d=s.pipe(qn((c,u)=>c+u,0),Ee(c=>c===0?mn(e,t).pipe(bt(()=>{r&&(r.unsubscribe(),r=null),o&&(o.unsubscribe(),o=null)})):!r&&c>0?mn(0,t).pipe(bt(()=>{r||(r=a.connect())})):lm));return VA(()=>(o||(o=d.subscribe()),s.next(1),{unsubscribe:()=>s.next(-1)}),()=>n)}}const Cg="_debug_",g8=typeof window>"u"?re({}):Sa(window,"hashchange"),Xw=zt(re(0),g8).pipe(K(()=>typeof document>"u"?"#":document.location.hash),yt(),K(e=>e.slice(1).split(";").filter(t=>t.toLowerCase().startsWith(Cg)).map(t=>t.slice(Cg.length)))),b8=Xw.pipe(K(e=>e.find(t=>t.startsWith("roles="))),K(e=>(e==null?void 0:e.split("roles=")[1].split(",").map(t=>t.trim()))||[])),y8=[{filter:'_id in path("**")',permissions:["read","create","history","update"]}],wg=[{filter:'_id in path("**")',permissions:["read","create","history","update"]}],v8=[{filter:'_id in path("**")',permissions:["read","create","history","update"]}],x8=[{filter:'_id in path("**")',permissions:["read"]},{filter:'_id in path("drafts.**")',permissions:["create","history","update"]}],Tg=[{filter:'_id in path("**")',permissions:["read","history"]}],C8=[{filter:"!locked",permissions:["read","create","update"]}],w8=[{filter:'_id in path("drafts.**") && _type in ["stringsTest", "book", "author", "referenceTest"]',permissions:["read","create","history","update"]},{filter:'_id in path("**")',permissions:["read"]}],jg={administrator:y8,editor:wg,developer:v8,contributor:x8,viewer:Tg,restricted:w8,requiresApproval:C8,read:Tg,write:wg},T8=b8.pipe(K(e=>e.length?e.filter(t=>!!t&&t in jg).flatMap(t=>jg[t]||[]):null));async function j8(e,t,n){return await e.request({uri:`/projects/${t}/datasets/${n}/acl`,tag:"acl.get",withCredentials:!0})}function k8(e){const t={};return e!==null&&(t.identity=e),t}const id=new Map;async function A8(e,t,n){id.has(t)||id.set(t,Uk(`*[${t}]`));const a=id.get(t),r=k8(e),{identity:o}=r,s={...r},d=await(await zk(a,{dataset:[n],identity:o,params:s})).get();return(d==null?void 0:d.length)===1}function S8(e){var t;const{client:n}=e,a=n.withConfig({apiVersion:"2021-06-07"}),r="userId"in e?e.userId:((t=e==null?void 0:e.currentUser)==null?void 0:t.id)||null,o=tn(()=>re(a.config())).pipe(Ee(({projectId:d,dataset:c})=>{if(!d||!c)throw new Error("Missing projectId or dataset");return j8(a,d,c)})),s=T8.pipe(Ee(d=>d?re(d):o),oa(1),f8(1e3));return{checkDocumentPermission(d,c){return s.pipe(Ee(u=>Jw(r,u,d,c)),yt(fi))}}}async function Jw(e,t,n,a){if(!a)return{granted:!0,reason:"Null document, nothing to check"};if(!t.length)return{granted:!1,reason:"No document grants"};const r=[];for(const s of t)await A8(e,s.filter,a)&&r.push(s);const o=r.some(s=>s.permissions.some(d=>d===n));return{granted:o,reason:o?"Matching grant":"No matching grants found"}}function _8(e){return e==="create"||e==="editDraft"}const E8=5*60*1e3;function I8(e,t){return Date.parse(t)-Date.parse(e)<E8}function kg(e,t){if(e.end!==t.start)throw new Error("chunks are not next to each other");const n=Sg(e.draftState,t.draftState),a=Sg(e.publishedState,t.publishedState);if(e.type==="delete"&&t.type==="editDraft")return[e,{...t,type:"create",draftState:n,publishedState:a}];if(t.type==="delete"){if(n==="missing"&&a==="present")return[e,{...t,type:"discardDraft",draftState:n,publishedState:a}];if(n==="present"&&a==="missing")return[e,{...t,type:"unpublish",draftState:n,publishedState:a}]}if(_8(e.type)&&t.type==="editDraft"&&I8(e.endTimestamp,t.startTimestamp)){const r=new Set;for(const o of e.authors)r.add(o);for(const o of t.authors)r.add(o);return{index:0,id:t.id,type:e.type,start:e.start,end:t.end,startTimestamp:e.startTimestamp,endTimestamp:t.endTimestamp,authors:r,draftState:n,publishedState:a}}return[e,{...t,draftState:n,publishedState:a}]}function Ag(e){const t=!!e;return e&&mu(e==null?void 0:e.apply)?"deleted":t?"upsert":"unedited"}function M8(e){const t=Ag(e.draftEffect),n=Ag(e.publishedEffect);if(n==="unedited"){if(t==="deleted")return"delete";if(t==="upsert")return"editDraft"}if(n==="deleted")return"delete";if(n==="upsert"){if(t==="unedited")return"editLive";if(t==="deleted")return"publish";if(t==="upsert")return"editLive"}return"editLive"}function rd(e){const t=!!e.draftEffect,n=!!e.publishedEffect,a=e.draftEffect&&mu(e.draftEffect.apply),r=e.publishedEffect&&mu(e.publishedEffect.apply),o=M8(e);return{index:0,id:e.id,type:o,start:e.index,end:e.index+1,startTimestamp:e.timestamp,endTimestamp:e.timestamp,authors:new Set([e.author]),draftState:t?a?"missing":"present":"unknown",publishedState:n?r?"missing":"present":"unknown"}}function Sg(e,t){return t==="unknown"?e:t}function mu(e){return e[0]===0&&e[1]===null}function P8(e,t){return e&&t?e.author===t.author&&e.chunk===t.chunk:!e&&!t}function _g(e){return e.draft||e.published}var N8=Object.defineProperty,O8=(e,t,n)=>t in e?N8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nt=(e,t,n)=>O8(e,typeof t!="symbol"?t+"":t,n);class F8{constructor(t,n,a,r){Nt(this,"type","array"),Nt(this,"value"),Nt(this,"length"),Nt(this,"annotation"),Nt(this,"extractor"),Nt(this,"content"),Nt(this,"elements",[]),this.content=t,this.value=n,this.annotation=a,this.extractor=r,this.length=t.elements.length}at(t){if(t>=this.length)throw new Error("out of bounds");return this.elements[t]||(this.elements[t]=dl(this.content.elements[t],this.value[t],this.extractor))}annotationAt(t){const n=this.content.metas[t];return this.extractor.fromMeta(n)}}class R8{constructor(t,n,a,r){Nt(this,"type","object"),Nt(this,"value"),Nt(this,"keys"),Nt(this,"annotation"),Nt(this,"extractor"),Nt(this,"content"),Nt(this,"fields",{}),this.content=t,this.value=n,this.annotation=a,this.extractor=r,this.keys=Object.keys(t.fields)}get(t){const n=this.fields[t];if(n)return n;const a=this.content.fields[t];if(a)return this.fields[t]=dl(a,this.value[t],this.extractor)}}class D8{constructor(t,n,a,r){Nt(this,"type","string"),Nt(this,"value"),Nt(this,"annotation"),Nt(this,"extractor"),Nt(this,"content"),this.content=t,this.value=n,this.annotation=a,this.extractor=r}sliceAnnotation(t,n){const a=[];let r=0;function o(s,d){if(a.length>0){const c=a[a.length-1];if(P8(c.annotation,d)){c.text+=s;return}}a.push({text:s,annotation:d})}for(const s of this.content.parts){const d=s.value.length,c=Math.max(0,t-r);if(c<d){const u=Math.min(d,n-r);if(u<=0)break;o(s.value.slice(c,u),this.extractor.fromValue(s))}r+=d}return a}}function dl(e,t,n){const a=n.fromValue(e);if(e.content)switch(e.content.type){case"array":return new F8(e.content,t,a,n);case"object":return new R8(e.content,t,a,n);case"string":return new D8(e.content,t,a,n)}return GA(t,a)}function Eg(e,t,n){return n?pu(e,n.transactionIndex+1,n.chunk.index):t?pu(e,t.start,t.index):null}function Ig(e,t){return t?pu(e,t.transactionIndex,t.chunk.index):null}function pu(e,t,n){const a=e.transactionByIndex(t);if(!a)return null;const r=e.chunkByTransactionIndex(t,n);return r?{chunk:r,timestamp:a.timestamp,author:a.author}:null}function $8(e,t,n,a,r,o){const s=dl(n,a,{fromValue(c){return Eg(e,t,c.endMeta)},fromMeta(c){return Eg(e,t,c)}}),d=dl(r,o,{fromValue(c){return Ig(e,c.startMeta)},fromMeta(c){return Ig(e,c)}});return zA(s,d)}var L8=Object.defineProperty,B8=(e,t,n)=>t in e?L8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mg=(e,t,n)=>B8(e,typeof t!="symbol"?t+"":t,n);class ks{constructor(){Mg(this,"_postive",[]),Mg(this,"_negative",[])}addToEnd(t){t.index=this._postive.length,this._postive.push(t)}addToBeginning(t){if(this.length==0){this.addToEnd(t);return}t.index=-(this._negative.length+1),this._negative.push(t)}mergeAtEnd(t,n){if(this.length===0){this.addToEnd(t);return}const a=this.lastIdx,r=n(this.get(a),t);Array.isArray(r)?(this.set(a,r[0]),this.addToEnd(r[1])):this.set(a,r)}mergeAtBeginning(t,n){if(this.length===0){this.addToEnd(t);return}const a=this.firstIdx,r=n(t,this.get(a));Array.isArray(r)?(this.set(a,r[1]),this.addToBeginning(r[0])):this.set(a,r)}removeFromEnd(){this._postive.length===0?this._negative.shift():this._postive.pop()}has(t){return t>=0?t<this._postive.length:-(t+1)<this._negative.length}get(t){return t>=0?this._postive[t]:this._negative[-(t+1)]}set(t,n){t>=0?(n.index=t,this._postive[t]=n):(n.index=t,this._negative[-(t+1)]=n)}get lastIdx(){return this._postive.length-1}get last(){return this.get(this.lastIdx)}get firstIdx(){return-this._negative.length}get first(){return this.get(this.firstIdx)}get length(){return this._postive.length+this._negative.length}}var V8=Object.defineProperty,U8=(e,t,n)=>t in e?V8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ni=(e,t,n)=>U8(e,typeof t!="symbol"?t+"":t,n);class z8{constructor(t){ni(this,"reachedEarliestEntry",!1),ni(this,"publishedId"),ni(this,"draftId"),ni(this,"_transactions",new ks),ni(this,"_chunks",new ks),ni(this,"_possiblePendingTransactions",new Map),ni(this,"_recreateTransactionsFrom"),ni(this,"_trace"),this.publishedId=t.publishedId,this.draftId=`drafts.${t.publishedId}`,t.enableTrace&&(this._trace=[],this._trace.push({type:"initial",publishedId:t.publishedId}),window.__sanityTimelineTrace=this._trace)}get chunkCount(){return this._chunks.length}mapChunks(t){const n=[],a=this._chunks.firstIdx,r=this._chunks.lastIdx;for(let o=r;o>=a;o--)n.push(t(this._chunks.get(o),o));return n}reset(){this._transactions=new ks,this._chunks=new ks,this._possiblePendingTransactions=new Map,this._recreateTransactionsFrom=void 0,this.reachedEarliestEntry=!1}addRemoteMutation(t){this._trace&&this._trace.push({type:"addRemoteMutation",event:t});const n=this._possiblePendingTransactions.get(t.transactionId),a=n?n.transaction:{index:0,id:t.transactionId,timestamp:t.timestamp.toISOString(),author:t.author};t.version==="draft"?a.draftEffect=t.effects:a.publishedEffect=t.effects,n?(this._possiblePendingTransactions.delete(t.transactionId),this._invalidateTransactionFrom(n.idx)):(this._transactions.addToEnd(a),this._possiblePendingTransactions.set(t.transactionId,{transaction:a,idx:this._transactions.lastIdx}))}addTranslogEntry(t){this._trace&&this._trace.push({type:"addTranslogEntry",event:t}),this._transactions.addToBeginning({index:0,id:t.id,author:t.author,timestamp:t.timestamp,draftEffect:t.effects[this.draftId],publishedEffect:t.effects[this.publishedId]})}didReachEarliestEntry(){this._trace&&this._trace.push({type:"didReachEarliestEntry"}),this.reachedEarliestEntry=!0}updateChunks(){this._trace&&this._trace.push({type:"updateChunks"}),this._removeInvalidatedChunks(),this._addChunksFromTransactions(),this._createInitialChunk()}_removeInvalidatedChunks(){if(this._recreateTransactionsFrom){for(;this._chunks.length>0;){const t=this._chunks.last;if(this._recreateTransactionsFrom<t.end)this._chunks.removeFromEnd();else break}this._recreateTransactionsFrom=void 0}}_addChunksFromTransactions(){const t=this._transactions.firstIdx,n=this._transactions.lastIdx,a=this._chunks.length>0?this._chunks.last.end:t;for(let o=a;o<=n;o++){const s=this._transactions.get(o);this._chunks.mergeAtEnd(rd(s),kg)}if(this._chunks.length==0)return;const r=this._chunks.first.start;for(let o=r-1;o>=t;o--){const s=this._transactions.get(o);this._chunks.mergeAtBeginning(rd(s),kg)}}_invalidateTransactionFrom(t){(this._recreateTransactionsFrom===void 0||t<this._recreateTransactionsFrom)&&(this._recreateTransactionsFrom=t)}_createInitialChunk(){var t;if(this.reachedEarliestEntry){if(((t=this._chunks.first)==null?void 0:t.type)==="initial")return;const n=this._transactions.first;if(!n)return;const a=rd(n);a.type="initial",a.id="@initial",a.end=a.start,this._chunks.addToBeginning(a)}}parseTimeId(t){if(this._chunks.length===0)return this.reachedEarliestEntry?"invalid":"loading";const n=t.split("/",3),a=n.shift(),r=n.shift(),o=Number(a);for(let s=this._chunks.lastIdx;s>=this._chunks.firstIdx;s--){const d=this._chunks.get(s);if(d.id===r)return d;if(Date.parse(d.endTimestamp)+60*60*1e3<o)return"invalid"}return this.reachedEarliestEntry?"invalid":"loading"}findLastPublishedBefore(t){for(let n=t?t.index-1:this._chunks.lastIdx;n>=this._chunks.firstIdx;n--){const a=this._chunks.get(n);if(a.type==="publish"||a.type==="initial")return a}return this.reachedEarliestEntry?this._chunks.first:"loading"}isLatestChunk(t){return t===this._chunks.last}createTimeId(t){return`${t.endTimestamp.valueOf()}/${t.id}`}lastChunk(){return this._chunks.last}transactionByIndex(t){return this._transactions.has(t)?this._transactions.get(t):null}chunkByTransactionIndex(t,n=0){let a=n;for(;;){const r=this._chunks.get(a);if(!r)throw new Error("transaction does not belong in any chunk");if(t>=r.end)a++;else if(t<r.start)a--;else return r}}replayBackwardsBetween(t,n,a){let r=a.draft,o=a.published;for(let s=n;s>=t;s--){const d=this._transactions.get(s);d.draftEffect&&(r=el(r,d.draftEffect.revert)),d.publishedEffect&&(o=el(o,d.publishedEffect.revert))}return{draft:r,published:o}}replayBackwardsUntil(t,n){return this.replayBackwardsBetween(t,this._transactions.lastIdx,n)}calculateDiff(t,n,a,r){let o=ta.wrap(t.draft,null),s=ta.wrap(t.published,null);const d=H8(o,s),c=_g(t);let u=null;for(let h=a;h<=r;h++){const f=this._chunks.get(h);u||(u=f);for(let g=f.start;g<f.end;g++){const b=this._transactions.get(g),v={chunk:f,transactionIndex:g},y=o,x=s;b.draftEffect&&(o=ta.applyPatch(o,b.draftEffect.apply,v)),b.publishedEffect&&(s=ta.applyPatch(s,b.publishedEffect.apply,v));const w=ta.getType(y)!=="null",C=ta.getType(o)!=="null";ta.getType(s)!=="null"&&!C&&(s=ta.rebaseValue(y,s)),C&&!w&&(o=ta.rebaseValue(x,o))}}const m=ta.getType(o)==="null"?s:o,p=_g(n);return $8(this,u,d,c,m,p)}}function H8(e,t){return ta.getType(e)==="null"?t:e}var K8=Object.defineProperty,W8=(e,t,n)=>t in e?K8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,od=(e,t,n)=>W8(e,typeof t!="symbol"?t+"":t,n);function Pg(e){return{id:e,hasAttrs:!1,attrs:null,rev:null,events:[],aligned:!1}}function G8(e,t){const n=t.events.findIndex(a=>e.id===a.transactionId);return n>=0?n+1:t.rev?t.rev===e.id?0:-1:0}function Ng(e,t){if(e.hasAttrs=!0,t){if(e.attrs={...t},typeof e.attrs._rev!="string")throw new Error("snapshot has no _rev");e.rev=e.attrs._rev,delete e.attrs._rev}else e.attrs=null,e.rev=null;e.events=[]}class q8{constructor(t){od(this,"timeline"),od(this,"earliestTransactionId",null),od(this,"_states"),this.timeline=t,this._states={draft:Pg(t.draftId),published:Pg(t.publishedId)}}appendRemoteSnapshotEvent(t){const n=this._states[t.version];if(t.type==="snapshot"){this._maybeInvalidateHistory(),Ng(n,t.document);return}t.type==="remoteMutation"&&(n.aligned?(this._apply(n,t),this.timeline.addRemoteMutation(t)):n.hasAttrs?n.events.push(t):Ng(n,t.head))}prependHistoryEvent(t){if(!this.acceptsHistory)throw new Error("cannot prepend history at this point");for(const n of Object.values(this._states))if(!n.aligned){const a=G8(t,n);a>=0&&this._alignAtIndex(n,a)}this.timeline.addTranslogEntry(t),this.earliestTransactionId=t.id}didReachEarliestEntry(){for(const t of Object.values(this._states))if(!t.aligned){if(t.attrs!==null)throw new Error("unable to find translog entry to align to");this._alignAtIndex(t,0)}this.timeline.didReachEarliestEntry()}get isAligned(){return Object.values(this._states).every(t=>t.aligned)}get acceptsHistory(){return this._isComplete}get currentDocument(){return{draft:this._states.draft.attrs,published:this._states.published.attrs}}_alignAtIndex(t,n){for(const a of t.events.slice(0,n))this._apply(t,a);for(const a of t.events.slice(n))this._apply(t,a),this.timeline.addRemoteMutation(a);t.events=[],t.aligned=!0}get _isComplete(){return Object.values(this._states).every(t=>t.hasAttrs)}_apply(t,n){t.attrs=el(t.attrs,n.effects.apply),t.rev=n.transactionId}_maybeInvalidateHistory(){if(this._isComplete){for(const t of Object.values(this._states))t.aligned=!1;this.earliestTransactionId=null,this.timeline.reset()}}}async function Zw(e,t){const n=t?{headers:{Authorization:`Bearer ${t}`}}:{credentials:"include"},a=await fetch(e,n);return Y8(a)}function Y8(e){const t=e.body;if(!t)throw new Error("Failed to read body from response");let n,a=!1;return new ReadableStream({start(r){n=t.getReader();const o=new TextDecoder;let s="";n.read().then(function d(c){if(c.done){if(a)return;if(s=s.trim(),s.length===0){r.close();return}r.enqueue(JSON.parse(s)),r.close();return}s+=o.decode(c.value,{stream:!0});const u=s.split(`
`);for(let m=0;m<u.length-1;++m){const p=u[m].trim();if(p.length!==0)try{r.enqueue(JSON.parse(p))}catch(h){r.error(h),a=!0,n.cancel();return}}return s=u[u.length-1],n.read().then(d).catch(m=>r.error(m))}).catch(d=>r.error(d))},cancel(){a=!0,n.cancel()}})}var X8=Object.defineProperty,J8=(e,t,n)=>t in e?X8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mi=(e,t,n)=>J8(e,typeof t!="symbol"?t+"":t,n);class Z8{constructor(t,n,a,r){Mi(this,"timeline"),Mi(this,"start"),Mi(this,"end"),Mi(this,"doc"),Mi(this,"_startDocument"),Mi(this,"_endDocument"),Mi(this,"_diff"),this.timeline=t,this.start=a,this.end=r,this.doc=n}same(t,n){return this.start===t&&this.end===n}endAttributes(){return Og(this.endDocument())}endDocument(){return this._endDocument||(this._endDocument=this.timeline.replayBackwardsUntil(this.end.end,this.doc)),this._endDocument}startAttributes(){return Og(this.startDocument())}startDocument(){if(!this.start)throw new Error("start required");return this._startDocument||(this._startDocument=this.timeline.replayBackwardsBetween(this.start.end,this.end.end-1,this.endDocument())),this._startDocument}diff(){if(!this._diff){if(!this.start)throw new Error("start required");this._diff=this.timeline.calculateDiff(this.startDocument(),this.endDocument(),this.start.index+1,this.end.index)}return this._diff}}function Og(e){return e.draft||e.published}var Q8=Object.defineProperty,eU=(e,t,n)=>t in e?Q8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xt=(e,t,n)=>eU(e,typeof t!="symbol"?t+"":t,n);const tU=50;class nU{constructor(t){Xt(this,"timeline"),Xt(this,"client"),Xt(this,"handler"),Xt(this,"version",0),Xt(this,"selectionState","inactive"),Xt(this,"_aligner"),Xt(this,"_fetchMore",!1),Xt(this,"_fetchAtLeast",0),Xt(this,"_isRunning",!1),Xt(this,"_isSuspended",!1),Xt(this,"_didErr",!1),Xt(this,"_since",null),Xt(this,"_sinceTime",null),Xt(this,"_rev",null),Xt(this,"_revTime",null),Xt(this,"_reconstruction"),this.timeline=t.timeline,this.client=t.client,this.handler=t.handler,this._aligner=new q8(this.timeline),this.markChange()}clearRange(){this.setRange(null,null)}setRange(t,n){n!==this._rev&&this.setRevTime(n),t!==this._since&&this.setSinceTime(t);let a=10;if(this._sinceTime==="loading"||this._revTime==="loading"||!this._aligner.isAligned)this.selectionState="loading";else if(this._sinceTime==="invalid"||this._revTime==="invalid")this.selectionState="invalid";else if(this._sinceTime){this.selectionState="range";const r=this._revTime||this.timeline.lastChunk();this._sinceTime.index>r.index?(this._revTime="invalid",this.selectionState="invalid"):this.setReconstruction(this._sinceTime,r)}else this._revTime?(this.selectionState="rev",this.setReconstruction(null,this._revTime)):(this.selectionState="inactive",a=0);this._fetchAtLeast=a,this.start()}setLoadMore(t){this._fetchMore=t,this.start()}get sinceTime(){return this._sinceTime&&typeof this._sinceTime=="object"?this._sinceTime:null}get revTime(){return this._revTime&&typeof this._revTime=="object"?this._revTime:null}get realRevChunk(){return this.revTime||this.timeline.lastChunk()}onOlderRevision(){return!!this._rev&&(this.selectionState==="range"||this.selectionState==="rev")}findRangeForNewRev(t){const n=this.timeline.isLatestChunk(t)?null:this.timeline.createTimeId(t);if(!this._since)return[null,n];const a=this.sinceTime;return a&&a.index<t.index?[this._since,n]:["@lastPublished",n]}findRangeForNewSince(t){const n=this.revTime;return n&&t.index<n.index?[this.timeline.createTimeId(t),this._rev]:[this.timeline.createTimeId(t),null]}setRevTime(t){this._rev=t,this._revTime=t?this.timeline.parseTimeId(t):null,this._since==="@lastPublished"&&(this._since=null,this._sinceTime=null)}setSinceTime(t){t==="@lastPublished"?typeof this._revTime=="string"?this._sinceTime=this._revTime:this._sinceTime=this.timeline.findLastPublishedBefore(this._revTime):this._sinceTime=t?this.timeline.parseTimeId(t):null,this._since=t}sinceAttributes(){return this._sinceTime&&this._reconstruction?this._reconstruction.startAttributes():null}displayed(){return this._revTime&&this._reconstruction?this._reconstruction.endAttributes():null}setReconstruction(t,n){this._reconstruction&&this._reconstruction.same(t,n)||(this._reconstruction=new Z8(this.timeline,this._aligner.currentDocument,t,n))}currentDiff(){return this._reconstruction?this._reconstruction.diff():null}currentObjectDiff(){const t=this.currentDiff();if(t){if(t.type==="null")return null;if(t.type!=="object")throw new Error(`ObjectDiff expected, got ${t.type}`)}return t}handleRemoteMutation(t){this._aligner.appendRemoteSnapshotEvent(t),this.markChange(),this._aligner.acceptsHistory&&this.start()}start(){this._didErr||this._isRunning||(this._isRunning=!0,this.tick().then(()=>{this._isRunning=!1}))}resume(){this._isSuspended=!1}suspend(){this._isSuspended=!0}async tick(){var t;if(this._aligner.acceptsHistory&&!this.timeline.reachedEarliestEntry&&(this.selectionState==="loading"||this._fetchMore||this.timeline.chunkCount<=this._fetchAtLeast)&&!this._isSuspended){try{await this.fetchMoreTransactions()}catch(n){this._didErr=!0,(t=this.handler)==null||t.call(this,n,this);return}await this.tick()}}async fetchMoreTransactions(){const t=this.timeline.publishedId,n=this.timeline.draftId,a=this.client.config(),r=tU;let o=`tag=sanity.studio.structure.history&effectFormat=mendoza&excludeContent=true&excludeMutations=true&includeIdentifiedDocumentsOnly=true&reverse=true&limit=${r}`,s=this._aligner.earliestTransactionId;s&&(o+=`&toTransaction=${s}`);const d=this.client.getUrl(`/data/history/${a.dataset}/transactions/${t},${n}?${o}`),c=(await Zw(d,a.token)).getReader();let u=0;for(;;){const m=await c.read();if(m.done)break;if("error"in m.value)throw new Error(m.value.error.description||m.value.error.type);if(u++,m.value.id!==s){if(this._aligner.earliestTransactionId!==s||!this._aligner.acceptsHistory)return;this._aligner.prependHistoryEvent(m.value),s=this._aligner.earliestTransactionId}}this._aligner.earliestTransactionId!==s||!this._aligner.acceptsHistory||(u<r&&this._aligner.didReachEarliestEntry(),this.markChange())}markChange(){var t;this.timeline.updateChunks(),this.setRevTime(this._rev),this.setSinceTime(this._rev),this.version++,(t=this.handler)==null||t.call(this,null,this)}}const Fg=Object.create(null),aU=(e,t,n={})=>{const a=Array.isArray(t)?t:[t],{time:r,revision:o}=n;if(r&&o)throw new Error("getHistory can't handle both time and revision parameters");let s=`/data/history/${e.config().dataset}/documents/${a.join(",")}`;if(o)s=`${s}?revision=${o}`;else{const d=r||new Date().toISOString();s=`${s}?time=${d}`}return e.request({url:s})},Qw=(e,t,n)=>{const a=ft(t),r=kn(t),o=`${a}@${n}`,s=Fg[o];if(s)return s;const d=`/data/history/${e.config().dataset}/documents/${a},${r}?revision=${n}`,c=e.request({url:d}).then(u=>{const m=u.documents||[],p=m.find(h=>h._id===a);return m.find(h=>h._id===r)||p});return Fg[o]=c,c},iU=({client:e,documentId:t,documentType:n})=>{const a=new z8({enableTrace:Ya,publishedId:t});return new nU({client:e,documentId:t,documentType:n,timeline:a})},rU=async(e,t)=>{const n=Array.isArray(t)?t:[t],a=e.config().dataset,r={excludeContent:"true",includeIdentifiedDocumentsOnly:"true"},o=`/data/history/${a}/transactions/${n.join(",")}`;return(await e.request({url:o,query:r})).toString("utf8").split(`
`).filter(Boolean).map(s=>JSON.parse(s))},oU=e=>uv(e,(t,n)=>ji(n)&&!t.includes(n._ref)?[...t,n._ref]:t,[]);function hu(e,t){return Array.isArray(e)?t(e.map(n=>hu(n,t)).filter(n=>typeof n<"u")):Ke(e)?t(Object.keys(e).reduce((n,a)=>{const r=hu(e[a],t);return typeof r<"u"&&(n[a]=r),n},{})):t(e)}const sU=(e,t)=>hu(e,n=>ji(n)?t(n):n),lU=(e,t)=>sU(e,n=>t[n._ref]?n:void 0);function cU(e,t,n,a,r){return Ot(Qw(e,t,a)).pipe(Ye(o=>{if(!o)throw new Error(`Unable to find document with ID ${t} at revision ${a}`);const s=oU(o).map(d=>`"${d}": defined(*[_id=="${d}"]._id)`).join(",");return e.observable.fetch(`{${s}}`).pipe(K(d=>lU(o,d)))}),K(o=>{const{_updatedAt:s,...d}=o;return{...d,_id:n}}),Ye(o=>{if(r!=null&&r.useServerDocumentActions){const s={actionType:"sanity.action.document.replaceDraft",publishedId:t,attributes:o};return e.observable.action(r.fromDeleted?[{actionType:"sanity.action.document.create",publishedId:t,attributes:o,ifExists:"fail"},s]:s)}return e.observable.createOrReplace(o,{visibility:"async"})}),K(()=>{}))}function dU({client:e}){return{getDocumentAtRevision:(t,n)=>Qw(e,t,n),getHistory:(t,n)=>aU(e,t,n),getTransactions:t=>rU(e,t),restore:(t,n,a,r)=>cU(e,t,n,a,r),getTimelineController:iU}}const uU=e=>{if(e.type==="rollCall")return{type:"rollCall",userId:e.i,sessionId:e.session};if(e.type==="state"){const{sessionId:t,locations:n}=e.m;return{type:"state",userId:e.i,sessionId:t,timestamp:new Date().toISOString(),locations:n}}if(e.type==="disconnect")return{type:"disconnect",userId:e.i,sessionId:e.m.session,timestamp:new Date().toISOString()};throw new Error(`Got unknown presence event: ${JSON.stringify(e)}`)},mU=(e,t)=>{const n=e.listen("presence").pipe(K(uU)),a=r=>r.type==="rollCall"?e.request("presence_rollcall",{session:t}):r.type==="state"?e.request("presence_announce",{data:{locations:r.locations,sessionId:t}}):r.type==="disconnect"?e.request("presence_disconnect",{session:t}):$t;return[n.pipe(da()),a]},pU=["pqSMwf6hH","pnLYqNfv5","priDVVmy8","p0NFOU0j8","pTDl2jw8d","pHMeQnTse","pDQYzJbyS","pZyoPHKUs","p4Tyi2Be5","pb9vii060","pE8yhOisw","p7Fd2C6Cj","p3exSgYCx","pbIQRYViC","p8GJaTEhN","p27ewL8aM","pYg97z75S","pdLr4quHv","pkJXiDgg6","pkl4UAKcA","pNoExists"],hU=[["nested","first"],["nested","second"],["nestedArray",{_key:"565c867c8dac"},"arrayNo1",{_key:"a645548a8f01"},"arrayNo1",{_key:"1685e372c40f"},"fieldNo0"],["nestedArray",{_key:"565c867c8dac"},"fieldNo0"],["nestedArray",{_key:"565c867c8dac"},"arrayNo19",{_key:"a02e7a93e2a2"},"fieldNo0"],["nestedArray",{_key:"565c867c8dac"},"arrayNo19",{_key:"a02e7a93e2a2"},"fieldNo19"],["address","country"],["address","street"],["customInputWithDefaultPresence","row3","cell3"]],fU=tn(()=>mn(0,1e4)).pipe(Cr(pU),K((e,t)=>({type:"state",userId:e,sessionId:e+t,timestamp:new Date().toISOString(),locations:[{type:"document",documentId:"presence-debug",lastActiveAt:new Date().toISOString(),path:_j(hU)}]})),an()),e1="presence_session_id",gU=()=>uk(16);function bU(){try{return window.sessionStorage.getItem(e1)}catch{}return null}function yU(e){try{window.sessionStorage.setItem(e1,e)}catch{}return e}const As=bU()||yU(gU());function vU(e){const{bifur:t,connectionStatusStore:n,userStore:a}=e,[r,o]=mU(t,As),s=new tv([]),d=s.pipe(yt()),c=S=>{s.next(S)},u=S=>o({type:"state",locations:S}),m=()=>o({type:"rollCall"}),p=r.pipe(Ue(S=>S.type==="rollCall"),Ue(S=>S.sessionId!==As)),h=mn(0,3e4),f=tn(()=>at(d,p)).pipe(Ee(()=>h),bo(s),K(([,S])=>S),kA(200),Ee(S=>u(S)),Cr($t),da()),g=tn(()=>m()).pipe(Cr($t)),b=n.connectionStatus$.pipe(K(S=>S.type),Ue(S=>S==="connected"||S==="error"),yt()),v=Xw.pipe(K(S=>S.find(N=>N.startsWith("presence="))),K(S=>(S==null?void 0:S.split("presence=")[1].split(",").map(N=>N.trim()))||[])),y=v.pipe(Ue(S=>S.includes("fake_others")),bt(()=>{console.log('Faking other users present in the studio. They will hang out in the document with _type: "presence" and _id: "presence-debug"')}),AA(fU)),x=v.pipe(K(S=>S.includes("show_own"))),w=at(g,r).pipe(Ue(S=>S.type==="state"||S.type==="disconnect")),C=S=>({lastActiveAt:S.timestamp,locations:S.locations,sessionId:S.sessionId,userId:S.userId}),T=at(w,y).pipe(qn((S,N)=>N.type==="disconnect"?Yn(S,N.sessionId):{...S,[N.sessionId]:C(N)},{})),j=b.pipe(Ee(S=>S==="connected"?at(T,f):lm),K(S=>Object.values(S)),Ee(S=>{const N=za(S.map(D=>D.userId));return Ot(a.getUsers(N)).pipe(K(D=>S.map(_=>({user:D.find(F=>F.id===_.userId),session:_})).filter(A)))}),nv(Sa(window,"beforeunload").pipe(Ee(()=>o({type:"disconnect"})))),an({refCount:!0,bufferSize:1}));function A(S){return!!(S.user&&S.session)}const M=j.pipe(K(S=>{const N=om(S.map(D=>D.session),D=>D.userId);return Object.keys(N).map(D=>{var _;return{user:(_=S.find(F=>F.user.id===D))==null?void 0:_.user,sessions:N[D]}})}),bo(x),K(([S,N])=>S.filter(D=>N?!0:!D.sessions.some(_=>_.sessionId===As))),K(S=>S.map(N=>{var D;return{user:N.user,status:"online",lastActiveAt:(D=N.sessions.sort()[0])==null?void 0:D.lastActiveAt,locations:On((N.sessions||[]).map(_=>_.locations||[])).map(_=>({type:_.type,documentId:_.documentId,path:_.path,lastActiveAt:_.lastActiveAt})).reduce((_,F)=>_.concat(F),[])}})));return{setLocation:c,reportLocations:u,debugPresenceParam$:v,globalPresence$:M,documentPresence:S=>j.pipe(bo(x),Ee(([N,D])=>Ot(N).pipe(Ue(_=>D||_.session.sessionId!==As),SA(_=>(_.session.locations||[]).filter(F=>F.documentId===S).map(F=>({user:_.user,lastActiveAt:_.session.lastActiveAt,path:F.path||[],sessionId:_.session.sessionId,selection:F==null?void 0:F.selection}))),av())))}}function xU(e){const{client:t}=e,n=t.config().projectId,a=t.withConfig({apiVersion:"2021-12-15"});function r(){return a.observable.request({url:`/projects/${n}`})}function o(){return a.observable.request({url:`/projects/${n}/datasets`})}return{get:r,getDatasets:o}}function CU(){const e=new WeakMap,t=new WeakMap;function n(){return Array.from({length:10}).map(()=>Math.floor(Math.random()*255).toString(16).padStart(2,"0")).join("")}function a(u){const m=t.get(u);if(m)return m;const p=n();return t.set(u,p),p}function r(u){return Array.from(new Set(u)).map(m=>[a(m),m]).sort(([m],[p])=>m.localeCompare(p,"en")).map(([,m])=>m)}function o(u,m){if(!u.length)return;const[p,...h]=u,f=m.get(p);if(f)return h.length?o(h,f.next):f.value}function s(u,m,p){if(!u.length)return;const[h,...f]=u,g=m.get(h)||{type:"multi-key-weak-map-node",value:void 0,next:new WeakMap};if(m.set(h,g),!f.length){g.value=p;return}s(f,g.next,p)}function d(u){return o(r(u),e)}function c(u,m){s(r(u),e,m)}return{get:d,set:c}}function wU({children:e}){const t=l.useMemo(()=>{const n=new Map,a={};return{get:({namespace:r,dependencies:o})=>{const s=o.map(c=>c===null?a:c),d=n.get(r);return d==null?void 0:d.get(s)},set:({namespace:r,dependencies:o,value:s})=>{const d=n.get(r)||CU(),c=o.map(u=>u===null?a:u);n.set(r,d),d.set(c,s)}}},[]);return i.jsx(M0.Provider,{value:t,children:e})}function Qa(){const e=l.useContext(M0);if(!e)throw new Error("Could not find `cache` context");return e}const TU=[{id:"<system>",displayName:"Sanity",imageUrl:"https://public.sanity.io/logos/favicon-192.png"}];function jU({client:e,currentUser:t}){const n=e.withConfig({apiVersion:"2021-06-07"}),a=new P0(async o=>{const s=await n.request({uri:`/users/${o.join(",")}`,withCredentials:!0,tag:"users.get"}),d=(Array.isArray(s)?s:[s]).reduce((c,u)=>(u!=null&&u.id&&(c[u.id]=u),c),{});return o.map(c=>d[c]||null)},{batchScheduleFn:o=>Hk(o),maxBatchSize:400}),r=t&&{id:t.id,displayName:t.name,imageUrl:t.profileImage};return a.prime("me",r),r!=null&&r.id&&a.prime(r.id,r),TU.forEach(o=>a.prime(o.id,o)),{getUser:async o=>{if(!o)return Promise.resolve(null);try{return await a.load(o)}catch(s){if(s.statusCode===403)return Promise.resolve(null);throw s}},getUsers:async o=>(await a.loadMany(o)).filter(s=>Ke(s)&&typeof s.id=="string")}}function bp(){const{getClient:e,currentUser:t}=mt(),n=Qa(),a=e(qe);return l.useMemo(()=>{const r=n.get({namespace:"userStore",dependencies:[a,t]})||jU({client:a,currentUser:t});return n.set({namespace:"userStore",dependencies:[a,t],value:r}),r},[a,t,n])}function kU(){const{getClient:e}=mt(),t=e(qe),n=Tt(),a=Qa();return l.useMemo(()=>{const r=a.get({namespace:"grantsStore",dependencies:[t,n]})||S8({client:t,userId:(n==null?void 0:n.id)||null});return a.set({namespace:"grantsStore",dependencies:[t,n],value:r}),r},[t,n,a])}function AU(){const e=Xe(qe),t=Qa();return l.useMemo(()=>{const n=t.get({namespace:"historyStore",dependencies:[e]})||dU({client:e});return t.set({namespace:"historyStore",dependencies:[e],value:n}),n},[e,t])}function gn(){const e=Xe(qe),t=Qa();return l.useMemo(()=>{const n=t.get({namespace:"documentPreviewStore",dependencies:[e]})||hV({client:e});return t.set({namespace:"documentPreviewStore",dependencies:[e],value:n}),n},[e,t])}function ts(){var e;const{getClient:t,i18n:n}=mt(),a=ot(),r=lte(),o=Qa(),s=AU(),d=gn(),c=Dt(),u=l.useMemo(()=>{var m;const p=(m=c.__internal_serverDocumentActions)==null?void 0:m.enabled;return typeof p=="boolean"?re(p):qw(t(qe))},[t,(e=c.__internal_serverDocumentActions)==null?void 0:e.enabled]);return l.useMemo(()=>{const m=o.get({namespace:"documentStore",dependencies:[t,d,s,a,n,c]})||l8({getClient:t,documentPreviewStore:d,historyStore:s,initialValueTemplates:r,schema:a,i18n:n,serverActionsEnabled:u});return o.set({namespace:"documentStore",dependencies:[t,d,s,a,n],value:m}),m},[o,t,d,s,a,n,c,r,u])}function SU(){const{bifur:e}=mt().__internal,t=Qa();return l.useMemo(()=>{const n=t.get({namespace:"connectionStatusStore",dependencies:[e]})||YE({bifur:e});return t.set({namespace:"connectionStatusStore",dependencies:[e],value:n}),n},[e,t])}function _U(){const{__internal:{bifur:e}}=mt(),t=Qa(),n=bp(),a=SU();return l.useMemo(()=>{const r=t.get({namespace:"presenceStore",dependencies:[e,a,n]})||vU({bifur:e,connectionStatusStore:a,userStore:n});return t.set({namespace:"presenceStore",dependencies:[e,a,n],value:r}),r},[e,a,t,n])}function EU(){const e=Xe(qe),t=Qa();return l.useMemo(()=>{const n=t.get({namespace:"projectStore",dependencies:[e]})||xU({client:e});return t.set({namespace:"projectStore",dependencies:[e],value:n}),n},[e,t])}function IU(){const e=Qa(),t=Dt(),n=Xe(qe);return l.useMemo(()=>{const a=e.get({dependencies:[t],namespace:"KeyValueStore"})||wE({client:n});return e.set({dependencies:[t],namespace:"KeyValueStore",value:a}),a},[n,e,t])}function yp(e){const t=_U(),[n,a]=l.useState([]);return l.useEffect(()=>{const r=t.documentPresence(e).subscribe(a);return()=>{r.unsubscribe()}},[e,t]),n}const Rg={referringDocuments:[],isLoading:!0};function t1(e){const t=ts(),n=l.useMemo(()=>t.listenQuery("*[references($docId)] [0...101]",{docId:e},{tag:"use-referring-documents"}).pipe(K(a=>({referringDocuments:a,isLoading:!1})),Lt(Rg)),[t,e]);return Ut(n,Rg)}const n1=({asset:e,assetType:t,referringDocuments:n})=>{const{t:a}=L(),r=n.length;return i.jsxs(i.Fragment,{children:[i.jsx(U,{borderBottom:r>0,marginTop:2,paddingBottom:2,marginBottom:1,children:i.jsx(E,{size:1,as:"h2",weight:"medium",children:i.jsx(Pe,{t:a,i18nKey:`asset-source.usage-list.documents-using-${t}`,context:e.originalFilename?"named":"unnamed",values:{filename:e.originalFilename,count:r}})})}),n.map(o=>i.jsx(MU,{document:o},o._id))]})},MU=({document:e})=>{const t=ot(),n=l.useCallback(a=>i.jsx(Ma,{...a,params:{id:e._id,type:e._type},intent:"edit"}),[e]);return i.jsx(U,{as:n,radius:2,"data-as":"a",tabIndex:0,children:i.jsx(P,{align:"center",gap:2,children:i.jsx(vw,{layout:"default",value:{_type:"reference",_ref:e._id},schemaType:t.get(e._type)})})},e._id)},Dg={maxWidth:"100%",height:"120px",objectFit:"contain",objectPosition:"center"},$g={gridColumn:"span 1",overflow:"hidden",display:"flex",alignSelf:"center",justifyContent:"center"},Lg={height:"100%"},PU=({asset:e,assetType:t,hasResults:n=!1})=>{const a=t==="image",{t:r}=L();return n?i.jsx(U,{tone:"caution",padding:[3,3,4],border:!0,radius:2,marginBottom:3,children:i.jsxs(Ze,{columns:3,gap:[2,3,4],children:[i.jsxs(P,{gap:[3,4],align:"center",style:{gridColumn:a?"span 2":"span 3"},children:[i.jsx(E,{children:i.jsx(Wt,{})}),i.jsx(E,{size:1,children:r(`asset-source.delete-dialog.usage-list.warning-${t}-is-in-use`,{context:e.originalFilename?"named":"unnamed",filename:e.originalFilename})})]}),a&&i.jsx(U,{__unstable_checkered:!0,border:!0,radius:1,style:$g,children:i.jsx(P,{align:"center",justify:"center",style:Lg,children:i.jsx("img",{src:`${e.url}?w=200`,style:Dg,alt:r("asset-source.usage-list.image-alt"),referrerPolicy:"strict-origin-when-cross-origin"})})})]})}):i.jsx(U,{paddingX:[2,3,4],paddingY:[3,3,3,4],children:i.jsxs(Ze,{columns:3,gap:3,children:[i.jsx(P,{style:{gridColumn:a?"span 2":"span 3"},align:"center",children:i.jsx(E,{children:i.jsx(Pe,{t:r,i18nKey:`asset-source.delete-dialog.usage-list.confirm-delete-${t}`,context:e.originalFilename?"named":"unnamed",values:{filename:e.originalFilename}})})}),a&&i.jsx(U,{__unstable_checkered:!0,border:!0,radius:1,style:$g,children:i.jsx(P,{align:"center",justify:"center",style:Lg,children:i.jsx("img",{src:`${e.url}?w=200`,style:Dg,alt:r("asset-source.asset-list.table.preview-alt"),referrerPolicy:"strict-origin-when-cross-origin"})})})]})})};function a1({asset:e,assetType:t,isDeleting:n=!1,onClose:a,onDelete:r}){const{isLoading:o,referringDocuments:s}=t1(e._id),d=l.useMemo(()=>{const m=s.reduce((p,h)=>h._id.startsWith("drafts.")?p.concat(h._id.slice(7)):p,[]);return s.filter(p=>!m.includes(p._id))},[s]),c=d.length>0,{t:u}=L();return i.jsx(En,{__unstable_autoFocus:o,footer:{cancelButton:{onClick:a,text:u("asset-source.delete-dialog.action.cancel")},confirmButton:{disabled:c,icon:_t,loading:n,onClick:r,text:u("asset-source.delete-dialog.action.delete")}},header:u("asset-source.delete-dialog.header",{context:t}),id:"asset-dialog",onClickOutside:a,onClose:a,width:1,children:o?i.jsx(I,{padding:4,children:i.jsx(It,{showText:!0})}):i.jsxs(B,{paddingX:c?[2,3,4]:0,paddingY:c?[3,3,3,4]:0,space:1,children:[i.jsx(PU,{asset:e,assetType:t,hasResults:c}),c&&i.jsx(n1,{asset:e,referringDocuments:d,assetType:t})]})})}const NU={portal:!0,placement:"right"};function i1({isSelected:e,border:t=!0,onAction:n}){const a=e?"default":"bleed",r=e?"primary":"default",{t:o}=L();return i.jsx(ze,{button:i.jsx(wt,{mode:t?"ghost":a,tone:t?"default":r}),id:"asset-menu",menu:i.jsxs(Be,{children:[i.jsx(ye,{text:o("asset-source.asset-list.menu.show-usage"),icon:ma,onClick:()=>{n({type:"showUsage"})}}),i.jsx(ye,{text:o("asset-source.asset-list.menu.delete"),icon:_t,tone:"critical",onClick:()=>{n({type:"delete"})}})]}),popover:NU})}function r1({asset:e,assetType:t,onClose:n}){const{isLoading:a,referringDocuments:r}=t1(e._id),o=l.useMemo(()=>{const d=r.reduce((c,u)=>u._id.startsWith("drafts.")?c.concat(u._id.slice(7)):c,[]);return r.filter(c=>!d.includes(c._id))},[r]),{t:s}=L();return i.jsx(En,{__unstable_autoFocus:!0,header:s("asset-source.asset-usage-dialog.header",{context:t}),id:"asset-dialog",onClickOutside:n,onClose:n,width:1,children:a?i.jsx(It,{showText:!0}):i.jsx(n1,{asset:e,referringDocuments:o,assetType:t})})}const sd={"image/bmp":{title:"Bitmap Image"},"image/jpeg":{title:"JPEG Image"},"image/gif":{title:"GIF Image"},"image/vnd.microsoft.icon":{title:"Icon"},"image/png":{title:"PNG Image"},"image/svg+xml":{title:"SVG Image"},"image/webp":{title:"WebP Image"},"image/tiff":{title:"TIFF Image"},"image/heic":{title:"HEIC Image"},"audio/midi":{title:"MIDI Audio"},"audio/midi-x":{title:"MIDI Audio"},"audio/mpeg":{title:"MP3 Audio"},"audio/ogg":{title:"OGG Audio"},"audio/wav":{title:"WAV Audio"},"audio/webm":{title:"WebM Audio"},"audio/aac":{title:"AAC Audio"},"video/x-msvideo":{title:"AVI Video"},"video/mp4":{title:"MP4 Video"},"video/mpeg":{title:"MPEG Video"},"video/ogg":{title:"OGG Video"},"video/webm":{title:"WebM Video"},"video/quicktime":{title:"QuickTime Video"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{title:"Excel Spreadsheet"},"application/vnd.ms-excel":{title:"Excel Spreadsheet"},"text/plain":{title:"Text"},"text/javascript":{title:"JavaScript"},"text/markdown":{title:"Markdown"},"text/csv":{title:"CSV"},"text/css":{title:"CSS"},"application/pdf":{title:"PDF Document"},"application/xml":{title:"XML Document"},"text/xml":{title:"XML Document"},"application/zip":{title:"ZIP Archive"},"application/vnd.rar":{title:"RAR Archive"},"application/x-7z-compressed":{title:"7-zip Archive"},"application/octet-stream":{title:"Binary"}};function OU(e){const t=e.replace("x-","").split("/")[1];return t.charAt(0).toUpperCase()+t.slice(1)}function FU(e){return sd!=null&&sd[e]?sd[e].title:OU(e)}const fu=k.span`
  background-color: transparent;
  flex-shrink: 0;
`,lr=k(P)``,RU=k(U)`
  ${e=>e.isSelected&&ae`
      --card-muted-fg-color: var(--card-bg-color);
      --card-fg-color: var(--card-bg-color);
    `}
`,Bg=k(He)`
  box-shadow: none;
  min-width: 0;
  cursor: pointer;
  position: initial;

  &:before,
  &:after {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: 2;
  }

  &:before {
    z-index: 0;
    pointer-events: none;
    border-radius: inherit;
  }

  ${e=>e.isSelected&&ae`
      --card-muted-fg-color: var(--card-bg-color);
      --card-fg-color: var(--card-bg-color);

      &:before {
        background-color: var(--card-focus-ring-color);
      }

      ${fu} {
        --card-muted-fg-color: var(--card-bg-color);
      }

      ${lr} {
        --card-muted-fg-color: var(--card-bg-color);
        --card-fg-color: var(--card-bg-color);
      }
    `}

  ${e=>!e.isSelected&&ae`
      &:hover:before {
        background-color: var(--card-bg-color);
      }

      &:focus:before {
        background-color: var(--card-code-bg-color);
      }

      &:focus-within:before {
        background-color: var(--card-bg-color);
      }
    `}
`,DU=k(E)`
  overflow-wrap: anywhere;
`,Vg={position:"relative"},Ug={flexShrink:0},ld={minWidth:0},zg={zIndex:3,marginTop:"-0.5rem",marginBottom:"-0.5rem"},$U=e=>{const t=Xe(qe),n=Vt(),a=l.useRef(),[r,o]=l.useState(!1),[s,d]=l.useState(!1),[c,u]=l.useState(!1),[m,p]=l.useState(!1),{asset:h,onClick:f,onKeyPress:g,onDeleteFinished:b,isSelected:v,isMobile:y}=e,{originalFilename:x,_id:w,mimeType:C,size:T,_createdAt:j}=h,A=$r(j,{useTemporalPhrase:!0}),M=FU(C),S=m1({unitDisplay:"short",maximumFractionDigits:2}),N=xE(T,S),D=(x||"").length>37,{t:_}=L(),F=l.useCallback(()=>{d(!0)},[]),R=l.useCallback(te=>{n.push({closable:!0,status:"error",title:_("asset-source.file.asset-list.delete-failed"),description:te.message})},[_,n]),$=l.useCallback(()=>{n.push({status:"success",title:_("asset-source.file.asset-list.delete-successful")})},[_,n]),O=l.useCallback(()=>{u(!0),a.current=t.observable.delete(h._id).subscribe({next:()=>{u(!1),b==null||b(h._id),d(!1),$()},error:te=>{u(!1),R(te),console.error("Could not delete asset",te)}})},[h._id,R,$,b,t.observable]),V=()=>{o(!1),d(!1)},H=()=>{o(!0)},J=()=>{p(!m)},q=te=>{te.type==="delete"&&F(),te.type==="showUsage"&&H()},oe=l.useMemo(()=>r&&i.jsx(r1,{assetType:"file",asset:h,onClose:V}),[h,r]),ie=l.useMemo(()=>s&&i.jsx(a1,{assetType:"file",asset:h,onClose:V,onDelete:O,isDeleting:c}),[h,O,c,s]);return y?i.jsxs(U,{paddingBottom:2,style:Vg,children:[i.jsxs(Ze,{columns:4,gap:1,style:{position:"relative",gridTemplateColumns:"1fr 30px",opacity:c?.5:1},children:[i.jsx(Bg,{asset:h,mode:"bleed",padding:0,"data-id":w,onClick:f,paddingY:1,radius:2,children:i.jsxs(P,{gap:2,flex:2,align:"center",children:[i.jsx(U,{as:fu,padding:2,tone:"transparent",radius:2,children:i.jsx(E,{muted:!0,size:2,style:Ug,children:i.jsx(Ar,{})})}),i.jsx(E,{size:1,align:"left",textOverflow:"ellipsis",style:ld,children:x})]})}),i.jsx(P,{justify:"flex-end",align:"center",paddingRight:1,style:zg,children:i.jsx(He,{mode:"bleed",fontSize:1,padding:2,onClick:J,icon:m?fA:_n})})]}),m&&i.jsxs(i.Fragment,{children:[i.jsxs(Ze,{marginTop:3,columns:3,gap:1,children:[i.jsxs(B,{space:2,children:[i.jsx(E,{size:1,muted:!0,weight:"medium",children:_("asset-source.file.asset-list.header.size")}),i.jsx(E,{size:1,muted:!0,children:N})]}),i.jsxs(B,{space:2,children:[i.jsx(E,{size:1,muted:!0,weight:"medium",children:_("asset-source.file.asset-list.header.type")}),i.jsx(E,{size:1,muted:!0,children:M})]}),i.jsxs(B,{space:2,children:[i.jsx(E,{size:1,muted:!0,weight:"medium",children:_("asset-source.file.asset-list.header.date-added")}),i.jsx(E,{size:1,muted:!0,children:A})]})]}),i.jsxs(B,{space:2,marginTop:3,children:[i.jsx(He,{fontSize:1,tone:"default",mode:"ghost",text:_("asset-source.file.asset-list.action.show-usage.title"),onClick:H,icon:ma}),i.jsx(He,{fontSize:1,tone:"critical",mode:"ghost",text:_("asset-source.file.asset-list.action.delete.title"),icon:_t,disabled:v,title:_(v?"asset-source.file.asset-list.action.delete.disabled-cannot-delete-current-file":"asset-source.file.asset-list.action.delete.title"),onClick:F})]})]}),oe||ie]}):i.jsxs(RU,{asset:h,paddingBottom:1,style:Vg,radius:0,overflow:"hidden",isSelected:v,"aria-selected":"true",children:[i.jsxs(Ze,{columns:4,gap:1,"data-id":w,paddingY:1,style:{position:"relative",gridTemplateColumns:"3fr 1fr 1fr 2fr 30px",opacity:c?.5:1},children:[i.jsx(Bg,{asset:h,mode:"bleed","data-id":w,onClick:f,padding:0,onKeyPress:g,title:_("asset-source.file.asset-list.item.select-file-tooltip",{filename:x}),isSelected:v,radius:2,children:i.jsxs(lr,{gap:2,flex:2,paddingRight:1,align:"center",onClick:f,onKeyPress:g,"data-id":w,children:[i.jsx(U,{as:fu,padding:2,tone:"transparent",radius:2,style:Ug,children:i.jsx(E,{muted:!0,size:2,children:i.jsx(Ar,{})})}),D&&i.jsx(Ie,{content:x,children:i.jsx(E,{size:1,align:"left",textOverflow:"ellipsis",style:ld,children:x})}),!D&&i.jsx(E,{size:1,align:"left",textOverflow:"ellipsis",style:ld,children:x})]})}),i.jsx(lr,{align:"center",children:i.jsx(E,{size:1,muted:!0,children:N})}),i.jsx(lr,{align:"center",children:i.jsx(I,{children:i.jsx(DU,{size:1,muted:!0,textOverflow:"ellipsis",children:M})})}),i.jsx(lr,{align:"center",children:i.jsx(E,{as:"time",size:1,muted:!0,dateTime:j,children:A})}),i.jsx(lr,{justify:"flex-end",align:"center",paddingX:1,paddingY:1,style:zg,children:i.jsx(i1,{border:!1,isSelected:!1,onAction:q})})]}),oe||ie]})},LU={paddingLeft:"2.2rem"},Hg={gridTemplateColumns:"3fr 1fr 1fr 2fr 30px"};function BU(e){const t=Il()<2,{assets:n,onClick:a,onKeyPress:r,onDeleteFinished:o,selectedAssets:s,isLoading:d}=e,{t:c}=L();return i.jsxs(I,{children:[i.jsx(U,{borderBottom:!0,paddingBottom:2,marginBottom:1,children:t?i.jsx(Ze,{style:Hg,children:i.jsx(I,{flex:2,paddingLeft:5,children:i.jsx(E,{muted:!0,size:1,weight:"medium",children:c("asset-source.file.asset-list.header.filename")})})}):i.jsxs(Ze,{gap:1,style:Hg,children:[i.jsx(I,{flex:2,style:LU,children:i.jsx(E,{muted:!0,size:1,weight:"medium",children:c("asset-source.file.asset-list.header.filename")})}),i.jsx(I,{flex:1,children:i.jsx(E,{muted:!0,size:1,weight:"medium",children:c("asset-source.file.asset-list.header.size")})}),i.jsx(I,{flex:1,children:i.jsx(E,{muted:!0,size:1,weight:"medium",children:c("asset-source.file.asset-list.header.type")})}),i.jsx(I,{flex:1,children:i.jsx(E,{muted:!0,size:1,weight:"medium",children:c("asset-source.file.asset-list.header.date-added")})})]})}),i.jsxs(B,{children:[d&&n.length===0&&i.jsx(I,{paddingTop:4,paddingBottom:2,children:i.jsx(P,{justify:"center",children:i.jsx($o,{muted:!0})})}),n.map(u=>i.jsx($U,{asset:u,isMobile:t,isSelected:s.some(m=>m._id===u._id),onClick:a,onKeyPress:r,onDeleteFinished:o},u._id))]})]})}const VU=typeof window>"u"||!window.devicePixelRatio?1:Math.round(window.devicePixelRatio),UU=k.img`
  position: absolute;
  z-index: 1;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: block;
  object-fit: contain;
`,zU=k(U)`
  position: relative;
  z-index: 1;
  padding-bottom: 100%;
`,gu=k.div`
  position: relative;
  display: inherit;
`,HU=k.div`
  box-sizing: border-box;
  position: absolute;
  z-index: 2;
  top: 3px;
  right: 3px;

  & button[data-selected] {
    display: block;
  }

  @media (hover: hover) {
    // If hover is supported, hide the buttons until the user hovers or focuses the asset
    // Use opacity to enable the buttons to still be focusable
    & button {
      opacity: 0;
    }

    ${gu}:hover & {
      button {
        opacity: 1;
      }
    }

    ${gu}:focus-within & {
      button {
        opacity: 1;
      }
    }
  }
`,KU=l.memo(function(e){const t=Xe(qe),n=Vt(),a=l.useRef(),{asset:r,onClick:o,onKeyPress:s,onDeleteFinished:d,isSelected:c}=e,[u,m]=l.useState(!1),[p,h]=l.useState(!1),[f,g]=l.useState(!1),{t:b}=L();l.useEffect(()=>()=>{a.current&&a.current.unsubscribe()},[]);const v=l.useCallback(()=>{h(!0)},[h]),y=l.useCallback(()=>{m(!1),h(!1)},[m,h]),x=l.useCallback(()=>{m(!0)},[m]),w=l.useCallback(R=>{n.push({closable:!0,status:"error",title:b("asset-source.image.asset-list.delete-failed"),description:R.message})},[b,n]),C=l.useCallback(()=>{n.push({status:"success",title:b("asset-source.image.asset-list.delete-successful")})},[b,n]),T=l.useCallback(()=>{g(!0),a.current=t.observable.delete(r._id).subscribe({next:()=>{g(!1),d(r._id),h(!1),C()},error:R=>{g(!1),w(R),console.error("Could not delete asset",R)}})},[r._id,w,C,d,t.observable]),j=l.useCallback(R=>{R.type==="delete"&&v(),R.type==="showUsage"&&x()},[v,x]),A=l.useMemo(()=>u&&i.jsx(r1,{assetType:"file",asset:r,onClose:y}),[r,y,u]),M=l.useMemo(()=>p&&i.jsx(a1,{assetType:"file",asset:r,onClose:y,onDelete:T,isDeleting:f}),[r,T,y,f,p]),{originalFilename:S,_id:N,url:D}=r,_=200*Math.max(1,VU),F=D.includes(".gif")?`${D}?h=${_}&fit=max&fm=jpg`:`${D}?h=${_}&fit=max`;return i.jsxs(gu,{children:[i.jsx(He,{selected:c,tabIndex:0,"data-id":N,mode:"ghost",onKeyPress:s,padding:0,style:{padding:2},children:i.jsxs(zU,{__unstable_checkered:!0,children:[i.jsx(UU,{alt:S,src:F,onClick:o,"data-id":N}),f&&i.jsx(It,{})]})}),i.jsx(HU,{children:i.jsx(i1,{isSelected:c,onAction:j})}),A||M]})}),WU=k(Ze)`
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
`;function GU(e){const{isLoading:t,assets:n,selectedAssets:a,onItemClick:r,onItemKeyPress:o,onDeleteFinished:s}=e;return i.jsxs(I,{padding:4,children:[i.jsx(WU,{gap:2,children:n.map(d=>i.jsx(KU,{asset:d,isSelected:a.some(c=>c._id===d._id),onClick:r,onKeyPress:o,onDeleteFinished:s},d._id))}),t&&n.length===0&&i.jsx(P,{justify:"center",children:i.jsx($o,{muted:!0})}),!t&&n.length===0&&i.jsx(E,{align:"center",muted:!0})]})}const Ks=200,o1="sanity.imageAsset",qU="sanity.fileAsset",YU=e=>{const t=["image/*","audio/*","video/*"],n=e.split(",").map(a=>a.trim()).reduce((a,r)=>t.includes(r)?{...a,wildcards:`mimeType match '${r}' || ${a.wildcards}`}:r.indexOf(".")===0?{...a,extensions:`'${r.replace(".","")}', ${a.extensions}`}:{...a,mimes:`'${r}', ${a.mimes}`},{mimes:"",extensions:"",wildcards:""});return`&&
  (
    ${n.wildcards}
    extension in [${n.extensions}] ||
    mimeType in [${n.mimes}]
  )`},XU=(e=0,t=Ks,n=o1,a)=>{const r=a.length>0?YU(a):"";return`
  *[_type == "${n}" ${r}] | order(_updatedAt desc) [${e}...${t}] {
    _id,
    _updatedAt,
    _createdAt,
    url,
    originalFilename,
    mimeType,
    extension,
    size,
    metadata {dimensions}
  }
`},JU=k(U)`
  border-top: 1px solid var(--card-border-color);
  position: sticky;
  bottom: 0;
  z-index: 200;
`,ZU=function(e,t){const n=Xe(qe),a=l.useMemo(()=>n.withConfig({apiVersion:"2023-02-14"}),[n]),r=l.useRef(`default-asset-source-${mk()}`),o=l.useRef(0),{t:s}=L(),d=l.useRef(),[c,u]=l.useState([]),[m,p]=l.useState(!1),[h,f]=l.useState(!1),[g,b]=l.useState(!0),{selectedAssets:v,assetType:y="image",dialogHeaderTitle:x,onClose:w,onSelect:C,accept:T}=e,j=T&&T==="image/*"&&y==="image",A=l.useCallback($=>{const O=$*Ks,V=O+Ks,H=y==="image",J=H?"asset.image-list":"asset.file-list",q=H?o1:qU;b(!0),typeof T<"u"&&(d.current=a.observable.fetch(XU(O,V,q,T),{},{tag:J}).subscribe(oe=>{p(oe.length<Ks),u(ie=>ie.concat(oe)),b(!1)}))},[y,T,a]),M=l.useCallback($=>{u(O=>O.filter(V=>V._id!==$))},[u]),S=l.useCallback($=>{c.find(O=>O._id===$)&&C([{kind:"assetDocumentId",value:$}])},[c,C]),N=l.useCallback($=>{$.preventDefault();const O=$.currentTarget.getAttribute("data-id");if(!O)throw new Error("Missing data-id attribute on item");S(O)},[S]),D=l.useCallback($=>{if($.key==="Enter"){$.preventDefault();const O=$.currentTarget.getAttribute("data-id");if(!O)throw new Error("Missing data-id attribute on item");S(O)}},[S]),_=l.useCallback(()=>{w&&w()},[w]),F=l.useCallback($=>{$.preventDefault(),A(++o.current)},[A]);l.useEffect(()=>(A(o.current),()=>{d.current&&d.current.unsubscribe()}),[A]),l.useEffect(()=>{!g&&(!o.current||o.current===0)&&f(!0)},[g]);const R=Kr({style:"narrow"});return i.jsx(En,{__unstable_autoFocus:h,header:x||s("asset-source.dialog.default-title",{context:y}),id:r.current,onClickOutside:_,onClose:_,ref:t,width:2,children:i.jsxs(B,{space:5,children:[!j&&!g&&(T==null?void 0:T.length)>0&&i.jsx(U,{tone:"primary",padding:3,border:!0,radius:2,children:i.jsxs(P,{gap:3,align:"center",children:[i.jsx(E,{size:1,children:i.jsx(Uo,{})}),i.jsx(E,{size:1,children:i.jsx(Pe,{t:s,i18nKey:"asset-source.dialog.accept-message",values:{acceptTypes:R.format(T.split(",").map($=>$.trim()))}})})]})}),y==="file"&&i.jsx(BU,{assets:c,onDeleteFinished:M,onClick:N,onKeyPress:D,isLoading:g,selectedAssets:v}),y==="image"&&i.jsx(GU,{assets:c,onDeleteFinished:M,onItemClick:N,onItemKeyPress:D,isLoading:g,selectedAssets:v}),c.length>0&&!m&&i.jsx(JU,{tone:"default",padding:4,children:i.jsx(P,{direction:"column",children:i.jsx(Z,{type:"button",icon:f0,loading:g,onClick:F,size:"large",text:s("asset-source.dialog.load-more"),tone:"primary"})})})]})})},s1=l.memo(l.forwardRef(ZU)),l1={name:"sanity-default",title:"Uploaded files",i18nKey:"asset-source.file.title",component:s1,icon:dS},c1={name:"sanity-default",title:"Uploaded images",i18nKey:"asset-source.image.title",component:s1,icon:Ha},QU=[],ez=[],tz=[],nz=(e,{schema:t},n)=>{const a=t==null?void 0:t.types;if(!a)return e;if(typeof a=="function")return a(e,n);if(Array.isArray(a))return[...e,...a];throw new Error(`Expected \`schema.types\` to be an array or a function, but received ${fn(a)}`)},az=async(e,{document:t},n)=>{const a=t==null?void 0:t.productionUrl;return a?await a(e,n):e},iz=(e,{tools:t},n)=>{if(!t)return e;if(typeof t=="function")return t(e,n);if(Array.isArray(t))return[...e,...t];throw new Error(`Expected \`tools\` to be an array or a function, but received ${fn(t)}`)},rz=(e,{schema:t},n)=>{const a=t==null?void 0:t.templates;if(!a)return e;if(typeof a=="function")return a(e,n);if(Array.isArray(a))return[...e,...a];throw new Error(`Expected \`schema.templates\` to be an array or a function, but received ${fn(a)}`)},oz=(e,{i18n:t},n)=>{const a=t==null?void 0:t.locales;if(!a)return e;if(typeof a=="function")return a(e,n);if(Array.isArray(a))return[...e,...a];throw new Error(`Expected \`i18n.locales\` to be an array or a function, but received ${fn(a)}`)},sz=(e,{i18n:t},n)=>{const a=t==null?void 0:t.bundles;if(!a)return e;if(Array.isArray(a))return[...e,...a];if(typeof a=="function")return a(e,n);throw new Error(`Expected \`i18n.bundles\` to be an array or a function, but received ${typeof a}`)},lz=(e,{document:t},n)=>{const a=t==null?void 0:t.badges;if(!a)return e;if(typeof a=="function")return a(e,n);if(Array.isArray(a))return[...e,...a];throw new Error(`Expected \`document.badges\` to be an array or a function, but received ${fn(a)}`)},cz=(e,{document:t},n)=>{const a=t==null?void 0:t.actions;if(!a)return e;if(typeof a=="function")return a(e,n);if(Array.isArray(a))return[...e,...a];throw new Error(`Expected \`document.actions\` to be an array or a function, but received ${fn(a)}`)},dz=(e,{document:t},n)=>{const a=t==null?void 0:t.newDocumentOptions;if(!a)return e;if(typeof a!="function")throw new Error(`Expected \`document.resolveNewDocumentOptions\` to be a function, but received ${fn(a)}`);return a(e,n)},uz=(e,{form:t},n)=>{var a;const r=(a=t==null?void 0:t.file)==null?void 0:a.assetSources;if(!r)return e;if(typeof r=="function")return r(e,n);if(Array.isArray(r))return[...e,...r];throw new Error(`Expected \`form.file.assetSources\` to be an array or a function, but received ${fn(r)}`)},mz=(e,{form:t},n)=>{var a;const r=(a=t==null?void 0:t.image)==null?void 0:a.assetSources;if(!r)return e;if(typeof r=="function")return r(e,n);if(Array.isArray(r))return[...e,...r];throw new Error(`Expected \`form.image.assetSources\` to be an array or a function, but received ${fn(r)}`)},pz=(e,{document:t},n)=>{const a=t==null?void 0:t.unstable_languageFilter;if(!a)return e;if(typeof a=="function")return a(e,n);if(Array.isArray(a))return[...e,...a];throw new Error(`Expected \`document.unstable_languageFilter\` to be an array or a function, but received ${fn(a)}`)},hz=(e,{document:t},n)=>{const a=t==null?void 0:t.inspectors;if(!a)return e;if(typeof a=="function")return a(e,n);if(Array.isArray(a))return[...e,...a];throw new Error(`Expected \`document.inspectors\` to be an array or a function, but received ${fn(a)}`)},Kg=e=>{const{config:t,context:n,initialValue:a}=e;return qi(t,[]).reduce((r,{config:o})=>{var s,d,c,u,m;const p=(m=(d=(s=o.document)==null?void 0:s.comments)==null?void 0:d.enabled)!=null?m:(u=(c=o.document)==null?void 0:c.unstable_comments)==null?void 0:u.enabled;if(!p&&typeof p!="boolean")return r;if(typeof p=="function")return p(n);if(typeof p=="boolean")return p;throw new Error(`Expected \`document.comments.enabled\` to be a boolean or a function, but received ${fn(p)}`)},a)},fz=e=>{const{config:t,initialValue:n}=e;return qi(t,[]).reduce((a,{config:r})=>{var o,s,d;const c=(d=(s=(o=r.features)==null?void 0:o.beta)==null?void 0:s.treeArrayEditing)==null?void 0:d.enabled;if(!c&&typeof c!="boolean")return a;if(typeof c=="boolean")return c;throw new Error(`Expected \`features.beta.treeArrayEditing.enabled\` to be a boolean, but received ${fn(c)}`)},n)},gz=e=>{const{config:t}=e;return qi(t,[]).reduce((n,{config:a})=>{const r=a.__internal_tasks;if(!r)return n;if(typeof r=="object"&&r.footerAction)return r;throw new Error(`Expected \`__internal__tasks\` to be an object with footerAction, but received ${fn(r)}`)},void 0)},bz=e=>{const{config:t,initialValue:n}=e;return qi(t,[]).reduce((a,{config:r})=>{var o,s;const d=(s=(o=r.search)==null?void 0:o.unstable_partialIndexing)==null?void 0:s.enabled;if(!d&&typeof d!="boolean")return a;if(typeof d=="boolean")return d;throw new Error(`Expected \`search.unstable_partialIndexing.enabled\` to be a boolean, but received ${fn(d)}`)},n)},yz=(e,{search:t})=>typeof(t==null?void 0:t.enableLegacySearch)<"u"?t.enableLegacySearch:e;function on({config:e,context:t,initialValue:n,propertyName:a,...r}){const o=qi(e,[]);if("reducer"in r)return o.reduce((d,{config:c,path:u})=>{try{return r.reducer(d,c,t)}catch(m){throw new Ch({propertyName:a,path:u,cause:m})}},n);const s=r.asyncReducer;return(async()=>{let d=n;for(const{config:c,path:u}of o)try{d=await s(d,c,t)}catch(m){throw new Ch({propertyName:a,path:u,cause:m})}return d})()}function vz(e){const{bundles:t}=e;function n(){}function a(r,o,s){const d=t.filter(c=>c.locale===r&&c.namespace===o);if(d.length===0){s(`No translations found for namespace "${o}", language "${r}"`,void 0);return}xz(d).then(c=>s(null,c)).catch(c=>s(c,!0))}return{type:"backend",init:n,read:a}}async function xz(e){var t,n;const a=await Promise.all(e.map(async o=>({...o,resources:await Cz(o)}))),r={};for(const o of a){const s=(t=o.deep)!=null?t:!0,d=(n=o.overwrite)!=null?n:!0;s?d1(r,o.resources,d):d?Object.assign(r,o.resources):Object.assign({},o.resources,r)}return r}async function Cz(e){if(typeof e.resources!="function")return e.resources;const t=await e.resources();return wz(t)}function d1(e,t,n=!1){for(const a in t){if(a==="__proto__"||a==="constructor")continue;if(!(a in e)){e[a]=t[a];continue}const r=e[a],o=t[a],s=Wg(r),d=Wg(o);if((s||d)&&n){e[a]=t[a];continue}if(s||d)continue;const c=Array.isArray(o),u=Array.isArray(r);if(c||u){n&&(e[a]=o);continue}d1(r,o,n)}return e}function Wg(e){return typeof e=="string"||e instanceof String}function wz(e){return Tz(e)?e.default:e}function Tz(e){return"default"in e&&typeof e.default=="object"&&Ci(e.default)}function jz(e){const{projectId:t,dataset:n,name:a}=e,r={projectId:t,dataset:n},o=on({config:e,context:r,propertyName:"i18n.locales",reducer:oz,initialValue:[aa]}),s=on({config:e,context:r,propertyName:"i18n.bundles",reducer:sz,initialValue:Az(o)});return kz({locales:o,bundles:s,projectId:t,sourceName:a})}function kz({locales:e,bundles:t,projectId:n,sourceName:a}){const r=new Set(t.map(c=>c.namespace)),o=Sz(n,a,e,r),s=Fy().use(vz({bundles:t})).use(nS);s.init(o).catch(c=>{console.error("Failed to initialize i18n backend: %s",c)});const d=e.map(_z);return{source:{get currentLocale(){var c;return(c=d.find(u=>u.id===s.language))!=null?c:aa},loadNamespaces(c){const u=c.filter(m=>!s.hasLoadedNamespace(m));return u.length===0?Promise.resolve():s.loadNamespaces(u)},locales:d,t:Ev(s.t)},i18next:s}}function Az(e){const t=[];for(const n of e){if(n.bundles&&!Array.isArray(n.bundles))throw new Error(`Resource bundle for locale ${n.id} is not an array`);if(n.bundles)for(const a of n.bundles){if("locale"in a&&a.locale!==n.id)throw new Error(`Resource bundle inside locale ${n.id} has mismatching locale id`);if(!a.namespace)throw new Error(`Resource bundle for locale ${n.id} is missing namespace`);t.push("locale"in a?a:{...a,locale:n.id})}}return t}const Gg={ns:[ko],defaultNS:ko,partialBundledLanguages:!0,fallbackLng:aa.id,lng:aa.id,debug:a_,load:"currentOnly",initImmediate:!0,interpolation:{escapeValue:!1},react:{bindI18nStore:"added"}};function Sz(e,t,n,a){var r,o;const s=tE(e,t),d=n.find(m=>m.id===s),c=n[n.length-1],u=(o=(r=d==null?void 0:d.id)!=null?r:c.id)!=null?o:Gg.lng;return{...Gg,ns:Array.from(a),lng:u,supportedLngs:n.map(m=>m.id)}}function _z(e){const{bundles:t,...n}=e;return n}function u1(e){return e.reduce((t,n)=>(t[n.name]=n,t),{})}function Ei(e,t){return e[t]}function Ez(e){return e.reduce((t,n)=>(n.type==="field"&&t.push(n.fieldType),t),[])}const Iz=[{fieldPath:"_updatedAt",icon:Qt,operators:[{name:"dateTimeLast",type:"item"},{type:"divider"},{name:"dateTimeRange",type:"item"},{name:"dateTimeAfter",type:"item"},{name:"dateTimeBefore",type:"item"},{type:"divider"},{name:"dateTimeEqual",type:"item"},{name:"dateTimeNotEqual",type:"item"}],title:"Edited at",name:"updatedAt",type:"pinned"},{fieldPath:"_createdAt",icon:Qt,operators:[{name:"dateTimeLast",type:"item"},{type:"divider"},{name:"dateTimeRange",type:"item"},{name:"dateTimeAfter",type:"item"},{name:"dateTimeBefore",type:"item"},{type:"divider"},{name:"dateTimeEqual",type:"item"},{name:"dateTimeNotEqual",type:"item"}],title:"Created at",name:"createdAt",type:"pinned"},{icon:ma,operators:[{name:"referencesDocument",type:"item"},{name:"referencesAssetImage",type:"item"},{name:"referencesAssetFile",type:"item"}],title:"Contains document, image or file",name:"references",type:"pinned"},{fieldType:"array",icon:Ds,name:"array",operators:[{name:"defined",type:"item"},{name:"notDefined",type:"item"},{type:"divider"},{name:"arrayCountEqual",type:"item"},{name:"arrayCountNotEqual",type:"item"},{type:"divider"},{name:"arrayCountGt",type:"item"},{name:"arrayCountGte",type:"item"},{name:"arrayCountLt",type:"item"},{name:"arrayCountLte",type:"item"},{type:"divider"},{name:"arrayCountRange",type:"item"}],type:"field"},{fieldType:"array",icon:Ds,name:"arrayList",operators:[{name:"arrayListIncludes",type:"item"},{name:"arrayListNotIncludes",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"},{type:"divider"},{name:"arrayCountEqual",type:"item"},{name:"arrayCountNotEqual",type:"item"},{type:"divider"},{name:"arrayCountGt",type:"item"},{name:"arrayCountGte",type:"item"},{name:"arrayCountLt",type:"item"},{name:"arrayCountLte",type:"item"},{type:"divider"},{name:"arrayCountRange",type:"item"}],type:"field"},{fieldType:"array",icon:Ds,name:"arrayReferences",operators:[{name:"arrayReferenceIncludes",type:"item"},{name:"arrayReferenceNotIncludes",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"},{type:"divider"},{name:"arrayCountEqual",type:"item"},{name:"arrayCountNotEqual",type:"item"},{type:"divider"},{name:"arrayCountGt",type:"item"},{name:"arrayCountGte",type:"item"},{name:"arrayCountLt",type:"item"},{name:"arrayCountLte",type:"item"},{type:"divider"},{name:"arrayCountRange",type:"item"}],type:"field"},{fieldType:"boolean",icon:zo,name:"boolean",operators:[{name:"booleanEqual",type:"item"},{type:"divider"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"date",icon:Qt,name:"date",operators:[{name:"dateLast",type:"item"},{type:"divider"},{name:"dateRange",type:"item"},{name:"dateAfter",type:"item"},{name:"dateBefore",type:"item"},{type:"divider"},{name:"dateEqual",type:"item"},{name:"dateNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"datetime",icon:Qt,name:"datetime",operators:[{name:"dateTimeLast",type:"item"},{type:"divider"},{name:"dateTimeRange",type:"item"},{name:"dateTimeAfter",type:"item"},{name:"dateTimeBefore",type:"item"},{type:"divider"},{name:"dateTimeEqual",type:"item"},{name:"dateTimeNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"email",icon:Qr,name:"email",operators:[{name:"stringMatches",type:"item"},{name:"stringNotMatches",type:"item"},{type:"divider"},{name:"stringEqual",type:"item"},{name:"stringNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"file",icon:Ar,name:"file",operators:[{name:"assetFileEqual",type:"item"},{name:"assetFileNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"image",icon:Ha,name:"image",operators:[{name:"assetImageEqual",type:"item"},{name:"assetImageNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"number",icon:aS,name:"number",operators:[{name:"numberEqual",type:"item"},{name:"numberNotEqual",type:"item"},{type:"divider"},{name:"numberGt",type:"item"},{name:"numberGte",type:"item"},{name:"numberLt",type:"item"},{name:"numberLte",type:"item"},{type:"divider"},{name:"numberRange",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"array",icon:iS,name:"portableText",operators:[{name:"portableTextMatches",type:"item"},{name:"portableTextNotMatches",type:"item"},{type:"divider"},{name:"portableTextEqual",type:"item"},{name:"portableTextNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"reference",icon:ma,name:"reference",operators:[{name:"referenceEqual",type:"item"},{name:"referenceNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"slug",icon:Qr,name:"slug",operators:[{name:"slugMatches",type:"item"},{name:"slugNotMatches",type:"item"},{type:"divider"},{name:"slugEqual",type:"item"},{name:"slugNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"string",icon:Qr,name:"string",operators:[{name:"stringMatches",type:"item"},{name:"stringNotMatches",type:"item"},{type:"divider"},{name:"stringEqual",type:"item"},{name:"stringNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"string",icon:_n,name:"stringList",operators:[{name:"stringListEqual",type:"item"},{name:"stringListNotEqual",type:"item"},{type:"divider"},{name:"stringMatches",type:"item"},{name:"stringNotMatches",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"text",icon:Qr,name:"text",operators:[{name:"stringMatches",type:"item"},{name:"stringNotMatches",type:"item"},{type:"divider"},{name:"stringEqual",type:"item"},{name:"stringNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"url",icon:Qr,name:"url",operators:[{name:"stringMatches",type:"item"},{name:"stringNotMatches",type:"item"},{type:"divider"},{name:"stringEqual",type:"item"},{name:"stringNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"}];function ca(e={}){const t=Yi().id;return $a.dateTimeFormat(t,e)}function m1(e={}){const t=Yi().id,n={unitDisplay:"long",...e,style:"unit"};return function(a,r){return $a.numberFormat(t,{...n,unit:r}).format(a)}}function Mz({documentId:e,schemaType:t}){const n=gn(),a=l.useMemo(()=>pc(n,t,e,""),[e,n,t]),{draft:r,published:o,isLoading:s}=Ut(a,{draft:null,isLoading:!0,published:null}),d=l.useMemo(()=>({_id:e,_type:t.name}),[e,t.name]),c=jw({draft:r,published:o,value:d});return s?i.jsx(Ti,{animated:!0,marginLeft:1,radius:2,style:{width:"10ch",height:"1em"}}):i.jsx(i.Fragment,{children:c.title||e.slice(0,8)})}function Ss({value:e}){const t=ca({dateStyle:"medium",timeStyle:e.includeTime?"short":void 0}),n=e!=null&&e.date?new Date(e.date):null;return!n||!pi(n)?null:i.jsx(i.Fragment,{children:t.format(n)})}function Pz({value:e}){var t;const n=m1();return i.jsx(i.Fragment,{children:n(Math.floor((t=e==null?void 0:e.unitValue)!=null?t:0),e.unit)})}function qg({value:e}){const t=ca({dateStyle:"medium",timeStyle:e.includeTime?"short":void 0}),n=e!=null&&e.from?new Date(e.from):null,a=e!=null&&e.to?new Date(e.to):null;if(!a||!n||!pi(a)||!pi(n))return null;const r=t.format(n),o=t.format(a);return i.jsx(i.Fragment,{children:`${r} → ${o}`})}function ra({value:e}){const t=ot(),n=e._ref,a=t.get(e._type);return a?i.jsx(Mz,{documentId:n,schemaType:a}):null}function Ve(){const e=l.useContext(g0);if(e===void 0)throw new Error("useSearchState must be used within an SearchProvider");return e}function Hn({value:e,onChange:t}){const[n,a]=l.useState(e??""),{state:{fullscreen:r}}=Ve(),{t:o}=L(),s=l.useCallback(d=>{a(d.currentTarget.value);const c=parseFloat(d.currentTarget.value);t(Number.isFinite(c)?c:null)},[t]);return i.jsx(nn,{fontSize:r?2:1,onChange:s,placeholder:o("search.filter-number-value-placeholder"),radius:2,step:"any",type:"number",value:n})}function p1({onChange:e,value:t}){var n,a;const[r,o]=l.useState((n=t==null?void 0:t.to)!=null?n:""),[s,d]=l.useState((a=t==null?void 0:t.from)!=null?a:""),{state:{fullscreen:c}}=Ve(),{t:u}=L(),m=l.useCallback(h=>{var f;o(h.currentTarget.value);const g=parseFloat(h.currentTarget.value);e({to:Number.isFinite(g)?g:null,from:(f=t==null?void 0:t.from)!=null?f:null})},[t==null?void 0:t.from,e]),p=l.useCallback(h=>{var f;d(h.currentTarget.value);const g=parseFloat(h.currentTarget.value);e({to:(f=t==null?void 0:t.to)!=null?f:null,from:Number.isFinite(g)?g:null})},[t==null?void 0:t.to,e]);return i.jsxs(P,{gap:2,children:[i.jsx(I,{flex:1,children:i.jsx(nn,{fontSize:c?2:1,onChange:p,placeholder:u("search.filter-number-min-value-placeholder"),radius:2,step:"any",type:"number",value:s})}),i.jsx(I,{flex:1,children:i.jsx(nn,{fontSize:c?2:1,onChange:m,placeholder:u("search.filter-number-max-value-placeholder"),radius:2,step:"any",type:"number",value:r})})]})}function gc(e,t){const n=t.split("."),a=n[0];if(a&&pa(e)){const r=e.fields.find(o=>o.name===a);if(r){const o=n.slice(1).join(".");return o?gc(r.type,o):r}}}const Nz=k(I)`
  @supports (-webkit-overflow-scrolling: touch) {
    * [data-ui='Box'] {
      background-attachment: scroll;
    }
  }
`;function h1({documentId:e,layout:t,presence:n,schemaType:a,showBadge:r=!0}){const o=gn(),s=l.useMemo(()=>pc(o,a,e,""),[e,o,a]),{draft:d,published:c,isLoading:u}=Ut(s,{draft:null,isLoading:!0,published:null}),m=l.useMemo(()=>({_id:e,_type:a.name}),[e,a.name]),p=l.useMemo(()=>u?null:i.jsxs(P,{align:"center",gap:3,children:[n&&n.length>0&&i.jsx(Jv,{presence:n}),r&&i.jsx(Sn,{children:a.title}),i.jsx($m,{draft:d,published:c})]}),[d,u,n,c,a.title,r]),h=i.jsx(Yp,{draft:d,published:c});return i.jsx(Nz,{children:i.jsx(Xn,{...jw({draft:d,published:c,value:m}),isPlaceholder:u??!0,layout:t||"default",icon:a.icon,status:p,tooltip:h})})}function vp({disableIntentLink:e,documentId:t,documentType:n,layout:a,onClick:r,onItemSelect:o,...s}){const d=ot().get(n),c=yp(t),u=l.useMemo(()=>({id:t,type:d==null?void 0:d.name}),[t,d==null?void 0:d.name]),{onClick:m,href:p}=pk({intent:"edit",params:u}),h=l.useCallback(f=>{o==null||o({_id:t,_type:n}),e||m(f),r==null||r()},[o,t,n,e,r,m]);return d?i.jsx(I,{...s,children:i.jsx(Co,{as:"a","data-as":"a",flex:1,href:e?void 0:p,onClick:h,radius:2,tabIndex:-1,children:i.jsx(h1,{documentId:t,layout:a,presence:c,schemaType:d})})}):null}const Oz=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Fz="_debug_search_score",f1=!1,Rz=1e3,g1="k",Dz=Oz?"Cmd":"Ctrl",bu=xr.space[4],$z=735,Lz=800,ns=5,Yr=3;function bc({allowEmptyQueries:e,terms:t}){const n=e?!0:t.query.length>0,a=!!t.filter,r=t.types.length>0;return n||a||r}function Bz(e,t){return yc(e).filter(n=>Vz(n,t)).sort(yu)}function yc(e){return rO(e).filter(t=>t.__experimental_omnisearch_visibility!==!1)}function yu(e,t){var n,a;return((n=e.title)!=null?n:e.name).localeCompare((a=t.title)!=null?a:t.name)}function Vz(e,t){var n;return!t||((n=e.title)!=null?n:e.name).toLowerCase().includes(t==null?void 0:t.toLowerCase())}const Uz=300,cd={error:null,hits:[],loading:!1,terms:{query:"",types:[]}};function zz(e){return e!==null}function Hz(e){var t;return{...e,terms:{...e.terms,filter:(t=e.terms.filter)==null?void 0:t.trim(),query:e.terms.query.trim()}}}function b1({allowEmptyQueries:e,initialState:t,onComplete:n,onError:a,onStart:r,schema:o}){const[s,d]=l.useState(t),c=Xe(qe),u=Km(),{enableLegacySearch:m=!1}=Dt().search,p=l.useMemo(()=>Um(yc(o),c,{tag:"search.global",unique:!0,enableLegacySearch:m,maxDepth:u}),[c,u,o,m]),h=em(f=>f.pipe(Ue(zz),K(Hz),yt(tt),o0(g=>mn((g==null?void 0:g.debounceTime)||Uz)),bt(r),Ee(g=>zt(re({...cd,loading:!0,options:g.options,terms:g.terms}),hk(()=>bc({allowEmptyQueries:e,terms:g.terms}),p(g.terms,g.options).pipe(bt(({hits:b,nextCursor:v})=>n==null?void 0:n({hits:b,nextCursor:v})),ut(b=>(a==null||a(b),re({...cd,error:b,loading:!1,options:g.options,terms:g.terms})))),re($t).pipe(bt(()=>n==null?void 0:n({hits:[],nextCursor:void 0})))),re({loading:!1}))),qn((g,b)=>({...g,...b}),cd),bt(d)));return{handleSearch:l.useCallback(f=>h(f),[h]),searchState:s}}const Kz=40;function y1({availableCharacters:e=Kz,types:t}){if(t.length===0)return{remainingCount:0,types:[]};const n=t.reduce(function(){let a=e;return function(r,o,s){const d=Yg(o);return a-=d.length,(s===0||e>d.length&&a>d.length)&&r.push(o),r}}(),[]);return{remainingCount:t.length-n.length,types:n.map(Yg)}}function v1({t:e,availableCharacters:t,types:n}){if(n.length===0)return e("search.document-type-list-all-types");const{remainingCount:a,types:r}=y1({availableCharacters:t,types:n}),o=a>0?"search.document-type-list-truncated":"search.document-type-list";return e(o,{count:a,types:r,formatParams:{types:{style:"short",type:"unit"}}})}function Yg(e){var t;return(t=e.title)!=null?t:e.name}const Wz=()=>!0,Gz=k(E)`
  word-break: break-word;
`,qz=l.forwardRef(function({onSelect:e,types:t=[],value:n},a){const r=l.useRef(null),o=ot(),{state:{fullscreen:s}}=Ve(),{t:d}=L(),c=l.useId(),[u,m]=l.useState([]),{handleSearch:p,searchState:h}=b1({allowEmptyQueries:!0,initialState:{hits:[],loading:!1,error:null,terms:{query:"",types:t}},onComplete:w=>{m(w.hits.map(({hit:C})=>({value:C._id,hit:C})))},schema:o}),f=l.useCallback(()=>{p({debounceTime:0,options:{limit:100},terms:{query:"",types:t}})},[p,t]),g=l.useCallback(w=>{p(w?{options:{limit:100},terms:{query:w||"",types:t}}:{debounceTime:0,options:{limit:0},terms:{query:"",types:t}})},[p,t]),b=l.useCallback(w=>{var C;const T=(C=u.find(j=>j.value===w))==null?void 0:C.hit;T&&(e==null||e({_ref:ft(T._id),_type:T._type}))},[u,e]),v=l.useMemo(()=>{if(t.length===0)return d("search.action.search-all-types");const{remainingCount:w,types:C}=y1({types:t}),T=w>0?"search.action.search-specific-types-truncated":"search.action.search-specific-types";return d(T,{count:w,types:C,formatParams:{types:{style:"short",type:"unit"}}})},[t,d]),y=l.useCallback(w=>i.jsx(vp,{disableIntentLink:!0,documentId:w.value,documentType:w.hit._type,layout:"compact"}),[]),x=l.useCallback((w,C)=>{const{content:T,hidden:j,onMouseEnter:A,onMouseLeave:M}=w,S=u&&u.length>0;return i.jsx(rt,{constrainSize:!0,content:i.jsx("div",{ref:C,children:S?T:h.terms.query&&i.jsx(I,{padding:4,children:i.jsx(P,{align:"center",height:"fill",justify:"center",children:i.jsx(Gz,{align:"center",muted:!0,children:i.jsx(Pe,{t:d,i18nKey:"new-document.no-results",values:{searchQuery:h.terms.query}})})})})}),fallbackPlacements:["bottom","bottom-end"],matchReferenceWidth:!0,onMouseEnter:A,onMouseLeave:M,open:!h.loading&&!j,overflow:"auto",placement:"bottom-start",radius:Yr,referenceElement:r.current})},[u,h.loading,h.terms.query,d]);return i.jsx("div",{ref:r,children:i.jsx(Cl,{"aria-label":v,filterOption:Wz,fontSize:s?2:1,id:c,loading:h.loading,openButton:{onClick:f},options:u,onQueryChange:g,onSelect:b,placeholder:v,radius:2,ref:a,renderOption:y,renderPopover:x,value:n==null?void 0:n._ref})})});function vo({fieldDefinition:e,onChange:t,value:n}){const{onClose:a,state:{documentTypesNarrowed:r}}=Ve(),o=ot(),{t:s}=L(),d=l.useCallback(p=>t(p),[t]),c=l.useMemo(()=>e?e.documentTypes.filter(p=>r.includes(p)).flatMap(p=>{const h=o.get(p);if(h){const f=gc(h,e.fieldPath);if(ua(f==null?void 0:f.type))return f==null?void 0:f.type.of.filter(gi).flatMap(g=>g.to);if(gi(f==null?void 0:f.type))return f==null?void 0:f.type.to}return[]}).reduce((p,h)=>(p.findIndex(f=>f.name===(h==null?void 0:h.name))<0&&p.push(h),p),[]):[],[r,e,o]),u=l.useCallback(()=>d(null),[d]),m=l.useCallback(()=>{a==null||a()},[a]);return i.jsx(I,{style:{width:"min(calc(100vw - 40px), 420px)"},children:n!=null&&n._ref&&n!=null&&n._type?i.jsxs(B,{space:3,children:[i.jsx(U,{padding:1,radius:1,shadow:1,children:i.jsx(vp,{documentId:n._ref,documentType:n._type,layout:"compact",onClick:m})}),i.jsx(Z,{mode:"ghost",onClick:u,text:s("search.filter-reference-clear"),tone:"critical"})]}):i.jsx(qz,{onSelect:d,types:c,value:n})})}function Yz({onClick:e,selected:t,title:n,value:a}){const r=l.useCallback(()=>e(a),[e,a]);let o=`${n}`;return typeof a<"u"&&n!==a&&(o+=` (${a})`),i.jsx(ye,{onClick:r,pressed:t,tone:"default",text:o})}function ul({fieldDefinition:e,onChange:t,value:n}){const a=l.useId(),{state:{documentTypesNarrowed:r}}=Ve(),{t:o}=L(),s=ot(),d=l.useMemo(()=>e?e.documentTypes.filter(u=>r.includes(u)).map(u=>{const m=s.get(u);if(m){const p=gc(m,e.fieldPath);return p==null?void 0:p.type.options}return null}).filter(Ft).map(u=>u.list).flatMap(u=>u==null?void 0:u.map(m=>Xz(m))).filter(Ft).reduce((u,m)=>{const p=u.findIndex(h=>h.value===(m==null?void 0:m.value));if(p>-1){const h=u[p];u[p]={...u[p],title:za([...h.title,m.title]).sort()}}else u.push({...m,title:[m.title]});return u},[]):[],[r,e,s]),c=l.useCallback(u=>{t(u)},[t]);return i.jsx(ze,{button:i.jsx(Z,{mode:"ghost",iconRight:_n,text:n?String(n):o("search.filter-string-value-select-predefined-value")}),id:a||"",menu:i.jsx(Be,{children:d.map((u,m)=>i.jsx(Yz,{onClick:c,selected:u.value===n,title:u.title.join(", "),value:u.value||""},m))}),popover:{constrainSize:!0,placement:"bottom-start",portal:!1,radius:2}})}function Xz(e){return cm(e)?e:{title:xl(`${e}`),value:e}}const x1=()=>i.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M7.04 19V17.512H17.36V19H7.04ZM7.04 15.328V13.624L12.08 11.872L15.32 10.816V10.72L12.08 9.664L7.04 7.912V6.208L17.36 9.88V11.656L7.04 15.328Z",fill:"currentColor"})}),C1=()=>i.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M7.568 18.848V16.952L14.792 12.08V11.984L7.568 7.112V5.216L16.52 11.288V12.776L7.568 18.848Z",fill:"currentColor"})}),w1=()=>i.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M7.04 19V17.512H17.36V19H7.04ZM17.36 15.328L7.04 11.656V9.88L17.36 6.208V7.912L12.32 9.664L9.08 10.72V10.816L12.32 11.872L17.36 13.624V15.328Z",fill:"currentColor"})}),T1=()=>i.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M16.952 19.632L8 13.56V12.072L16.952 6V7.896L9.728 12.768V12.864L16.952 17.736V19.632Z",fill:"currentColor"})});function xe(e){return JSON.stringify(e)}const Jz={arrayCountEqual:{nameKey:"search.operator.array-count-equal.name",descriptionKey:"search.operator.array-count-equal.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) == ${xe(t)}`:null,initialValue:null,inputComponent:Hn,type:"arrayCountEqual"},arrayCountGt:{nameKey:"search.operator.array-count-gt.name",descriptionKey:"search.operator.array-count-gt.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) > ${xe(t)}`:null,icon:C1,initialValue:null,inputComponent:Hn,type:"arrayCountGt"},arrayCountGte:{nameKey:"search.operator.array-count-gte.name",descriptionKey:"search.operator.array-count-gte.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) >= ${xe(t)}`:null,icon:x1,initialValue:null,inputComponent:Hn,type:"arrayCountGte"},arrayCountLt:{nameKey:"search.operator.array-count-lt.name",descriptionKey:"search.operator.array-count-lt.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) < ${xe(t)}`:null,icon:T1,initialValue:null,inputComponent:Hn,type:"arrayCountLt"},arrayCountLte:{nameKey:"search.operator.array-count-lte.name",descriptionKey:"search.operator.array-count-lte.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) <= ${xe(t)}`:null,icon:w1,initialValue:null,inputComponent:Hn,type:"arrayCountLte"},arrayCountNotEqual:{nameKey:"search.operator.array-count-not-equal.name",descriptionKey:"search.operator.array-count-not-equal.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) != ${xe(t)}`:null,initialValue:null,inputComponent:Hn,type:"arrayCountNotEqual"},arrayCountRange:{nameKey:"search.operator.array-count-range.name",descriptionKey:"search.operator.array-count-range.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t==null?void 0:t.to)&&Number.isFinite(t==null?void 0:t.from)&&e?`count(${e}) > ${xe(t==null?void 0:t.from)} && count(${e}) < ${xe(t==null?void 0:t.to)}`:"",initialValue:null,inputComponent:p1,type:"arrayCountRange"},arrayListIncludes:{nameKey:"search.operator.array-list-includes.name",descriptionKey:"search.operator.array-list-includes.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${xe(t)} in ${e}`:null,initialValue:null,inputComponent:ul,type:"arrayListIncludes"},arrayListNotIncludes:{nameKey:"search.operator.array-list-not-includes.name",descriptionKey:"search.operator.array-list-not-includes.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`!(${xe(t)} in ${e})`:null,initialValue:null,inputComponent:ul,type:"arrayListNotIncludes"},arrayReferenceIncludes:{nameKey:"search.operator.array-reference-includes.name",descriptionKey:"search.operator.array-reference-includes.description",buttonValueComponent:ra,groqFilter:({fieldPath:e,value:t})=>t!=null&&t._ref&&e?`${xe(t._ref)} in ${e}[]._ref`:null,initialValue:null,inputComponent:vo,type:"arrayReferenceIncludes"},arrayReferenceNotIncludes:{nameKey:"search.operator.array-reference-not-includes.name",descriptionKey:"search.operator.array-reference-not-includes.description",buttonValueComponent:ra,groqFilter:({fieldPath:e,value:t})=>t!=null&&t._ref&&e?`!(${xe(t._ref)} in ${e}[]._ref)`:null,initialValue:null,inputComponent:vo,type:"arrayReferenceNotIncludes"}};function Zz(e){const{t}=L();return i.jsx(I,{...e,children:i.jsxs(P,{align:"flex-start",gap:3,children:[i.jsx(Ct,{tone:"caution",children:i.jsx(Wt,{})}),i.jsxs(B,{space:4,children:[i.jsx(Ct,{size:1,tone:"caution",weight:"medium",children:t("search.error.no-valid-asset-source-title")}),i.jsx(Ct,{size:1,tone:"caution",children:t("search.error.no-valid-asset-source-only-default-description")}),i.jsx(Ct,{size:1,tone:"caution",children:t("search.error.no-valid-asset-source-check-config-description")})]})]})})}function Qz({reference:e}){const t=gn(),n=l.useCallback(a=>bx(t,a),[t]);return i.jsx(Mo,{observeAsset:n,reference:e,waitPlaceholder:i.jsx(t7,{}),children:a=>i.jsx(e7,{asset:a})})}function e7({asset:e}){return i.jsx(U,{padding:2,shadow:1,children:i.jsxs(P,{align:"center",justify:"space-between",wrap:"nowrap",children:[i.jsx(U,{padding:3,radius:1,shadow:1,tone:"transparent",children:i.jsx(E,{children:i.jsx(El,{})})}),i.jsxs(B,{flex:1,space:2,marginLeft:3,children:[i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",weight:"medium",children:(e==null?void 0:e.originalFilename)||e._id}),i.jsx(E,{size:1,muted:!0,children:DC(e.size)})]})]})})}function t7(){return i.jsx(U,{padding:2,shadow:1,children:i.jsxs(P,{align:"center",justify:"flex-start",children:[i.jsx(U,{padding:3,radius:1,shadow:1,tone:"transparent",children:i.jsx(E,{children:i.jsx(El,{})})}),i.jsxs(B,{flex:1,space:2,marginLeft:3,children:[i.jsx(it,{animated:!0,style:{width:"100%"},radius:1}),i.jsx(it,{animated:!0,style:{width:"100%"},radius:1})]})]})})}const n7=k(U)`
  position: relative;
  padding-bottom: 100%;
`,a7=k.img`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: block;
  object-fit: contain;
`;function i7({reference:e}){const t=gn(),n=l.useCallback(a=>gx(t,a),[t]);return i.jsx(Mo,{observeAsset:n,reference:e,children:a=>i.jsx(r7,{asset:a})})}function r7({asset:e}){const[t,n]=l.useState(!1),a=`${e.url}?h=800&fit=max`,r=l.useCallback(()=>n(!0),[]);return i.jsxs(n7,{__unstable_checkered:!0,border:!0,children:[!t&&i.jsx(It,{fill:!0,showText:!0}),i.jsx(a7,{onLoad:r,src:a})]})}function o7({reference:e}){return e?e._type.startsWith("sanity.fileAsset")?i.jsx(Qz,{reference:e}):e._type.startsWith("sanity.imageAsset")?i.jsx(i7,{reference:e}):null:null}const s7={file:"sanity.fileAsset",image:"sanity.imageAsset"},l7=k(I)`
  width: min(calc(100vw - 40px), 320px);
`;function mr(e){return function({onChange:t,value:n}){const[a,r]=l.useState(null),[o,s]=l.useState(null);Ve();const{file:d,image:c}=mt().form,{t:u}=L(),m=l.useMemo(()=>{switch(e){case"file":return d.assetSources.filter(C=>C.name===l1.name);case"image":return c.assetSources.filter(C=>C.name===c1.name);default:throw Error("Unknown asset source found")}},[d.assetSources,c.assetSources]),p=l.useId(),h=Xe(qe),f=l.useCallback(()=>{s(null),t(null)},[t]),g=l.useCallback(()=>{r(null)},[]),b=l.useCallback(C=>{const T=C[0];s(T),g()},[g]),v=l.useCallback(C=>r(C),[]);l.useEffect(()=>{(o==null?void 0:o.kind)==="assetDocumentId"&&typeof(o==null?void 0:o.value)=="string"&&e&&t({_ref:o.value,_type:s7[e]})},[h,t,o]);const y=a==null?void 0:a.component,x=u(n?"search.filter-asset-change":"search.filter-asset-select",{context:e}),w=ct(e,"options.accept",e==="image"?"image/*":"");return i.jsx(l7,{children:i.jsxs(B,{space:3,children:[a&&y&&i.jsx(hm,{children:i.jsx(y,{assetType:e,dialogHeaderTitle:u("search.action.select-asset",{context:e}),onClose:g,onSelect:b,selectedAssets:[],selectionType:"single",accept:w})}),n&&i.jsx(o7,{reference:n}),i.jsxs(P,{gap:2,children:[m.length===0&&i.jsx(Zz,{padding:2}),m.length>0&&i.jsx(i.Fragment,{children:m.length>1?i.jsx(ze,{button:i.jsx(Z,{icon:n?Ld:Rn,iconRight:_n,mode:"ghost",width:n?"fill":void 0,text:x}),id:p,menu:i.jsx(Be,{children:m.map(C=>i.jsx(ye,{icon:C.icon||Ha,onClick:()=>v(C),text:(C.i18nKey?u(C.i18nKey):C.title)||pn(C.name)},C.name))}),popover:{constrainSize:!0,portal:!1,radius:2}}):i.jsx(Z,{icon:n?Ld:Rn,mode:"ghost",onClick:()=>v(m[0]),width:n?"fill":void 0,text:x})}),n&&i.jsx(Z,{mode:"ghost",onClick:f,width:"fill",text:u("search.filter-asset-clear"),tone:"critical"})]})]})})}}const c7={assetFileEqual:{nameKey:"search.operator.asset-file-equal.name",descriptionKey:"search.operator.asset-file-equal.description",buttonValueComponent:ra,groqFilter:({fieldPath:e,value:t})=>t!=null&&t._ref&&e?`${e}.asset._ref == ${xe(t._ref)}`:null,initialValue:null,inputComponent:mr("file"),label:"is",type:"assetFileEqual"},assetFileNotEqual:{nameKey:"search.operator.asset-file-not-equal.name",descriptionKey:"search.operator.asset-file-not-equal.description",buttonValueComponent:ra,groqFilter:({fieldPath:e,value:t})=>t!=null&&t._ref&&e?`${e}.asset._ref != ${xe(t._ref)}`:null,initialValue:null,inputComponent:mr("file"),label:"is not",type:"assetFileNotEqual"},assetImageEqual:{nameKey:"search.operator.asset-image-equal.name",descriptionKey:"search.operator.asset-image-equal.description",buttonValueComponent:ra,groqFilter:({fieldPath:e,value:t})=>t!=null&&t._ref&&e?`${e}.asset._ref == ${xe(t._ref)}`:null,initialValue:null,inputComponent:mr("image"),label:"is",type:"assetImageEqual"},assetImageNotEqual:{nameKey:"search.operator.asset-image-not-equal.name",descriptionKey:"search.operator.asset-image-not-equal.description",buttonValueComponent:ra,groqFilter:({fieldPath:e,value:t})=>t!=null&&t._ref&&e?`${e}.asset._ref != ${xe(t._ref)}`:null,initialValue:null,inputComponent:mr("image"),label:"is not",type:"assetImageNotEqual"}};function d7({onChange:e,value:t}){const{state:{fullscreen:n}}=Ve(),{t:a}=L(),r=l.useCallback(o=>{e(o.currentTarget.value==="true")},[e]);return i.jsxs(ka,{fontSize:n?2:1,onChange:r,radius:2,value:String(t??!0),children:[i.jsx("option",{value:"true",children:a("search.filter-boolean-true")}),i.jsx("option",{value:"false",children:a("search.filter-boolean-false")})]})}const u7={booleanEqual:{nameKey:"search.operator.boolean-equal.name",descriptionKey:"search.operator.boolean-equal.description",groqFilter:({fieldPath:e,value:t})=>typeof t<"u"&&e?`${e} == ${xe(t)}`:null,initialValue:!0,inputComponent:d7,type:"booleanEqual"}},m7=k(E)`
  cursor: default;
`;function xp({onChange:e,value:t}){const{t:n}=L();return i.jsxs(P,{align:"center",gap:2,justify:"flex-end",marginTop:1,children:[i.jsx(B,{children:i.jsx(m7,{muted:!0,onClick:e,size:1,weight:"medium",children:n("calendar.action.include-time-label")})}),i.jsx(rm,{checked:t,label:n("calendar.action.include-time-label"),onChange:e})]})}function Cp(){const e=l.useContext(rv);if(e===void 0)throw new Error("useCalendar must be used within an CalendarContext.Provider");return e}function p7(e){const{t}=L(),n=ca({month:"long",year:"numeric"}),{focusedDate:a}=Cp(),{moveFocusedDate:r,onNowClick:o}=e,s=l.useCallback(()=>r(-1),[r]),d=l.useCallback(()=>r(1),[r]);return i.jsxs(P,{align:"center",flex:1,justify:"space-between",children:[i.jsx(et,{paddingLeft:2,space:1,children:i.jsx(E,{size:1,weight:"medium",children:Wy(n.format(a))})}),i.jsxs(P,{align:"center",children:[i.jsx(Z,{"aria-label":t("calendar.action.go-to-today-aria-label"),mode:"bleed",onClick:o,text:t("calendar.action.go-to-today")}),i.jsx(Z,{icon:Vr,mode:"bleed",onClick:s,tooltipProps:{content:t("calendar.action.go-to-previous-month")}}),i.jsx(Z,{icon:_a,mode:"bleed",onClick:d,tooltipProps:{content:t("calendar.action.go-to-next-month")}})]})]})}const h7=k.svg(({theme:e})=>ae`
    bottom: 0;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;

    circle {
      stroke: ${e.sanity.color.card.enabled.border};
      stroke-width: 3;
      fill: none;
    }
  `),f7=k(U)`
  position: relative;

  &[data-focused='true'] {
    z-index: 1;
  }

  &[data-start-date='true'] {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  &[data-end-date='true'] {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  &[data-within-range='true'] {
    border-radius: 0;
  }
`;function g7({date:e,onSelect:t}){const n=l.useCallback(()=>{t(e)},[e,t]),{date:a,endDate:r,focusedDate:o,selectRange:s}=Cp(),d=a&&ln(e,a),c=s&&a&&ln(e,a),u=s&&r&&ln(e,r),m=Al(e,o),p=o&&ln(e,o),h=ln(e,new Date),f=a&&r&&!c&&!u&&Vd(e,a)&&iv(e,r);return i.jsxs(f7,{__unstable_focusRing:!0,"aria-label":e.toDateString(),"aria-pressed":d,"data-end-date":u?!0:void 0,"data-focused":p?"true":"","data-ui":"CalendarDay","aria-selected":d,"data-start-date":c?!0:void 0,"data-within-range":f?!0:void 0,forwardedAs:"button",onClick:n,paddingX:3,paddingY:2,radius:2,role:"button",selected:d||c||u,tabIndex:-1,tone:f?"primary":"default",children:[h&&i.jsx(h7,{height:"100%",preserveAspectRatio:"xMidYMid meet",vectorEffect:"non-scaling-stroke",viewBox:"0 0 100 100",width:"100%",children:i.jsx("circle",{cx:"50",cy:"50",r:"40%"})}),i.jsx(E,{align:"center",muted:!d&&!m,size:1,weight:m?"medium":"regular",children:e.getDate()})]})}const dd=["calendar.weekday-names.short.monday","calendar.weekday-names.short.tuesday","calendar.weekday-names.short.wednesday","calendar.weekday-names.short.thursday","calendar.weekday-names.short.friday","calendar.weekday-names.short.saturday","calendar.weekday-names.short.sunday"];Lo(0,24);const b7=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],y7=[1,2,3,4,5,6],v7=(e,t)=>{const n=Ol(e);return Fl({start:n,end:Rl(n)},{weekStartsOn:t===7?0:t})},x7=e=>e.map(t=>[t,...y7.map(n=>gt(t,n))]),C7=e=>{const{weekInfo:t}=Yi();return x7(v7(e,t.firstDay)).map(n=>({number:_l(n[0]),days:n}))},w7={1:dd,7:[dd[6],...dd.slice(0,6)]},T7=k(Ze)`
  grid-template-columns: repeat(7, minmax(44px, auto));
`;function j7({hidden:e,onSelect:t}){const{focusedDate:n,firstWeekDay:a}=Cp(),{t:r}=L();return i.jsx(I,{"aria-hidden":e||!1,"data-ui":"CalendarMonth",children:i.jsxs(T7,{gapY:1,children:[w7[a].map(o=>i.jsx(I,{paddingBottom:3,paddingTop:2,children:i.jsx(E,{align:"center",size:1,weight:"medium",children:r(o)})},o)),C7(n).map((o,s)=>o.days.map((d,c)=>i.jsx(g7,{date:d,onSelect:t},`${s}-${c}`)))]})})}const k7=i.jsx("span",{"data-preserve-focus":!0,style:{overflow:"hidden",position:"absolute",outline:"none"},tabIndex:-1});function A7(e){const{date:t,endDate:n,onSelect:a,selectRange:r,selectTime:o}=e,[s,d]=l.useState(null),[c,u]=l.useState(!1),[m,p]=l.useState(t||new Date),h=l.useRef(t||null),f=l.useRef(n||null),{weekInfo:{firstDay:g}}=Yi(),b=l.useCallback(()=>{var C;(C=s==null?void 0:s.querySelector('[data-focused="true"]'))==null||C.focus()},[s]),v=l.useCallback(C=>{const T=_A(C,{hours:C.getHours(),minutes:C.getMinutes(),seconds:0,milliseconds:0}),j=t&&iv(T,t),A=n&&Vd(T,n);if(r){if(j||A){a({date:T,endDate:null});return}a(c?{date:t||null,endDate:T}:{date:T,endDate:t?null:n||null})}else a({date:T})},[t,n,a,c,r]),y=l.useCallback(()=>{const C=new Date;r?p(C):a({date:C})},[a,r,p]),x=l.useCallback(C=>{var T;if(b7.includes(C.key)){if(C.preventDefault(),C.target.hasAttribute("data-calendar-grid")){b();return}C.key==="ArrowUp"&&p(gt(m,-7)),C.key==="ArrowDown"&&p(gt(m,7)),C.key==="ArrowLeft"&&p(gt(m,-1)),C.key==="ArrowRight"&&p(gt(m,1)),(T=s==null?void 0:s.querySelector("[data-preserve-focus]"))==null||T.focus()}},[s,b,m,p]),w=l.useCallback(C=>p(wl(m,C)),[m,p]);return l.useEffect(()=>{b()},[b]),l.useEffect(()=>{var C;(C=document.activeElement)!=null&&C.matches("[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]")&&b()},[b,m]),l.useEffect(()=>{var C,T;const j=(t==null?void 0:t.getTime())!==((C=h.current)==null?void 0:C.getTime()),A=(n==null?void 0:n.getTime())!==((T=f.current)==null?void 0:T.getTime()),M=j&&!A,S=!j&&A,N=t&&n&&Vd(t,n);M&&(N&&(u(!0),a({date:t,endDate:null})),u(!!t),t&&p(t)),S&&(N&&(u(!0),a({date:n,endDate:null})),u(!!t&&!n),n&&p(n)),j&&A&&(u(!0),t&&p(t)),h.current=t||null,f.current=n||null},[t,n,a]),i.jsx(rv.Provider,{value:{date:t,endDate:n,focusedDate:m,selectRange:r,selectTime:o,firstWeekDay:g},children:i.jsxs(I,{"data-ui":"Calendar",ref:d,children:[i.jsx(P,{children:i.jsx(I,{flex:1,children:i.jsx(p7,{moveFocusedDate:w,onNowClick:y})})}),i.jsxs(I,{"data-calendar-grid":!0,onKeyDown:x,marginTop:2,overflow:"hidden",tabIndex:0,children:[i.jsx(j7,{onSelect:v}),k7]})]})})}function wp({date:e,endDate:t,onChange:n,selectRange:a,selectTime:r}){const o=l.useCallback(s=>{n(s)},[n]);return i.jsx(A7,{date:e,endDate:t,onSelect:o,selectRange:a,selectTime:r})}const S7=k(I)(({$background:e,$smallClearButton:t})=>ae`
    width: 100%;

    input + span {
      background: ${({theme:n})=>e?n.sanity.color.card.disabled.bg2:"transparent"};
    }

    [data-qa='clear-button'] {
      background: none;
      box-shadow: none;
      display: flex; /* TODO: hack, currently used to vertically center <TextInput>'s clearButton */
      transform: ${t?"scale(0.8)":"scale(1)"};
      &:hover {
        opacity: 0.5;
      }
    }
  `),Tp=l.forwardRef(function(e,t){const{$background:n,$smallClearButton:a,...r}=e;return i.jsx(S7,{$background:n,$smallClearButton:a,children:i.jsx(nn,{...r,ref:t})})});function Ba({date:e,dateOnly:t,roundDay:n}){let a;switch(n){case"end":a=Xs(e);break;case"start":a=Rd(e);break;default:a=e;break}return t?a.toISOString().split("T")[0]:a.toISOString()}const _s={date:{exampleDate:"Jan 1, 2000",pattern:"MMM d, yyyy"},datetime:{exampleDate:"Jan 1, 2000 12:00 AM",pattern:"MMM d, yyyy p"}};function ml({isDateTime:e,onChange:t,placeholderDate:n,isDateTimeFormat:a,value:r,...o}){const{t:s}=L(),d=a?_s.datetime.pattern:_s.date.pattern,[c,u]=l.useState(void 0),[m,p]=l.useState(()=>{if(!r)return"";const x=new Date(r);return ya(x,d)}),h=l.useMemo(()=>ya(n||new Date,d),[d,n]),f=l.useCallback(({dateString:x,triggerOnChange:w})=>{if(!x)return;const C=Yu(x,d,new Date),T=pi(C);T&&(w&&t(Ba({date:C,dateOnly:!e})),p(ya(C,d))),u(T?void 0:`Invalid ${e?"datetime":"date"}`)},[d,e,t]),g=l.useCallback(()=>{f({dateString:m,triggerOnChange:!0})},[m,f]),b=l.useCallback(x=>{p(x.currentTarget.value)},[]),v=l.useCallback(()=>{t(null),u(void 0),p("")},[t]),y=l.useCallback(x=>{x.key==="Enter"&&f({dateString:m,triggerOnChange:!0})},[m,f]);return l.useEffect(()=>{const x=r&&new Date(r);x&&f({dateString:ya(x,d),triggerOnChange:!1})},[d,f,a,r]),i.jsx(Ie,{content:s("calendar.error.must-be-in-format",{exampleDate:a?_s.datetime.exampleDate:_s.date.exampleDate}),disabled:!c,placement:"top",portal:!0,children:i.jsx(Tp,{...o,clearButton:!!m,customValidity:c,onBlur:g,onChange:b,onClear:v,onKeyDown:y,placeholder:h,value:m})})}function vc({direction:e,isDateTime:t,onChange:n,value:a}){const{state:{fullscreen:r}}=Ve(),{t:o}=L(),s=l.useMemo(()=>{switch(e){case"after":return"end";case"before":return"start";default:return}},[e]),d=l.useCallback(({date:m})=>{let p=null;m&&(p=Ba({date:m,dateOnly:!t,roundDay:a!=null&&a.includeTime?void 0:s})),n({includeTime:a==null?void 0:a.includeTime,date:p})},[t,n,s,a==null?void 0:a.includeTime]),c=l.useCallback(()=>{const m=!(a!=null&&a.includeTime),p=a!=null&&a.date?new Date(a.date):null;let h=null;p&&(h=Ba({date:p,dateOnly:!t,roundDay:m?"start":s})),n({includeTime:m,date:h})},[t,n,s,a]),u=l.useCallback(m=>{n({includeTime:a==null?void 0:a.includeTime,date:m||null})},[n,a==null?void 0:a.includeTime]);return i.jsxs(B,{space:3,children:[i.jsx(ml,{"aria-label":o("search.filter-date-aria-label"),fontSize:r?2:1,isDateTime:t,isDateTimeFormat:t&&(a==null?void 0:a.includeTime),onChange:u,radius:2,value:a==null?void 0:a.date}),i.jsx(wp,{date:a!=null&&a.date?new Date(a.date):void 0,onChange:d,selectTime:t}),t&&i.jsx(xp,{onChange:c,value:!!(a!=null&&a.includeTime)})]})}function _7(e){return i.jsx(vc,{...e,direction:"after",isDateTime:!1})}function E7(e){return i.jsx(vc,{...e,direction:"before",isDateTime:!1})}function j1({isDateTime:e,onChange:t,value:n}){const{state:{fullscreen:a}}=Ve(),{t:r}=L(),o=l.useCallback(({date:c})=>{if(c){const u=Ba({date:c,dateOnly:!e});t({includeTime:n==null?void 0:n.includeTime,date:u})}else t(null)},[e,t,n==null?void 0:n.includeTime]),s=l.useCallback(()=>{const c=!(n!=null&&n.includeTime),u=n!=null&&n.date?new Date(n.date):null;let m=null;u&&(m=Ba({date:u,dateOnly:!e})),t({includeTime:c,date:m})},[e,t,n]),d=l.useCallback(c=>{t({includeTime:n==null?void 0:n.includeTime,date:c||null})},[t,n==null?void 0:n.includeTime]);return i.jsxs(B,{space:3,children:[i.jsx(ml,{"aria-label":r("search.filter-date-aria-label"),fontSize:a?2:1,isDateTime:e,isDateTimeFormat:e&&(n==null?void 0:n.includeTime),onChange:d,radius:2,value:n==null?void 0:n.date}),i.jsx(wp,{date:n!=null&&n.date?new Date(n.date):void 0,onChange:o,selectTime:e}),e&&i.jsx(xp,{onChange:s,value:!!(n!=null&&n.includeTime)})]})}function Xg(e){return i.jsx(j1,{...e,isDateTime:!1})}const I7=[{unit:"day",key:"search.filter-date-unit_days"},{unit:"month",key:"search.filter-date-unit_months"},{unit:"year",key:"search.filter-date-unit_years"}];function Jg({onChange:e,value:t}){const[n,a]=l.useState((t==null?void 0:t.unitValue)||""),r=l.useRef("day"),o=l.useRef((t==null?void 0:t.unitValue)||null),{t:s}=L(),{state:{fullscreen:d}}=Ve(),c=l.useCallback(()=>{e({unit:r==null?void 0:r.current,unitValue:o==null?void 0:o.current})},[e]),u=l.useCallback(p=>{r.current=p.currentTarget.value,c()},[c]),m=l.useCallback(p=>{a(p.currentTarget.value);const h=parseFloat(p.currentTarget.value);o.current=Number.isFinite(h)?h:null,c()},[c]);return i.jsxs(P,{gap:2,children:[i.jsx(I,{flex:1,children:i.jsx(nn,{"aria-label":s("search.filter-date-value-aria-label"),fontSize:d?2:1,onChange:m,pattern:"\\d*",radius:2,step:"1",type:"number",value:n})}),i.jsx(I,{flex:1,children:i.jsx(ka,{"aria-label":s("search.filter-date-unit-aria-label"),fontSize:d?2:1,onChange:u,radius:2,value:t==null?void 0:t.unit,children:I7.map(p=>i.jsx("option",{value:p.unit,children:s(p.key)},p.key))})})]})}const M7=-7;function k1({isDateTime:e,onChange:t,value:n}){const{t:a}=L(),{state:{fullscreen:r}}=Ve(),o=l.useMemo(()=>gt(new Date,M7),[]),s=l.useMemo(()=>new Date,[]),d=l.useCallback(({date:p,endDate:h})=>{t(Zg({date:p,endDate:h,includeTime:n==null?void 0:n.includeTime,isDateTime:e}))},[e,t,n==null?void 0:n.includeTime]),c=l.useCallback(()=>{const p=!(n!=null&&n.includeTime);t(Zg({date:n!=null&&n.from?new Date(n.from):null,endDate:n!=null&&n.to?new Date(n.to):null,includeTime:p,isDateTime:e}))},[e,t,n]),u=l.useCallback(p=>{t({includeTime:n==null?void 0:n.includeTime,to:p||null,from:(n==null?void 0:n.from)||null})},[t,n]),m=l.useCallback(p=>{t({includeTime:n==null?void 0:n.includeTime,to:(n==null?void 0:n.to)||null,from:p||null})},[t,n]);return i.jsx("div",{children:i.jsxs(B,{space:3,children:[i.jsxs(P,{direction:"column",gap:3,children:[i.jsx(ml,{"aria-label":a("search.filter-date-range-start-date-aria-label"),fontSize:r?2:1,isDateTime:e,isDateTimeFormat:e&&(n==null?void 0:n.includeTime),onChange:m,placeholderDate:o,radius:2,value:n==null?void 0:n.from}),i.jsx(ml,{"aria-label":a("search.filter-date-range-end-date-aria-label"),fontSize:r?2:1,isDateTime:e,isDateTimeFormat:e&&(n==null?void 0:n.includeTime),onChange:u,placeholderDate:s,radius:2,value:n==null?void 0:n.to})]}),i.jsx(wp,{date:n!=null&&n.from?new Date(n.from):void 0,endDate:n!=null&&n.to?new Date(n.to):void 0,onChange:d,selectRange:!0,selectTime:e}),e&&i.jsx(xp,{onChange:c,value:!!(n!=null&&n.includeTime)})]})})}function Zg({date:e,endDate:t,includeTime:n,isDateTime:a}){return n?{includeTime:n,to:t?Ba({date:t,dateOnly:!a,roundDay:"start"}):null,from:e?Ba({date:e,dateOnly:!a,roundDay:"start"}):null}:{includeTime:n,to:t?Ba({date:t,dateOnly:!a,roundDay:"end"}):null,from:e?Ba({date:e,dateOnly:!a,roundDay:"start"}):null}}function P7(e){return i.jsx(k1,{...e,isDateTime:!1})}function N7(e){return i.jsx(vc,{...e,direction:"after",isDateTime:!0})}function O7(e){return i.jsx(vc,{...e,direction:"before",isDateTime:!0})}function Qg(e){return i.jsx(j1,{...e,isDateTime:!0})}function F7(e){return i.jsx(k1,{...e,isDateTime:!0})}const Vn={dateAfter:{buttonValueComponent:Ss,initialValue:null},dateBefore:{buttonValueComponent:Ss,initialValue:null},dateEqual:{buttonValueComponent:Ss,initialValue:{date:null,includeTime:!1}},dateLast:{buttonValueComponent:Pz},dateNotEqual:{buttonValueComponent:Ss,initialValue:{date:null,includeTime:!1}},dateRange:{initialValue:null}},R7={dateAfter:{...Vn.dateAfter,nameKey:"search.operator.date-after.name",descriptionKey:"search.operator.date-after.description",groqFilter:({fieldPath:e,value:t})=>t!=null&&t.date&&e?`${e} > ${xe(t==null?void 0:t.date)}`:null,inputComponent:_7,type:"dateAfter"},dateBefore:{...Vn.dateBefore,nameKey:"search.operator.date-before.name",descriptionKey:"search.operator.date-before.description",groqFilter:({fieldPath:e,value:t})=>t!=null&&t.date&&e?`${e} < ${xe(t==null?void 0:t.date)}`:null,inputComponent:E7,type:"dateBefore"},dateEqual:{...Vn.dateEqual,nameKey:"search.operator.date-equal.name",descriptionKey:"search.operator.date-equal.description",groqFilter:({fieldPath:e,value:t})=>t!=null&&t.date&&e?`${e} == ${xe(t.date)}`:null,inputComponent:Xg,type:"dateEqual"},dateLast:{...Vn.dateLast,nameKey:"search.operator.date-last.name",descriptionKey:"search.operator.date-last.description",groqFilter:({fieldPath:e,value:t})=>{const n=typeof(t==null?void 0:t.unitValue)=="number"?Math.floor(t.unitValue):void 0,a=Number.isFinite(n)?eh(new Date,{days:(t==null?void 0:t.unit)==="day"?n:0,months:(t==null?void 0:t.unit)==="month"?n:0,years:(t==null?void 0:t.unit)==="year"?n:0}).toISOString().split("T")[0]:null;return a&&e?`${e} > ${xe(a)}`:null},inputComponent:Jg,initialValue:{unit:"day",unitValue:7},type:"dateLast"},dateNotEqual:{...Vn.dateNotEqual,nameKey:"search.operator.date-not-equal.name",descriptionKey:"search.operator.date-not-equal.description",groqFilter:({fieldPath:e,value:t})=>t!=null&&t.date&&e?`${e} != ${xe(t.date)}`:null,inputComponent:Xg,type:"dateNotEqual"},dateRange:{...Vn.dateRange,nameKey:"search.operator.date-range.name",descriptionKey:"search.operator.date-range.description",buttonValueComponent:qg,groqFilter:({fieldPath:e,value:t})=>t!=null&&t.to&&t!=null&&t.from&&e?`${e} >= ${xe(t.from)} && ${e} <= ${xe(t.to)}`:null,initialValue:{includeTime:!1,to:th().toISOString(),from:null},inputComponent:P7,type:"dateRange"},dateTimeAfter:{...Vn.dateAfter,nameKey:"search.operator.date-time-after.name",descriptionKey:"search.operator.date-time-after.description",groqFilter:({fieldPath:e,value:t})=>t!=null&&t.date&&e?`dateTime(${e}) > dateTime(${xe(t.date)})`:null,inputComponent:N7,type:"dateTimeAfter"},dateTimeBefore:{...Vn.dateBefore,nameKey:"search.operator.date-time-before.name",descriptionKey:"search.operator.date-time-before.description",groqFilter:({fieldPath:e,value:t})=>t!=null&&t.date&&e?`dateTime(${e}) < dateTime(${xe(t.date)})`:null,inputComponent:O7,type:"dateTimeBefore"},dateTimeEqual:{...Vn.dateEqual,nameKey:"search.operator.date-time-equal.name",descriptionKey:"search.operator.date-time-equal.description",groqFilter:({fieldPath:e,value:t})=>{const n=(t==null?void 0:t.date)&&new Date(t.date);if(!n||!pi(n)||!e)return null;const a=(t!=null&&t.includeTime?nh(n):Rd(n)).toISOString(),r=(t!=null&&t.includeTime?ah(n):Xs(n)).toISOString();return`dateTime(${e}) > dateTime(${xe(a)}) && dateTime(${e}) < dateTime(${xe(r)})`},inputComponent:Qg,type:"dateTimeEqual"},dateTimeLast:{...Vn.dateLast,nameKey:"search.operator.date-time-last.name",descriptionKey:"search.operator.date-time-last.description",groqFilter:({fieldPath:e,value:t})=>{const n=typeof(t==null?void 0:t.unitValue)=="number"?Math.floor(t.unitValue):void 0,a=Number.isFinite(n)?eh(new Date,{days:(t==null?void 0:t.unit)==="day"?n:0,months:(t==null?void 0:t.unit)==="month"?n:0,years:(t==null?void 0:t.unit)==="year"?n:0}).toISOString():null;return a&&e?`dateTime(${e}) > dateTime(${xe(a)})`:null},initialValue:{unit:"day",unitValue:7},inputComponent:Jg,type:"dateTimeLast"},dateTimeNotEqual:{...Vn.dateNotEqual,nameKey:"search.operator.date-time-not-equal.name",descriptionKey:"search.operator.date-time-not-equal.description",groqFilter:({fieldPath:e,value:t})=>{const n=(t==null?void 0:t.date)&&new Date(t.date);if(!n||!pi(n)||!e)return null;const a=(t!=null&&t.includeTime?nh(n):Rd(n)).toISOString(),r=(t!=null&&t.includeTime?ah(n):Xs(n)).toISOString();return`dateTime(${e}) < dateTime(${xe(a)}) || dateTime(${e}) > dateTime(${xe(r)})`},inputComponent:Qg,type:"dateTimeNotEqual"},dateTimeRange:{...Vn.dateRange,nameKey:"search.operator.date-time-range.name",descriptionKey:"search.operator.date-time-range.description",buttonValueComponent:qg,groqFilter:({fieldPath:e,value:t})=>t!=null&&t.to&&t!=null&&t.from&&e?`dateTime(${e}) >= dateTime(${xe(t.from)}) && dateTime(${e}) <= dateTime(${xe(t.to)})`:null,initialValue:{includeTime:!1,to:th().toISOString(),from:null},inputComponent:F7,type:"dateTimeRange"}},D7={defined:{nameKey:"search.operator.defined.name",descriptionKey:"search.operator.defined.description",groqFilter:({fieldPath:e})=>e?`defined(${e})`:null,type:"defined"},notDefined:{nameKey:"search.operator.not-defined.name",descriptionKey:"search.operator.not-defined.description",i18nKey:"search.operator.not-defined",groqFilter:({fieldPath:e})=>e?`!defined(${e})`:null,type:"notDefined"}},$7={numberEqual:{nameKey:"search.operator.number-equal.name",descriptionKey:"search.operator.number-equal.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} == ${xe(t)}`:null,initialValue:null,inputComponent:Hn,type:"numberEqual"},numberGt:{nameKey:"search.operator.number-gt.name",descriptionKey:"search.operator.number-gt.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} > ${xe(t)}`:null,icon:C1,initialValue:null,inputComponent:Hn,type:"numberGt"},numberGte:{nameKey:"search.operator.number-gte.name",descriptionKey:"search.operator.number-gte.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} >= ${xe(t)}`:null,icon:x1,initialValue:null,inputComponent:Hn,type:"numberGte"},numberLt:{nameKey:"search.operator.number-lt.name",descriptionKey:"search.operator.number-lt.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} < ${xe(t)}`:null,icon:T1,initialValue:null,inputComponent:Hn,type:"numberLt"},numberLte:{nameKey:"search.operator.number-lte.name",descriptionKey:"search.operator.number-lte.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} <= ${xe(t)}`:null,icon:w1,initialValue:null,inputComponent:Hn,type:"numberLte"},numberNotEqual:{nameKey:"search.operator.number-not-equal.name",descriptionKey:"search.operator.number-not-equal.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} != ${xe(t)}`:null,initialValue:null,inputComponent:Hn,type:"numberNotEqual"},numberRange:{nameKey:"search.operator.number-range.name",descriptionKey:"search.operator.number-range.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t==null?void 0:t.to)&&Number.isFinite(t==null?void 0:t.from)&&e?`${e} > ${xe(t==null?void 0:t.from)} && ${e} < ${xe(t==null?void 0:t.to)}`:"",initialValue:null,inputComponent:p1,type:"numberRange"}};function Wn({onChange:e,value:t}){const{state:{fullscreen:n}}=Ve(),{t:a}=L(),r=l.useCallback(o=>e(o.currentTarget.value||null),[e]);return i.jsx(nn,{fontSize:n?2:1,onChange:r,placeholder:a("search.filter-string-value-placeholder"),radius:2,value:t||""})}const L7={portableTextEqual:{nameKey:"search.operator.portable-text-equal.name",descriptionKey:"search.operator.portable-text-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`pt::text(${e}) == ${xe(t)}`:null,initialValue:null,inputComponent:Wn,type:"portableTextEqual"},portableTextMatches:{nameKey:"search.operator.portable-text-contains.name",descriptionKey:"search.operator.portable-text-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`pt::text(${e}) match ${xe(t)}`:null,initialValue:null,inputComponent:Wn,type:"portableTextMatches"},portableTextNotEqual:{nameKey:"search.operator.portable-text-not-equal.name",descriptionKey:"search.operator.portable-text-not-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`pt::text(${e}) != ${xe(t)}`:null,initialValue:null,inputComponent:Wn,type:"portableTextNotEqual"},portableTextNotMatches:{nameKey:"search.operator.portable-text-not-contains.name",descriptionKey:"search.operator.portable-text-not-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`!(pt::text(${e}) match ${xe(t)})`:null,initialValue:null,inputComponent:Wn,type:"portableTextNotMatches"}},B7={referenceEqual:{nameKey:"search.operator.reference-equal.name",descriptionKey:"search.operator.reference-equal.description",buttonValueComponent:ra,groqFilter:({fieldPath:e,value:t})=>t!=null&&t._ref&&e?`${e}._ref == ${xe(t._ref)}`:null,initialValue:null,inputComponent:vo,type:"referenceEqual"},referenceNotEqual:{nameKey:"search.operator.reference-not-equal.name",descriptionKey:"search.operator.reference-not-equal.description",buttonValueComponent:ra,groqFilter:({fieldPath:e,value:t})=>t!=null&&t._ref&&e?`${e}._ref != ${xe(t._ref)}`:null,initialValue:null,inputComponent:vo,type:"referenceNotEqual"},referencesAssetFile:{nameKey:"search.operator.reference-asset-file.name",descriptionKey:"search.operator.reference-asset-file.description",buttonValueComponent:ra,groqFilter:({value:e})=>e!=null&&e._ref?`references(${xe(e._ref)})`:null,initialValue:null,inputComponent:mr("file"),type:"referencesAssetFile"},referencesAssetImage:{nameKey:"search.operator.reference-asset-image.name",descriptionKey:"search.operator.reference-asset-image.description",buttonValueComponent:ra,groqFilter:({value:e})=>e!=null&&e._ref?`references(${xe(e._ref)})`:null,initialValue:null,inputComponent:mr("image"),type:"referencesAssetImage"},referencesDocument:{nameKey:"search.operator.reference-document.name",descriptionKey:"search.operator.reference-document.description",buttonValueComponent:ra,groqFilter:({value:e})=>e!=null&&e._ref?`references(${xe(e._ref)})`:null,initialValue:null,inputComponent:vo,type:"referencesDocument"}},V7={slugEqual:{nameKey:"search.operator.slug-equal.name",descriptionKey:"search.operator.slug-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e}.current == ${xe(t)}`:null,initialValue:null,inputComponent:Wn,type:"slugEqual"},slugMatches:{nameKey:"search.operator.slug-contains.name",descriptionKey:"search.operator.slug-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e}.current match ${xe(t)}`:null,initialValue:null,inputComponent:Wn,label:"contains",type:"slugMatches"},slugNotEqual:{nameKey:"search.operator.slug-not-equal.name",descriptionKey:"search.operator.slug-not-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e}.current != ${xe(t)}`:null,initialValue:null,inputComponent:Wn,type:"slugNotEqual"},slugNotMatches:{nameKey:"search.operator.slug-not-contains.name",descriptionKey:"search.operator.slug-not-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`!(${e}.current match ${xe(t)})`:null,initialValue:null,inputComponent:Wn,type:"slugNotMatches"}},U7={stringEqual:{nameKey:"search.operator.string-equal.name",descriptionKey:"search.operator.string-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e} == ${xe(t)}`:null,initialValue:null,inputComponent:Wn,type:"stringEqual"},stringListEqual:{nameKey:"search.operator.string-list-equal.name",descriptionKey:"search.operator.string-list-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e} == ${xe(t)}`:null,initialValue:null,inputComponent:ul,type:"stringListEqual"},stringListNotEqual:{nameKey:"search.operator.string-list-not-equal.name",descriptionKey:"search.operator.string-list-not-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e} != ${xe(t)}`:null,initialValue:null,inputComponent:ul,type:"stringListNotEqual"},stringMatches:{nameKey:"search.operator.string-contains.name",descriptionKey:"search.operator.string-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e} match ${xe(t)}`:null,initialValue:null,inputComponent:Wn,type:"stringMatches"},stringNotEqual:{nameKey:"search.operator.string-not-equal.name",descriptionKey:"search.operator.string-not-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e} != ${xe(t)}`:null,initialValue:null,inputComponent:Wn,type:"stringNotEqual"},stringNotMatches:{nameKey:"search.operator.string-not-contains.name",descriptionKey:"search.operator.string-not-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`!(${e} match ${xe(t)})`:null,initialValue:null,inputComponent:Wn,type:"stringNotMatches"}},z7={...Jz,...c7,...u7,...R7,...D7,...$7,...L7,...B7,...V7,...U7},H7=Object.values(z7);function eb(e){const t=e.split("").reduce((n,a)=>(n<<5)-n+a.charCodeAt(0)|0,0);return Math.abs(t*16807%2147483647)/2147483647}const K7=k.text`
  font-family: ${({theme:e})=>e.sanity.fonts.text.family};
  font-weight: ${({theme:e})=>e.sanity.fonts.text.weights.medium};
  font-size: ${({theme:e})=>e.sanity.fonts.text.sizes[1].fontSize}px;
  transform: translateY(1px);
`;function W7(e,t){const n=eb(`${e} ${t}`),a=fS.filter(f=>f!=="gray"),r=a[Math.floor(n*a.length)],o=["300","400","500","600","700"],s=eb(n.toString()),d=o[Math.floor(s*o.length)],c=Ge[r][d].hex,u=e.split(/\s/g).map(f=>f.replace(/\\W/g,"")).filter(Boolean).slice(0,2).map(f=>f.charAt(0).toUpperCase()),m=uS(c,.4),p=mS(c,.4),h=lh(c,"readable",m)?lh(c,"readable",p)?pS(c):p:m;return i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:[i.jsx("rect",{width:32,height:32,rx:2,fill:c}),i.jsx(K7,{x:"50%",y:"50%",textAnchor:"middle",alignmentBaseline:"middle",dominantBaseline:"middle",fill:h,children:u})]})}const pt="comments",G7={locale:"en-US",namespace:pt,resources:()=>N0(()=>import("./resources-0d81f904.js"),["static/resources-0d81f904.js","static/sanity-6afb8dc4.js"])};function q7(e){const{children:t}=e,[n,a]=l.useState(null),r=l.useCallback(s=>{a(s)},[]),o=l.useMemo(()=>({authoringPath:n,setAuthoringPath:r}),[n,r]);return i.jsx(V0.Provider,{value:o,children:t})}function Y7(){return l.useContext(Yy)}function X7(e){const{documentId:t,documentType:n,getCommentLink:a}=e||{},r=ot().get(n),{title:o}=Dt(),s=gn(),d=l.useMemo(()=>!t||!r?re(null):pc(s,r,t,""),[t,s,r]),c=Ut(d),{published:u,draft:m}=c||{},p=(m==null?void 0:m.title)||(u==null?void 0:u.title)||"Sanity document";return{getNotificationValue:l.useCallback(({commentId:h})=>({documentTitle:p,url:a==null?void 0:a(h),workspaceTitle:o}),[p,a,o])}}function At(e,t){const{currentUser:n,document:a,parent:r,value:o}=t;return typeof e=="boolean"||e===void 0?!!e:e({document:a,parent:r,value:o,currentUser:n})===!0}function Ws(e,t,n){var a;if(t.length===0)return{...e||{},value:n};const[r,...o]=t,s=jn(r)?r._key:String(r),d=(a=e==null?void 0:e.children)!=null?a:{};return{value:e==null?void 0:e.value,children:{...d,[s]:Ws(d[s]||{},o,n)}}}const jp=20,J7=3,pr={name:"all-fields",title:"All fields",hidden:!1};function kp(e={},t){if((e==null?void 0:e.collapsible)===!1||(e==null?void 0:e.collapsable)===!1)return{collapsible:!1,collapsed:!1};const n=typeof(e==null?void 0:e.collapsed)=="boolean"?e.collapsed:t>=J7?!0:void 0;return{collapsible:(e==null?void 0:e.collapsible)===!0||(e==null?void 0:e.collapsable)===!0||n===!0?!0:void 0,collapsed:n}}function A1(e,t,n){return n.name===pr.name?!0:t===void 0?!1:e.length===0&&n.name===pr.name?!0:mm(t).includes(n.name)}function tb(e){return typeof e>"u"||Ke(e)}function Z7(e){return typeof e>"u"||Array.isArray(e)}function Q7(e){return typeof e>"u"||Array.isArray(e)}function e9(e){return e.length===0||e.every(t=>Ke(t))}function t9(e){const t=new Set;return e.reduce((n,a,r)=>(t.has(a._key)&&n.push([r,a._key]),t.add(a._key),n),[])}function n9(e){return"_key"in e}function a9(e){return e==null?void 0:e.every(t=>Ke(t)&&n9(t))}function yr(e,t){return Array.isArray(e)&&typeof t>"u"||Array.isArray(t)&&typeof e>"u"?!1:e&&!t?!0:!tt(e,t)}function nb(e){var t,n,a,r,o,s,d,c,u,m,p,h,f,g,b,v,y,x;const{parent:w,field:C,index:T}=e,j=bi([...w.path,C.name]),A=YO(C.type,w.level+1),M=w.value,S=w.comparisonValue;if(!tb(M))throw new Error("Unexpected non-object value");const N=C.group?mm(C.group):[],D=A1(w.groups,C.group,w.selectedGroup);if(pa(C.type)){const _=M==null?void 0:M[C.name],F=Ke(S)?S==null?void 0:S[C.name]:void 0;if(!tb(_))return{kind:"error",key:C.name,fieldName:C.name,error:{type:"INCOMPATIBLE_TYPE",expectedSchemaType:C.type,resolvedValueType:wn(_),value:_}};const R={value:_,parent:w.value,document:w.document,currentUser:w.currentUser};if(At(C.type.hidden,R))return{kind:"hidden",key:`field-${C.name}`,name:C.name,index:T};const $=w.readOnly||At(C.type.readOnly,R),O=(n=(t=w.fieldGroupState)==null?void 0:t.children)==null?void 0:n[C.name],V=(r=(a=w.collapsedPaths)==null?void 0:a.children)==null?void 0:r[C.name],H=(s=(o=w.collapsedFieldSets)==null?void 0:o.children)==null?void 0:s[C.name],J=Ap({schemaType:C.type,currentUser:w.currentUser,parent:w.value,document:w.document,value:_,changed:yr(_,F),comparisonValue:F,presence:w.presence,validation:w.validation,fieldGroupState:O,path:j,level:A,focusPath:w.focusPath,openPath:w.openPath,collapsedPaths:V,collapsedFieldSets:H,readOnly:$,changesOpen:w.changesOpen});if(J===null)return null;const q=kp(C.type.options,A),oe=V?V.value:q.collapsed;return{kind:"field",key:`field-${C.name}`,name:C.name,index:T,inSelectedGroup:D,groups:N,open:Jt(j,w.openPath),field:J,collapsed:oe,collapsible:q.collapsible}}else if(ua(C.type)){const _=M==null?void 0:M[C.name],F=Ke(S)?S==null?void 0:S[C.name]:void 0;if(Ll(C.type)){const R=typeof _<"u";if(R&&!Z7(_)){const oe=wn(_);return{kind:"error",key:C.name,fieldName:C.name,error:{type:"INCOMPATIBLE_TYPE",expectedSchemaType:C.type,resolvedValueType:oe,value:_}}}if(R&&!e9(_))return{kind:"error",key:C.name,fieldName:C.name,error:{type:"MIXED_ARRAY",schemaType:C.type,value:_}};if(R&&!a9(_))return{kind:"error",key:C.name,fieldName:C.name,error:{type:"MISSING_KEYS",value:_,schemaType:C.type}};const $=R?t9(_):[];if($.length>0)return{kind:"error",key:C.name,fieldName:C.name,error:{type:"DUPLICATE_KEYS",duplicates:$,schemaType:C.type}};const O=(c=(d=w.fieldGroupState)==null?void 0:d.children)==null?void 0:c[C.name],V=(m=(u=w.collapsedPaths)==null?void 0:u.children)==null?void 0:m[C.name],H=(h=(p=w.collapsedFieldSets)==null?void 0:p.children)==null?void 0:h[C.name],J=w.readOnly||At(C.type.readOnly,{value:_,parent:w.value,document:w.document,currentUser:w.currentUser}),q=r9({schemaType:C.type,parent:w.value,currentUser:w.currentUser,document:w.document,value:_,changed:yr(_,F),comparisonValue:F,fieldGroupState:O,focusPath:w.focusPath,openPath:w.openPath,presence:w.presence,validation:w.validation,collapsedPaths:V,collapsedFieldSets:H,level:A,path:j,readOnly:J});return q===null?null:{kind:"field",key:`field-${C.name}`,name:C.name,index:T,open:Jt(j,w.openPath),inSelectedGroup:D,groups:N,collapsible:!1,collapsed:!1,field:q}}else{if(!Q7(_)){const J=wn(_);return{kind:"error",key:C.name,fieldName:C.name,error:{type:"INCOMPATIBLE_TYPE",expectedSchemaType:C.type,resolvedValueType:J,value:_}}}const R=(g=(f=w.fieldGroupState)==null?void 0:f.children)==null?void 0:g[C.name],$=(v=(b=w.collapsedPaths)==null?void 0:b.children)==null?void 0:v[C.name],O=(x=(y=w.collapsedFieldSets)==null?void 0:y.children)==null?void 0:x[C.name],V=w.readOnly||At(C.type.readOnly,{value:_,parent:w.value,document:w.document,currentUser:w.currentUser}),H=i9({changed:yr(_,F),comparisonValue:F,schemaType:C.type,parent:w.value,currentUser:w.currentUser,document:w.document,value:_,fieldGroupState:R,focusPath:w.focusPath,openPath:w.openPath,presence:w.presence,validation:w.validation,collapsedPaths:$,collapsedFieldSets:O,level:A,path:j,readOnly:V});return H===null?null:{kind:"field",key:`field-${C.name}`,name:C.name,index:T,inSelectedGroup:D,groups:N,open:Jt(j,w.openPath),collapsible:!1,collapsed:!1,field:H}}}else{const _=M==null?void 0:M[C.name],F=Ke(S)?S==null?void 0:S[C.name]:void 0,R={value:_,parent:w.value,document:w.document,currentUser:w.currentUser};if(At(C.type.hidden,R))return null;const $=w.readOnly||At(C.type.readOnly,R),O=S1({...w,comparisonValue:F,value:_,schemaType:C.type,path:j,readOnly:$});return{kind:"field",key:`field-${C.name}`,name:C.name,index:T,open:Jt(j,w.openPath),inSelectedGroup:D,groups:N,collapsible:!1,collapsed:!1,field:O}}}function Ap(e,t=!0){var n;if(e.level===jp)return null;const a={value:e.value,parent:e.parent,document:e.document,currentUser:e.currentUser},r=e.readOnly||At(e.schemaType.readOnly,a),o=e.schemaType.groups||[],s=(n=o.find(x=>x.default)||pr)==null?void 0:n.name,d=[pr,...o].flatMap(x=>{var w;const C=At(x.hidden,a),T=x.name===(((w=e.fieldGroupState)==null?void 0:w.value)||s),j=e.changesOpen?x.name===pr.name:T,A=e.changesOpen?!j:!1;return C?[]:[{disabled:A,icon:x==null?void 0:x.icon,name:x.name,selected:j,title:x.title}]}),c=d.find(x=>x.selected),u=(e.schemaType.fieldsets?e.schemaType.fieldsets:e.schemaType.fields.map(x=>({single:!0,field:x}))).flatMap((x,w)=>{var C,T,j,A;if(x.single){const R=x.field,$=nb({field:R,parent:{...e,readOnly:r,groups:d,selectedGroup:c},index:w});return $?[$]:[]}const M=x.fields.map(R=>R.name),S=At(x.hidden,{currentUser:e.currentUser,document:e.document,parent:e.value,value:zd(e.value,M)}),N=At(x.readOnly,{currentUser:e.currentUser,document:e.document,parent:e.value,value:zd(e.value,M)}),D=x.fields.flatMap(R=>{if(S)return[{kind:"hidden",key:`field-${R.name}`,name:R.name,index:w}];const $=nb({field:R,parent:{...e,readOnly:r||N,groups:d,selectedGroup:c},index:w});return $?[$]:[]}),_=kp(x.options,e.level),F=(j=(T=(((C=e.collapsedFieldSets)==null?void 0:C.children)||{})[x.name])==null?void 0:T.value)!=null?j:_.collapsed;return[{kind:"fieldSet",key:`fieldset-${x.name}`,_inSelectedGroup:A1(d,x.group,c),groups:x.group?mm(x.group):[],fieldSet:{path:bi(e.path.concat(x.name)),name:x.name,title:x.title,description:x.description,hidden:!1,level:e.level+1,members:D.filter(R=>R.kind!=="hidden"),collapsible:_==null?void 0:_.collapsible,collapsed:F,columns:(A=x==null?void 0:x.options)==null?void 0:A.columns}}]}),m=o.length>0,p=e.presence.filter(x=>nt(x.path,e.path)),h=p.length?p:lt,f=e.validation.filter(x=>nt(x.path,e.path)).map(x=>({level:x.level,message:x.message,path:x.path})),g=u.filter(x=>x.kind!=="hidden");if(g.length===0&&t)return null;const b=m?d.flatMap(x=>x.name===pr.name||g.some(w=>w.kind==="error"?!1:w.kind==="field"?w.groups.includes(x.name):w.groups.includes(x.name)||w.fieldSet.members.some(C=>C.kind!=="error"&&C.groups.includes(x.name)))?x:[]):[],v=g.flatMap(x=>{if(x.kind==="error")return[x];if(x.kind==="field")return x.inSelectedGroup?[x]:[];const w=x.fieldSet.members.filter(C=>C.kind!=="field"||C.inSelectedGroup);return w.length>0?[{...x,fieldSet:{...x.fieldSet,members:w}}]:[]}),y={value:e.value,changed:yr(e.value,e.comparisonValue),schemaType:e.schemaType,readOnly:r,path:e.path,id:Je(e.path),level:e.level,focused:nt(e.path,e.focusPath),focusPath:pm(e.path,e.focusPath),presence:h,validation:f,members:v,groups:b};return Object.defineProperty(y,"_allMembers",{value:u,enumerable:!1}),y}function i9(e){if(e.level===jp)return null;const t={comparisonValue:e.comparisonValue,value:e.value,parent:e.parent,document:e.document,currentUser:e.currentUser};if(At(e.schemaType.hidden,t))return null;const n=e.readOnly||At(e.schemaType.readOnly,t),a=Array.isArray(e.value)?e.value:[],r=e.presence.filter(c=>nt(c.path,e.path)),o=r.length?r:lt,s=e.validation.filter(c=>nt(c.path,e.path)).map(c=>({level:c.level,message:c.message,path:c.path})),d=a.flatMap((c,u)=>s9({arrayItem:c,parent:e,index:u}));return{changed:e.changed||d.some(c=>c.kind==="item"&&c.item.changed),value:e.value,readOnly:n,schemaType:e.schemaType,focused:nt(e.path,e.focusPath),focusPath:pm(e.path,e.focusPath),path:e.path,id:Je(e.path),level:e.level,validation:s,presence:o,members:d}}function r9(e){if(e.level===jp)return null;const t={value:e.value,parent:e.parent,document:e.document,currentUser:e.currentUser};if(At(e.schemaType.hidden,t))return null;const n=e.readOnly||At(e.schemaType.readOnly,t),a=Array.isArray(e.value)?e.value:[],r=e.presence.filter(c=>nt(c.path,e.path)),o=r.length?r:lt,s=e.validation.filter(c=>nt(c.path,e.path)).map(c=>({level:c.level,message:c.message,path:c.path})),d=a.flatMap((c,u)=>o9({arrayItem:c,parent:e,index:u}));return{changed:e.changed||d.some(c=>c.kind==="item"&&c.item.changed),value:e.value,readOnly:n,schemaType:e.schemaType,focused:nt(e.path,e.focusPath),focusPath:pm(e.path,e.focusPath),path:e.path,id:Je(e.path),level:e.level,validation:s,presence:o,members:d}}function o9(e){var t,n,a,r,o,s,d;const{arrayItem:c,parent:u,index:m}=e,p=tp(u.schemaType,c),h=c._key;if(!p){const M=wn(c);return{kind:"error",key:h,index:m,error:{type:"INVALID_ITEM_TYPE",resolvedValueType:M,value:c,validTypes:u.schemaType.of}}}const f=bi([...u.path,{_key:h}]),g=u.level+1,b={value:u.value,parent:e.parent,document:u.document,currentUser:u.currentUser},v=u.readOnly||At(u.schemaType.readOnly,b),y=(n=(t=u.fieldGroupState)==null?void 0:t.children)==null?void 0:n[h],x=(r=(a=u.collapsedPaths)==null?void 0:a.children)==null?void 0:r[h],w=(s=(o=u.collapsedFieldSets)==null?void 0:o.children)==null?void 0:s[h],C=Array.isArray(u.comparisonValue)&&u.comparisonValue.find(M=>M._key===c._key)||void 0,T=Ap({schemaType:p,level:g,document:u.document,value:c,comparisonValue:C,changed:yr(c,C),path:f,focusPath:u.focusPath,openPath:u.openPath,currentUser:u.currentUser,collapsedPaths:x,collapsedFieldSets:w,presence:u.presence,validation:u.validation,fieldGroupState:y,readOnly:v},!1),j=kp(p.options,g),A=(d=x==null?void 0:x.value)!=null?d:j.collapsed;return{kind:"item",key:h,index:m,open:Jt(f,u.openPath),collapsed:A,collapsible:!0,parentSchemaType:u.schemaType,item:T}}function s9(e){var t,n;const{arrayItem:a,parent:r,index:o}=e,s=XR(r.schemaType,a),d=bi([...r.path,o]),c=(t=r.value)==null?void 0:t[o],u=(n=r.comparisonValue)==null?void 0:n[o],m=r.level+1,p=`${(s==null?void 0:s.name)||"invalid-type"}-${String(o)}`;if(!s)return{kind:"error",key:p,index:o,error:{type:"INVALID_ITEM_TYPE",validTypes:r.schemaType.of,resolvedValueType:wn(s),value:c}};const h=r.readOnly||At(s.readOnly,{value:c,parent:r.value,document:r.document,currentUser:r.currentUser}),f=S1({...r,path:d,schemaType:s,level:m,value:c,comparisonValue:u,readOnly:h});return{kind:"item",key:p,index:o,parentSchemaType:r.schemaType,open:nt(d,r.openPath),item:f}}function S1(e){const t=e.presence.filter(r=>nt(r.path,e.path)),n=t.length?t:lt,a=e.validation.filter(r=>nt(r.path,e.path)).map(r=>({level:r.level,message:r.message,path:r.path}));return{schemaType:e.schemaType,changed:yr(e.value,e.comparisonValue),value:e.value,level:e.level,id:Je(e.path),readOnly:e.readOnly,focused:nt(e.path,e.focusPath),path:e.path,presence:n,validation:a}}function l9(e){return Ap(e)}function c9(e,{comparisonValue:t,value:n,fieldGroupState:a,collapsedFieldSets:r,collapsedPaths:o,focusPath:s,openPath:d,presence:c,validation:u,readOnly:m,changesOpen:p}){const h=Tt(),f=l.useRef(null);return l.useLayoutEffect(()=>{f.current=null},[e]),l.useMemo(()=>{const g=l9({schemaType:e,document:n,fieldGroupState:a,collapsedFieldSets:r,collapsedPaths:o,value:n,comparisonValue:t,focusPath:s,openPath:d,readOnly:m,path:bi([]),level:0,currentUser:h,presence:c,validation:u,changesOpen:p}),b=Gl(f.current,g);return f.current=b,b},[e,n,a,r,o,t,s,d,m,h,c,u,p])}function d9(e){return e.map(u9)}function u9(e){if(e.patchType!==Bi&&e.type)throw new Error(`Patch is missing "patchType" - import and use "${e.type}()" from "sanity/form"`);if(e.patchType!==Bi)throw new Error('Patch is missing "patchType" - import and use the patch method helpers from "sanity/form"');const t=rS(e.path||[]);if(e.type==="insert"){const{position:n,items:a}=e;return{insert:{[n]:t,items:a}}}if(e.type==="unset")return{unset:[t]};if(!e.type)throw new Error(`Missing patch type in patch ${JSON.stringify(e)}`);return t?{[e.type]:{[t]:e.value}}:{[e.type]:e.value}}const m9=l.memo(function(e){const{transform:t}=e,n=Zn(),a=l.useCallback(o=>{const s=o.patches,d=t(s);n.onChange(je.from(d))},[n,t]),r=l.useMemo(()=>({...n,onChange:a}),[n,a]);return i.jsx(Lu.Provider,{value:r,children:e.children})});function _1(e,t){var n;const a=Ml(t),r=a[0];if(r&&pa(e)){const o=(n=e==null?void 0:e.fields)==null?void 0:n.find(s=>s.name===r);if(o){const s=Je(a.slice(1));return s?_1(o.type,s):o}}}function p9(e,t){if(typeof t=="number")return t;const n=U0(e,t);return n===-1?!1:n}function h9(e){const{currentUser:t,schemaType:n,fieldPath:a,documentValue:r}=e,o=Ml(a),s=[];let d=null;return o.forEach((c,u)=>{var m,p,h,f,g;const b=o.slice(0,u+1),v=o.slice(0,u),y=_1(n,Je(b)),x=c.hasOwnProperty("_key"),w=ja(r,v),C=ja(r,b),T={document:r,currentUser:t,parent:w,value:C};if(x&&Array.isArray(w)){const j=p9(w,c),A=typeof j=="number";s.push({invalid:j===!1,isArrayItem:!0,title:A?`#${Number(j)+1}`:"Unknown array item"});return}if(y!=null&&y.type){const j=At(y.type.hidden,T);s.push({invalid:j,isArrayItem:!1,title:la(y.type)}),d=y.type;return}if(ua(d)){const j=ja(r,v),A=j==null?void 0:j._type,M=(m=d==null?void 0:d.of)==null?void 0:m.find(R=>R.name===A),S=(p=M==null?void 0:M.fields)==null?void 0:p.find(R=>R.name===c);if(!A&&C){const R=(h=d==null?void 0:d.of)==null?void 0:h.map(V=>V==null?void 0:V.fields).filter(Boolean).flat(),$=R==null?void 0:R.find(V=>(V==null?void 0:V.name)===c),O=At((f=$==null?void 0:$.type)==null?void 0:f.hidden,T);$&&(s.push({invalid:O,isArrayItem:!1,title:la($==null?void 0:$.type)}),d=$==null?void 0:$.type);return}if(!S){s.push({invalid:!0,isArrayItem:!1,title:"Unknown field"});return}const N=la(S==null?void 0:S.type),D=At((g=M==null?void 0:M.type)==null?void 0:g.hidden,T),_=At(S==null?void 0:S.type.hidden,T),F=D||_;s.push({invalid:F,isArrayItem:!1,title:N}),d=S==null?void 0:S.type;return}s.push({invalid:!0,isArrayItem:!1,title:"Unknown field"})}),s}function E1(e){const t=l.useRef(e);return l.useMemo(()=>!tt(t.current,e),[e])}function er(e){return e?e==null?void 0:e.some(t=>{var n;return Fn(t)&&((n=(t==null?void 0:t.children)||[])==null?void 0:n.some(a=>Ua(a)?a.text:a.userId))}):!1}function f9(e,t){var n,a;const r=(n=e==null?void 0:e.context)==null?void 0:n.intent,o=(a=t==null?void 0:t.context)==null?void 0:a.intent;if(o&&(!r||"preview"in o.params&&"preview"in r.params&&o.params.preview!==r.params.preview))return o}function Xr(e){var t,n,a,r,o,s;return e?!!(((a=(n=(t=e==null?void 0:e.target)==null?void 0:t.path)==null?void 0:n.selection)==null?void 0:a.type)==="text"&&(s=(o=(r=e==null?void 0:e.target)==null?void 0:r.path)==null?void 0:o.selection)!=null&&s.value):!1}const ab=[];function g9(e){const{comments:t,currentUser:n,documentValue:a,schemaType:r,type:o}=e,s=t==null?void 0:t.filter(d=>!d.parentCommentId);return o==="task"?s.map(d=>{const c=t==null?void 0:t.filter(u=>u.parentCommentId===d._id);return{commentsCount:[d,...c].length,parentComment:d,replies:c,threadId:d.threadId,hasReferencedValue:!1,breadcrumbs:ab,fieldPath:""}}):o==="field"?s.map(d=>{var c,u,m;const p=h9({currentUser:n,documentValue:a,fieldPath:((c=d.target.path)==null?void 0:c.field)||"",schemaType:r});let h=!1;if(Xr(d)&&(h=!!((u=d.target.path)!=null&&u.selection&&d.target.path.selection.value.some(v=>v.text))),p.some(v=>v.invalid))return;const f=t==null?void 0:t.filter(v=>v.parentCommentId===d._id),g=[d,...f].length,b=h;return{breadcrumbs:p,commentsCount:g,fieldPath:((m=d.target.path)==null?void 0:m.field)||"",parentComment:d,replies:f,threadId:d.threadId,hasReferencedValue:b}}).filter(Boolean):ab}const I1=15;function ib(e,t){const n=Kk(e,t),a=Wk(n),r=v9(a);return{patches:Gk(e,a,{margin:I1}),levenshtein:r}}function b9(e,t){return O0(t,e,{allowExceedingIndices:!0,margin:I1})[0]}const vu="";function y9(e){return e.children.map(t=>Ua(t)?t.text.replaceAll(vu," "):"").join(vu)}const ci=["",""],rb=new RegExp(`[${ci.join("")}]`,"g"),ob=[];function M1(e){const{value:t,comments:n}=e;if(!t||t.length===0)return ob;const a=n.filter(Xr),r=[];return a.forEach(o=>{var s,d;(d=(s=o.target.path)==null?void 0:s.selection)==null||d.value.forEach(c=>{const u=t.find(j=>j._key===c._key);if(!u||!Fn(u))return;const m=c.text.replaceAll(rb,""),p=y9(u),{patches:h}=ib(m,c.text),f=b9(p,h),g=f.indexOf(ci[0]),b=f.replaceAll(ci[0],"").indexOf(ci[1]),v=f.replaceAll(rb,""),y=c.text.slice(c.text.indexOf(ci[0])+1,c.text.indexOf(ci[1])),x=v.slice(g,b),{levenshtein:w}=ib(x,y),C=Math.round(x.length+y.length/2);let T=!1;if(x.length===0&&(T=!0),w>C&&(T=!0),g+1===b&&(T=!0),g!==-1&&b!==-1){let j=0,A=0,M=0,S=0;for(let N=0;N<v.length&&(v[N]===vu&&(N<=g&&(A=-1,j++),S=-1,M++),N<g&&A++,N<g+x.length&&S++,N!==g+x.length);N++);r.push({selection:{anchor:{path:[{_key:u._key},"children",{_key:u.children[j]._key}],offset:A},focus:{path:[{_key:u._key},"children",{_key:u.children[M]._key}],offset:S}},comment:o,range:{_key:u._key,text:T?"":f}})}})}),r.length===0?ob:r}function v9(e){let t=0,n=0,a=0;for(let r=0;r<e.length;r++){const o=e[r][0],s=e[r][1];switch(o){case Yk:n+=s.length;break;case qk:a+=s.length;break;case gA:t+=Math.max(n,a),n=0,a=0;break}}return t+=Math.max(n,a),t}const x9=l.memo(function(e){const{children:t,commentId:n,currentHoveredCommentId:a,onClick:r,onHoverEnd:o,onHoverStart:s,selectedThreadId:d,threadId:c}=e,u=l.useRef(null),m=l.useRef(!1),p=l.useRef(null);l.useEffect(()=>{var v,y;const x=(v=u.current)==null?void 0:v.previousSibling,w=(y=u.current)==null?void 0:y.nextSibling;if(!x||!w){m.current=!1;return}const[C]=Object.keys(lb("")),T=x.getAttribute(C),j=w.getAttribute(C),A=!!(T&&j&&T===j);p.current=A?T:null,m.current=A},[]);const h=l.useCallback(()=>s(n),[n,s]),f=l.useCallback(()=>o(null),[o]),g=l.useCallback(()=>r(n),[n,r]),b=a===n||a===p.current&&m.current;return i.jsx(oj,{isAdded:!0,isHovered:b||d===c,isNested:m.current,onClick:g,onMouseEnter:h,onMouseLeave:f,ref:u,...lb(c),children:t})});function C9(e){const{comments:t,currentHoveredCommentId:n,onDecorationClick:a,onDecorationHoverEnd:r,onDecorationHoverStart:o,onDecorationMoved:s,selectedThreadId:d,value:c}=e;return M1({comments:t,value:c}).map(({selection:u,comment:m,range:p})=>({component:({children:h})=>i.jsx(x9,{commentId:m._id,currentHoveredCommentId:n,onClick:a,onHoverEnd:r,onHoverStart:o,selectedThreadId:d,threadId:m.threadId,children:h}),onMoved:s,selection:u,payload:{commentId:m._id,range:p}}))}function w9(e){const{fragment:t,value:n,selection:a}=e;if(!a)throw new Error("Selection is required");const r=a.backward?{backward:!1,anchor:a.focus,focus:a.anchor}:a;return{type:"text",value:t.map(o=>{const s=n.find(b=>b._key===o._key);if(!Fn(s))return{_key:o._key,text:""};const d=jn(r.anchor.path[0])&&r.anchor.path[0]._key,c=jn(r.focus.path[0])&&r.focus.path[0]._key,u=b0([o]),m=Fn(o)?o.children[0]:void 0,p=Fn(o)?o.children[o.children.length-1]:void 0;let h="",f=-1;if(d===s._key)for(const b of s.children){if(f++,b._key===(m==null?void 0:m._key)){h+=Ua(b)&&b.text.slice(0,Math.max(0,r.anchor.offset))||"";break}h+=b.text}let g="";if(c===s._key)for(const b of s.children.slice(f).reverse()){if(b._key===(p==null?void 0:p._key)){g=(Ua(b)&&b.text.slice(r.focus.offset,b.text.length)||"")+g;break}g=b.text+g}return{_key:s._key,text:`${h}${ci[0]}${u}${ci[1]}${g}`}})}}function T9(e,t){const n={};for(const a of e)n[a._key]={...a};for(const a of t)n[a._key]={...n[a._key],...a};return Object.values(n)}function xu(e){if(e&&typeof e=="object"&&e.hasOwnProperty("_ref"))return{...e,_weak:!0};if(Array.isArray(e))return e.map(t=>xu(t));if(e&&typeof e=="object"){const t={};return Object.keys(e).forEach(n=>{const a=e[n];typeof a=="object"&&a!==null?t[n]=xu(a):t[n]=a}),t}return e}function j9(e){return xu(e)}async function k9(e){const{activeTool:t,client:n,comment:a,currentUser:r,dataset:o,documentId:s,documentRevisionId:d,documentType:c,getIntent:u,getNotificationValue:m,getThreadLength:p,onCreate:h,onCreateError:f,projectId:g,createAddonDataset:b,workspace:v}=e,y=(a==null?void 0:a.id)||Cn(),x=r.id,w=((p==null?void 0:p(a.threadId))||0)+1;let C;if(a.type==="task"&&(C={_id:y,_type:"comment",authorId:x,message:a.message,lastEditedAt:void 0,parentCommentId:a.parentCommentId,status:a.status,threadId:a.threadId,reactions:a.reactions,context:{payload:{workspace:v},notification:a.context.notification,tool:(t==null?void 0:t.name)||""},target:{document:{_ref:s,_type:"reference",_weak:!0},documentType:c}}),a.type==="field"){const{documentTitle:T="",url:j="",workspaceTitle:A=""}=m({commentId:y})||{},M={currentThreadLength:w,documentTitle:T,url:j,workspaceTitle:A},S=u==null?void 0:u({id:s,type:c,path:a.fieldPath}),N=j9(a.contentSnapshot);C={_id:y,_type:"comment",authorId:x,message:a.message,lastEditedAt:void 0,parentCommentId:a.parentCommentId,status:a.status,threadId:a.threadId,reactions:a.reactions,context:{payload:{workspace:v},intent:S,notification:M,tool:(t==null?void 0:t.name)||""},contentSnapshot:N,target:{documentRevisionId:d||"",path:{field:a.fieldPath,selection:a.selection},document:{_dataset:o,_projectId:g,_ref:s,_type:"crossDatasetReference",_weak:!0},documentType:c}}}if(C){if(h==null||h(C),!n){try{const T=await b();if(!T)throw new Error("Failed to create addon dataset client");await T.create(C)}catch(T){throw f==null||f(C._id,T),T}return}try{await n.create(C)}catch(T){throw f==null||f(C._id,T),T}}}function A9(e,t){return`${e}-${t}`}async function S9(e){var t;const{client:n,currentUser:a,id:r,reaction:o,getComment:s,onUpdate:d}=e,c=((t=s==null?void 0:s(r))==null?void 0:t.reactions)||[],u=c.filter(h=>h.userId===a.id),m=A9(a.id,o.shortName),p=u.find(h=>h._key===m&&h._optimisticState!=="removed");if(p){const h=c.map(f=>f._key===p._key?{...f,_optimisticState:"removed"}:f);d==null||d(r,{reactions:h}),await n.patch(r).unset([`reactions[_key=="${m}"]`]).commit();return}if(!p){const h={_key:m,addedAt:new Date().toISOString(),shortName:o.shortName,userId:a.id},f={...h,_optimisticState:"added"},g=c.concat(f).filter(b=>!(b._key===h._key&&b._optimisticState==="removed"));d==null||d(r,{reactions:g}),await n.patch(r).setIfMissing({reactions:[]}).append("reactions",[h]).commit()}}async function _9(e){const{client:t,id:n,onRemove:a}=e;a==null||a(n),await Promise.all([t.delete({query:`*[_type == "comment" && parentCommentId == "${n}"]`}),t.delete(n)])}const E9=1e3,I9={trailing:!0,leading:!1},Gs=new Map;function M9(e){if(!Gs.has(e)){const t=Ey(P1,E9,I9);return Gs.set(e,t),t}return Gs.get(e)}async function P1(e){const{client:t,id:n,comment:a,transactionId:r,onUpdate:o}=e,s=r||Cn(),d=t==null?void 0:t.patch(n).set(a),c=t.transaction().transactionId(s).patch(d);o==null||o(n,a),a.status?(await c.commit(),await t.patch({query:`*[_type == "comment" && parentCommentId == "${n}"]`}).set({status:a.status}).commit()):await c.commit(),Gs.delete(n)}async function P9(e){const{id:t,comment:n,throttled:a}=e,r="message"in n,o={...n,lastEditedAt:new Date().toISOString()},s=r?o:n;if(!a){await P1({...e,comment:s});return}await M9(t)({...e,comment:s})}function N9(e){const{client:t,currentUser:n,dataset:a,documentId:r,documentRevisionId:o,documentType:s,getComment:d,getThreadLength:c,onCreate:u,onCreateError:m,onRemove:p,onTransactionStart:h,onUpdate:f,projectId:g,createAddonDataset:b,workspace:v,getCommentLink:y}=e,x=Y7(),w=Ju(l.useCallback(D=>typeof D.tool=="string"?D.tool:void 0,[])),C=cte(),T=l.useMemo(()=>C.find(D=>D.name===w),[w,C]),{getNotificationValue:j}=X7({documentId:r,documentType:s,getCommentLink:y}),A=l.useCallback(async D=>{n!=null&&n.id&&await k9({activeTool:T,client:t,comment:D,currentUser:n,dataset:a,documentId:r,documentRevisionId:o,documentType:s,getIntent:x,getNotificationValue:j,getThreadLength:c,onCreate:u,onCreateError:m,projectId:g,createAddonDataset:b,workspace:v})},[T,t,n,a,r,o,s,x,j,c,u,m,g,b,v]),M=l.useCallback(async D=>{t&&await _9({client:t,id:D,onRemove:p})},[t,p]),S=l.useCallback(async(D,_,F)=>{if(!t)return;const{throttled:R}=F||{},$=Cn();h(D,$),await P9({client:t,comment:_,throttled:R,id:D,onUpdate:f,transactionId:$})},[t,h,f]),N=l.useCallback(async(D,_)=>{!t||!(n!=null&&n.id)||await S9({client:t,currentUser:n,id:D,reaction:_,getComment:d,onUpdate:f})},[t,n,d,f]);return l.useMemo(()=>({operation:{create:A,react:N,remove:M,update:S}}),[A,M,S,N])}function xc(){const e=l.useContext(Gy);if(!e)throw new Error("useComments must be used within a CommentsProvider");return e}function O9(){const e=l.useContext(V0);if(!e)throw new Error("useCommentsAuthoringPath: missing context value");return e}function tr(){return l.useContext(qy)}function F9(){const e=l.useContext(z0);if(!e)throw new Error("useCommentsOnboarding: missing context value");return e}const Cc={behavior:"smooth",inline:"center",scrollMode:"if-needed"},R9={...Cc,block:"start"},D9={...Cc,block:"center"},$9={...Cc,block:"center"},L9={...Cc,block:"center"},B9={comment:L9,field:$9,group:R9,"inline-comment":D9};function as(e){const t=/[[\]_"_=.]/g;return e.replace(t,"")}function sb(e){return{"data-comments-comment-id":as(e)}}function V9(e){return{"data-comments-field-id":as(e)}}function U9(e){return{"data-comments-group-id":as(e)}}function lb(e){return{"data-comments-inline-comment-id":as(e)}}function Sp(e){const{boundaryElement:t}=e||{},[n,a]=l.useState(null),r=l.useMemo(()=>({...B9[(n==null?void 0:n.type)||"comment"],boundary:t}),[t,n==null?void 0:n.type]),o=l.useCallback(u=>{a({type:"comment",id:u})},[]),s=l.useCallback(u=>{a({type:"group",id:u})},[]),d=l.useCallback(u=>{a({type:"field",id:u})},[]),c=l.useCallback(u=>{a({type:"inline-comment",id:u})},[]);return l.useEffect(()=>{const u=requestAnimationFrame(()=>{if(!n)return;const{type:m,id:p}=n,h=document==null?void 0:document.querySelector(`[data-comments-${m}-id="${as(p)}"]`);h&&kr(h,r)});return()=>{cancelAnimationFrame(u)}},[r,n]),l.useMemo(()=>({scrollToComment:o,scrollToField:d,scrollToGroup:s,scrollToInlineComment:c}),[o,d,s,c])}function _p(){const e=l.useContext(Xy);if(!e)throw new Error("useCommentsSelectedPath: missing context value");return e}const z9=Et({name:"Comment Link Copied",version:1,description:"The link to a comment is copied"}),H9=Et({name:"Comment Viewed From Link",version:1,description:"A comment is viewed from a link"}),K9=Et({name:"Comment List View Changed",version:1,description:"The view of the comment list is changed"});function W9(){const e=ha(),t=l.useCallback(()=>{e.log(z9)},[e]),n=l.useCallback(()=>{e.log(H9)},[e]),a=l.useCallback(r=>{e.log(K9,{view:r})},[e]);return l.useMemo(()=>({commentLinkCopied:t,commentListViewChanged:a,commentViewedFromLink:n}),[t,a,n])}function Ep(){return l.useContext(y0)||{upsellData:null,handleOpenDialog:()=>null,upsellDialogOpen:!1,telemetryLogs:{dialogSecondaryClicked:()=>null,dialogPrimaryClicked:()=>null,panelViewed:()=>null,panelDismissed:()=>null,panelPrimaryClicked:()=>null,panelSecondaryClicked:()=>null}}}function G9(e,t){const{enabled:n,isLoading:a,error:r}=cs("studioComments"),{enabled:o}=mt().document.comments,s=l.useMemo(()=>o({documentType:t,documentId:ft(e)}),[e,t,o]);return l.useMemo(()=>a||!s||r?{enabled:!1,mode:null}:{enabled:!0,mode:n?"default":"upsell"},[a,s,r,n])}function q9(e){return e.reduce((t,n)=>({...t,[n._id]:n}),{})}function Y9(e,t){var n;switch(t.type){case"COMMENTS_SET":{const a=q9(t.comments);return{...e,comments:a}}case"COMMENT_ADDED":{const a=t.payload,r=a,o={[a._id]:{...e.comments[a._id],...r,_state:a._state||void 0,_createdAt:a._createdAt||new Date().toISOString()}};return{...e,comments:{...e.comments,...o}}}case"COMMENT_RECEIVED":{const a=t.payload;return{...e,comments:{...e.comments,[a._id]:a}}}case"COMMENT_DELETED":{const{[t.id]:a,...r}=e.comments;return Object.keys(r).forEach(o=>{r[o].parentCommentId===t.id&&delete r[o]}),{...e,comments:r}}case"COMMENT_UPDATED":{const a=t.payload,r=a._id,o=e.comments[r],s=((n=o==null?void 0:o.reactions)==null?void 0:n.filter(m=>m==null?void 0:m._optimisticState))||[],d=a.reactions||[],c=T9(s,d),u={...o,...a,reactions:c};return{...e,comments:{...e.comments,[r]:u}}}default:return e}}const X9={comments:{}},J9={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query"},Z9="_createdAt",Q9="desc",eH=['_type == "comment"',"target.document._ref == $documentId"],tH=`{
  _createdAt,
  _id,
  authorId,
  contentSnapshot,
  context,
  lastEditedAt,
  message,
  parentCommentId,
  reactions,
  status,
  target,
  threadId
}`,nH=`order(${Z9} ${Q9})`,cb=`*[${eH.join(" && ")}] ${tH} | ${nH}`;function aH(e){const{client:t,documentId:n,onLatestTransactionIdReceived:a,transactionsIdMap:r}=e,[o,s]=l.useReducer(Y9,X9),[d,c]=l.useState(t!==null),[u,m]=l.useState(null),p=l.useRef(!1),h=l.useMemo(()=>({documentId:ft(n)}),[n]),f=l.useCallback(async()=>{if(!t){c(!1);return}try{const v=await t.fetch(cb,h);s({type:"COMMENTS_SET",comments:v}),c(!1)}catch(v){m(v)}},[t,h]),g=l.useCallback(async v=>{var y;if(v.type==="welcome"&&!p.current&&(c(!0),await f(),c(!1),p.current=!0),v.type==="reconnect"&&(c(!0),p.current=!1),v.type==="mutation"){if(v.transition==="appear"){const x=v.result;x&&s({type:"COMMENT_RECEIVED",payload:x})}if(v.transition==="disappear"&&s({type:"COMMENT_DELETED",id:v.documentId}),v.transition==="update"){const x=v.result,w=((y=v.result)==null?void 0:y._id)||"",C=v.transactionId,T=r.get(w),j=C===T;if(!j&&T)return;x&&(s({type:"COMMENT_UPDATED",payload:x}),j&&a(w))}}},[f,a,r]),b=l.useMemo(()=>t?t.observable.listen(cb,h,J9).pipe(ut(v=>(m(v),re(v)))):re(),[t,h]);return l.useEffect(()=>{const v=b.subscribe(g);return()=>{v==null||v.unsubscribe()}},[g,b]),{data:l.useMemo(()=>Object.values(o.comments),[o.comments]),dispatch:s,error:u,loading:d}}const Cu=[],iH={open:Cu,resolved:Cu},rH=l.memo(function(e){const{children:t,documentId:n,documentType:a,isCommentsOpen:r,onCommentsOpen:o,sortOrder:s,type:d,getCommentLink:c,onClearSelectedComment:u,selectedCommentId:m,isConnecting:p,onPathOpen:h}=e,f=tr(),[g,b]=l.useState("open"),{client:v,createAddonDataset:y,isCreatingDataset:x}=Ic(),w=ft(n),C=GT(w,a,"low"),T=ot().get(a),j=Tt(),{name:A,dataset:M,projectId:S}=Dt(),N=l.useMemo(()=>C.draft||C.published,[C.draft,C.published]),D=l.useMemo(()=>N==null?void 0:N._rev,[N]),_=l.useMemo(()=>new Map,[]),F=l.useCallback(de=>{_.delete(de)},[_]),{dispatch:R,data:$=Cu,error:O,loading:V}=aH({documentId:w,client:v,transactionsIdMap:_,onLatestTransactionIdReceived:F}),H=l.useCallback((de,pe)=>{_.set(de,pe)},[_]),J=l.useCallback(de=>f.mode==="upsell"&&de==="resolved"?null:b(de),[b,f]),q=JT(l.useMemo(()=>({documentValue:N,permission:"read"}),[N])),oe=l.useMemo(()=>{if(!T||!j)return iH;const de=Ku($,["_createdAt"],[s]),pe=g9({comments:de,currentUser:j,documentValue:N,schemaType:T,type:d});return{open:pe.filter(W=>W.parentComment.status==="open"),resolved:pe.filter(W=>W.parentComment.status==="resolved")}},[j,$,N,T,s,d]),ie=l.useCallback(de=>oe.open.filter(pe=>pe.threadId===de).length,[oe.open]),te=l.useCallback(de=>$==null?void 0:$.find(pe=>pe._id===de),[$]),X=l.useCallback(de=>{var pe,W;const Y=((W=(pe=$==null?void 0:$.find(z=>z._id===de._id))==null?void 0:pe._state)==null?void 0:W.type)==="createError";R({type:"COMMENT_ADDED",payload:{...de,_state:Y?{type:"createRetrying"}:void 0}})},[$,R]),le=l.useCallback((de,pe)=>{R({type:"COMMENT_UPDATED",payload:{_id:de,...pe}})},[R]),me=l.useCallback((de,pe)=>{R({type:"COMMENT_UPDATED",payload:{_id:de,_state:{error:pe,type:"createError"}}})},[R]),{operation:G}=N9(l.useMemo(()=>({client:v,currentUser:j,dataset:M,documentId:w,documentRevisionId:D,documentType:a,getComment:te,getThreadLength:ie,projectId:S,schemaType:T,workspace:A,createAddonDataset:y,onCreate:X,onCreateError:me,onUpdate:le,onTransactionStart:H,getCommentLink:c}),[v,j,M,w,D,a,te,ie,S,T,A,y,X,me,le,H,c])),ce=l.useMemo(()=>({documentId:n,documentType:a,isCreatingDataset:x,status:g,setStatus:J,getComment:te,getCommentLink:c,onClearSelectedComment:u,selectedCommentId:m,isCommentsOpen:r,onCommentsOpen:o,isConnecting:p,onPathOpen:h,comments:{data:oe,error:O,loading:V||x||p||!1},operation:{create:G.create,react:G.react,remove:G.remove,update:G.update},mentionOptions:q}),[n,a,x,g,J,te,c,u,m,r,o,p,h,oe,O,V,G.create,G.react,G.remove,G.update,q]);return i.jsx(Gy.Provider,{value:ce,children:t})}),oH=l.memo(function(e){const{children:t,documentId:n,documentType:a}=e,r=G9(n,a);return i.jsx(qy.Provider,{value:r,children:t})});l.memo(function(e){const{children:t,getIntent:n}=e;return i.jsx(Yy.Provider,{value:n,children:t})});const sH=1,N1=`sanityStudio:comments:inspector:onboarding:dismissed:v${sH}`,lH=e=>{try{window.localStorage.setItem(N1,JSON.stringify(e))}catch{}},cH=()=>{try{const e=window.localStorage.getItem(N1);return e?JSON.parse(e):!1}catch{return!1}};function dH(e){const{children:t}=e,[n,a]=l.useState(cH()),r=l.useCallback(()=>{a(!0),lH(!0)},[a]),o=l.useMemo(()=>({setDismissed:r,isDismissed:n}),[r,n]);return i.jsx(z0.Provider,{value:o,children:t})}const uH=l.memo(function(e){const{children:t}=e,[n,a]=l.useState(null),r=l.useCallback(s=>{tt(n,s)||a(s)},[n]),o=l.useMemo(()=>({selectedPath:n,setSelectedPath:r}),[n,r]);return i.jsx(Xy.Provider,{value:o,children:t})}),db={inlineIcon:(e,t,n)=>{var a,r,o,s;if(!Fn(n))return n;const d=!!(((a=n.children[t-1])==null?void 0:a._type)==="span"&&(r=n.children[t-1])!=null&&r.text),c=!!(((o=n.children[t+1])==null?void 0:o._type)==="span"&&(s=n.children[t+1])!=null&&s.text);return{...e,hasTextRight:c,hasTextLeft:d}}},mH=e=>e.map(t=>{if(Fn(t)&&t._type==="block"){const n=t.children.map((a,r)=>db[a._type]?db[a._type](a,r,t):a);return{...t,children:n}}return t}),pH=k(I)`
  height: 1px;
  background: var(--card-border-color);
  width: 100%;
`,hH=k.div`
  // Remove margin top of first element
  > div:first-child {
    margin-top: 0;
  }
  // Remove margin bottom to last box.
  > [data-ui='Box']:last-child {
    margin-bottom: 0;
  }
`,fH=k(E)(e=>e.accent?`
    --card-icon-color: var(--card-accent-fg-color);
    `:""),O1=k.span`
  color: var(--card-accent-fg-color);
  --card-icon-color: var(--card-accent-fg-color);
`,gH=k.span(({theme:e})=>{const{weights:t}=e.sanity.fonts.text;return ae`
    font-weight: ${t.semibold};
  `}),bH=k(Jy)`
  &[data-sanity-icon] {
    /* Forces the icon to leave the necessary space to the right or left it has surrounding text */
    margin-left: ${e=>e.$hasTextLeft?"0":""};
    margin-right: ${e=>e.$hasTextRight?"0":""};
  }
`,yH=k.a`
  font-weight: 600;
  color: ${e=>e.useTextColor?"var(--card-muted-fg-color) !important":""};
`,vH=k.span`
  > svg {
    display: inline;
    font-size: calc(21 / 16 * 1rem) !important;
    margin: -0.375rem 0 !important;
    *[stroke] {
      stroke: currentColor;
    }
  }
`,xH=e=>i.jsx(O1,{children:e}),ub=e=>{const[t,n]=l.useState("");return l.useEffect(()=>{const a=new AbortController,r=a.signal;return fetch(e.icon.url,{signal:r}).then(o=>{if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o.text()}).then(o=>n(o)).catch(o=>{o.name!=="AbortError"&&console.error(o)}),()=>{a.abort()}},[e.icon.url]),i.jsx(vH,{dangerouslySetInnerHTML:{__html:t}})};function Es(e){const{children:t}=e;return i.jsx(I,{paddingX:2,marginBottom:4,children:i.jsx(E,{size:1,muted:!0,children:t})})}function CH(e){const{children:t}=e;return i.jsx(I,{paddingX:2,marginY:4,children:i.jsx(An,{size:2,as:"h2",children:t})})}const wH={block:{normal:({children:e})=>i.jsx(Es,{children:e}),h2:({children:e})=>i.jsx(CH,{children:e})},list:{bullet:({children:e})=>e,number:({children:e})=>i.jsx(i.Fragment,{children:e}),checkmarks:({children:e})=>i.jsx(i.Fragment,{children:e})},listItem:{bullet:({children:e})=>i.jsx(Es,{children:e}),number:({children:e})=>i.jsx(Es,{children:e}),checkmarks:({children:e})=>i.jsx(Es,{children:e})},marks:{strong:({children:e})=>i.jsx("strong",{children:e}),semibold:({children:e})=>i.jsx(gH,{children:e}),link:e=>i.jsxs(yH,{href:e.value.href,rel:"noopener noreferrer",target:"_blank",useTextColor:e.value.useTextColor,children:[e.children,e.value.showIcon&&i.jsx(ma,{style:{marginLeft:"2px"}})]}),accent:e=>i.jsx(O1,{children:e.children})},types:{inlineIcon:e=>i.jsx(Pl,{condition:e.value.accent,wrapper:xH,children:e.value.sanityIcon?i.jsx(bH,{symbol:e.value.sanityIcon,$hasTextLeft:e.value.hasTextLeft,$hasTextRight:e.value.hasTextRight}):i.jsx(ub,{icon:e.value.icon})}),divider:()=>i.jsx(I,{marginY:3,children:i.jsx(I,{paddingY:3,children:i.jsx(pH,{})})}),iconAndText:e=>i.jsxs(P,{align:"flex-start",paddingX:2,paddingTop:1,paddingBottom:2,marginTop:2,gap:2,children:[i.jsxs(P,{gap:2,style:{flexShrink:0},children:[i.jsx(fH,{size:1,accent:e.value.accent,children:e.value.sanityIcon?i.jsx(Jy,{symbol:e.value.sanityIcon}):i.jsx(ub,{icon:e.value.icon})}),i.jsx(E,{size:1,weight:"semibold",accent:e.value.accent,children:e.value.title})]}),i.jsx(E,{size:1,muted:!0,accent:e.value.accent,children:e.value.text})]})}};function wc(e){const t=l.useMemo(()=>mH(e.blocks),[e.blocks]);return i.jsx(U,{tone:"default",children:i.jsx(hH,{children:i.jsx(R0,{value:t,components:wH,onMissingComponent:!1})})})}const TH=k(Z)(({theme:e})=>{const{space:t}=Re(e);return`
      position: absolute;
      top: ${t[3]}px;
      right: ${t[3]}px;
      z-index: 20;
      background: transparent;
      border-radius: 9999px;
      box-shadow: none;
      color: ${fr.hex};
      --card-fg-color: ${fr.hex};
      :hover {
        --card-fg-color: ${fr.hex};
      }
    `}),jH=k.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 200px;
`;function Ip(e){var t,n,a;const{data:r,onClose:o,onPrimaryClick:s,onSecondaryClick:d}=e;return i.jsxs(En,{id:"upsell-dialog",onClose:o,onClickOutside:o,__unstable_hideCloseButton:!0,bodyHeight:"fill",padding:!1,footer:{cancelButton:(t=r.secondaryButton)!=null&&t.text?{text:r.secondaryButton.text,mode:"bleed",tone:"default",iconRight:Wi,...r.secondaryButton.url&&{target:"_blank",rel:"noopener noreferrer",as:"a",href:r.secondaryButton.url},onClick:d}:void 0,confirmButton:{text:(n=r.ctaButton)==null?void 0:n.text,mode:"default",tone:"primary",...r.ctaButton.url&&{target:"_blank",rel:"noopener noreferrer",as:"a",href:r.ctaButton.url},onClick:s}},children:[i.jsx(TH,{icon:un,mode:"bleed",tone:"default",onClick:o,tabIndex:-1,tooltipProps:null}),r.image&&i.jsx(jH,{src:r.image.asset.url,alt:(a=r.image.asset.altText)!=null?a:""}),i.jsx(I,{padding:3,marginTop:2,children:i.jsx(B,{space:4,paddingBottom:2,children:i.jsx(wc,{blocks:r.descriptionText})})})]})}const ai="comments",mb={interpolate:/{{([\s\S]+?)}}/g},pb="www.sanity.io";function kH(e){const[t,n]=l.useState(!1),[a,r]=l.useState(null),o=os(),s=ha(),d=Xe(qe),c=l.useMemo(()=>({dialogSecondaryClicked:()=>s.log(Rr,{feature:ai,type:"modal"}),dialogPrimaryClicked:()=>s.log(Fr,{feature:ai,type:"modal"}),panelViewed:g=>s.log(Nr,{feature:ai,type:"inspector",source:g}),panelDismissed:()=>s.log(Or,{feature:ai,type:"inspector"}),panelPrimaryClicked:()=>s.log(Fr,{feature:ai,type:"inspector"}),panelSecondaryClicked:()=>s.log(Rr,{feature:ai,type:"inspector"})}),[s]),u=l.useCallback(()=>{c.dialogPrimaryClicked()},[c]),m=l.useCallback(()=>{c.dialogSecondaryClicked()},[c]),p=l.useCallback(()=>{n(!1),s.log(Or,{feature:ai,type:"modal"})},[s]);l.useEffect(()=>{const g=d.observable.request({uri:"/journey/comments"}).subscribe({next:b=>{if(b)try{const v=Er(b.ctaButton.url,mb);b.ctaButton.url=v({baseUrl:pb,projectId:o});const y=Er(b.secondaryButton.url,mb);b.secondaryButton.url=y({baseUrl:pb,projectId:o}),r(b)}catch{}},error:()=>{}});return()=>{g.unsubscribe()}},[d,o]);const h=l.useCallback(g=>{n(!0),s.log(Nr,{feature:ai,type:"modal",source:g})},[s]),f=l.useMemo(()=>({upsellDialogOpen:t,handleOpenDialog:h,upsellData:a,telemetryLogs:c}),[h,t,a,c]);return i.jsxs(y0.Provider,{value:f,children:[e.children,a&&t&&i.jsx(Ip,{data:a,onClose:p,onPrimaryClick:u,onSecondaryClick:m})]})}function AH(e){const{documentId:t,documentType:n}=e;return tr().mode!==null?i.jsx(hb,{...e}):i.jsx(oH,{documentId:t,documentType:n,children:i.jsx(hb,{...e})})}function hb(e){return tr().enabled?i.jsx(uH,{children:i.jsx(q7,{children:e.renderDefault(e)})}):e.renderDefault(e)}const SH="sanity/comments",Da="yellow",wu=[{shortName:":+1:",title:"Thumbs up"},{shortName:":-1:",title:"Thumbs down"},{shortName:":heart:",title:"Heart"},{shortName:":rocket:",title:"Rocket"},{shortName:":heavy_plus_sign:",title:"Heavy plus sign"},{shortName:":eyes:",title:"Eyes"}],pl={":-1:":"👎",":+1:":"👍",":eyes:":"👀",":heart:":"❤️",":heavy_plus_sign:":"➕",":rocket:":"🚀"},_H=k(B)`
  width: 320px;
`;function EH(e){const{count:t,currentUser:n,fieldTitle:a,isCreatingDataset:r,mentionOptions:o,onChange:s,onClick:d,onClose:c,onCommentAdd:u,onDiscard:m,onInputKeyDown:p,open:h,value:f}=e,{t:g}=L(pt),[b,v]=l.useState(null),[y,x]=l.useState(null),w=l.useRef(null),C=t>0,T=l.useCallback(()=>{h&&(c(),y==null||y.focus())},[y,h,c]),j=l.useCallback(()=>{u(),T()},[T,u]),A=l.useMemo(()=>er(f),[f]),M=l.useCallback(()=>{var R;if(!A){T();return}(R=w.current)==null||R.discardDialogController.open()},[T,A]),S=l.useCallback(R=>{R.isDefaultPrevented()||p&&p(R)},[p]),N=l.useCallback(()=>{var R;(R=w.current)==null||R.discardDialogController.close()},[]),D=l.useCallback(()=>{var R;(R=w.current)==null||R.discardDialogController.close(),T(),m()},[T,m]),_=l.useCallback(R=>{R.key==="Escape"&&(R.preventDefault(),R.stopPropagation(),M())},[M]),F=l.useCallback(()=>{h&&M()},[h,M]);return vt(F,[b]),C?i.jsx(Ie,{portal:!0,placement:"top",content:g("field-button.content",{count:t}),children:i.jsx(He,{"aria-label":g("field-button.aria-label-open"),mode:"bleed",onClick:d,padding:2,space:2,children:i.jsxs(P,{align:"center",gap:2,children:[i.jsx(E,{size:1,children:i.jsx(H0,{})}),i.jsx(E,{size:0,children:t>9?"9+":t})]})})}):i.jsx(rt,{constrainSize:!0,content:i.jsx(_H,{padding:2,space:4,children:i.jsx(ir,{currentUser:n,focusLock:!0,focusOnMount:!0,mentionOptions:o,onChange:s,onDiscardCancel:N,onDiscardConfirm:D,onKeyDown:S,onSubmit:j,placeholder:i.jsx(Pe,{t:g,i18nKey:"compose.add-comment-input-placeholder",values:{field:a}}),readOnly:r,ref:w,value:f})}),fallbackPlacements:["bottom-end"],open:h,placement:"right-start",portal:!0,ref:v,onKeyDown:_,children:i.jsx("div",{children:i.jsx(Z,{"aria-label":g("field-button.aria-label-add"),disabled:r,icon:v0,mode:"bleed",onClick:d,ref:x,selected:h,tooltipProps:{content:g("field-button.title"),placement:"top"}})})})}const ud=new Map,IH=[],MH={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}};function PH(e){const{enabled:t,mode:n}=tr();return t?i.jsx(FH,{...e,mode:n}):e.renderDefault(e)}const NH=k(hn.div)(({theme:e})=>{const{radius:t,space:n,color:a}=e.sanity,r=Ge[Da][a.dark?900:50].hex;return ae`
    mix-blend-mode: ${a.dark?"screen":"multiply"};
    border-radius: ${t[3]}px;
    top: -${n[2]}px;
    left: -${n[2]}px;
    bottom: -${n[2]}px;
    right: -${n[2]}px;
    pointer-events: none;
    position: absolute;
    z-index: 1;
    width: calc(100% + ${n[2]*2}px);
    height: calc(100% + ${n[2]*2}px);
    background-color: ${r};
  `}),OH=k(B)`
  position: relative;
`;function FH(e){const{mode:t}=e,n=Tt(),{element:a}=am(),r=l.useRef(null),{comments:o,isCommentsOpen:s,isCreatingDataset:d,mentionOptions:c,onCommentsOpen:u,operation:m,setStatus:p,status:h}=xc(),{upsellData:f,handleOpenDialog:g}=Ep(),{selectedPath:b,setSelectedPath:v}=_p(),{authoringPath:y,setAuthoringPath:x}=O9(),{scrollToGroup:w}=Sp({boundaryElement:a}),C=l.useMemo(()=>la(e.schemaType),[e.schemaType]),T=l.useMemo(()=>Je(e.path),[e.path]),j=ud.get(T)||null,[A,M]=l.useState(j),S=l.useMemo(()=>y===T,[y,T]),N=l.useMemo(()=>!s||(b==null?void 0:b.origin)==="form"||(b==null?void 0:b.origin)==="url"?!1:(b==null?void 0:b.fieldPath)===T,[s,b==null?void 0:b.fieldPath,b==null?void 0:b.origin,T]),D=l.useMemo(()=>o.data.open.filter(q=>q.threadId===(b==null?void 0:b.threadId)).some(q=>Xr(q.parentComment)),[o.data.open,b==null?void 0:b.threadId]),_=l.useMemo(()=>o.data.open.map(q=>q.fieldPath===T?q.commentsCount:0).reduce((q,oe)=>q+oe,0)||0,[o.data.open,T]),F=_>0,R=l.useCallback(()=>{M(null),ud.delete(T)},[T]),$=l.useCallback(()=>{var q;if(F){h==="resolved"&&p("open"),x(null),u==null||u();const oe=(q=o.data.open.find(ie=>ie.fieldPath===Je(e.path)))==null?void 0:q.threadId;oe&&(v({threadId:oe,origin:"form",fieldPath:Je(e.path)}),w(oe));return}if(t==="upsell"){f?g("field_action"):u==null||u();return}x(S?null:T)},[o.data.open,g,F,S,t,u,e.path,w,x,v,p,h,T,f]),O=l.useCallback(()=>{if(A){const q=Cn(),oe={type:"field",fieldPath:Je(e.path),message:A,parentCommentId:void 0,status:"open",threadId:q,reactions:IH};m.create(oe),u==null||u(),h==="resolved"&&p("open"),R(),v({threadId:q,origin:"form",fieldPath:Je(e.path)}),w(q)}},[u,m,e.path,R,w,v,p,h,A]),V=l.useCallback(()=>x(null),[x]),H=l.useCallback(q=>{M(q),ud.set(T,q)},[T]),J=l.useMemo(()=>({button:n&&i.jsx(EH,{count:Number(_),currentUser:n,fieldTitle:C,isCreatingDataset:d,mentionOptions:c,onChange:H,onClick:$,onClose:V,onCommentAdd:O,onDiscard:R,open:S,value:A}),hasComments:F,isAddingComment:S}),[n,_,C,d,c,H,$,V,O,R,S,A,F]);return i.jsxs(OH,{...V9(Je(e.path)),ref:r,children:[e.renderDefault({...e,__internal_comments:J}),i.jsx(Ea,{children:N&&!D&&i.jsx(NH,{animate:"animate",exit:"exit",initial:"initial",variants:MH})})]})}function RH(e){if(!e||!e.length)return null;const t=e.map(s=>s.getBoundingClientRect()),n=Math.min(...t.map(s=>s.x))||0,a=Math.min(...t.map(s=>s.y))||0,r=Math.max(...t.map(s=>s.right))||0,o=Math.max(...t.map(s=>s.bottom))||0;return{x:n,y:a,width:r-n,height:o-a,top:a,right:r,bottom:o,left:n}}function DH(e){const{scrollElement:t,disabled:n,selector:a}=e,[r,o]=l.useState(null),s=l.useCallback(()=>{if(n)return;const d=document==null?void 0:document.querySelectorAll(a);if(!d)return;const c=RH(Array.from(d));o(c)},[n,a]);return l.useEffect(s,[s]),l.useEffect(()=>{if(!(n||!t))return t.addEventListener("wheel",s),()=>{t.removeEventListener("wheel",s)}},[s,n,t]),r}function $H(e){const{scrollElement:t,disabled:n,selector:a}=e,r=DH({scrollElement:t,disabled:n,selector:a});return l.useMemo(()=>r?{getBoundingClientRect:()=>r}:null,[r])}function LH(){const e=window.getSelection();let t=null;return e&&e.rangeCount>0&&(t=e.getRangeAt(0)),(t==null?void 0:t.getBoundingClientRect())||null}const BH=k(hn(rt))`
  user-select: none;
`,VH=["bottom","top"],UH={hidden:{opacity:0,y:-4},visible:{opacity:1,y:0}};function zH(e){const{disabled:t,onClick:n,onClickOutside:a,referenceElement:r}=e,[o,s]=l.useState(null),{t:d}=L(pt);vt(a,[o]);const c=d("inline-add-comment-button.disabled-overlap-title"),u=d("inline-add-comment-button.title");return i.jsx(BH,{animate:"visible",content:i.jsx(Z,{"data-testid":"inline-comment-button",disabled:t,icon:t?xne:v0,mode:"bleed",onClick:n,ref:s,text:t?c:u}),contentEditable:!1,fallbackPlacements:VH,initial:"hidden",open:!0,padding:1,placement:"bottom",portal:!0,referenceElement:r,variants:UH})}const HH=["bottom","top"],KH=hn(rt),WH=k(B)`
  width: 250px;
`,GH={hidden:{opacity:0},visible:{opacity:1}};function qH(e){const{currentUser:t,mentionOptions:n,onChange:a,onClickOutside:r,onDiscardConfirm:o,onSubmit:s,referenceElement:d,value:c}=e,u=l.useRef(null),[m,p]=l.useState(null),h=l.useCallback(()=>{var b;(b=u.current)==null||b.discardDialogController.close(),o()},[o]),f=l.useCallback(()=>{var b;(b=u.current)==null||b.discardDialogController.close()},[]),g=l.useCallback(()=>{var b;if(er(c)){(b=u.current)==null||b.discardDialogController.open();return}r()},[r,c]);return vt(g,[m]),i.jsx(KH,{animate:"visible",content:i.jsx(WH,{padding:2,ref:p,children:i.jsx(ir,{currentUser:t,focusLock:!0,focusOnMount:!0,mentionOptions:n,onChange:a,onDiscardCancel:f,onDiscardConfirm:h,onSubmit:s,ref:u,value:c})}),"data-ui":"InlineCommentInputPopover",fallbackPlacements:HH,initial:"hidden",open:!0,placement:"bottom",portal:!0,referenceElement:d,variants:GH})}const Un=[],YH="sanity.assist.instruction.prompt";function XH(e){const{enabled:t,mode:n}=tr(),a=e.schemaType.name===YH;return!t||a?e.renderDefault(e):i.jsx(JH,{...e,mode:n})}const JH=l.memo(function(e){var t,n;const{mode:a}=e,r=Tt(),o=Wu(),{comments:s,getComment:d,mentionOptions:c,onCommentsOpen:u,operation:m,setStatus:p,status:h}=xc(),{setSelectedPath:f,selectedPath:g}=_p(),{scrollToComment:b,scrollToGroup:v}=Sp(),{handleOpenDialog:y}=Ep(),x=l.useRef(null),w=l.useRef(!1),[C,T]=l.useState(null),[j,A]=l.useState(null),[M,S]=l.useState(null),[N,D]=l.useState(null),[_,F]=l.useState(null),[R,$]=l.useState(null),[O,V]=l.useState(!1),[H,J]=l.useState(null),[q,oe]=l.useState(!1),[ie,te]=l.useState(Un),X=l.useMemo(()=>Je(e.path),[e.path]),le=l.useCallback(()=>{const Ce=LH();F(Ce)},[]),me=l.useCallback(()=>{D(null),F(null),S(null),A(null),V(!1),T(null)},[]),G=l.useCallback(()=>{if(a==="upsell"){y("pte");return}S(N)},[N,y,a]),ce=l.useCallback(()=>{me()},[me]),de=l.useMemo(()=>s.data.open.filter(Ce=>Ce.fieldPath===X).filter(Ce=>Xr(Ce.parentComment)).map(Ce=>Ce.parentComment),[s.data.open,X]),pe=l.useCallback(()=>x.current?ge.getFragment(x.current):Un,[]),W=l.useCallback(()=>{if(!M||!x.current)return;const Ce=pe()||Un,Le=ge.getValue(x.current);if(!Le)return;const Me=w9({fragment:Ce,selection:M,value:Le}),ke=Cn();m.create({type:"field",contentSnapshot:Ce,fieldPath:X,message:j,parentCommentId:void 0,reactions:Un,selection:Me,status:"open",threadId:ke}),u==null||u(),h==="resolved"&&p("open"),f({fieldPath:X,threadId:ke,origin:"form"}),v(ke),me()},[M,pe,m,X,j,u,h,f,v,me,p]),Y=l.useCallback(Ce=>{var Le;const Me=d(Ce);Me&&(f({fieldPath:((Le=Me.target.path)==null?void 0:Le.field)||"",threadId:Me.threadId,origin:"form"}),u==null||u(),b(Me._id))},[d,u,b,f]),z=l.useCallback(Ce=>{const Le=(Ce==null?void 0:Ce.anchor.offset)!==(Ce==null?void 0:Ce.focus.offset),Me=pe();if(!(Me!=null&&Me.every(Fn))||!Le){V(!1);return}w.current||le(),D(Ce),V(!0)},[pe,le]),ne=l.useMemo(()=>Bo(z,200),[z]),ee=l.useCallback(()=>{w.current=!0},[]),fe=l.useCallback(()=>{w.current=!1,le()},[le]),Oe=l.useCallback(Ce=>{var Le;const{rangeDecoration:Me,newSelection:ke}=Ce,Mt=(Le=Me.payload)==null?void 0:Le.commentId;te(ga=>ga.map(bn=>{var ve;return((ve=bn.payload)==null?void 0:ve.commentId)===Mt?{...Me,selection:ke,payload:{...Me.payload,dirty:!0}}:bn}))},[]),Se=l.useCallback(()=>{const Ce=ie.filter(Le=>{var Me;return(Me=Le.payload)==null?void 0:Me.dirty});Ce.length!==0&&(Ce.forEach(Le=>{var Me,ke,Mt,ga,bn;const ve=(Me=Le.payload)==null?void 0:Me.commentId,dt=d(ve||"");if(!dt||!x.current)return;const Ln=ge.getValue(x.current)||Un,[Bn]=M1({comments:[dt],value:Ln}),ds=Bn!=null&&Bn.range?[Bn.range]:Un,Pc=Bn?[...((Mt=(ke=dt.target.path)==null?void 0:ke.selection)==null?void 0:Mt.value.filter(Oc=>{var us;return Oc._key!==((us=ds[0])==null?void 0:us._key)}).concat(ds).flat())||Un]:Un,Nc={target:{...dt.target,path:{...((ga=dt.target)==null?void 0:ga.path)||{},field:((bn=dt.target.path)==null?void 0:bn.field)||"",selection:{type:"text",value:Pc}}}};m.update(dt._id,Nc)}),te(Le=>Le.map(Me=>{var ke,Mt;return(Mt=(ke=Ce.find(ga=>{var bn,ve;return((bn=ga.payload)==null?void 0:bn.commentId)===((ve=Me.payload)==null?void 0:ve.commentId)}))==null?void 0:ke.payload)!=null&&Mt.dirty?{...Me,payload:{...Me.payload,dirty:!1}}:Me}).filter(Me=>Me.selection!==null)))},[ie,d,m]),De=l.useCallback(Ce=>{if(!x.current)return Un;const Le=ge.getValue(x.current)||Un;return C9({comments:Ce,currentHoveredCommentId:R,onDecorationClick:Y,onDecorationHoverEnd:$,onDecorationHoverStart:$,onDecorationMoved:Oe,selectedThreadId:(g==null?void 0:g.threadId)||null,value:Le})},[R,Y,Oe,g==null?void 0:g.threadId]),Fe=l.useCallback(Ce=>{Ce.type==="mutation"&&Se(),Ce.type==="selection"&&ne(Ce.selection)},[ne,Se]),Qe=l.useMemo(()=>M?{component:({children:Ce})=>i.jsx(oj,{isAuthoring:!0,ref:T,children:Ce}),selection:M}:null,[M]),ht=l.useMemo(()=>[...(e==null?void 0:e.rangeDecorations)||Un,...Qe?[Qe]:Un,...ie],[ie,Qe,e==null?void 0:e.rangeDecorations]),Q=l.useMemo(()=>!N||ie.length===0?!1:ie.some(Ce=>{if(!x.current)return!1;const Le=ge.isSelectionsOverlapping(x.current,N,Ce.selection),Me=ge.isSelectionsOverlapping(x.current,Ce.selection,N);return Le||Me}),[ie,N]),ue=q?document.body:((t=o.elements)==null?void 0:t.documentScrollElement)||document.body,se=q?((n=o.elements)==null?void 0:n.documentScrollElement)||document.body:H,he=$H({scrollElement:ue,disabled:!M||!C,selector:'[data-inline-comment-state="authoring"]'}),_e=l.useMemo(()=>_?{getBoundingClientRect:()=>_}:null,[_]);l.useEffect(()=>{if(N)return ue==null||ue.addEventListener("wheel",le),()=>{ue==null||ue.removeEventListener("wheel",le)}},[N,ue,le]),l.useEffect(()=>{const Ce=De(de);te(Le=>Ce.map(Me=>{var ke;const Mt=Le.find(ga=>{var bn,ve;return((bn=ga.payload)==null?void 0:bn.commentId)===((ve=Me.payload)==null?void 0:ve.commentId)});return(ke=Mt==null?void 0:Mt.payload)!=null&&ke.dirty?{...Me,payload:{...Me.payload,dirty:Mt.payload.dirty}}:Me}))},[De,de]);const Ne=!!(N&&O&&_e&&!w.current),$e=!!(M&&he);return i.jsxs(i.Fragment,{children:[i.jsx(Gu,{element:se,children:i.jsxs(Ea,{children:[$e&&r&&i.jsx(qH,{currentUser:r,mentionOptions:c,onChange:A,onClickOutside:me,onDiscardConfirm:ce,onSubmit:W,referenceElement:he,value:j}),Ne&&!$e&&i.jsx(zH,{disabled:Q,onClick:G,onClickOutside:me,referenceElement:_e})]})}),i.jsx(B,{ref:J,onMouseDown:ee,onMouseUp:fe,children:e.renderDefault({...e,onEditorChange:Fe,editorRef:x,rangeDecorations:ht,onFullScreenChange:oe})})]})});function ZH(e){return Rs(e.schemaType)}function QH(e){return ZH(e)?i.jsx(XH,{...e}):e.renderDefault(e)}const eK="https://snty.link/comments-beta-feedback",tK=k.span`
  margin-right: 0.2em;
`,nK=k.a`
  white-space: nowrap;
`,aK=k(U)({position:"relative",zIndex:1});function iK(){const{t:e}=L(pt);return i.jsx(aK,{padding:4,children:i.jsxs(E,{muted:!0,size:1,children:[e("feature-feedback.title")," ",i.jsxs(nK,{href:eK,target:"_blank",rel:"noreferrer",children:[i.jsxs(tK,{children:[e("feature-feedback.link")," "]})," ",i.jsx(Wi,{})]})]})})}const rK=k(U)({position:"relative",zIndex:1,lineHeight:0}),oK=l.forwardRef(function(e,t){const{t:n}=L(pt),{onClose:a,onViewChange:r,view:o,mode:s}=e,d=l.useCallback(()=>r("open"),[r]),c=l.useCallback(()=>r("resolved"),[r]);return i.jsx(rK,{ref:t,children:i.jsxs(P,{padding:2,children:[i.jsx(P,{align:"center",flex:1,gap:2,paddingY:2,padding:3,children:i.jsx(E,{as:"h1",size:1,weight:"medium",children:n("feature-name")})}),i.jsxs(P,{flex:"none",padding:1,gap:2,children:[i.jsx(ze,{id:"comment-status-menu-button",button:i.jsx(Z,{text:n(o==="open"?"status-filter.status-open":"status-filter.status-resolved"),mode:"bleed",iconRight:_n}),menu:i.jsxs(Be,{style:{width:"180px"},children:[i.jsx(ye,{iconRight:o==="open"?Gn:void 0,onClick:d,text:n("status-filter.status-open-full")}),i.jsx(ye,{iconRight:o==="resolved"?Gn:void 0,onClick:c,text:n("status-filter.status-resolved-full"),tooltipProps:s==="upsell"?{content:n("status-filter.status-resolved-full-upsell")}:void 0,disabled:s==="upsell"})]}),popover:{placement:"bottom-end"}}),i.jsx(Z,{"aria-label":n("close-pane-button-text-aria-label"),icon:un,mode:"bleed",onClick:a,tooltipProps:{content:n("close-pane-button-text")}})]})]})})}),sK=k(wi)`
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
`;function lK(e){const{enabled:t,mode:n}=tr();return t?i.jsx(sK,{children:i.jsx(cK,{...e,mode:n})}):null}function cK(e){const{t}=L(pt),{onClose:n,mode:a}=e,[r,o]=l.useState(!1),[s,d]=l.useState(null),[c,u]=l.useState(!1),[m,p]=l.useState(null),h=l.useRef(null),f=Tt(),{comments:g,getComment:b,isCreatingDataset:v,mentionOptions:y,setStatus:x,status:w,operation:C,selectedCommentId:T,getCommentLink:j,onClearSelectedComment:A,onPathOpen:M}=xc(),S=l.useRef(T),N=l.useRef(!1),D=Vt().push,{isTopLayer:_}=xi(),{scrollToComment:F,scrollToField:R,scrollToInlineComment:$}=Sp(),{selectedPath:O,setSelectedPath:V}=_p(),{isDismissed:H,setDismissed:J}=F9(),q=W9(),{upsellData:oe,telemetryLogs:ie}=Ep(),te=l.useMemo(()=>g.data[w],[g,w]),{loading:X}=g,le=l.useCallback(Q=>{x(Q),V(null),q.commentListViewChanged(Q)},[V,x,q]),me=l.useCallback(()=>{n(),V(null)},[n,V]),G=l.useMemo(()=>j?Q=>{navigator.clipboard.writeText(j(Q)).then(()=>{D({closable:!0,status:"info",title:t("copy-link-success-message")})}).catch(()=>{D({closable:!0,status:"error",title:t("copy-link-error-message")})}),q.commentLinkCopied()}:void 0,[j,D,t,q]),ce=l.useCallback(Q=>{var ue;const se=b(Q);se&&C.create({type:"field",fieldPath:((ue=se.target.path)==null?void 0:ue.field)||"",id:se._id,message:se.message,parentCommentId:se.parentCommentId,reactions:se.reactions||[],status:se.status,threadId:se.threadId})},[b,C]),de=l.useCallback(()=>{c||(o(!1),d(null))},[c]),pe=l.useCallback(Q=>{if(V(Q),Q!=null&&Q.fieldPath){const ue=Ml(Q.fieldPath);M==null||M(ue),R(Q.fieldPath),g.data.open.filter(se=>se.threadId===(Q==null?void 0:Q.threadId)).some(se=>Xr(se.parentComment))&&Q.threadId&&$(Q.threadId)}},[g.data.open,M,R,$,V]),W=l.useCallback(Q=>{var ue;const se=((ue=Q==null?void 0:Q.payload)==null?void 0:ue.fieldPath)||"";C.create({type:"field",fieldPath:se,message:Q.message,parentCommentId:Q.parentCommentId,reactions:Q.reactions,status:Q.status,threadId:Q.threadId}),V({fieldPath:se,origin:"inspector",threadId:Q.threadId})},[C,V]),Y=l.useCallback(Q=>{var ue;C.create({...Q,type:"field",fieldPath:((ue=Q==null?void 0:Q.payload)==null?void 0:ue.fieldPath)||""})},[C]),z=l.useCallback((Q,ue)=>{C.update(Q,ue)},[C]),ne=l.useCallback(Q=>{var ue;const se=te.find(_e=>{var Ne;return((Ne=_e.parentComment)==null?void 0:Ne._id)===Q}),he=!!(se&&((ue=se==null?void 0:se.replies)==null?void 0:ue.length)>0);o(!0),d({commentId:Q,isParent:he})},[te]),ee=l.useCallback(async Q=>{try{u(!0),await C.remove(Q),de()}catch(ue){p(ue)}finally{u(!1)}},[de,C]),fe=l.useCallback((Q,ue)=>{var se;if(C.update(Q,{status:ue}),ue==="open"){x("open");const he=b(Q);if(!he)return;V({fieldPath:((se=he.target.path)==null?void 0:se.field)||null,origin:"inspector",threadId:he.threadId||null}),F(Q)}},[b,C,F,V,x]),Oe=l.useCallback((Q,ue)=>{C.react(Q,ue)},[C]),Se=l.useCallback(()=>{O&&_&&V(null)},[_,O,V]),De=l.useCallback(Q=>{var ue;Q.target instanceof HTMLElement&&(ue=Q.target)!=null&&ue.hasAttribute("data-slate-string")||Se()},[Se]);vt(De,[h.current]);const[Fe,Qe]=l.useState(!1);l.useEffect(()=>{if(!(Fe||a!=="upsell"))return Qe(!0),(O==null?void 0:O.origin)==="form"?ie.panelViewed("field_action"):S.current?ie.panelViewed("link"):ie.panelViewed("document_action"),()=>{ie.panelDismissed()}},[Fe,a,O==null?void 0:O.origin,ie]),l.useEffect(()=>{var Q;const ue=b(S.current||"");!X&&ue&&N.current===!1&&(x(ue.status||"open"),V({fieldPath:((Q=ue.target.path)==null?void 0:Q.field)||null,origin:"url",threadId:ue.threadId||null}),F(ue._id),N.current=!0,S.current=void 0,A==null||A(),q.commentViewedFromLink())},[b,X,A,F,V,x,q]);const ht=l.useMemo(()=>a==="upsell"&&oe?i.jsx(nie,{data:oe,onPrimaryClick:ie.panelPrimaryClicked,onSecondaryClick:ie.panelSecondaryClicked}):null,[a,ie.panelPrimaryClicked,ie.panelSecondaryClicked,oe]);return i.jsxs(l.Fragment,{children:[s&&r&&i.jsx(nj,{...s,error:m,loading:c,onClose:de,onConfirm:ee}),i.jsxs(P,{direction:"column",flex:1,height:"fill",onClick:Se,overflow:"hidden",ref:h,children:[i.jsx(tie,{onDismiss:J,open:!H,placement:"left-start",children:i.jsx(oK,{onClose:me,onViewChange:le,view:w,mode:a})}),f&&i.jsx(Jae,{beforeListNode:ht,comments:te,currentUser:f,error:g.error,loading:X,mentionOptions:y,mode:a,onCopyLink:G,onCreateRetry:ce,onDelete:ne,onEdit:z,onNewThreadCreate:W,onPathSelect:pe,onReactionSelect:Oe,onReply:Y,onStatusChange:fe,readOnly:v,selectedPath:O,status:w}),a==="default"&&i.jsx(iK,{})]})]})}function dK(){const{t:e}=L(pt),{enabled:t}=tr();return{hidden:!t,icon:H0,showAsAction:!0,title:e("feature-name")}}const uK={name:SH,component:lK,useMenuItem:dK};function mK(e){const{enabled:t,isLoading:n}=cs("studioComments");return i.jsx(AT,{children:i.jsx(dH,{children:i.jsx(Pl,{condition:!t&&!n,wrapper:a=>i.jsx(kH,{children:a}),children:e.renderDefault(e)})})})}const pK=zl({name:"sanity/comments",document:{inspectors:[uK],components:{unstable_layout:AH}},form:{components:{field:PH,input:QH}},studio:{components:{layout:mK}},i18n:{bundles:[G7]}}),F1="scheduled-publishing::time-zone",hl={publish:{actionName:"Publishing",badgeColor:"primary",badgeTone:"positive"},unpublish:{actionName:"Unpublishing",badgeColor:"danger",badgeTone:"critical"}},No={scheduled:{title:"Upcoming"},succeeded:{title:"Completed"},cancelled:{title:"Failed"}},Oo=Object.keys(No).filter(e=>!!e),R1=55,hK="This document has validation warnings.",Mp="This document has validation errors that should be resolved before its publish date.",fK="This schedule failed to run.",gK="Forbidden. Please check that your project has access to Scheduled Publishing.",vr={SMALL:"d MMM yy',' p",MEDIUM:"d MMMM yyyy',' p",LARGE:"iiii',' d MMMM yyyy',' p"},bK={enabled:!0,inputDateTimeFormat:"dd/MM/yyyy HH:mm"},yK="schedules",vK="Schedules",D1=e=>{const{description:t,title:n}=e;return i.jsx(U,{overflow:"hidden",padding:4,radius:2,shadow:1,tone:"critical",children:i.jsxs(P,{align:"center",gap:4,children:[i.jsx(E,{size:2,children:i.jsx(Aa,{})}),i.jsxs(et,{space:2,children:[i.jsx(E,{size:1,weight:"semibold",children:n}),t&&i.jsx(E,{size:1,children:t})]})]})})};var xK=[{name:"Pacific/Niue",alternativeName:"Niue Time",group:["Pacific/Niue"],continentCode:"OC",continentName:"Oceania",countryName:"Niue",countryCode:"NU",mainCities:["Alofi"],rawOffsetInMinutes:-660,abbreviation:"NUT",rawFormat:"-11:00 Niue Time - Alofi"},{name:"Pacific/Midway",alternativeName:"Samoa Time",group:["Pacific/Midway"],continentCode:"OC",continentName:"Oceania",countryName:"United States Minor Outlying Islands",countryCode:"UM",mainCities:["Midway"],rawOffsetInMinutes:-660,abbreviation:"SST",rawFormat:"-11:00 Samoa Time - Midway"},{name:"Pacific/Pago_Pago",alternativeName:"Samoa Time",group:["Pacific/Pago_Pago","US/Samoa","Pacific/Samoa","Pacific/Midway"],continentCode:"OC",continentName:"Oceania",countryName:"American Samoa",countryCode:"AS",mainCities:["Pago Pago"],rawOffsetInMinutes:-660,abbreviation:"SST",rawFormat:"-11:00 Samoa Time - Pago Pago"},{name:"Pacific/Rarotonga",alternativeName:"Cook Islands Time",group:["Pacific/Rarotonga"],continentCode:"OC",continentName:"Oceania",countryName:"Cook Islands",countryCode:"CK",mainCities:["Avarua"],rawOffsetInMinutes:-600,abbreviation:"CKT",rawFormat:"-10:00 Cook Islands Time - Avarua"},{name:"America/Adak",alternativeName:"Hawaii-Aleutian Time",group:["America/Adak","US/Aleutian","America/Atka"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Adak"],rawOffsetInMinutes:-600,abbreviation:"HAST",rawFormat:"-10:00 Hawaii-Aleutian Time - Adak"},{name:"Pacific/Honolulu",alternativeName:"Hawaii-Aleutian Time",group:["Pacific/Honolulu","US/Hawaii","Pacific/Johnston"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Honolulu","East Honolulu","Pearl City","Hilo"],rawOffsetInMinutes:-600,abbreviation:"HAST",rawFormat:"-10:00 Hawaii-Aleutian Time - Honolulu, East Honolulu, Pearl City, Hilo"},{name:"Pacific/Tahiti",alternativeName:"Tahiti Time",group:["Pacific/Tahiti"],continentCode:"OC",continentName:"Oceania",countryName:"French Polynesia",countryCode:"PF",mainCities:["Faaa","Papeete","Punaauia"],rawOffsetInMinutes:-600,abbreviation:"TAHT",rawFormat:"-10:00 Tahiti Time - Faaa, Papeete, Punaauia"},{name:"Pacific/Marquesas",alternativeName:"Marquesas Time",group:["Pacific/Marquesas"],continentCode:"OC",continentName:"Oceania",countryName:"French Polynesia",countryCode:"PF",mainCities:["Marquesas"],rawOffsetInMinutes:-570,abbreviation:"MART",rawFormat:"-09:30 Marquesas Time - Marquesas"},{name:"America/Anchorage",alternativeName:"Alaska Time",group:["America/Anchorage","America/Juneau","America/Metlakatla","America/Nome","America/Sitka","America/Yakutat","US/Alaska"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Anchorage","Juneau","Fairbanks","Eagle River"],rawOffsetInMinutes:-540,abbreviation:"AKST",rawFormat:"-09:00 Alaska Time - Anchorage, Juneau, Fairbanks, Eagle River"},{name:"Pacific/Gambier",alternativeName:"Gambier Time",group:["Pacific/Gambier"],continentCode:"OC",continentName:"Oceania",countryName:"French Polynesia",countryCode:"PF",mainCities:["Gambier"],rawOffsetInMinutes:-540,abbreviation:"GAMT",rawFormat:"-09:00 Gambier Time - Gambier"},{name:"America/Los_Angeles",alternativeName:"Pacific Time",group:["America/Los_Angeles","US/Pacific"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Los Angeles","San Diego","San Jose","San Francisco"],rawOffsetInMinutes:-480,abbreviation:"PST",rawFormat:"-08:00 Pacific Time - Los Angeles, San Diego, San Jose, San Francisco"},{name:"America/Tijuana",alternativeName:"Pacific Time",group:["America/Tijuana","Mexico/BajaNorte","America/Ensenada","America/Santa_Isabel"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Tijuana","Mexicali","Ensenada","Rosarito"],rawOffsetInMinutes:-480,abbreviation:"PST",rawFormat:"-08:00 Pacific Time - Tijuana, Mexicali, Ensenada, Rosarito"},{name:"America/Vancouver",alternativeName:"Pacific Time",group:["America/Vancouver","Canada/Pacific"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Vancouver","Surrey","Okanagan","Victoria"],rawOffsetInMinutes:-480,abbreviation:"PST",rawFormat:"-08:00 Pacific Time - Vancouver, Surrey, Okanagan, Victoria"},{name:"Pacific/Pitcairn",alternativeName:"Pitcairn Time",group:["Pacific/Pitcairn"],continentCode:"OC",continentName:"Oceania",countryName:"Pitcairn",countryCode:"PN",mainCities:["Adamstown"],rawOffsetInMinutes:-480,abbreviation:"PST",rawFormat:"-08:00 Pitcairn Time - Adamstown"},{name:"America/Hermosillo",alternativeName:"Mexican Pacific Time",group:["America/Hermosillo","America/Mazatlan","Mexico/BajaSur"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Hermosillo","Culiacán","Ciudad Obregón","Mazatlán"],rawOffsetInMinutes:-420,abbreviation:"GMT-7",rawFormat:"-07:00 Mexican Pacific Time - Hermosillo, Culiacán, Ciudad Obregón, Mazatlán"},{name:"America/Edmonton",alternativeName:"Mountain Time",group:["America/Cambridge_Bay","America/Edmonton","America/Inuvik","America/Yellowknife","Canada/Mountain"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Calgary","Edmonton","Red Deer","Sherwood Park"],rawOffsetInMinutes:-420,abbreviation:"MST",rawFormat:"-07:00 Mountain Time - Calgary, Edmonton, Red Deer, Sherwood Park"},{name:"America/Ciudad_Juarez",alternativeName:"Mountain Time",group:["America/Ciudad_Juarez"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Ciudad Juárez"],rawOffsetInMinutes:-420,abbreviation:"MST",rawFormat:"-07:00 Mountain Time - Ciudad Juárez"},{name:"America/Denver",alternativeName:"Mountain Time",group:["America/Boise","America/Denver","Navajo","US/Mountain","America/Shiprock"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Denver","El Paso","Albuquerque","Colorado Springs"],rawOffsetInMinutes:-420,abbreviation:"MST",rawFormat:"-07:00 Mountain Time - Denver, El Paso, Albuquerque, Colorado Springs"},{name:"America/Phoenix",alternativeName:"Mountain Time",group:["America/Phoenix","US/Arizona","America/Creston"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Phoenix","Tucson","Mesa","Chandler"],rawOffsetInMinutes:-420,abbreviation:"MST",rawFormat:"-07:00 Mountain Time - Phoenix, Tucson, Mesa, Chandler"},{name:"America/Whitehorse",alternativeName:"Yukon Time",group:["America/Creston","America/Dawson","America/Dawson_Creek","America/Fort_Nelson","America/Whitehorse","Canada/Yukon"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Whitehorse","Fort St. John","Creston","Dawson"],rawOffsetInMinutes:-420,abbreviation:"YT",rawFormat:"-07:00 Yukon Time - Whitehorse, Fort St. John, Creston, Dawson"},{name:"America/Belize",alternativeName:"Central Time",group:["America/Belize"],continentCode:"NA",continentName:"North America",countryName:"Belize",countryCode:"BZ",mainCities:["Belize City","San Ignacio","San Pedro","Orange Walk"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Belize City, San Ignacio, San Pedro, Orange Walk"},{name:"America/Chicago",alternativeName:"Central Time",group:["America/Chicago","America/Indiana/Knox","America/Indiana/Tell_City","America/Menominee","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","US/Central","US/Indiana-Starke","America/Knox_IN"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Chicago","Houston","San Antonio","Dallas"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Chicago, Houston, San Antonio, Dallas"},{name:"America/Guatemala",alternativeName:"Central Time",group:["America/Guatemala"],continentCode:"NA",continentName:"North America",countryName:"Guatemala",countryCode:"GT",mainCities:["Guatemala City","Villa Nueva","Mixco","Cobán"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Guatemala City, Villa Nueva, Mixco, Cobán"},{name:"America/Managua",alternativeName:"Central Time",group:["America/Managua"],continentCode:"NA",continentName:"North America",countryName:"Nicaragua",countryCode:"NI",mainCities:["Managua","León","Masaya","Chinandega"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Managua, León, Masaya, Chinandega"},{name:"America/Mexico_City",alternativeName:"Central Time",group:["America/Bahia_Banderas","America/Chihuahua","America/Merida","America/Mexico_City","America/Monterrey","Mexico/General"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Mexico City","Iztapalapa","León de los Aldama","Puebla"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Mexico City, Iztapalapa, León de los Aldama, Puebla"},{name:"America/Matamoros",alternativeName:"Central Time",group:["America/Matamoros","America/Ojinaga"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Reynosa","Heroica Matamoros","Nuevo Laredo","Piedras Negras"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Reynosa, Heroica Matamoros, Nuevo Laredo, Piedras Negras"},{name:"America/Costa_Rica",alternativeName:"Central Time",group:["America/Costa_Rica"],continentCode:"NA",continentName:"North America",countryName:"Costa Rica",countryCode:"CR",mainCities:["San José","Limón","San Francisco","Alajuela"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - San José, Limón, San Francisco, Alajuela"},{name:"America/El_Salvador",alternativeName:"Central Time",group:["America/El_Salvador"],continentCode:"NA",continentName:"North America",countryName:"El Salvador",countryCode:"SV",mainCities:["San Salvador","Soyapango","San Miguel","Santa Ana"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - San Salvador, Soyapango, San Miguel, Santa Ana"},{name:"America/Regina",alternativeName:"Central Time",group:["America/Regina","America/Swift_Current","Canada/Saskatchewan"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Saskatoon","Regina","Prince Albert","Moose Jaw"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Saskatoon, Regina, Prince Albert, Moose Jaw"},{name:"America/Tegucigalpa",alternativeName:"Central Time",group:["America/Tegucigalpa"],continentCode:"NA",continentName:"North America",countryName:"Honduras",countryCode:"HN",mainCities:["Tegucigalpa","San Pedro Sula","La Ceiba","Choloma"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Tegucigalpa, San Pedro Sula, La Ceiba, Choloma"},{name:"America/Winnipeg",alternativeName:"Central Time",group:["America/Rankin_Inlet","America/Resolute","America/Winnipeg","Canada/Central","America/Rainy_River"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Winnipeg","Brandon","Steinbach","Kenora"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Winnipeg, Brandon, Steinbach, Kenora"},{name:"Pacific/Easter",alternativeName:"Easter Island Time",group:["Pacific/Easter","Chile/EasterIsland"],continentCode:"SA",continentName:"South America",countryName:"Chile",countryCode:"CL",mainCities:["Easter"],rawOffsetInMinutes:-360,abbreviation:"EAST",rawFormat:"-06:00 Easter Island Time - Easter"},{name:"Pacific/Galapagos",alternativeName:"Galapagos Time",group:["Pacific/Galapagos"],continentCode:"SA",continentName:"South America",countryName:"Ecuador",countryCode:"EC",mainCities:["Galapagos"],rawOffsetInMinutes:-360,abbreviation:"GALT",rawFormat:"-06:00 Galapagos Time - Galapagos"},{name:"America/Rio_Branco",alternativeName:"Acre Time",group:["America/Eirunepe","America/Rio_Branco","Brazil/Acre","America/Porto_Acre"],continentCode:"SA",continentName:"South America",countryName:"Brazil",countryCode:"BR",mainCities:["Rio Branco","Cruzeiro do Sul","Senador Guiomard","Sena Madureira"],rawOffsetInMinutes:-300,abbreviation:"ACT",rawFormat:"-05:00 Acre Time - Rio Branco, Cruzeiro do Sul, Senador Guiomard, Sena Madureira"},{name:"America/Bogota",alternativeName:"Colombia Time",group:["America/Bogota"],continentCode:"SA",continentName:"South America",countryName:"Colombia",countryCode:"CO",mainCities:["Bogotá","Cali","Medellín","Barranquilla"],rawOffsetInMinutes:-300,abbreviation:"COT",rawFormat:"-05:00 Colombia Time - Bogotá, Cali, Medellín, Barranquilla"},{name:"America/Havana",alternativeName:"Cuba Time",group:["America/Havana","Cuba"],continentCode:"NA",continentName:"North America",countryName:"Cuba",countryCode:"CU",mainCities:["Havana","Santiago de Cuba","Camagüey","Holguín"],rawOffsetInMinutes:-300,abbreviation:"CST",rawFormat:"-05:00 Cuba Time - Havana, Santiago de Cuba, Camagüey, Holguín"},{name:"America/Atikokan",alternativeName:"Eastern Time",group:["America/Atikokan"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Atikokan"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Atikokan"},{name:"America/Cancun",alternativeName:"Eastern Time",group:["America/Cancun"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Cancún","Chetumal","Playa del Carmen","Cozumel"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Cancún, Chetumal, Playa del Carmen, Cozumel"},{name:"America/Grand_Turk",alternativeName:"Eastern Time",group:["America/Grand_Turk"],continentCode:"NA",continentName:"North America",countryName:"Turks and Caicos Islands",countryCode:"TC",mainCities:["Cockburn Town"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Cockburn Town"},{name:"America/Cayman",alternativeName:"Eastern Time",group:["America/Cayman"],continentCode:"NA",continentName:"North America",countryName:"Cayman Islands",countryCode:"KY",mainCities:["George Town","West Bay"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - George Town, West Bay"},{name:"America/Jamaica",alternativeName:"Eastern Time",group:["America/Jamaica","Jamaica"],continentCode:"NA",continentName:"North America",countryName:"Jamaica",countryCode:"JM",mainCities:["Kingston","New Kingston","Spanish Town","Portmore"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Kingston, New Kingston, Spanish Town, Portmore"},{name:"America/Nassau",alternativeName:"Eastern Time",group:["America/Nassau"],continentCode:"NA",continentName:"North America",countryName:"Bahamas",countryCode:"BS",mainCities:["Nassau","Lucaya","Freeport","Killarney"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Nassau, Lucaya, Freeport, Killarney"},{name:"America/New_York",alternativeName:"Eastern Time",group:["America/Detroit","America/Indiana/Indianapolis","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Kentucky/Louisville","America/Kentucky/Monticello","America/New_York","US/Michigan","US/East-Indiana","America/Indianapolis","America/Fort_Wayne","America/Louisville","US/Eastern"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["New York City","Brooklyn","Queens","Philadelphia"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - New York City, Brooklyn, Queens, Philadelphia"},{name:"America/Panama",alternativeName:"Eastern Time",group:["America/Panama","America/Atikokan","America/Cayman","America/Coral_Harbour"],continentCode:"NA",continentName:"North America",countryName:"Panama",countryCode:"PA",mainCities:["Panamá","San Miguelito","Juan Díaz","David"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Panamá, San Miguelito, Juan Díaz, David"},{name:"America/Port-au-Prince",alternativeName:"Eastern Time",group:["America/Port-au-Prince"],continentCode:"NA",continentName:"North America",countryName:"Haiti",countryCode:"HT",mainCities:["Port-au-Prince","Carrefour","Delmas 73","Port-de-Paix"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Port-au-Prince, Carrefour, Delmas 73, Port-de-Paix"},{name:"America/Toronto",alternativeName:"Eastern Time",group:["America/Iqaluit","America/Toronto","America/Pangnirtung","Canada/Eastern","America/Nassau","America/Montreal","America/Nipigon","America/Thunder_Bay"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Toronto","Montréal","Ottawa","Mississauga"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Toronto, Montréal, Ottawa, Mississauga"},{name:"America/Guayaquil",alternativeName:"Ecuador Time",group:["America/Guayaquil"],continentCode:"SA",continentName:"South America",countryName:"Ecuador",countryCode:"EC",mainCities:["Quito","Guayaquil","Cuenca","Santo Domingo de los Colorados"],rawOffsetInMinutes:-300,abbreviation:"ECT",rawFormat:"-05:00 Ecuador Time - Quito, Guayaquil, Cuenca, Santo Domingo de los Colorados"},{name:"America/Lima",alternativeName:"Peru Time",group:["America/Lima"],continentCode:"SA",continentName:"South America",countryName:"Peru",countryCode:"PE",mainCities:["Lima","Callao","Arequipa","Trujillo"],rawOffsetInMinutes:-300,abbreviation:"PET",rawFormat:"-05:00 Peru Time - Lima, Callao, Arequipa, Trujillo"},{name:"America/Manaus",alternativeName:"Amazon Time",group:["America/Boa_Vista","America/Campo_Grande","America/Cuiaba","America/Manaus","America/Porto_Velho","Brazil/West"],continentCode:"SA",continentName:"South America",countryName:"Brazil",countryCode:"BR",mainCities:["Manaus","Campo Grande","Cuiabá","Porto Velho"],rawOffsetInMinutes:-240,abbreviation:"AMT",rawFormat:"-04:00 Amazon Time - Manaus, Campo Grande, Cuiabá, Porto Velho"},{name:"America/St_Kitts",alternativeName:"Atlantic Time",group:["America/St_Kitts"],continentCode:"NA",continentName:"North America",countryName:"Saint Kitts and Nevis",countryCode:"KN",mainCities:["Basseterre"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Basseterre"},{name:"America/Blanc-Sablon",alternativeName:"Atlantic Time",group:["America/Blanc-Sablon"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Blanc-Sablon"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Blanc-Sablon"},{name:"America/Montserrat",alternativeName:"Atlantic Time",group:["America/Montserrat"],continentCode:"NA",continentName:"North America",countryName:"Montserrat",countryCode:"MS",mainCities:["Brades","Plymouth"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Brades, Plymouth"},{name:"America/Barbados",alternativeName:"Atlantic Time",group:["America/Barbados"],continentCode:"NA",continentName:"North America",countryName:"Barbados",countryCode:"BB",mainCities:["Bridgetown"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Bridgetown"},{name:"America/Port_of_Spain",alternativeName:"Atlantic Time",group:["America/Port_of_Spain"],continentCode:"NA",continentName:"North America",countryName:"Trinidad and Tobago",countryCode:"TT",mainCities:["Chaguanas","Mon Repos","San Fernando","Port of Spain"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Chaguanas, Mon Repos, San Fernando, Port of Spain"},{name:"America/Martinique",alternativeName:"Atlantic Time",group:["America/Martinique"],continentCode:"NA",continentName:"North America",countryName:"Martinique",countryCode:"MQ",mainCities:["Fort-de-France","Le Lamentin","Le Robert","Sainte-Marie"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Fort-de-France, Le Lamentin, Le Robert, Sainte-Marie"},{name:"America/St_Lucia",alternativeName:"Atlantic Time",group:["America/St_Lucia"],continentCode:"NA",continentName:"North America",countryName:"Saint Lucia",countryCode:"LC",mainCities:["Gros Islet","Castries"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Gros Islet, Castries"},{name:"America/St_Barthelemy",alternativeName:"Atlantic Time",group:["America/St_Barthelemy"],continentCode:"NA",continentName:"North America",countryName:"Saint Barthelemy",countryCode:"BL",mainCities:["Gustavia"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Gustavia"},{name:"America/Halifax",alternativeName:"Atlantic Time",group:["America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Moncton","Canada/Atlantic"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Halifax","Moncton","Sydney","Dartmouth"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Halifax, Moncton, Sydney, Dartmouth"},{name:"Atlantic/Bermuda",alternativeName:"Atlantic Time",group:["Atlantic/Bermuda"],continentCode:"NA",continentName:"North America",countryName:"Bermuda",countryCode:"BM",mainCities:["Hamilton"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Hamilton"},{name:"America/St_Vincent",alternativeName:"Atlantic Time",group:["America/St_Vincent"],continentCode:"NA",continentName:"North America",countryName:"Saint Vincent and the Grenadines",countryCode:"VC",mainCities:["Kingstown"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Kingstown"},{name:"America/Kralendijk",alternativeName:"Atlantic Time",group:["America/Kralendijk"],continentCode:"NA",continentName:"North America",countryName:"Bonaire, Saint Eustatius and Saba ",countryCode:"BQ",mainCities:["Kralendijk"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Kralendijk"},{name:"America/Guadeloupe",alternativeName:"Atlantic Time",group:["America/Guadeloupe"],continentCode:"NA",continentName:"North America",countryName:"Guadeloupe",countryCode:"GP",mainCities:["Les Abymes","Baie-Mahault","Le Gosier","Petit-Bourg"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Les Abymes, Baie-Mahault, Le Gosier, Petit-Bourg"},{name:"America/Marigot",alternativeName:"Atlantic Time",group:["America/Marigot"],continentCode:"NA",continentName:"North America",countryName:"Saint Martin",countryCode:"MF",mainCities:["Marigot"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Marigot"},{name:"America/Aruba",alternativeName:"Atlantic Time",group:["America/Aruba"],continentCode:"NA",continentName:"North America",countryName:"Aruba",countryCode:"AW",mainCities:["Oranjestad","Noord","Tanki Leendert","San Nicolas"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Oranjestad, Noord, Tanki Leendert, San Nicolas"},{name:"America/Lower_Princes",alternativeName:"Atlantic Time",group:["America/Lower_Princes"],continentCode:"NA",continentName:"North America",countryName:"Sint Maarten",countryCode:"SX",mainCities:["Philipsburg"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Philipsburg"},{name:"America/Tortola",alternativeName:"Atlantic Time",group:["America/Tortola"],continentCode:"NA",continentName:"North America",countryName:"British Virgin Islands",countryCode:"VG",mainCities:["Road Town"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Road Town"},{name:"America/Dominica",alternativeName:"Atlantic Time",group:["America/Dominica"],continentCode:"NA",continentName:"North America",countryName:"Dominica",countryCode:"DM",mainCities:["Roseau"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Roseau"},{name:"America/St_Thomas",alternativeName:"Atlantic Time",group:["America/St_Thomas"],continentCode:"NA",continentName:"North America",countryName:"U.S. Virgin Islands",countryCode:"VI",mainCities:["Saint Croix","Charlotte Amalie"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Saint Croix, Charlotte Amalie"},{name:"America/Grenada",alternativeName:"Atlantic Time",group:["America/Grenada"],continentCode:"NA",continentName:"North America",countryName:"Grenada",countryCode:"GD",mainCities:["Saint George's"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Saint George's"},{name:"America/Antigua",alternativeName:"Atlantic Time",group:["America/Antigua"],continentCode:"NA",continentName:"North America",countryName:"Antigua and Barbuda",countryCode:"AG",mainCities:["Saint John’s"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Saint John’s"},{name:"America/Puerto_Rico",alternativeName:"Atlantic Time",group:["America/Puerto_Rico","America/Virgin","America/Anguilla","America/Antigua","America/Aruba","America/Blanc-Sablon","America/Curacao","America/Dominica","America/Grenada","America/Guadeloupe","America/Kralendijk","America/Lower_Princes","America/Marigot","America/Montserrat","America/Port_of_Spain","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tortola"],continentCode:"NA",continentName:"North America",countryName:"Puerto Rico",countryCode:"PR",mainCities:["San Juan","Bayamón","Carolina","Ponce"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - San Juan, Bayamón, Carolina, Ponce"},{name:"America/Santo_Domingo",alternativeName:"Atlantic Time",group:["America/Santo_Domingo"],continentCode:"NA",continentName:"North America",countryName:"Dominican Republic",countryCode:"DO",mainCities:["Santo Domingo","Santiago de los Caballeros","Santo Domingo Oeste","Santo Domingo Este"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Santo Domingo, Santiago de los Caballeros, Santo Domingo Oeste, Santo Domingo Este"},{name:"America/Anguilla",alternativeName:"Atlantic Time",group:["America/Anguilla"],continentCode:"NA",continentName:"North America",countryName:"Anguilla",countryCode:"AI",mainCities:["The Valley"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - The Valley"},{name:"America/Thule",alternativeName:"Atlantic Time",group:["America/Thule"],continentCode:"NA",continentName:"North America",countryName:"Greenland",countryCode:"GL",mainCities:["Thule"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Thule"},{name:"America/Curacao",alternativeName:"Atlantic Time",group:["America/Curacao"],continentCode:"NA",continentName:"North America",countryName:"Curacao",countryCode:"CW",mainCities:["Willemstad"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Willemstad"},{name:"America/La_Paz",alternativeName:"Bolivia Time",group:["America/La_Paz"],continentCode:"SA",continentName:"South America",countryName:"Bolivia",countryCode:"BO",mainCities:["La Paz","Santa Cruz de la Sierra","Cochabamba","Sucre"],rawOffsetInMinutes:-240,abbreviation:"BOT",rawFormat:"-04:00 Bolivia Time - La Paz, Santa Cruz de la Sierra, Cochabamba, Sucre"},{name:"America/Santiago",alternativeName:"Chile Time",group:["America/Santiago","Chile/Continental"],continentCode:"SA",continentName:"South America",countryName:"Chile",countryCode:"CL",mainCities:["Santiago","Puente Alto","Antofagasta","Viña del Mar"],rawOffsetInMinutes:-240,abbreviation:"CLT",rawFormat:"-04:00 Chile Time - Santiago, Puente Alto, Antofagasta, Viña del Mar"},{name:"America/Guyana",alternativeName:"Guyana Time",group:["America/Guyana"],continentCode:"SA",continentName:"South America",countryName:"Guyana",countryCode:"GY",mainCities:["Georgetown","Linden","New Amsterdam"],rawOffsetInMinutes:-240,abbreviation:"GYT",rawFormat:"-04:00 Guyana Time - Georgetown, Linden, New Amsterdam"},{name:"America/Asuncion",alternativeName:"Paraguay Time",group:["America/Asuncion"],continentCode:"SA",continentName:"South America",countryName:"Paraguay",countryCode:"PY",mainCities:["Asunción","Ciudad del Este","San Lorenzo","Capiatá"],rawOffsetInMinutes:-240,abbreviation:"PYT",rawFormat:"-04:00 Paraguay Time - Asunción, Ciudad del Este, San Lorenzo, Capiatá"},{name:"America/Caracas",alternativeName:"Venezuela Time",group:["America/Caracas"],continentCode:"SA",continentName:"South America",countryName:"Venezuela",countryCode:"VE",mainCities:["Caracas","Maracaibo","Maracay","Valencia"],rawOffsetInMinutes:-240,abbreviation:"VET",rawFormat:"-04:00 Venezuela Time - Caracas, Maracaibo, Maracay, Valencia"},{name:"America/St_Johns",alternativeName:"Newfoundland Time",group:["America/St_Johns","Canada/Newfoundland"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["St. John's","Mount Pearl","Corner Brook","Conception Bay South"],rawOffsetInMinutes:-210,abbreviation:"NST",rawFormat:"-03:30 Newfoundland Time - St. John's, Mount Pearl, Corner Brook, Conception Bay South"},{name:"America/Argentina/Buenos_Aires",alternativeName:"Argentina Time",group:["America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Buenos_Aires","America/Catamarca","America/Argentina/ComodRivadavia","America/Cordoba","America/Rosario","America/Jujuy","America/Mendoza"],continentCode:"SA",continentName:"South America",countryName:"Argentina",countryCode:"AR",mainCities:["Buenos Aires","Córdoba","Rosario","Mar del Plata"],rawOffsetInMinutes:-180,abbreviation:"ART",rawFormat:"-03:00 Argentina Time - Buenos Aires, Córdoba, Rosario, Mar del Plata"},{name:"America/Sao_Paulo",alternativeName:"Brasilia Time",group:["America/Araguaina","America/Bahia","America/Belem","America/Fortaleza","America/Maceio","America/Recife","America/Santarem","America/Sao_Paulo","Brazil/East"],continentCode:"SA",continentName:"South America",countryName:"Brazil",countryCode:"BR",mainCities:["São Paulo","Rio de Janeiro","Belo Horizonte","Salvador"],rawOffsetInMinutes:-180,abbreviation:"BRT",rawFormat:"-03:00 Brasilia Time - São Paulo, Rio de Janeiro, Belo Horizonte, Salvador"},{name:"Antarctica/Palmer",alternativeName:"Chile Time",group:["Antarctica/Palmer","Antarctica/Rothera"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Palmer","Rothera"],rawOffsetInMinutes:-180,abbreviation:"CLT",rawFormat:"-03:00 Chile Time - Palmer, Rothera"},{name:"America/Punta_Arenas",alternativeName:"Chile Time",group:["America/Punta_Arenas"],continentCode:"SA",continentName:"South America",countryName:"Chile",countryCode:"CL",mainCities:["Punta Arenas","Puerto Natales"],rawOffsetInMinutes:-180,abbreviation:"CLT",rawFormat:"-03:00 Chile Time - Punta Arenas, Puerto Natales"},{name:"Atlantic/Stanley",alternativeName:"Falkland Islands Time",group:["Atlantic/Stanley"],continentCode:"SA",continentName:"South America",countryName:"Falkland Islands",countryCode:"FK",mainCities:["Stanley"],rawOffsetInMinutes:-180,abbreviation:"FKST",rawFormat:"-03:00 Falkland Islands Time - Stanley"},{name:"America/Cayenne",alternativeName:"French Guiana Time",group:["America/Cayenne"],continentCode:"SA",continentName:"South America",countryName:"French Guiana",countryCode:"GF",mainCities:["Cayenne","Matoury","Saint-Laurent-du-Maroni","Kourou"],rawOffsetInMinutes:-180,abbreviation:"GFT",rawFormat:"-03:00 French Guiana Time - Cayenne, Matoury, Saint-Laurent-du-Maroni, Kourou"},{name:"America/Miquelon",alternativeName:"St. Pierre & Miquelon Time",group:["America/Miquelon"],continentCode:"NA",continentName:"North America",countryName:"Saint Pierre and Miquelon",countryCode:"PM",mainCities:["Saint-Pierre"],rawOffsetInMinutes:-180,abbreviation:"PM",rawFormat:"-03:00 St. Pierre & Miquelon Time - Saint-Pierre"},{name:"America/Paramaribo",alternativeName:"Suriname Time",group:["America/Paramaribo"],continentCode:"SA",continentName:"South America",countryName:"Suriname",countryCode:"SR",mainCities:["Paramaribo","Lelydorp"],rawOffsetInMinutes:-180,abbreviation:"SRT",rawFormat:"-03:00 Suriname Time - Paramaribo, Lelydorp"},{name:"America/Montevideo",alternativeName:"Uruguay Time",group:["America/Montevideo"],continentCode:"SA",continentName:"South America",countryName:"Uruguay",countryCode:"UY",mainCities:["Montevideo","Salto","Paysandú","Las Piedras"],rawOffsetInMinutes:-180,abbreviation:"UYT",rawFormat:"-03:00 Uruguay Time - Montevideo, Salto, Paysandú, Las Piedras"},{name:"America/Scoresbysund",alternativeName:"East Greenland Time",group:["America/Scoresbysund"],continentCode:"NA",continentName:"North America",countryName:"Greenland",countryCode:"GL",mainCities:["Scoresbysund"],rawOffsetInMinutes:-120,abbreviation:"EGT",rawFormat:"-02:00 East Greenland Time - Scoresbysund"},{name:"America/Noronha",alternativeName:"Fernando de Noronha Time",group:["America/Noronha","Brazil/DeNoronha"],continentCode:"SA",continentName:"South America",countryName:"Brazil",countryCode:"BR",mainCities:["Noronha"],rawOffsetInMinutes:-120,abbreviation:"FNT",rawFormat:"-02:00 Fernando de Noronha Time - Noronha"},{name:"Atlantic/South_Georgia",alternativeName:"South Georgia Time",group:["Atlantic/South_Georgia"],continentCode:"AN",continentName:"Antarctica",countryName:"South Georgia and the South Sandwich Islands",countryCode:"GS",mainCities:["Grytviken"],rawOffsetInMinutes:-120,abbreviation:"GST",rawFormat:"-02:00 South Georgia Time - Grytviken"},{name:"America/Nuuk",alternativeName:"West Greenland Time",group:["America/Nuuk","America/Godthab"],continentCode:"NA",continentName:"North America",countryName:"Greenland",countryCode:"GL",mainCities:["Nuuk"],rawOffsetInMinutes:-120,abbreviation:"WGT",rawFormat:"-02:00 West Greenland Time - Nuuk"},{name:"Atlantic/Azores",alternativeName:"Azores Time",group:["Atlantic/Azores"],continentCode:"EU",continentName:"Europe",countryName:"Portugal",countryCode:"PT",mainCities:["Ponta Delgada"],rawOffsetInMinutes:-60,abbreviation:"AZOT",rawFormat:"-01:00 Azores Time - Ponta Delgada"},{name:"Atlantic/Cape_Verde",alternativeName:"Cape Verde Time",group:["Atlantic/Cape_Verde"],continentCode:"AF",continentName:"Africa",countryName:"Cabo Verde",countryCode:"CV",mainCities:["Praia","Mindelo","Espargos","Assomada"],rawOffsetInMinutes:-60,abbreviation:"CVT",rawFormat:"-01:00 Cape Verde Time - Praia, Mindelo, Espargos, Assomada"},{name:"Africa/Abidjan",alternativeName:"Greenwich Mean Time",group:["Africa/Abidjan","Iceland","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Nouakchott","Africa/Ouagadougou","Atlantic/Reykjavik","Atlantic/St_Helena","Africa/Timbuktu"],continentCode:"AF",continentName:"Africa",countryName:"Ivory Coast",countryCode:"CI",mainCities:["Abidjan","Abobo","Bouaké","Korhogo"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Abidjan, Abobo, Bouaké, Korhogo"},{name:"Africa/Bamako",alternativeName:"Greenwich Mean Time",group:["Africa/Bamako"],continentCode:"AF",continentName:"Africa",countryName:"Mali",countryCode:"ML",mainCities:["Bamako","Sikasso","Koutiala","Ségou"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Bamako, Sikasso, Koutiala, Ségou"},{name:"Africa/Bissau",alternativeName:"Greenwich Mean Time",group:["Africa/Bissau"],continentCode:"AF",continentName:"Africa",countryName:"Guinea-Bissau",countryCode:"GW",mainCities:["Bissau","Gabú","Bafatá"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Bissau, Gabú, Bafatá"},{name:"Africa/Conakry",alternativeName:"Greenwich Mean Time",group:["Africa/Conakry"],continentCode:"AF",continentName:"Africa",countryName:"Guinea",countryCode:"GN",mainCities:["Conakry","Camayenne","Nzérékoré","Kankan"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Conakry, Camayenne, Nzérékoré, Kankan"},{name:"Africa/Dakar",alternativeName:"Greenwich Mean Time",group:["Africa/Dakar"],continentCode:"AF",continentName:"Africa",countryName:"Senegal",countryCode:"SN",mainCities:["Dakar","Pikine","Touba","Thiès"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Dakar, Pikine, Touba, Thiès"},{name:"America/Danmarkshavn",alternativeName:"Greenwich Mean Time",group:["America/Danmarkshavn"],continentCode:"NA",continentName:"North America",countryName:"Greenland",countryCode:"GL",mainCities:["Danmarkshavn"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Danmarkshavn"},{name:"Europe/Isle_of_Man",alternativeName:"Greenwich Mean Time",group:["Europe/Isle_of_Man"],continentCode:"EU",continentName:"Europe",countryName:"Isle of Man",countryCode:"IM",mainCities:["Douglas"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Douglas"},{name:"Europe/Dublin",alternativeName:"Greenwich Mean Time",group:["Europe/Dublin","Eire"],continentCode:"EU",continentName:"Europe",countryName:"Ireland",countryCode:"IE",mainCities:["Dublin","South Dublin","Cork","Limerick"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Dublin, South Dublin, Cork, Limerick"},{name:"Africa/Freetown",alternativeName:"Greenwich Mean Time",group:["Africa/Freetown"],continentCode:"AF",continentName:"Africa",countryName:"Sierra Leone",countryCode:"SL",mainCities:["Freetown","Bo","Kenema","Koidu"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Freetown, Bo, Kenema, Koidu"},{name:"Atlantic/St_Helena",alternativeName:"Greenwich Mean Time",group:["Atlantic/St_Helena"],continentCode:"AF",continentName:"Africa",countryName:"Saint Helena",countryCode:"SH",mainCities:["Jamestown"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Jamestown"},{name:"Africa/Accra",alternativeName:"Greenwich Mean Time",group:["Africa/Accra"],continentCode:"AF",continentName:"Africa",countryName:"Ghana",countryCode:"GH",mainCities:["Kumasi","Accra","Tamale","Takoradi"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Kumasi, Accra, Tamale, Takoradi"},{name:"Africa/Lome",alternativeName:"Greenwich Mean Time",group:["Africa/Lome"],continentCode:"AF",continentName:"Africa",countryName:"Togo",countryCode:"TG",mainCities:["Lomé","Sokodé","Kara","Atakpamé"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Lomé, Sokodé, Kara, Atakpamé"},{name:"Europe/London",alternativeName:"Greenwich Mean Time",group:["Europe/London","GB","GB-Eire","Europe/Guernsey","Europe/Isle_of_Man","Europe/Jersey","Europe/Belfast"],continentCode:"EU",continentName:"Europe",countryName:"United Kingdom",countryCode:"GB",mainCities:["London","Birmingham","Liverpool","Glasgow"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - London, Birmingham, Liverpool, Glasgow"},{name:"Africa/Monrovia",alternativeName:"Greenwich Mean Time",group:["Africa/Monrovia"],continentCode:"AF",continentName:"Africa",countryName:"Liberia",countryCode:"LR",mainCities:["Monrovia","Gbarnga","Buchanan","Ganta"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Monrovia, Gbarnga, Buchanan, Ganta"},{name:"Africa/Nouakchott",alternativeName:"Greenwich Mean Time",group:["Africa/Nouakchott"],continentCode:"AF",continentName:"Africa",countryName:"Mauritania",countryCode:"MR",mainCities:["Nouakchott","Nouadhibou","Kiffa","Dar Naim"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Nouakchott, Nouadhibou, Kiffa, Dar Naim"},{name:"Africa/Ouagadougou",alternativeName:"Greenwich Mean Time",group:["Africa/Ouagadougou"],continentCode:"AF",continentName:"Africa",countryName:"Burkina Faso",countryCode:"BF",mainCities:["Ouagadougou","Bobo-Dioulasso","Koudougou","Saaba"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Ouagadougou, Bobo-Dioulasso, Koudougou, Saaba"},{name:"Atlantic/Reykjavik",alternativeName:"Greenwich Mean Time",group:["Atlantic/Reykjavik","Iceland"],continentCode:"EU",continentName:"Europe",countryName:"Iceland",countryCode:"IS",mainCities:["Reykjavík","Kópavogur","Hafnarfjörður","Reykjanesbær"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Reykjavík, Kópavogur, Hafnarfjörður, Reykjanesbær"},{name:"Europe/Jersey",alternativeName:"Greenwich Mean Time",group:["Europe/Jersey"],continentCode:"EU",continentName:"Europe",countryName:"Jersey",countryCode:"JE",mainCities:["Saint Helier"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Saint Helier"},{name:"Europe/Guernsey",alternativeName:"Greenwich Mean Time",group:["Europe/Guernsey"],continentCode:"EU",continentName:"Europe",countryName:"Guernsey",countryCode:"GG",mainCities:["Saint Peter Port"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Saint Peter Port"},{name:"Africa/Banjul",alternativeName:"Greenwich Mean Time",group:["Africa/Banjul"],continentCode:"AF",continentName:"Africa",countryName:"Gambia",countryCode:"GM",mainCities:["Serekunda","Brikama","Bununka Kunda","Sukuta"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Serekunda, Brikama, Bununka Kunda, Sukuta"},{name:"Africa/Sao_Tome",alternativeName:"Greenwich Mean Time",group:["Africa/Sao_Tome"],continentCode:"AF",continentName:"Africa",countryName:"Sao Tome and Principe",countryCode:"ST",mainCities:["São Tomé"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - São Tomé"},{name:"Antarctica/Troll",alternativeName:"Greenwich Mean Time",group:["Antarctica/Troll"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Troll"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Troll"},{name:"Africa/Casablanca",alternativeName:"Western European Time",group:["Africa/Casablanca"],continentCode:"AF",continentName:"Africa",countryName:"Morocco",countryCode:"MA",mainCities:["Casablanca","Rabat","Fes","Tangier"],rawOffsetInMinutes:0,abbreviation:"WET",rawFormat:"+00:00 Western European Time - Casablanca, Rabat, Fes, Tangier"},{name:"Africa/El_Aaiun",alternativeName:"Western European Time",group:["Africa/El_Aaiun"],continentCode:"AF",continentName:"Africa",countryName:"Western Sahara",countryCode:"EH",mainCities:["Laayoune","Dakhla","Boujdour"],rawOffsetInMinutes:0,abbreviation:"WET",rawFormat:"+00:00 Western European Time - Laayoune, Dakhla, Boujdour"},{name:"Atlantic/Canary",alternativeName:"Western European Time",group:["Atlantic/Canary"],continentCode:"EU",continentName:"Europe",countryName:"Spain",countryCode:"ES",mainCities:["Las Palmas de Gran Canaria","Santa Cruz de Tenerife","La Laguna","Telde"],rawOffsetInMinutes:0,abbreviation:"WET",rawFormat:"+00:00 Western European Time - Las Palmas de Gran Canaria, Santa Cruz de Tenerife, La Laguna, Telde"},{name:"Europe/Lisbon",alternativeName:"Western European Time",group:["Atlantic/Madeira","Europe/Lisbon","Portugal"],continentCode:"EU",continentName:"Europe",countryName:"Portugal",countryCode:"PT",mainCities:["Lisbon","Porto","Amadora","Braga"],rawOffsetInMinutes:0,abbreviation:"WET",rawFormat:"+00:00 Western European Time - Lisbon, Porto, Amadora, Braga"},{name:"Atlantic/Faroe",alternativeName:"Western European Time",group:["Atlantic/Faroe","Atlantic/Faeroe"],continentCode:"EU",continentName:"Europe",countryName:"Faroe Islands",countryCode:"FO",mainCities:["Tórshavn"],rawOffsetInMinutes:0,abbreviation:"WET",rawFormat:"+00:00 Western European Time - Tórshavn"},{name:"Africa/Windhoek",alternativeName:"Central Africa Time",group:["Africa/Windhoek"],continentCode:"AF",continentName:"Africa",countryName:"Namibia",countryCode:"NA",mainCities:["Windhoek","Rundu","Walvis Bay","Swakopmund"],rawOffsetInMinutes:60,abbreviation:"CAT",rawFormat:"+01:00 Central Africa Time - Windhoek, Rundu, Walvis Bay, Swakopmund"},{name:"Africa/Algiers",alternativeName:"Central European Time",group:["Africa/Algiers"],continentCode:"AF",continentName:"Africa",countryName:"Algeria",countryCode:"DZ",mainCities:["Algiers","Oran","Constantine","Annaba"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Algiers, Oran, Constantine, Annaba"},{name:"Europe/Amsterdam",alternativeName:"Central European Time",group:["Europe/Amsterdam"],continentCode:"EU",continentName:"Europe",countryName:"The Netherlands",countryCode:"NL",mainCities:["Amsterdam","Rotterdam","The Hague","Utrecht"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Amsterdam, Rotterdam, The Hague, Utrecht"},{name:"Europe/Andorra",alternativeName:"Central European Time",group:["Europe/Andorra"],continentCode:"EU",continentName:"Europe",countryName:"Andorra",countryCode:"AD",mainCities:["Andorra la Vella","les Escaldes"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Andorra la Vella, les Escaldes"},{name:"Europe/Belgrade",alternativeName:"Central European Time",group:["Europe/Belgrade","Europe/Ljubljana","Europe/Podgorica","Europe/Sarajevo","Europe/Skopje","Europe/Zagreb"],continentCode:"EU",continentName:"Europe",countryName:"Serbia",countryCode:"RS",mainCities:["Belgrade","Niš","Novi Sad","Zemun"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Belgrade, Niš, Novi Sad, Zemun"},{name:"Europe/Berlin",alternativeName:"Central European Time",group:["Europe/Berlin","Europe/Busingen","Arctic/Longyearbyen","Europe/Copenhagen","Europe/Oslo","Europe/Stockholm","Atlantic/Jan_Mayen"],continentCode:"EU",continentName:"Europe",countryName:"Germany",countryCode:"DE",mainCities:["Berlin","Hamburg","Munich","Köln"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Berlin, Hamburg, Munich, Köln"},{name:"Europe/Bratislava",alternativeName:"Central European Time",group:["Europe/Bratislava"],continentCode:"EU",continentName:"Europe",countryName:"Slovakia",countryCode:"SK",mainCities:["Bratislava","Košice","Nitra","Prešov"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Bratislava, Košice, Nitra, Prešov"},{name:"Europe/Brussels",alternativeName:"Central European Time",group:["Europe/Brussels","Europe/Amsterdam","Europe/Luxembourg"],continentCode:"EU",continentName:"Europe",countryName:"Belgium",countryCode:"BE",mainCities:["Brussels","Antwerpen","Gent","Charleroi"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Brussels, Antwerpen, Gent, Charleroi"},{name:"Europe/Budapest",alternativeName:"Central European Time",group:["Europe/Budapest"],continentCode:"EU",continentName:"Europe",countryName:"Hungary",countryCode:"HU",mainCities:["Budapest","Debrecen","Szeged","Miskolc"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Budapest, Debrecen, Szeged, Miskolc"},{name:"Europe/Copenhagen",alternativeName:"Central European Time",group:["Europe/Copenhagen"],continentCode:"EU",continentName:"Europe",countryName:"Denmark",countryCode:"DK",mainCities:["Copenhagen","Århus","Odense","Aalborg"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Copenhagen, Århus, Odense, Aalborg"},{name:"Europe/Gibraltar",alternativeName:"Central European Time",group:["Europe/Gibraltar"],continentCode:"EU",continentName:"Europe",countryName:"Gibraltar",countryCode:"GI",mainCities:["Gibraltar"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Gibraltar"},{name:"Europe/Ljubljana",alternativeName:"Central European Time",group:["Europe/Ljubljana"],continentCode:"EU",continentName:"Europe",countryName:"Slovenia",countryCode:"SI",mainCities:["Ljubljana","Maribor","Kranj","Celje"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Ljubljana, Maribor, Kranj, Celje"},{name:"Arctic/Longyearbyen",alternativeName:"Central European Time",group:["Arctic/Longyearbyen"],continentCode:"EU",continentName:"Europe",countryName:"Svalbard and Jan Mayen",countryCode:"SJ",mainCities:["Longyearbyen"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Longyearbyen"},{name:"Europe/Luxembourg",alternativeName:"Central European Time",group:["Europe/Luxembourg"],continentCode:"EU",continentName:"Europe",countryName:"Luxembourg",countryCode:"LU",mainCities:["Luxembourg","Esch-sur-Alzette","Dudelange"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Luxembourg, Esch-sur-Alzette, Dudelange"},{name:"Europe/Madrid",alternativeName:"Central European Time",group:["Africa/Ceuta","Europe/Madrid"],continentCode:"EU",continentName:"Europe",countryName:"Spain",countryCode:"ES",mainCities:["Madrid","Barcelona","Valencia","Sevilla"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Madrid, Barcelona, Valencia, Sevilla"},{name:"Europe/Monaco",alternativeName:"Central European Time",group:["Europe/Monaco"],continentCode:"EU",continentName:"Europe",countryName:"Monaco",countryCode:"MC",mainCities:["Monaco","Monte-Carlo"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Monaco, Monte-Carlo"},{name:"Europe/Oslo",alternativeName:"Central European Time",group:["Europe/Oslo","Atlantic/Jan_Mayen"],continentCode:"EU",continentName:"Europe",countryName:"Norway",countryCode:"NO",mainCities:["Oslo","Bergen","Trondheim","Stavanger"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Oslo, Bergen, Trondheim, Stavanger"},{name:"Europe/Paris",alternativeName:"Central European Time",group:["Europe/Paris","Europe/Monaco"],continentCode:"EU",continentName:"Europe",countryName:"France",countryCode:"FR",mainCities:["Paris","Marseille","Lyon","Toulouse"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Paris, Marseille, Lyon, Toulouse"},{name:"Europe/Podgorica",alternativeName:"Central European Time",group:["Europe/Podgorica"],continentCode:"EU",continentName:"Europe",countryName:"Montenegro",countryCode:"ME",mainCities:["Podgorica","Nikšić","Herceg Novi","Pljevlja"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Podgorica, Nikšić, Herceg Novi, Pljevlja"},{name:"Europe/Prague",alternativeName:"Central European Time",group:["Europe/Prague","Europe/Bratislava"],continentCode:"EU",continentName:"Europe",countryName:"Czechia",countryCode:"CZ",mainCities:["Prague","Brno","Ostrava","Pilsen"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Prague, Brno, Ostrava, Pilsen"},{name:"Europe/Rome",alternativeName:"Central European Time",group:["Europe/Rome","Europe/San_Marino","Europe/Vatican"],continentCode:"EU",continentName:"Europe",countryName:"Italy",countryCode:"IT",mainCities:["Rome","Milan","Naples","Turin"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Rome, Milan, Naples, Turin"},{name:"Europe/San_Marino",alternativeName:"Central European Time",group:["Europe/San_Marino"],continentCode:"EU",continentName:"Europe",countryName:"San Marino",countryCode:"SM",mainCities:["San Marino"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - San Marino"},{name:"Europe/Malta",alternativeName:"Central European Time",group:["Europe/Malta"],continentCode:"EU",continentName:"Europe",countryName:"Malta",countryCode:"MT",mainCities:["San Pawl il-Baħar","Birkirkara","Mosta","Sliema"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - San Pawl il-Baħar, Birkirkara, Mosta, Sliema"},{name:"Europe/Sarajevo",alternativeName:"Central European Time",group:["Europe/Sarajevo"],continentCode:"EU",continentName:"Europe",countryName:"Bosnia and Herzegovina",countryCode:"BA",mainCities:["Sarajevo","Banja Luka","Zenica","Tuzla"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Sarajevo, Banja Luka, Zenica, Tuzla"},{name:"Europe/Skopje",alternativeName:"Central European Time",group:["Europe/Skopje"],continentCode:"EU",continentName:"Europe",countryName:"North Macedonia",countryCode:"MK",mainCities:["Skopje","Kumanovo","Prilep","Bitola"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Skopje, Kumanovo, Prilep, Bitola"},{name:"Europe/Stockholm",alternativeName:"Central European Time",group:["Europe/Stockholm"],continentCode:"EU",continentName:"Europe",countryName:"Sweden",countryCode:"SE",mainCities:["Stockholm","Göteborg","Malmö","Uppsala"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Stockholm, Göteborg, Malmö, Uppsala"},{name:"Europe/Tirane",alternativeName:"Central European Time",group:["Europe/Tirane"],continentCode:"EU",continentName:"Europe",countryName:"Albania",countryCode:"AL",mainCities:["Tirana","Durrës","Elbasan","Vlorë"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Tirana, Durrës, Elbasan, Vlorë"},{name:"Africa/Tunis",alternativeName:"Central European Time",group:["Africa/Tunis"],continentCode:"AF",continentName:"Africa",countryName:"Tunisia",countryCode:"TN",mainCities:["Tunis","Sfax","Sousse","Kairouan"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Tunis, Sfax, Sousse, Kairouan"},{name:"Europe/Vaduz",alternativeName:"Central European Time",group:["Europe/Vaduz"],continentCode:"EU",continentName:"Europe",countryName:"Liechtenstein",countryCode:"LI",mainCities:["Vaduz"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Vaduz"},{name:"Europe/Vatican",alternativeName:"Central European Time",group:["Europe/Vatican"],continentCode:"EU",continentName:"Europe",countryName:"Vatican",countryCode:"VA",mainCities:["Vatican City"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Vatican City"},{name:"Europe/Vienna",alternativeName:"Central European Time",group:["Europe/Vienna"],continentCode:"EU",continentName:"Europe",countryName:"Austria",countryCode:"AT",mainCities:["Vienna","Graz","Linz","Favoriten"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Vienna, Graz, Linz, Favoriten"},{name:"Europe/Warsaw",alternativeName:"Central European Time",group:["Europe/Warsaw","Poland"],continentCode:"EU",continentName:"Europe",countryName:"Poland",countryCode:"PL",mainCities:["Warsaw","Łódź","Kraków","Wrocław"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Warsaw, Łódź, Kraków, Wrocław"},{name:"Europe/Zagreb",alternativeName:"Central European Time",group:["Europe/Zagreb"],continentCode:"EU",continentName:"Europe",countryName:"Croatia",countryCode:"HR",mainCities:["Zagreb","Split","Rijeka","Osijek"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Zagreb, Split, Rijeka, Osijek"},{name:"Europe/Zurich",alternativeName:"Central European Time",group:["Europe/Zurich","Europe/Busingen","Europe/Vaduz"],continentCode:"EU",continentName:"Europe",countryName:"Switzerland",countryCode:"CH",mainCities:["Zürich","Genève","Basel","Lausanne"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Zürich, Genève, Basel, Lausanne"},{name:"Africa/Bangui",alternativeName:"West Africa Time",group:["Africa/Bangui"],continentCode:"AF",continentName:"Africa",countryName:"Central African Republic",countryCode:"CF",mainCities:["Bangui","Bimbo","Bégoua","Carnot"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Bangui, Bimbo, Bégoua, Carnot"},{name:"Africa/Malabo",alternativeName:"West Africa Time",group:["Africa/Malabo"],continentCode:"AF",continentName:"Africa",countryName:"Equatorial Guinea",countryCode:"GQ",mainCities:["Bata","Malabo","Ebebiyin"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Bata, Malabo, Ebebiyin"},{name:"Africa/Brazzaville",alternativeName:"West Africa Time",group:["Africa/Brazzaville"],continentCode:"AF",continentName:"Africa",countryName:"Republic of the Congo",countryCode:"CG",mainCities:["Brazzaville","Pointe-Noire","Dolisie","Nkayi"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Brazzaville, Pointe-Noire, Dolisie, Nkayi"},{name:"Africa/Porto-Novo",alternativeName:"West Africa Time",group:["Africa/Porto-Novo"],continentCode:"AF",continentName:"Africa",countryName:"Benin",countryCode:"BJ",mainCities:["Cotonou","Abomey-Calavi","Porto-Novo","Parakou"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Cotonou, Abomey-Calavi, Porto-Novo, Parakou"},{name:"Africa/Douala",alternativeName:"West Africa Time",group:["Africa/Douala"],continentCode:"AF",continentName:"Africa",countryName:"Cameroon",countryCode:"CM",mainCities:["Douala","Yaoundé","Bamenda","Bafoussam"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Douala, Yaoundé, Bamenda, Bafoussam"},{name:"Africa/Kinshasa",alternativeName:"West Africa Time",group:["Africa/Kinshasa"],continentCode:"AF",continentName:"Africa",countryName:"Democratic Republic of the Congo",countryCode:"CD",mainCities:["Kinshasa","Kikwit","Masina","Mbandaka"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Kinshasa, Kikwit, Masina, Mbandaka"},{name:"Africa/Lagos",alternativeName:"West Africa Time",group:["Africa/Lagos","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Kinshasa","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Niamey","Africa/Porto-Novo"],continentCode:"AF",continentName:"Africa",countryName:"Nigeria",countryCode:"NG",mainCities:["Lagos","Kano","Ibadan","Abuja"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Lagos, Kano, Ibadan, Abuja"},{name:"Africa/Libreville",alternativeName:"West Africa Time",group:["Africa/Libreville"],continentCode:"AF",continentName:"Africa",countryName:"Gabon",countryCode:"GA",mainCities:["Libreville","Port-Gentil","Franceville","Owendo"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Libreville, Port-Gentil, Franceville, Owendo"},{name:"Africa/Luanda",alternativeName:"West Africa Time",group:["Africa/Luanda"],continentCode:"AF",continentName:"Africa",countryName:"Angola",countryCode:"AO",mainCities:["Luanda","Lubango","Huambo","Benguela"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Luanda, Lubango, Huambo, Benguela"},{name:"Africa/Ndjamena",alternativeName:"West Africa Time",group:["Africa/Ndjamena"],continentCode:"AF",continentName:"Africa",countryName:"Chad",countryCode:"TD",mainCities:["N'Djamena","Moundou","Abéché","Sarh"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - N'Djamena, Moundou, Abéché, Sarh"},{name:"Africa/Niamey",alternativeName:"West Africa Time",group:["Africa/Niamey"],continentCode:"AF",continentName:"Africa",countryName:"Niger",countryCode:"NE",mainCities:["Niamey","Maradi","Zinder","Tahoua"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Niamey, Maradi, Zinder, Tahoua"},{name:"Africa/Bujumbura",alternativeName:"Central Africa Time",group:["Africa/Bujumbura"],continentCode:"AF",continentName:"Africa",countryName:"Burundi",countryCode:"BI",mainCities:["Bujumbura","Gitega","Ngozi","Rumonge"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Bujumbura, Gitega, Ngozi, Rumonge"},{name:"Africa/Gaborone",alternativeName:"Central Africa Time",group:["Africa/Gaborone"],continentCode:"AF",continentName:"Africa",countryName:"Botswana",countryCode:"BW",mainCities:["Gaborone","Francistown","Mogoditshane","Maun"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Gaborone, Francistown, Mogoditshane, Maun"},{name:"Africa/Harare",alternativeName:"Central Africa Time",group:["Africa/Harare"],continentCode:"AF",continentName:"Africa",countryName:"Zimbabwe",countryCode:"ZW",mainCities:["Harare","Bulawayo","Chitungwiza","Mutare"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Harare, Bulawayo, Chitungwiza, Mutare"},{name:"Africa/Juba",alternativeName:"Central Africa Time",group:["Africa/Juba"],continentCode:"AF",continentName:"Africa",countryName:"South Sudan",countryCode:"SS",mainCities:["Juba","Winejok","Yei","Malakal"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Juba, Winejok, Yei, Malakal"},{name:"Africa/Khartoum",alternativeName:"Central Africa Time",group:["Africa/Khartoum"],continentCode:"AF",continentName:"Africa",countryName:"Sudan",countryCode:"SD",mainCities:["Khartoum","Omdurman","Nyala","Port Sudan"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Khartoum, Omdurman, Nyala, Port Sudan"},{name:"Africa/Kigali",alternativeName:"Central Africa Time",group:["Africa/Kigali"],continentCode:"AF",continentName:"Africa",countryName:"Rwanda",countryCode:"RW",mainCities:["Kigali","Gisenyi","Butare","Gitarama"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Kigali, Gisenyi, Butare, Gitarama"},{name:"Africa/Blantyre",alternativeName:"Central Africa Time",group:["Africa/Blantyre"],continentCode:"AF",continentName:"Africa",countryName:"Malawi",countryCode:"MW",mainCities:["Lilongwe","Blantyre","Mzuzu","Zomba"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Lilongwe, Blantyre, Mzuzu, Zomba"},{name:"Africa/Lubumbashi",alternativeName:"Central Africa Time",group:["Africa/Lubumbashi"],continentCode:"AF",continentName:"Africa",countryName:"Democratic Republic of the Congo",countryCode:"CD",mainCities:["Lubumbashi","Mbuji-Mayi","Kananga","Kisangani"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Lubumbashi, Mbuji-Mayi, Kananga, Kisangani"},{name:"Africa/Lusaka",alternativeName:"Central Africa Time",group:["Africa/Lusaka"],continentCode:"AF",continentName:"Africa",countryName:"Zambia",countryCode:"ZM",mainCities:["Lusaka","Ndola","Kitwe","Chipata"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Lusaka, Ndola, Kitwe, Chipata"},{name:"Africa/Maputo",alternativeName:"Central Africa Time",group:["Africa/Maputo","Africa/Blantyre","Africa/Bujumbura","Africa/Gaborone","Africa/Harare","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka"],continentCode:"AF",continentName:"Africa",countryName:"Mozambique",countryCode:"MZ",mainCities:["Maputo","Matola","Nampula","Beira"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Maputo, Matola, Nampula, Beira"},{name:"Europe/Athens",alternativeName:"Eastern European Time",group:["Europe/Athens"],continentCode:"EU",continentName:"Europe",countryName:"Greece",countryCode:"GR",mainCities:["Athens","Thessaloníki","Pátra","Piraeus"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Athens, Thessaloníki, Pátra, Piraeus"},{name:"Asia/Beirut",alternativeName:"Eastern European Time",group:["Asia/Beirut"],continentCode:"AS",continentName:"Asia",countryName:"Lebanon",countryCode:"LB",mainCities:["Beirut","Ra’s Bayrūt","Tripoli","Sidon"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Beirut, Ra’s Bayrūt, Tripoli, Sidon"},{name:"Europe/Bucharest",alternativeName:"Eastern European Time",group:["Europe/Bucharest"],continentCode:"EU",continentName:"Europe",countryName:"Romania",countryCode:"RO",mainCities:["Bucharest","Sector 3","Iaşi","Sector 6"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Bucharest, Sector 3, Iaşi, Sector 6"},{name:"Africa/Cairo",alternativeName:"Eastern European Time",group:["Africa/Cairo","Egypt"],continentCode:"AF",continentName:"Africa",countryName:"Egypt",countryCode:"EG",mainCities:["Cairo","Alexandria","Giza","Shubrā al Khaymah"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Cairo, Alexandria, Giza, Shubrā al Khaymah"},{name:"Europe/Chisinau",alternativeName:"Eastern European Time",group:["Europe/Chisinau","Europe/Tiraspol"],continentCode:"EU",continentName:"Europe",countryName:"Moldova",countryCode:"MD",mainCities:["Chisinau","Tiraspol","Bălţi","Bender"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Chisinau, Tiraspol, Bălţi, Bender"},{name:"Asia/Hebron",alternativeName:"Eastern European Time",group:["Asia/Gaza","Asia/Hebron"],continentCode:"AS",continentName:"Asia",countryName:"Palestinian Territory",countryCode:"PS",mainCities:["East Jerusalem","Gaza","Khān Yūnis","Jabālyā"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - East Jerusalem, Gaza, Khān Yūnis, Jabālyā"},{name:"Europe/Helsinki",alternativeName:"Eastern European Time",group:["Europe/Helsinki","Europe/Mariehamn"],continentCode:"EU",continentName:"Europe",countryName:"Finland",countryCode:"FI",mainCities:["Helsinki","Espoo","Tampere","Oulu"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Helsinki, Espoo, Tampere, Oulu"},{name:"Europe/Kaliningrad",alternativeName:"Eastern European Time",group:["Europe/Kaliningrad"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Kaliningrad","Chernyakhovsk","Sovetsk","Baltiysk"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Kaliningrad, Chernyakhovsk, Sovetsk, Baltiysk"},{name:"Europe/Kyiv",alternativeName:"Eastern European Time",group:["Europe/Kyiv","Europe/Uzhgorod","Europe/Zaporozhye","Europe/Kiev"],continentCode:"EU",continentName:"Europe",countryName:"Ukraine",countryCode:"UA",mainCities:["Kyiv","Kharkiv","Odesa","Dnipro"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Kyiv, Kharkiv, Odesa, Dnipro"},{name:"Europe/Mariehamn",alternativeName:"Eastern European Time",group:["Europe/Mariehamn"],continentCode:"EU",continentName:"Europe",countryName:"Aland Islands",countryCode:"AX",mainCities:["Mariehamn"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Mariehamn"},{name:"Asia/Nicosia",alternativeName:"Eastern European Time",group:["Asia/Famagusta","Asia/Nicosia","Europe/Nicosia"],continentCode:"EU",continentName:"Europe",countryName:"Cyprus",countryCode:"CY",mainCities:["Nicosia","Limassol","Larnaca","Stróvolos"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Nicosia, Limassol, Larnaca, Stróvolos"},{name:"Europe/Riga",alternativeName:"Eastern European Time",group:["Europe/Riga"],continentCode:"EU",continentName:"Europe",countryName:"Latvia",countryCode:"LV",mainCities:["Riga","Daugavpils","Liepāja","Jelgava"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Riga, Daugavpils, Liepāja, Jelgava"},{name:"Europe/Sofia",alternativeName:"Eastern European Time",group:["Europe/Sofia"],continentCode:"EU",continentName:"Europe",countryName:"Bulgaria",countryCode:"BG",mainCities:["Sofia","Plovdiv","Varna","Burgas"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Sofia, Plovdiv, Varna, Burgas"},{name:"Europe/Tallinn",alternativeName:"Eastern European Time",group:["Europe/Tallinn"],continentCode:"EU",continentName:"Europe",countryName:"Estonia",countryCode:"EE",mainCities:["Tallinn","Tartu","Narva","Pärnu"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Tallinn, Tartu, Narva, Pärnu"},{name:"Africa/Tripoli",alternativeName:"Eastern European Time",group:["Africa/Tripoli","Libya"],continentCode:"AF",continentName:"Africa",countryName:"Libya",countryCode:"LY",mainCities:["Tripoli","Benghazi","Misratah","Zliten"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Tripoli, Benghazi, Misratah, Zliten"},{name:"Europe/Vilnius",alternativeName:"Eastern European Time",group:["Europe/Vilnius"],continentCode:"EU",continentName:"Europe",countryName:"Lithuania",countryCode:"LT",mainCities:["Vilnius","Kaunas","Klaipėda","Šiauliai"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Vilnius, Kaunas, Klaipėda, Šiauliai"},{name:"Asia/Jerusalem",alternativeName:"Israel Time",group:["Asia/Jerusalem","Israel","Asia/Tel_Aviv"],continentCode:"AS",continentName:"Asia",countryName:"Israel",countryCode:"IL",mainCities:["Jerusalem","Tel Aviv","West Jerusalem","Haifa"],rawOffsetInMinutes:120,abbreviation:"IST",rawFormat:"+02:00 Israel Time - Jerusalem, Tel Aviv, West Jerusalem, Haifa"},{name:"Africa/Johannesburg",alternativeName:"South Africa Time",group:["Africa/Johannesburg","Africa/Maseru","Africa/Mbabane"],continentCode:"AF",continentName:"Africa",countryName:"South Africa",countryCode:"ZA",mainCities:["Johannesburg","Cape Town","Durban","Soweto"],rawOffsetInMinutes:120,abbreviation:"SAST",rawFormat:"+02:00 South Africa Time - Johannesburg, Cape Town, Durban, Soweto"},{name:"Africa/Mbabane",alternativeName:"South Africa Time",group:["Africa/Mbabane"],continentCode:"AF",continentName:"Africa",countryName:"Eswatini",countryCode:"SZ",mainCities:["Manzini","Mbabane","Lobamba"],rawOffsetInMinutes:120,abbreviation:"SAST",rawFormat:"+02:00 South Africa Time - Manzini, Mbabane, Lobamba"},{name:"Africa/Maseru",alternativeName:"South Africa Time",group:["Africa/Maseru"],continentCode:"AF",continentName:"Africa",countryName:"Lesotho",countryCode:"LS",mainCities:["Maseru","Maputsoe","Mohale's Hoek","Mafeteng"],rawOffsetInMinutes:120,abbreviation:"SAST",rawFormat:"+02:00 South Africa Time - Maseru, Maputsoe, Mohale's Hoek, Mafeteng"},{name:"Asia/Kuwait",alternativeName:"Arabian Time",group:["Asia/Kuwait"],continentCode:"AS",continentName:"Asia",countryName:"Kuwait",countryCode:"KW",mainCities:["Al Aḩmadī","Ḩawallī","As Sālimīyah","Şabāḩ as Sālim"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Al Aḩmadī, Ḩawallī, As Sālimīyah, Şabāḩ as Sālim"},{name:"Asia/Bahrain",alternativeName:"Arabian Time",group:["Asia/Bahrain"],continentCode:"AS",continentName:"Asia",countryName:"Bahrain",countryCode:"BH",mainCities:["Ar Rifā‘","Manama","Al Muharraq","Dār Kulayb"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Ar Rifā‘, Manama, Al Muharraq, Dār Kulayb"},{name:"Asia/Baghdad",alternativeName:"Arabian Time",group:["Asia/Baghdad"],continentCode:"AS",continentName:"Asia",countryName:"Iraq",countryCode:"IQ",mainCities:["Baghdad","Al Mawşil al Jadīdah","Al Başrah al Qadīmah","Mosul"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Baghdad, Al Mawşil al Jadīdah, Al Başrah al Qadīmah, Mosul"},{name:"Asia/Qatar",alternativeName:"Arabian Time",group:["Asia/Qatar","Asia/Bahrain"],continentCode:"AS",continentName:"Asia",countryName:"Qatar",countryCode:"QA",mainCities:["Doha","Ar Rayyān","Al Maţār al ‘Atīq","Al Manşūrah"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Doha, Ar Rayyān, Al Maţār al ‘Atīq, Al Manşūrah"},{name:"Asia/Riyadh",alternativeName:"Arabian Time",group:["Asia/Riyadh","Antarctica/Syowa","Asia/Aden","Asia/Kuwait"],continentCode:"AS",continentName:"Asia",countryName:"Saudi Arabia",countryCode:"SA",mainCities:["Jeddah","Riyadh","Mecca","Medina"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Jeddah, Riyadh, Mecca, Medina"},{name:"Asia/Aden",alternativeName:"Arabian Time",group:["Asia/Aden"],continentCode:"AS",continentName:"Asia",countryName:"Yemen",countryCode:"YE",mainCities:["Sanaa","Aden","Al Ḩudaydah","Taiz"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Sanaa, Aden, Al Ḩudaydah, Taiz"},{name:"Asia/Amman",alternativeName:"Asia/Amman",group:["Asia/Amman"],continentCode:"AS",continentName:"Asia",countryName:"Jordan",countryCode:"JO",mainCities:["Amman","Zarqa","Irbid","Russeifa"],rawOffsetInMinutes:180,abbreviation:"GMT+3",rawFormat:"+03:00 Asia/Amman - Amman, Zarqa, Irbid, Russeifa"},{name:"Asia/Damascus",alternativeName:"Asia/Damascus",group:["Asia/Damascus"],continentCode:"AS",continentName:"Asia",countryName:"Syria",countryCode:"SY",mainCities:["Aleppo","Damascus","Homs","Latakia"],rawOffsetInMinutes:180,abbreviation:"GMT+3",rawFormat:"+03:00 Asia/Damascus - Aleppo, Damascus, Homs, Latakia"},{name:"Africa/Addis_Ababa",alternativeName:"East Africa Time",group:["Africa/Addis_Ababa"],continentCode:"AF",continentName:"Africa",countryName:"Ethiopia",countryCode:"ET",mainCities:["Addis Ababa","Jijiga","Gonder","Mek'ele"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Addis Ababa, Jijiga, Gonder, Mek'ele"},{name:"Indian/Antananarivo",alternativeName:"East Africa Time",group:["Indian/Antananarivo"],continentCode:"AF",continentName:"Africa",countryName:"Madagascar",countryCode:"MG",mainCities:["Antananarivo","Toamasina","Antsirabe","Mahajanga"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Antananarivo, Toamasina, Antsirabe, Mahajanga"},{name:"Africa/Asmara",alternativeName:"East Africa Time",group:["Africa/Asmara"],continentCode:"AF",continentName:"Africa",countryName:"Eritrea",countryCode:"ER",mainCities:["Asmara","Keren","Himora","Massawa"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Asmara, Keren, Himora, Massawa"},{name:"Africa/Dar_es_Salaam",alternativeName:"East Africa Time",group:["Africa/Dar_es_Salaam"],continentCode:"AF",continentName:"Africa",countryName:"Tanzania",countryCode:"TZ",mainCities:["Dar es Salaam","Mwanza","Arusha","Mbeya"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Dar es Salaam, Mwanza, Arusha, Mbeya"},{name:"Africa/Djibouti",alternativeName:"East Africa Time",group:["Africa/Djibouti"],continentCode:"AF",continentName:"Africa",countryName:"Djibouti",countryCode:"DJ",mainCities:["Djibouti","Ali Sabih","Dikhil","Tadjoura"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Djibouti, Ali Sabih, Dikhil, Tadjoura"},{name:"Africa/Kampala",alternativeName:"East Africa Time",group:["Africa/Kampala"],continentCode:"AF",continentName:"Africa",countryName:"Uganda",countryCode:"UG",mainCities:["Kampala","Gulu","Lira","Mbarara"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Kampala, Gulu, Lira, Mbarara"},{name:"Indian/Mayotte",alternativeName:"East Africa Time",group:["Indian/Mayotte"],continentCode:"AF",continentName:"Africa",countryName:"Mayotte",countryCode:"YT",mainCities:["Mamoudzou","Koungou","Labattoir","Kaouéni"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Mamoudzou, Koungou, Labattoir, Kaouéni"},{name:"Africa/Mogadishu",alternativeName:"East Africa Time",group:["Africa/Mogadishu"],continentCode:"AF",continentName:"Africa",countryName:"Somalia",countryCode:"SO",mainCities:["Mogadishu","Borama","Hargeysa","Berbera"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Mogadishu, Borama, Hargeysa, Berbera"},{name:"Indian/Comoro",alternativeName:"East Africa Time",group:["Indian/Comoro"],continentCode:"AF",continentName:"Africa",countryName:"Comoros",countryCode:"KM",mainCities:["Moroni","Moutsamoudou","Fomboni"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Moroni, Moutsamoudou, Fomboni"},{name:"Africa/Nairobi",alternativeName:"East Africa Time",group:["Africa/Nairobi","Africa/Addis_Ababa","Africa/Asmara","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Kampala","Africa/Mogadishu","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte","Africa/Asmera"],continentCode:"AF",continentName:"Africa",countryName:"Kenya",countryCode:"KE",mainCities:["Nairobi","Kakamega","Mombasa","Nakuru"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Nairobi, Kakamega, Mombasa, Nakuru"},{name:"Europe/Minsk",alternativeName:"Moscow Time",group:["Europe/Minsk"],continentCode:"EU",continentName:"Europe",countryName:"Belarus",countryCode:"BY",mainCities:["Minsk","Homyel'","Hrodna","Mahilyow"],rawOffsetInMinutes:180,abbreviation:"MSK",rawFormat:"+03:00 Moscow Time - Minsk, Homyel', Hrodna, Mahilyow"},{name:"Europe/Moscow",alternativeName:"Moscow Time",group:["Europe/Kirov","Europe/Moscow","Europe/Volgograd","W-SU"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Moscow","Saint Petersburg","Nizhniy Novgorod","Kazan"],rawOffsetInMinutes:180,abbreviation:"MSK",rawFormat:"+03:00 Moscow Time - Moscow, Saint Petersburg, Nizhniy Novgorod, Kazan"},{name:"Europe/Simferopol",alternativeName:"Moscow Time",group:["Europe/Simferopol"],continentCode:"EU",continentName:"Europe",countryName:"Ukraine",countryCode:"UA",mainCities:["Sevastopol","Simferopol","Kerch","Yevpatoriya"],rawOffsetInMinutes:180,abbreviation:"MSK",rawFormat:"+03:00 Moscow Time - Sevastopol, Simferopol, Kerch, Yevpatoriya"},{name:"Antarctica/Syowa",alternativeName:"Syowa Time",group:["Antarctica/Syowa"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Syowa"],rawOffsetInMinutes:180,abbreviation:"SYOT",rawFormat:"+03:00 Syowa Time - Syowa"},{name:"Europe/Istanbul",alternativeName:"Turkey Time",group:["Europe/Istanbul","Turkey","Asia/Istanbul"],continentCode:"AS",continentName:"Asia",countryName:"Turkey",countryCode:"TR",mainCities:["Istanbul","Ankara","Bursa","İzmir"],rawOffsetInMinutes:180,abbreviation:"TRT",rawFormat:"+03:00 Turkey Time - Istanbul, Ankara, Bursa, İzmir"},{name:"Asia/Tehran",alternativeName:"Iran Time",group:["Asia/Tehran","Iran"],continentCode:"AS",continentName:"Asia",countryName:"Iran",countryCode:"IR",mainCities:["Tehran","Mashhad","Isfahan","Karaj"],rawOffsetInMinutes:210,abbreviation:"IRST",rawFormat:"+03:30 Iran Time - Tehran, Mashhad, Isfahan, Karaj"},{name:"Asia/Yerevan",alternativeName:"Armenia Time",group:["Asia/Yerevan"],continentCode:"AS",continentName:"Asia",countryName:"Armenia",countryCode:"AM",mainCities:["Yerevan","Gyumri","Vanadzor","Vagharshapat"],rawOffsetInMinutes:240,abbreviation:"AMT",rawFormat:"+04:00 Armenia Time - Yerevan, Gyumri, Vanadzor, Vagharshapat"},{name:"Asia/Baku",alternativeName:"Azerbaijan Time",group:["Asia/Baku"],continentCode:"AS",continentName:"Asia",countryName:"Azerbaijan",countryCode:"AZ",mainCities:["Baku","Sumqayıt","Ganja","Lankaran"],rawOffsetInMinutes:240,abbreviation:"AZT",rawFormat:"+04:00 Azerbaijan Time - Baku, Sumqayıt, Ganja, Lankaran"},{name:"Asia/Tbilisi",alternativeName:"Georgia Time",group:["Asia/Tbilisi"],continentCode:"AS",continentName:"Asia",countryName:"Georgia",countryCode:"GE",mainCities:["Tbilisi","Batumi","Kutaisi","Rustavi"],rawOffsetInMinutes:240,abbreviation:"GET",rawFormat:"+04:00 Georgia Time - Tbilisi, Batumi, Kutaisi, Rustavi"},{name:"Asia/Dubai",alternativeName:"Gulf Time",group:["Asia/Dubai","Asia/Muscat","Indian/Mahe","Indian/Reunion"],continentCode:"AS",continentName:"Asia",countryName:"United Arab Emirates",countryCode:"AE",mainCities:["Dubai","Abu Dhabi","Sharjah","Al Ain City"],rawOffsetInMinutes:240,abbreviation:"GST",rawFormat:"+04:00 Gulf Time - Dubai, Abu Dhabi, Sharjah, Al Ain City"},{name:"Asia/Muscat",alternativeName:"Gulf Time",group:["Asia/Muscat"],continentCode:"AS",continentName:"Asia",countryName:"Oman",countryCode:"OM",mainCities:["Muscat","Seeb","Bawshar","‘Ibrī"],rawOffsetInMinutes:240,abbreviation:"GST",rawFormat:"+04:00 Gulf Time - Muscat, Seeb, Bawshar, ‘Ibrī"},{name:"Indian/Mauritius",alternativeName:"Mauritius Time",group:["Indian/Mauritius"],continentCode:"AF",continentName:"Africa",countryName:"Mauritius",countryCode:"MU",mainCities:["Port Louis","Vacoas","Beau Bassin-Rose Hill","Curepipe"],rawOffsetInMinutes:240,abbreviation:"MUT",rawFormat:"+04:00 Mauritius Time - Port Louis, Vacoas, Beau Bassin-Rose Hill, Curepipe"},{name:"Indian/Reunion",alternativeName:"Réunion Time",group:["Indian/Reunion"],continentCode:"AF",continentName:"Africa",countryName:"Reunion",countryCode:"RE",mainCities:["Saint-Denis","Saint-Paul","Saint-Pierre","Le Tampon"],rawOffsetInMinutes:240,abbreviation:"RET",rawFormat:"+04:00 Réunion Time - Saint-Denis, Saint-Paul, Saint-Pierre, Le Tampon"},{name:"Europe/Samara",alternativeName:"Samara Time",group:["Europe/Astrakhan","Europe/Samara","Europe/Saratov","Europe/Ulyanovsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Samara","Saratov","Tolyatti","Izhevsk"],rawOffsetInMinutes:240,abbreviation:"SAMT",rawFormat:"+04:00 Samara Time - Samara, Saratov, Tolyatti, Izhevsk"},{name:"Indian/Mahe",alternativeName:"Seychelles Time",group:["Indian/Mahe"],continentCode:"AF",continentName:"Africa",countryName:"Seychelles",countryCode:"SC",mainCities:["Victoria"],rawOffsetInMinutes:240,abbreviation:"SCT",rawFormat:"+04:00 Seychelles Time - Victoria"},{name:"Asia/Kabul",alternativeName:"Afghanistan Time",group:["Asia/Kabul"],continentCode:"AS",continentName:"Asia",countryName:"Afghanistan",countryCode:"AF",mainCities:["Kabul","Herāt","Mazār-e Sharīf","Kandahār"],rawOffsetInMinutes:270,abbreviation:"AFT",rawFormat:"+04:30 Afghanistan Time - Kabul, Herāt, Mazār-e Sharīf, Kandahār"},{name:"Asia/Almaty",alternativeName:"East Kazakhstan Time",group:["Asia/Almaty","Asia/Qostanay"],continentCode:"AS",continentName:"Asia",countryName:"Kazakhstan",countryCode:"KZ",mainCities:["Almaty","Shymkent","Karagandy","Taraz"],rawOffsetInMinutes:300,abbreviation:"ALMT",rawFormat:"+05:00 East Kazakhstan Time - Almaty, Shymkent, Karagandy, Taraz"},{name:"Indian/Kerguelen",alternativeName:"French Southern & Antarctic Time",group:["Indian/Kerguelen"],continentCode:"AN",continentName:"Antarctica",countryName:"French Southern Territories",countryCode:"TF",mainCities:["Port-aux-Français"],rawOffsetInMinutes:300,abbreviation:"FSAT",rawFormat:"+05:00 French Southern & Antarctic Time - Port-aux-Français"},{name:"Indian/Maldives",alternativeName:"Maldives Time",group:["Indian/Maldives","Indian/Kerguelen"],continentCode:"AS",continentName:"Asia",countryName:"Maldives",countryCode:"MV",mainCities:["Male"],rawOffsetInMinutes:300,abbreviation:"MVT",rawFormat:"+05:00 Maldives Time - Male"},{name:"Antarctica/Mawson",alternativeName:"Mawson Time",group:["Antarctica/Mawson","Antarctica/Vostok"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Mawson","Vostok"],rawOffsetInMinutes:300,abbreviation:"MAWT",rawFormat:"+05:00 Mawson Time - Mawson, Vostok"},{name:"Asia/Karachi",alternativeName:"Pakistan Time",group:["Asia/Karachi"],continentCode:"AS",continentName:"Asia",countryName:"Pakistan",countryCode:"PK",mainCities:["Karachi","Lahore","Faisalabad","Rawalpindi"],rawOffsetInMinutes:300,abbreviation:"PKT",rawFormat:"+05:00 Pakistan Time - Karachi, Lahore, Faisalabad, Rawalpindi"},{name:"Asia/Dushanbe",alternativeName:"Tajikistan Time",group:["Asia/Dushanbe"],continentCode:"AS",continentName:"Asia",countryName:"Tajikistan",countryCode:"TJ",mainCities:["Dushanbe","Isfara","Istaravshan","Kŭlob"],rawOffsetInMinutes:300,abbreviation:"TJT",rawFormat:"+05:00 Tajikistan Time - Dushanbe, Isfara, Istaravshan, Kŭlob"},{name:"Asia/Ashgabat",alternativeName:"Turkmenistan Time",group:["Asia/Ashgabat","Asia/Ashkhabad"],continentCode:"AS",continentName:"Asia",countryName:"Turkmenistan",countryCode:"TM",mainCities:["Ashgabat","Türkmenabat","Daşoguz","Mary"],rawOffsetInMinutes:300,abbreviation:"TMT",rawFormat:"+05:00 Turkmenistan Time - Ashgabat, Türkmenabat, Daşoguz, Mary"},{name:"Asia/Tashkent",alternativeName:"Uzbekistan Time",group:["Asia/Samarkand","Asia/Tashkent"],continentCode:"AS",continentName:"Asia",countryName:"Uzbekistan",countryCode:"UZ",mainCities:["Tashkent","Namangan","Samarkand","Andijon"],rawOffsetInMinutes:300,abbreviation:"UZT",rawFormat:"+05:00 Uzbekistan Time - Tashkent, Namangan, Samarkand, Andijon"},{name:"Asia/Aqtobe",alternativeName:"West Kazakhstan Time",group:["Asia/Aqtau","Asia/Aqtobe","Asia/Atyrau","Asia/Oral","Asia/Qyzylorda"],continentCode:"AS",continentName:"Asia",countryName:"Kazakhstan",countryCode:"KZ",mainCities:["Aktobe","Kyzylorda","Oral","Atyrau"],rawOffsetInMinutes:300,abbreviation:"AQTT",rawFormat:"+05:00 West Kazakhstan Time - Aktobe, Kyzylorda, Oral, Atyrau"},{name:"Asia/Yekaterinburg",alternativeName:"Yekaterinburg Time",group:["Asia/Yekaterinburg"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Yekaterinburg","Chelyabinsk","Ufa","Perm"],rawOffsetInMinutes:300,abbreviation:"YEKT",rawFormat:"+05:00 Yekaterinburg Time - Yekaterinburg, Chelyabinsk, Ufa, Perm"},{name:"Asia/Colombo",alternativeName:"India Time",group:["Asia/Colombo"],continentCode:"AS",continentName:"Asia",countryName:"Sri Lanka",countryCode:"LK",mainCities:["Colombo","Dehiwala-Mount Lavinia","Maharagama","Jaffna"],rawOffsetInMinutes:330,abbreviation:"IST",rawFormat:"+05:30 India Time - Colombo, Dehiwala-Mount Lavinia, Maharagama, Jaffna"},{name:"Asia/Kolkata",alternativeName:"India Time",group:["Asia/Kolkata","Asia/Calcutta"],continentCode:"AS",continentName:"Asia",countryName:"India",countryCode:"IN",mainCities:["Mumbai","Delhi","Bengaluru","Hyderābād"],rawOffsetInMinutes:330,abbreviation:"IST",rawFormat:"+05:30 India Time - Mumbai, Delhi, Bengaluru, Hyderābād"},{name:"Asia/Kathmandu",alternativeName:"Nepal Time",group:["Asia/Kathmandu","Asia/Katmandu"],continentCode:"AS",continentName:"Asia",countryName:"Nepal",countryCode:"NP",mainCities:["Kathmandu","Bharatpur","Pātan","Birgañj"],rawOffsetInMinutes:345,abbreviation:"NPT",rawFormat:"+05:45 Nepal Time - Kathmandu, Bharatpur, Pātan, Birgañj"},{name:"Asia/Dhaka",alternativeName:"Bangladesh Time",group:["Asia/Dhaka","Asia/Dacca"],continentCode:"AS",continentName:"Asia",countryName:"Bangladesh",countryCode:"BD",mainCities:["Dhaka","Chattogram","Khulna","Rangpur"],rawOffsetInMinutes:360,abbreviation:"BST",rawFormat:"+06:00 Bangladesh Time - Dhaka, Chattogram, Khulna, Rangpur"},{name:"Asia/Thimphu",alternativeName:"Bhutan Time",group:["Asia/Thimphu","Asia/Thimbu"],continentCode:"AS",continentName:"Asia",countryName:"Bhutan",countryCode:"BT",mainCities:["Thimphu","Phuntsholing","Tsirang","Punākha"],rawOffsetInMinutes:360,abbreviation:"BTT",rawFormat:"+06:00 Bhutan Time - Thimphu, Phuntsholing, Tsirang, Punākha"},{name:"Asia/Urumqi",alternativeName:"China Time",group:["Asia/Urumqi","Asia/Kashgar"],continentCode:"AS",continentName:"Asia",countryName:"China",countryCode:"CN",mainCities:["Ürümqi","Shihezi","Korla","Aksu"],rawOffsetInMinutes:360,abbreviation:"CST",rawFormat:"+06:00 China Time - Ürümqi, Shihezi, Korla, Aksu"},{name:"Indian/Chagos",alternativeName:"Indian Ocean Time",group:["Indian/Chagos"],continentCode:"AS",continentName:"Asia",countryName:"British Indian Ocean Territory",countryCode:"IO",mainCities:["Chagos"],rawOffsetInMinutes:360,abbreviation:"IOT",rawFormat:"+06:00 Indian Ocean Time - Chagos"},{name:"Asia/Bishkek",alternativeName:"Kyrgyzstan Time",group:["Asia/Bishkek"],continentCode:"AS",continentName:"Asia",countryName:"Kyrgyzstan",countryCode:"KG",mainCities:["Bishkek","Osh","Jalal-Abad","Karakol"],rawOffsetInMinutes:360,abbreviation:"KGT",rawFormat:"+06:00 Kyrgyzstan Time - Bishkek, Osh, Jalal-Abad, Karakol"},{name:"Asia/Omsk",alternativeName:"Omsk Time",group:["Asia/Omsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Omsk","Tara","Kalachinsk","Isil’kul’"],rawOffsetInMinutes:360,abbreviation:"OMST",rawFormat:"+06:00 Omsk Time - Omsk, Tara, Kalachinsk, Isil’kul’"},{name:"Indian/Cocos",alternativeName:"Cocos Islands Time",group:["Indian/Cocos"],continentCode:"AS",continentName:"Asia",countryName:"Cocos Islands",countryCode:"CC",mainCities:["West Island"],rawOffsetInMinutes:390,abbreviation:"CCT",rawFormat:"+06:30 Cocos Islands Time - West Island"},{name:"Asia/Yangon",alternativeName:"Myanmar Time",group:["Asia/Yangon","Indian/Cocos","Asia/Rangoon"],continentCode:"AS",continentName:"Asia",countryName:"Myanmar",countryCode:"MM",mainCities:["Yangon","Mandalay","Nay Pyi Taw","Mawlamyine"],rawOffsetInMinutes:390,abbreviation:"MMT",rawFormat:"+06:30 Myanmar Time - Yangon, Mandalay, Nay Pyi Taw, Mawlamyine"},{name:"Indian/Christmas",alternativeName:"Christmas Island Time",group:["Indian/Christmas"],continentCode:"OC",continentName:"Oceania",countryName:"Christmas Island",countryCode:"CX",mainCities:["Flying Fish Cove"],rawOffsetInMinutes:420,abbreviation:"CXT",rawFormat:"+07:00 Christmas Island Time - Flying Fish Cove"},{name:"Antarctica/Davis",alternativeName:"Davis Time",group:["Antarctica/Davis"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Davis"],rawOffsetInMinutes:420,abbreviation:"DAVT",rawFormat:"+07:00 Davis Time - Davis"},{name:"Asia/Hovd",alternativeName:"Hovd Time",group:["Asia/Hovd"],continentCode:"AS",continentName:"Asia",countryName:"Mongolia",countryCode:"MN",mainCities:["Ulaangom","Khovd","Ölgii","Altai"],rawOffsetInMinutes:420,abbreviation:"HOVT",rawFormat:"+07:00 Hovd Time - Ulaangom, Khovd, Ölgii, Altai"},{name:"Asia/Bangkok",alternativeName:"Indochina Time",group:["Asia/Bangkok","Asia/Phnom_Penh","Asia/Vientiane","Indian/Christmas"],continentCode:"AS",continentName:"Asia",countryName:"Thailand",countryCode:"TH",mainCities:["Bangkok","Samut Prakan","Mueang Nonthaburi","Chon Buri"],rawOffsetInMinutes:420,abbreviation:"ICT",rawFormat:"+07:00 Indochina Time - Bangkok, Samut Prakan, Mueang Nonthaburi, Chon Buri"},{name:"Asia/Ho_Chi_Minh",alternativeName:"Indochina Time",group:["Asia/Ho_Chi_Minh","Asia/Saigon"],continentCode:"AS",continentName:"Asia",countryName:"Vietnam",countryCode:"VN",mainCities:["Ho Chi Minh City","Da Nang","Biên Hòa","Cần Thơ"],rawOffsetInMinutes:420,abbreviation:"ICT",rawFormat:"+07:00 Indochina Time - Ho Chi Minh City, Da Nang, Biên Hòa, Cần Thơ"},{name:"Asia/Phnom_Penh",alternativeName:"Indochina Time",group:["Asia/Phnom_Penh"],continentCode:"AS",continentName:"Asia",countryName:"Cambodia",countryCode:"KH",mainCities:["Phnom Penh","Takeo","Siem Reap","Battambang"],rawOffsetInMinutes:420,abbreviation:"ICT",rawFormat:"+07:00 Indochina Time - Phnom Penh, Takeo, Siem Reap, Battambang"},{name:"Asia/Vientiane",alternativeName:"Indochina Time",group:["Asia/Vientiane"],continentCode:"AS",continentName:"Asia",countryName:"Laos",countryCode:"LA",mainCities:["Vientiane","Savannakhet","Pakse","Thakhèk"],rawOffsetInMinutes:420,abbreviation:"ICT",rawFormat:"+07:00 Indochina Time - Vientiane, Savannakhet, Pakse, Thakhèk"},{name:"Asia/Novosibirsk",alternativeName:"Novosibirsk Time",group:["Asia/Barnaul","Asia/Krasnoyarsk","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Tomsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Novosibirsk","Krasnoyarsk","Barnaul","Tomsk"],rawOffsetInMinutes:420,abbreviation:"NOVT",rawFormat:"+07:00 Novosibirsk Time - Novosibirsk, Krasnoyarsk, Barnaul, Tomsk"},{name:"Asia/Jakarta",alternativeName:"Western Indonesia Time",group:["Asia/Jakarta","Asia/Pontianak"],continentCode:"AS",continentName:"Asia",countryName:"Indonesia",countryCode:"ID",mainCities:["Jakarta","Surabaya","Bekasi","Bandung"],rawOffsetInMinutes:420,abbreviation:"WIB",rawFormat:"+07:00 Western Indonesia Time - Jakarta, Surabaya, Bekasi, Bandung"},{name:"Antarctica/Casey",alternativeName:"Australian Western Time",group:["Antarctica/Casey"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Casey"],rawOffsetInMinutes:480,abbreviation:"AWST",rawFormat:"+08:00 Australian Western Time - Casey"},{name:"Australia/Perth",alternativeName:"Australian Western Time",group:["Australia/Perth","Australia/West"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Perth","Mandurah","Bunbury","Baldivis"],rawOffsetInMinutes:480,abbreviation:"AWST",rawFormat:"+08:00 Australian Western Time - Perth, Mandurah, Bunbury, Baldivis"},{name:"Asia/Brunei",alternativeName:"Brunei Darussalam Time",group:["Asia/Brunei"],continentCode:"AS",continentName:"Asia",countryName:"Brunei",countryCode:"BN",mainCities:["Bandar Seri Begawan","Sengkurong","Mentiri","Kuala Belait"],rawOffsetInMinutes:480,abbreviation:"BNT",rawFormat:"+08:00 Brunei Darussalam Time - Bandar Seri Begawan, Sengkurong, Mentiri, Kuala Belait"},{name:"Asia/Makassar",alternativeName:"Central Indonesia Time",group:["Asia/Makassar","Asia/Ujung_Pandang"],continentCode:"AS",continentName:"Asia",countryName:"Indonesia",countryCode:"ID",mainCities:["Makassar","Samarinda","Denpasar","Balikpapan"],rawOffsetInMinutes:480,abbreviation:"WITA",rawFormat:"+08:00 Central Indonesia Time - Makassar, Samarinda, Denpasar, Balikpapan"},{name:"Asia/Macau",alternativeName:"China Time",group:["Asia/Macau","Asia/Macao"],continentCode:"AS",continentName:"Asia",countryName:"Macao",countryCode:"MO",mainCities:["Macau","Taipa","Luhuan","Lai Chi Van"],rawOffsetInMinutes:480,abbreviation:"CST",rawFormat:"+08:00 China Time - Macau, Taipa, Luhuan, Lai Chi Van"},{name:"Asia/Shanghai",alternativeName:"China Time",group:["Asia/Shanghai","PRC","Asia/Chongqing","Asia/Harbin","Asia/Chungking"],continentCode:"AS",continentName:"Asia",countryName:"China",countryCode:"CN",mainCities:["Shanghai","Beijing","Shenzhen","Guangzhou"],rawOffsetInMinutes:480,abbreviation:"CST",rawFormat:"+08:00 China Time - Shanghai, Beijing, Shenzhen, Guangzhou"},{name:"Asia/Hong_Kong",alternativeName:"Hong Kong Time",group:["Asia/Hong_Kong","Hongkong"],continentCode:"AS",continentName:"Asia",countryName:"Hong Kong",countryCode:"HK",mainCities:["Hong Kong","New Territories","Kowloon","Hong Kong Island"],rawOffsetInMinutes:480,abbreviation:"HKT",rawFormat:"+08:00 Hong Kong Time - Hong Kong, New Territories, Kowloon, Hong Kong Island"},{name:"Asia/Irkutsk",alternativeName:"Irkutsk Time",group:["Asia/Irkutsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Irkutsk","Ulan-Ude","Bratsk","Angarsk"],rawOffsetInMinutes:480,abbreviation:"IRKT",rawFormat:"+08:00 Irkutsk Time - Irkutsk, Ulan-Ude, Bratsk, Angarsk"},{name:"Asia/Kuala_Lumpur",alternativeName:"Malaysia Time",group:["Asia/Kuala_Lumpur","Asia/Kuching","Asia/Brunei"],continentCode:"AS",continentName:"Asia",countryName:"Malaysia",countryCode:"MY",mainCities:["Kuala Lumpur","Petaling Jaya","Klang","Johor Bahru"],rawOffsetInMinutes:480,abbreviation:"MYT",rawFormat:"+08:00 Malaysia Time - Kuala Lumpur, Petaling Jaya, Klang, Johor Bahru"},{name:"Asia/Manila",alternativeName:"Philippine Time",group:["Asia/Manila"],continentCode:"AS",continentName:"Asia",countryName:"Philippines",countryCode:"PH",mainCities:["Quezon City","Davao","Manila","Caloocan City"],rawOffsetInMinutes:480,abbreviation:"PHT",rawFormat:"+08:00 Philippine Time - Quezon City, Davao, Manila, Caloocan City"},{name:"Asia/Singapore",alternativeName:"Singapore Time",group:["Asia/Singapore","Singapore","Asia/Kuala_Lumpur"],continentCode:"AS",continentName:"Asia",countryName:"Singapore",countryCode:"SG",mainCities:["Singapore","Ulu Bedok","Bedok New Town","Tampines Estate"],rawOffsetInMinutes:480,abbreviation:"SGT",rawFormat:"+08:00 Singapore Time - Singapore, Ulu Bedok, Bedok New Town, Tampines Estate"},{name:"Asia/Taipei",alternativeName:"Taipei Time",group:["Asia/Taipei","ROC"],continentCode:"AS",continentName:"Asia",countryName:"Taiwan",countryCode:"TW",mainCities:["Taipei","Kaohsiung","Taichung","Tainan"],rawOffsetInMinutes:480,abbreviation:"TWT",rawFormat:"+08:00 Taipei Time - Taipei, Kaohsiung, Taichung, Tainan"},{name:"Asia/Ulaanbaatar",alternativeName:"Ulaanbaatar Time",group:["Asia/Choibalsan","Asia/Ulaanbaatar","Asia/Ulan_Bator"],continentCode:"AS",continentName:"Asia",countryName:"Mongolia",countryCode:"MN",mainCities:["Ulan Bator","Erdenet","Darhan","Mörön"],rawOffsetInMinutes:480,abbreviation:"ULAT",rawFormat:"+08:00 Ulaanbaatar Time - Ulan Bator, Erdenet, Darhan, Mörön"},{name:"Australia/Eucla",alternativeName:"Australian Central Western Time",group:["Australia/Eucla"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Eucla"],rawOffsetInMinutes:525,abbreviation:"ACWST",rawFormat:"+08:45 Australian Central Western Time - Eucla"},{name:"Asia/Dili",alternativeName:"East Timor Time",group:["Asia/Dili"],continentCode:"OC",continentName:"Oceania",countryName:"Timor Leste",countryCode:"TL",mainCities:["Dili","Maliana","Suai","Likisá"],rawOffsetInMinutes:540,abbreviation:"TLT",rawFormat:"+09:00 East Timor Time - Dili, Maliana, Suai, Likisá"},{name:"Asia/Jayapura",alternativeName:"Eastern Indonesia Time",group:["Asia/Jayapura"],continentCode:"AS",continentName:"Asia",countryName:"Indonesia",countryCode:"ID",mainCities:["Jayapura","Ambon","Sorong","Ternate"],rawOffsetInMinutes:540,abbreviation:"WIT",rawFormat:"+09:00 Eastern Indonesia Time - Jayapura, Ambon, Sorong, Ternate"},{name:"Asia/Tokyo",alternativeName:"Japan Time",group:["Asia/Tokyo","Japan"],continentCode:"AS",continentName:"Asia",countryName:"Japan",countryCode:"JP",mainCities:["Tokyo","Yokohama","Osaka","Nagoya"],rawOffsetInMinutes:540,abbreviation:"JST",rawFormat:"+09:00 Japan Time - Tokyo, Yokohama, Osaka, Nagoya"},{name:"Asia/Pyongyang",alternativeName:"Korean Time",group:["Asia/Pyongyang"],continentCode:"AS",continentName:"Asia",countryName:"North Korea",countryCode:"KP",mainCities:["Pyongyang","Hamhŭng","Namp’o","Sunch’ŏn"],rawOffsetInMinutes:540,abbreviation:"KST",rawFormat:"+09:00 Korean Time - Pyongyang, Hamhŭng, Namp’o, Sunch’ŏn"},{name:"Asia/Seoul",alternativeName:"Korean Time",group:["Asia/Seoul","ROK"],continentCode:"AS",continentName:"Asia",countryName:"South Korea",countryCode:"KR",mainCities:["Seoul","Busan","Incheon","Daegu"],rawOffsetInMinutes:540,abbreviation:"KST",rawFormat:"+09:00 Korean Time - Seoul, Busan, Incheon, Daegu"},{name:"Pacific/Palau",alternativeName:"Palau Time",group:["Pacific/Palau"],continentCode:"OC",continentName:"Oceania",countryName:"Palau",countryCode:"PW",mainCities:["Ngerulmud"],rawOffsetInMinutes:540,abbreviation:"PWT",rawFormat:"+09:00 Palau Time - Ngerulmud"},{name:"Asia/Chita",alternativeName:"Yakutsk Time",group:["Asia/Chita","Asia/Khandyga","Asia/Yakutsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Chita","Yakutsk","Blagoveshchensk","Belogorsk"],rawOffsetInMinutes:540,abbreviation:"YAKT",rawFormat:"+09:00 Yakutsk Time - Chita, Yakutsk, Blagoveshchensk, Belogorsk"},{name:"Australia/Adelaide",alternativeName:"Australian Central Time",group:["Australia/Adelaide","Australia/Broken_Hill","Australia/South","Australia/Yancowinna"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Adelaide","Adelaide Hills","Mount Gambier","Morphett Vale"],rawOffsetInMinutes:570,abbreviation:"ACST",rawFormat:"+09:30 Australian Central Time - Adelaide, Adelaide Hills, Mount Gambier, Morphett Vale"},{name:"Australia/Darwin",alternativeName:"Australian Central Time",group:["Australia/Darwin","Australia/North"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Darwin","Alice Springs","Palmerston"],rawOffsetInMinutes:570,abbreviation:"ACST",rawFormat:"+09:30 Australian Central Time - Darwin, Alice Springs, Palmerston"},{name:"Australia/Brisbane",alternativeName:"Australian Eastern Time",group:["Australia/Brisbane","Australia/Lindeman","Australia/Queensland"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Brisbane","Gold Coast","Logan City","Townsville"],rawOffsetInMinutes:600,abbreviation:"AEST",rawFormat:"+10:00 Australian Eastern Time - Brisbane, Gold Coast, Logan City, Townsville"},{name:"Australia/Sydney",alternativeName:"Australian Eastern Time",group:["Antarctica/Macquarie","Australia/Hobart","Australia/Melbourne","Australia/Sydney","Australia/Tasmania","Australia/Currie","Australia/Victoria","Australia/ACT","Australia/NSW","Australia/Canberra"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Sydney","Melbourne","Canberra","Newcastle"],rawOffsetInMinutes:600,abbreviation:"AEST",rawFormat:"+10:00 Australian Eastern Time - Sydney, Melbourne, Canberra, Newcastle"},{name:"Pacific/Guam",alternativeName:"Chamorro Time",group:["Pacific/Guam","Pacific/Saipan"],continentCode:"OC",continentName:"Oceania",countryName:"Guam",countryCode:"GU",mainCities:["Dededo Village","Yigo Village","Tamuning-Tumon-Harmon Village","Tamuning"],rawOffsetInMinutes:600,abbreviation:"ChST",rawFormat:"+10:00 Chamorro Time - Dededo Village, Yigo Village, Tamuning-Tumon-Harmon Village, Tamuning"},{name:"Pacific/Saipan",alternativeName:"Chamorro Time",group:["Pacific/Saipan"],continentCode:"OC",continentName:"Oceania",countryName:"Northern Mariana Islands",countryCode:"MP",mainCities:["Saipan"],rawOffsetInMinutes:600,abbreviation:"ChST",rawFormat:"+10:00 Chamorro Time - Saipan"},{name:"Pacific/Chuuk",alternativeName:"Chuuk Time",group:["Pacific/Chuuk","Pacific/Truk","Pacific/Yap"],continentCode:"OC",continentName:"Oceania",countryName:"Micronesia",countryCode:"FM",mainCities:["Chuuk"],rawOffsetInMinutes:600,abbreviation:"CHUT",rawFormat:"+10:00 Chuuk Time - Chuuk"},{name:"Antarctica/DumontDUrville",alternativeName:"Dumont-d’Urville Time",group:["Antarctica/DumontDUrville"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["DumontDUrville"],rawOffsetInMinutes:600,abbreviation:"DDUT",rawFormat:"+10:00 Dumont-d’Urville Time - DumontDUrville"},{name:"Pacific/Port_Moresby",alternativeName:"Papua New Guinea Time",group:["Pacific/Port_Moresby","Antarctica/DumontDUrville","Pacific/Chuuk","Pacific/Yap","Pacific/Truk"],continentCode:"OC",continentName:"Oceania",countryName:"Papua New Guinea",countryCode:"PG",mainCities:["Port Moresby","Lae","Mount Hagen","Popondetta"],rawOffsetInMinutes:600,abbreviation:"PGT",rawFormat:"+10:00 Papua New Guinea Time - Port Moresby, Lae, Mount Hagen, Popondetta"},{name:"Asia/Vladivostok",alternativeName:"Vladivostok Time",group:["Asia/Ust-Nera","Asia/Vladivostok"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Khabarovsk","Vladivostok","Khabarovsk Vtoroy","Komsomolsk-on-Amur"],rawOffsetInMinutes:600,abbreviation:"VLAT",rawFormat:"+10:00 Vladivostok Time - Khabarovsk, Vladivostok, Khabarovsk Vtoroy, Komsomolsk-on-Amur"},{name:"Australia/Lord_Howe",alternativeName:"Lord Howe Time",group:["Australia/Lord_Howe","Australia/LHI"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Lord Howe"],rawOffsetInMinutes:630,abbreviation:"LHST",rawFormat:"+10:30 Lord Howe Time - Lord Howe"},{name:"Pacific/Bougainville",alternativeName:"Bougainville Time",group:["Pacific/Bougainville"],continentCode:"OC",continentName:"Oceania",countryName:"Papua New Guinea",countryCode:"PG",mainCities:["Arawa"],rawOffsetInMinutes:660,abbreviation:"BST",rawFormat:"+11:00 Bougainville Time - Arawa"},{name:"Pacific/Kosrae",alternativeName:"Kosrae Time",group:["Pacific/Kosrae","Pacific/Pohnpei"],continentCode:"OC",continentName:"Oceania",countryName:"Micronesia",countryCode:"FM",mainCities:["Kosrae","Palikir - National Government Center"],rawOffsetInMinutes:660,abbreviation:"KOST",rawFormat:"+11:00 Kosrae Time - Kosrae, Palikir - National Government Center"},{name:"Pacific/Noumea",alternativeName:"New Caledonia Time",group:["Pacific/Noumea"],continentCode:"OC",continentName:"Oceania",countryName:"New Caledonia",countryCode:"NC",mainCities:["Nouméa","Mont-Dore","Dumbéa"],rawOffsetInMinutes:660,abbreviation:"NCT",rawFormat:"+11:00 New Caledonia Time - Nouméa, Mont-Dore, Dumbéa"},{name:"Pacific/Norfolk",alternativeName:"Norfolk Island Time",group:["Pacific/Norfolk"],continentCode:"OC",continentName:"Oceania",countryName:"Norfolk Island",countryCode:"NF",mainCities:["Kingston"],rawOffsetInMinutes:660,abbreviation:"NFT",rawFormat:"+11:00 Norfolk Island Time - Kingston"},{name:"Asia/Sakhalin",alternativeName:"Sakhalin Time",group:["Asia/Magadan","Asia/Sakhalin","Asia/Srednekolymsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Yuzhno-Sakhalinsk","Magadan","Korsakov","Kholmsk"],rawOffsetInMinutes:660,abbreviation:"SAKT",rawFormat:"+11:00 Sakhalin Time - Yuzhno-Sakhalinsk, Magadan, Korsakov, Kholmsk"},{name:"Pacific/Guadalcanal",alternativeName:"Solomon Islands Time",group:["Pacific/Guadalcanal","Pacific/Pohnpei","Pacific/Ponape"],continentCode:"OC",continentName:"Oceania",countryName:"Solomon Islands",countryCode:"SB",mainCities:["Honiara"],rawOffsetInMinutes:660,abbreviation:"SBT",rawFormat:"+11:00 Solomon Islands Time - Honiara"},{name:"Pacific/Efate",alternativeName:"Vanuatu Time",group:["Pacific/Efate"],continentCode:"OC",continentName:"Oceania",countryName:"Vanuatu",countryCode:"VU",mainCities:["Port-Vila"],rawOffsetInMinutes:660,abbreviation:"VUT",rawFormat:"+11:00 Vanuatu Time - Port-Vila"},{name:"Pacific/Fiji",alternativeName:"Fiji Time",group:["Pacific/Fiji"],continentCode:"OC",continentName:"Oceania",countryName:"Fiji",countryCode:"FJ",mainCities:["Nasinu","Suva","Lautoka","Nadi"],rawOffsetInMinutes:720,abbreviation:"FJT",rawFormat:"+12:00 Fiji Time - Nasinu, Suva, Lautoka, Nadi"},{name:"Pacific/Tarawa",alternativeName:"Gilbert Islands Time",group:["Pacific/Tarawa","Pacific/Funafuti","Pacific/Majuro","Pacific/Wake","Pacific/Wallis"],continentCode:"OC",continentName:"Oceania",countryName:"Kiribati",countryCode:"KI",mainCities:["Tarawa"],rawOffsetInMinutes:720,abbreviation:"GILT",rawFormat:"+12:00 Gilbert Islands Time - Tarawa"},{name:"Pacific/Majuro",alternativeName:"Marshall Islands Time",group:["Pacific/Kwajalein","Pacific/Majuro","Kwajalein"],continentCode:"OC",continentName:"Oceania",countryName:"Marshall Islands",countryCode:"MH",mainCities:["Majuro","Kwajalein","RMI Capitol"],rawOffsetInMinutes:720,abbreviation:"MHT",rawFormat:"+12:00 Marshall Islands Time - Majuro, Kwajalein, RMI Capitol"},{name:"Pacific/Nauru",alternativeName:"Nauru Time",group:["Pacific/Nauru"],continentCode:"OC",continentName:"Oceania",countryName:"Nauru",countryCode:"NR",mainCities:["Yaren"],rawOffsetInMinutes:720,abbreviation:"NRT",rawFormat:"+12:00 Nauru Time - Yaren"},{name:"Pacific/Auckland",alternativeName:"New Zealand Time",group:["Pacific/Auckland","NZ","Antarctica/McMurdo","Antarctica/South_Pole"],continentCode:"OC",continentName:"Oceania",countryName:"New Zealand",countryCode:"NZ",mainCities:["Auckland","Wellington","Christchurch","Manukau City"],rawOffsetInMinutes:720,abbreviation:"NZST",rawFormat:"+12:00 New Zealand Time - Auckland, Wellington, Christchurch, Manukau City"},{name:"Antarctica/McMurdo",alternativeName:"New Zealand Time",group:["Antarctica/McMurdo"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["McMurdo"],rawOffsetInMinutes:720,abbreviation:"NZST",rawFormat:"+12:00 New Zealand Time - McMurdo"},{name:"Asia/Kamchatka",alternativeName:"Petropavlovsk-Kamchatski Time",group:["Asia/Anadyr","Asia/Kamchatka"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Petropavlovsk-Kamchatsky","Yelizovo","Vilyuchinsk","Anadyr"],rawOffsetInMinutes:720,abbreviation:"PETT",rawFormat:"+12:00 Petropavlovsk-Kamchatski Time - Petropavlovsk-Kamchatsky, Yelizovo, Vilyuchinsk, Anadyr"},{name:"Pacific/Funafuti",alternativeName:"Tuvalu Time",group:["Pacific/Funafuti"],continentCode:"OC",continentName:"Oceania",countryName:"Tuvalu",countryCode:"TV",mainCities:["Funafuti"],rawOffsetInMinutes:720,abbreviation:"TVT",rawFormat:"+12:00 Tuvalu Time - Funafuti"},{name:"Pacific/Wake",alternativeName:"Wake Island Time",group:["Pacific/Wake"],continentCode:"OC",continentName:"Oceania",countryName:"United States Minor Outlying Islands",countryCode:"UM",mainCities:["Wake"],rawOffsetInMinutes:720,abbreviation:"WAKT",rawFormat:"+12:00 Wake Island Time - Wake"},{name:"Pacific/Wallis",alternativeName:"Wallis & Futuna Time",group:["Pacific/Wallis"],continentCode:"OC",continentName:"Oceania",countryName:"Wallis and Futuna",countryCode:"WF",mainCities:["Mata-Utu"],rawOffsetInMinutes:720,abbreviation:"WFT",rawFormat:"+12:00 Wallis & Futuna Time - Mata-Utu"},{name:"Pacific/Chatham",alternativeName:"Chatham Time",group:["Pacific/Chatham","NZ-CHAT"],continentCode:"OC",continentName:"Oceania",countryName:"New Zealand",countryCode:"NZ",mainCities:["Chatham"],rawOffsetInMinutes:765,abbreviation:"CHAST",rawFormat:"+12:45 Chatham Time - Chatham"},{name:"Pacific/Apia",alternativeName:"Apia Time",group:["Pacific/Apia"],continentCode:"OC",continentName:"Oceania",countryName:"Samoa",countryCode:"WS",mainCities:["Apia"],rawOffsetInMinutes:780,abbreviation:"WST",rawFormat:"+13:00 Apia Time - Apia"},{name:"Pacific/Kanton",alternativeName:"Phoenix Islands Time",group:["Pacific/Kanton","Pacific/Enderbury"],continentCode:"OC",continentName:"Oceania",countryName:"Kiribati",countryCode:"KI",mainCities:["Kanton"],rawOffsetInMinutes:780,abbreviation:"PHOT",rawFormat:"+13:00 Phoenix Islands Time - Kanton"},{name:"Pacific/Fakaofo",alternativeName:"Tokelau Time",group:["Pacific/Fakaofo"],continentCode:"OC",continentName:"Oceania",countryName:"Tokelau",countryCode:"TK",mainCities:["Fakaofo"],rawOffsetInMinutes:780,abbreviation:"TKT",rawFormat:"+13:00 Tokelau Time - Fakaofo"},{name:"Pacific/Tongatapu",alternativeName:"Tonga Time",group:["Pacific/Tongatapu"],continentCode:"OC",continentName:"Oceania",countryName:"Tonga",countryCode:"TO",mainCities:["Nuku‘alofa"],rawOffsetInMinutes:780,abbreviation:"TOT",rawFormat:"+13:00 Tonga Time - Nuku‘alofa"},{name:"Pacific/Kiritimati",alternativeName:"Line Islands Time",group:["Pacific/Kiritimati"],continentCode:"OC",continentName:"Oceania",countryName:"Kiribati",countryCode:"KI",mainCities:["Kiritimati"],rawOffsetInMinutes:840,abbreviation:"LINT",rawFormat:"+14:00 Line Islands Time - Kiritimati"}];function CK({alternativeName:e,mainCities:t,rawOffsetInMinutes:n,currentTimeOffsetInMinutes:a},{useCurrentOffset:r=!1}={}){return`${wK(r?a:n).padStart(6,"+")} ${e} - ${t.join(", ")}`}function wK(e){const t=Math.abs(e),[n,a]=[Math.floor(t/60),t%60].map(o=>o.toString().padStart(2,"0")),r=`${n}:${a}`;return`${e>=0?"+":"-"}${r}`}const TK=/^[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?$/,jK={year:0,month:1,day:2,hour:3,minute:4,second:5};function kK(e){return!!(e&&e.match(TK))}function AK(e,t){const n=e.format(t).replace(/\u200E/g,""),a=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n),[,r,o,s,d,c,u]=a;return[s,r,o,d,c,u]}function SK(e,t){const n=e.formatToParts(t),a=[];for(let r=0;r<n.length;r++){const{type:o,value:s}=n[r],d=jK[o];typeof d<"u"&&(a[d]=parseInt(s,10))}return a}function _K(e){return new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function EK(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function IK(e){if(!kK(e))return!1;const t=new Date(Date.now());let n;try{n=_K(e)}catch{return!1}const[a,r,o,s,d,c]=n.formatToParts?SK(n,t):AK(n,t),u=EK({year:a,month:r,day:o,hour:s,minute:d,second:c,millisecond:0});let m=+t;const p=m%1e3;return m-=p>=0?p:1e3+p,(u-m)/(60*1e3)}function MK(e){return xK.reduce(function(t,n){const a=n.name,r=IK(a);if(r===!1)return t;const o={...n,currentTimeOffsetInMinutes:r};return t.push({...o,currentTimeFormat:CK(o,{useCurrentOffset:!0})}),t},[]).sort((t,n)=>PK(t,n)||fb(t.alternativeName,n.alternativeName)||fb(t.mainCities[0],n.mainCities[0]))}function PK(e,t){return e.currentTimeOffsetInMinutes-t.currentTimeOffsetInMinutes}function fb(e,t){return typeof e=="string"&&typeof t=="string"?e.localeCompare(t):0}function gb(e,t,n){var a=FK(e,n.timeZone,n.locale);return a.formatToParts?NK(a,t):OK(a,t)}function NK(e,t){for(var n=e.formatToParts(t),a=n.length-1;a>=0;--a)if(n[a].type==="timeZoneName")return n[a].value}function OK(e,t){var n=e.format(t).replace(/\u200E/g,""),a=/ [\w-+ ]+$/.exec(n);return a?a[0].substr(1):""}function FK(e,t,n){if(n&&!n.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}function RK(e,t){var n=BK(t);return n.formatToParts?$K(n,e):LK(n,e)}var DK={year:0,month:1,day:2,hour:3,minute:4,second:5};function $K(e,t){try{for(var n=e.formatToParts(t),a=[],r=0;r<n.length;r++){var o=DK[n[r].type];o>=0&&(a[o]=parseInt(n[r].value,10))}return a}catch(s){if(s instanceof RangeError)return[NaN];throw s}}function LK(e,t){var n=e.format(t),a=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[a[3],a[1],a[2],a[4],a[5],a[6]]}var md={};function BK(e){if(!md[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";md[e]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return md[e]}function Pp(e,t,n,a,r,o,s){var d=new Date(0);return d.setUTCFullYear(e,t,n),d.setUTCHours(a,r,o,s),d}var bb=36e5,VK=6e4,pd={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Tc(e,t,n){var a,r;if(!e||(a=pd.timezoneZ.exec(e),a))return 0;var o;if(a=pd.timezoneHH.exec(e),a)return o=parseInt(a[1],10),yb(o)?-(o*bb):NaN;if(a=pd.timezoneHHMM.exec(e),a){o=parseInt(a[2],10);var s=parseInt(a[3],10);return yb(o,s)?(r=Math.abs(o)*bb+s*VK,a[1]==="+"?-r:r):NaN}if(HK(e)){t=new Date(t||Date.now());var d=n?t:UK(t),c=Tu(d,e),u=n?c:zK(t,c,e);return-u}return NaN}function UK(e){return Pp(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Tu(e,t){var n=RK(e,t),a=Pp(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),r=e.getTime(),o=r%1e3;return r-=o>=0?o:1e3+o,a-r}function zK(e,t,n){var a=e.getTime(),r=a-t,o=Tu(new Date(r),n);if(t===o)return t;r-=o-t;var s=Tu(new Date(r),n);return o===s?o:Math.max(o,s)}function yb(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var vb={};function HK(e){if(vb[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),vb[e]=!0,!0}catch{return!1}}var KK=60*1e3,WK={X:function(e,t,n,a){var r=hd(a.timeZone,e);if(r===0)return"Z";switch(t){case"X":return xb(r);case"XXXX":case"XX":return cr(r);case"XXXXX":case"XXX":default:return cr(r,":")}},x:function(e,t,n,a){var r=hd(a.timeZone,e);switch(t){case"x":return xb(r);case"xxxx":case"xx":return cr(r);case"xxxxx":case"xxx":default:return cr(r,":")}},O:function(e,t,n,a){var r=hd(a.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+GK(r,":");case"OOOO":default:return"GMT"+cr(r,":")}},z:function(e,t,n,a){switch(t){case"z":case"zz":case"zzz":return gb("short",e,a);case"zzzz":default:return gb("long",e,a)}}};function hd(e,t){var n=e?Tc(e,t,!0)/KK:t.getTimezoneOffset();if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+e);return n}function fl(e,t){for(var n=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return n+a}function cr(e,t){var n=t||"",a=e>0?"-":"+",r=Math.abs(e),o=fl(Math.floor(r/60),2),s=fl(Math.floor(r%60),2);return a+o+n+s}function xb(e,t){if(e%60===0){var n=e>0?"-":"+";return n+fl(Math.abs(e)/60,2)}return cr(e,t)}function GK(e,t){var n=e>0?"-":"+",a=Math.abs(e),r=Math.floor(a/60),o=a%60;if(o===0)return n+String(r);var s=t;return n+String(r)+s+fl(o,2)}var qK=WK,$1=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,fd=36e5,Cb=6e4,YK=2,cn={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:$1};function gl(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n=t||{},a=n.additionalDigits==null?YK:bA(n.additionalDigits);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var r=XK(e),o=JK(r.date,a),s=o.year,d=o.restDateString,c=ZK(d,s);if(isNaN(c))return new Date(NaN);if(c){var u=c.getTime(),m=0,p;if(r.time&&(m=QK(r.time),isNaN(m)))return new Date(NaN);if(r.timeZone||n.timeZone){if(p=Tc(r.timeZone||n.timeZone,new Date(u+m)),isNaN(p))return new Date(NaN)}else p=oh(new Date(u+m)),p=oh(new Date(u+m+p));return new Date(u+m+p)}else return new Date(NaN)}function XK(e){var t={},n=cn.dateTimePattern.exec(e),a;if(n?(t.date=n[1],a=n[3]):(n=cn.datePattern.exec(e),n?(t.date=n[1],a=n[2]):(t.date=null,a=e)),a){var r=cn.timeZone.exec(a);r?(t.time=a.replace(r[1],""),t.timeZone=r[1].trim()):t.time=a}return t}function JK(e,t){var n=cn.YYY[t],a=cn.YYYYY[t],r;if(r=cn.YYYY.exec(e)||a.exec(e),r){var o=r[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(r=cn.YY.exec(e)||n.exec(e),r){var s=r[1];return{year:parseInt(s,10)*100,restDateString:e.slice(s.length)}}return{year:null}}function ZK(e,t){if(t===null)return null;var n,a,r,o;if(e.length===0)return a=new Date(0),a.setUTCFullYear(t),a;if(n=cn.MM.exec(e),n)return a=new Date(0),r=parseInt(n[1],10)-1,Tb(t,r)?(a.setUTCFullYear(t,r),a):new Date(NaN);if(n=cn.DDD.exec(e),n){a=new Date(0);var s=parseInt(n[1],10);return nW(t,s)?(a.setUTCFullYear(t,0,s),a):new Date(NaN)}if(n=cn.MMDD.exec(e),n){a=new Date(0),r=parseInt(n[1],10)-1;var d=parseInt(n[2],10);return Tb(t,r,d)?(a.setUTCFullYear(t,r,d),a):new Date(NaN)}if(n=cn.Www.exec(e),n)return o=parseInt(n[1],10)-1,jb(t,o)?wb(t,o):new Date(NaN);if(n=cn.WwwD.exec(e),n){o=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return jb(t,o,c)?wb(t,o,c):new Date(NaN)}return null}function QK(e){var t,n,a;if(t=cn.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),gd(n)?n%24*fd:NaN;if(t=cn.HHMM.exec(e),t)return n=parseInt(t[1],10),a=parseFloat(t[2].replace(",",".")),gd(n,a)?n%24*fd+a*Cb:NaN;if(t=cn.HHMMSS.exec(e),t){n=parseInt(t[1],10),a=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return gd(n,a,r)?n%24*fd+a*Cb+r*1e3:NaN}return null}function wb(e,t,n){t=t||0,n=n||0;var a=new Date(0);a.setUTCFullYear(e,0,4);var r=a.getUTCDay()||7,o=t*7+n+1-r;return a.setUTCDate(a.getUTCDate()+o),a}var eW=[31,28,31,30,31,30,31,31,30,31,30,31],tW=[31,29,31,30,31,30,31,31,30,31,30,31];function L1(e){return e%400===0||e%4===0&&e%100!==0}function Tb(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var a=L1(e);if(a&&n>tW[t]||!a&&n>eW[t])return!1}return!0}function nW(e,t){if(t<1)return!1;var n=L1(e);return!(n&&t>366||!n&&t>365)}function jb(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function gd(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}var aW=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function iW(e,t,n){var a=String(t),r=n||{},o=a.match(aW);if(o){var s=gl(r.originalDate||e,r);a=o.reduce(function(d,c){if(c[0]==="'")return d;var u=d.indexOf(c),m=d[u-1]==="'",p=d.replace(c,"'"+qK[c[0]](s,c,null,r)+"'");return m?p.substring(0,u-1)+p.substring(u+1):p},a)}return Xk(e,a,r)}function ju(e,t,n){var a=gl(e,n),r=Tc(t,a,!0),o=new Date(a.getTime()-r),s=new Date(0);return s.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),s.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),s}function B1(e,t,n,a){var r=x0(a);return r.timeZone=t,r.originalDate=e,iW(ju(e,t),n,r)}function rW(e,t,n){if(typeof e=="string"&&!e.match($1)){var a=x0(n);return a.timeZone=t,gl(e,a)}var r=gl(e,n),o=Pp(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()).getTime(),s=Tc(t,new Date(o));return new Date(o+s)}const Pn=e=>{const{body:t,title:n}=e;return i.jsxs(B,{paddingY:1,space:3,children:[i.jsxs(et,{space:2,children:[i.jsx(Qt,{}),n&&i.jsx(E,{size:2,weight:"semibold",children:n})]}),t&&i.jsx(E,{size:1,children:t})]})},ku="scheduled-publishing:";Kn(ku);function jc(e){const t=`${ku}${e}`;return Kn&&Kn.enabled(t)?Kn(t):Kn(ku)}function oW(e){return typeof e!="object"||!e?!1:"statusCode"in e&&"response"in e}function dr(e){let t;return oW(e)?e.response.statusCode===403?t=gK:t=e.message:(e instanceof Error&&(t=e.message),t=String(e)),t}const sW=jc("useScheduleOperation"),xo=MK().map(e=>({abbreviation:e.abbreviation,alternativeName:e.alternativeName,mainCities:e.mainCities.join(", "),name:e.name,namePretty:e.name.replaceAll("_"," "),offset:e.currentTimeFormat.split(" ")[0],value:`${e.currentTimeFormat} ${e.abbreviation} ${e.name}`}));function Au(){return xo.find(e=>e.name===Intl.DateTimeFormat().resolvedOptions().timeZone)||xo.find(e=>e.abbreviation==="GMT")||xo[0]}function kb(){const e=localStorage.getItem(F1);try{if(e)return JSON.parse(e)}catch{}return Au()}const Gt=()=>{const e=l.useMemo(()=>kb(),[]),[t,n]=l.useState(e),a=Vt();l.useEffect(()=>{const u=()=>{n(kb())};return window.addEventListener("timeZoneEventUpdate",u),()=>{window.removeEventListener("timeZoneEventUpdate",u)}},[]);const r=l.useCallback(({date:u,format:m=vr.LARGE,includeTimeZone:p,prefix:h})=>{let f=m;return h&&(f=`'${h}'${m}`),p&&(f=`${m} (zzzz)`),B1(u,t.name,f)},[t.name]),o=l.useCallback(()=>ju(new Date,t.name),[t.name]),s=l.useCallback(u=>{sW("handleNewValue:",u),n(m=>{try{m.name!==u.name&&(localStorage.setItem(F1,JSON.stringify(u)),window.dispatchEvent(new Event("timeZoneEventUpdate"))),a.push({closable:!0,description:i.jsx(Pn,{body:`${u.alternativeName} (${u.namePretty})`,title:"Time zone updated"}),duration:15e3,status:"info"})}catch(p){console.error(p),a.push({closable:!0,description:i.jsx(Pn,{body:dr(p),title:"Unable to update time zone"}),status:"error"})}return u})},[a]),d=l.useCallback(u=>ju(u,t.name),[t.name]),c=l.useCallback(u=>rW(u,t.name),[t.name]);return{formatDateTz:r,getCurrentZoneDate:o,setTimeZone:s,timeZone:t,utcToCurrentZoneDate:d,zoneDateToUtc:c}},lW=k.span(({theme:e})=>ae`
    color: ${e.sanity.color.base.fg};
    font-weight: 500;
    margin-left: 1em;
  `),cW=k.span(({theme:e})=>ae`
    color: ${e.sanity.color.input.default.readOnly.fg};
    margin-left: 1em;
  `),dW=e=>{const{onClose:t}=e,{setTimeZone:n,timeZone:a}=Gt(),[r,o]=l.useState(a),s=l.useCallback(f=>{const g=xo.find(b=>b.value===f);o(g)},[]),d=l.useCallback(()=>{o(Au())},[]),c=l.useCallback(()=>{r&&n(r),t==null||t()},[t,r,n]),u=(r==null?void 0:r.name)!==a.name,m=l.useMemo(()=>(r==null?void 0:r.name)===Au().name,[r]),p=l.useCallback(f=>i.jsx(U,{as:"button",padding:3,children:i.jsxs(E,{size:1,textOverflow:"ellipsis",children:[i.jsxs("span",{children:["GMT",f.offset]}),i.jsx(lW,{children:f.alternativeName}),i.jsx(cW,{children:f.mainCities})]})}),[]),h=l.useCallback((f,g)=>g?`${g.alternativeName} (${g.namePretty})`:"",[]);return i.jsx(En,{footer:{confirmButton:{text:"Update time zone",disabled:!u||!r,onClick:c,tone:"primary"}},header:"Select time zone",id:"time-zone",onClose:t,width:1,children:i.jsxs(B,{padding:4,space:5,children:[i.jsx(E,{size:1,children:"The selected time zone will change how dates are represented in schedules."}),i.jsxs(B,{space:3,children:[i.jsxs(P,{align:"center",justify:"space-between",children:[i.jsxs(et,{space:2,children:[i.jsx(E,{size:1,weight:"semibold",children:"Time zone"}),m&&i.jsx(E,{muted:!0,size:1,children:"local time"})]}),!m&&i.jsx(E,{size:1,weight:"medium",children:i.jsx("a",{onClick:d,style:{cursor:"pointer"},children:"Select local time zone"})})]}),i.jsx(Cl,{fontSize:2,icon:Rn,id:"timezone",onChange:s,openButton:!0,options:xo,padding:4,placeholder:"Search for a city or time zone",popover:{boundaryElement:document.querySelector("body"),constrainSize:!0,placement:"bottom-start"},renderOption:p,renderValue:h,tabIndex:-1,value:r==null?void 0:r.value})]})]})})};function V1(){const[e,t]=l.useState(!1),n=l.useCallback(()=>{t(!1)},[]),a=l.useCallback(()=>{t(!0)},[]);return{visible:e,show:a,hide:n}}function uW(){const{visible:e,show:t,hide:n}=V1();return{DialogTimeZone:e?dW:null,dialogProps:{onClose:n,visible:e},dialogTimeZoneShow:t,hide:n}}const U1=e=>{const{useElementQueries:t}=e,{timeZone:n}=Gt(),{DialogTimeZone:a,dialogProps:r,dialogTimeZoneShow:o}=uW();return i.jsxs(i.Fragment,{children:[a&&i.jsx(a,{...r}),i.jsx(Ie,{content:`Displaying schedules in ${n.alternativeName} (GMT${n.offset})`,portal:!0,children:i.jsx("div",{children:t?i.jsxs(i.Fragment,{children:[i.jsx(I,{className:"button-small",children:i.jsx(Z,{icon:Dc,mode:"bleed",onClick:o,text:`${n.abbreviation}`})}),i.jsx(I,{className:"button-large",children:i.jsx(Z,{icon:Dc,mode:"bleed",onClick:o,text:`${n.alternativeName} (${n.namePretty})`})})]}):i.jsx(Z,{icon:Dc,mode:"bleed",onClick:o,text:`${n.alternativeName} (${n.namePretty})`})})})]})},z1=k(zu)`
  .button-small {
    display: block;
  }
  .button-large {
    display: none;
  }

  &[data-eq-min~='2'] {
    .button-small {
      display: none;
    }
    .button-large {
      display: block;
    }
  }
`,ui=()=>{},vn=ui(),bd=Object,We=e=>e===vn,ba=e=>typeof e=="function",yi=(e,t)=>({...e,...t}),mW=e=>ba(e.then),Is=new WeakMap;let pW=0;const Fo=e=>{const t=typeof e,n=e&&e.constructor,a=n==Date;let r,o;if(bd(e)===e&&!a&&n!=RegExp){if(r=Is.get(e),r)return r;if(r=++pW+"~",Is.set(e,r),n==Array){for(r="@",o=0;o<e.length;o++)r+=Fo(e[o])+",";Is.set(e,r)}if(n==bd){r="#";const s=bd.keys(e).sort();for(;!We(o=s.pop());)We(e[o])||(r+=o+":"+Fo(e[o])+",");Is.set(e,r)}}else r=a?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return r},La=new WeakMap,yd={},Ms={},Np="undefined",kc=typeof window!=Np,Su=typeof document!=Np,hW=()=>kc&&typeof window.requestAnimationFrame!=Np,H1=(e,t)=>{const n=La.get(e);return[()=>!We(t)&&e.get(t)||yd,a=>{if(!We(t)){const r=e.get(t);t in Ms||(Ms[t]=r),n[5](t,yi(r,a),r||yd)}},n[6],()=>!We(t)&&t in Ms?Ms[t]:!We(t)&&e.get(t)||yd]};let _u=!0;const fW=()=>_u,[Eu,Iu]=kc&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[ui,ui],gW=()=>{const e=Su&&document.visibilityState;return We(e)||e!=="hidden"},bW=e=>(Su&&document.addEventListener("visibilitychange",e),Eu("focus",e),()=>{Su&&document.removeEventListener("visibilitychange",e),Iu("focus",e)}),yW=e=>{const t=()=>{_u=!0,e()},n=()=>{_u=!1};return Eu("online",t),Eu("offline",n),()=>{Iu("online",t),Iu("offline",n)}},vW={isOnline:fW,isVisible:gW},xW={initFocus:bW,initReconnect:yW},Ab=!qu.useId,Ro=!kc||"Deno"in window,CW=e=>hW()?window.requestAnimationFrame(e):setTimeout(e,1),vd=Ro?l.useEffect:l.useLayoutEffect,xd=typeof navigator<"u"&&navigator.connection,Sb=!Ro&&xd&&(["slow-2g","2g"].includes(xd.effectiveType)||xd.saveData),Op=e=>{if(ba(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Fo(e):"",[e,t]};let wW=0;const Mu=()=>++wW,K1=0,W1=1,G1=2,TW=3;var so={__proto__:null,ERROR_REVALIDATE_EVENT:TW,FOCUS_EVENT:K1,MUTATE_EVENT:G1,RECONNECT_EVENT:W1};async function q1(...e){const[t,n,a,r]=e,o=yi({populateCache:!0,throwOnError:!0},typeof r=="boolean"?{revalidate:r}:r||{});let s=o.populateCache;const d=o.rollbackOnError;let c=o.optimisticData;const u=h=>typeof d=="function"?d(h):d!==!1,m=o.throwOnError;if(ba(n)){const h=n,f=[],g=t.keys();for(const b of g)!/^\$(inf|sub)\$/.test(b)&&h(t.get(b)._k)&&f.push(b);return Promise.all(f.map(p))}return p(n);async function p(h){const[f]=Op(h);if(!f)return;const[g,b]=H1(t,f),[v,y,x,w]=La.get(t),C=()=>{const F=v[f];return(ba(o.revalidate)?o.revalidate(g().data,h):o.revalidate!==!1)&&(delete x[f],delete w[f],F&&F[0])?F[0](G1).then(()=>g().data):g().data};if(e.length<3)return C();let T=a,j;const A=Mu();y[f]=[A,0];const M=!We(c),S=g(),N=S.data,D=S._c,_=We(D)?N:D;if(M&&(c=ba(c)?c(_,N):c,b({data:c,_c:_})),ba(T))try{T=T(_)}catch(F){j=F}if(T&&mW(T))if(T=await T.catch(F=>{j=F}),A!==y[f][0]){if(j)throw j;return T}else j&&M&&u(j)&&(s=!0,b({data:_,_c:vn}));if(s&&!j)if(ba(s)){const F=s(T,_);b({data:F,error:vn,_c:vn})}else b({data:T,error:vn,_c:vn});if(y[f][1]=Mu(),Promise.resolve(C()).then(()=>{b({_c:vn})}),j){if(m)throw j;return}return T}}const _b=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},jW=(e,t)=>{if(!La.has(e)){const n=yi(xW,t),a={},r=q1.bind(vn,e);let o=ui;const s={},d=(m,p)=>{const h=s[m]||[];return s[m]=h,h.push(p),()=>h.splice(h.indexOf(p),1)},c=(m,p,h)=>{e.set(m,p);const f=s[m];if(f)for(const g of f)g(p,h)},u=()=>{if(!La.has(e)&&(La.set(e,[a,{},{},{},r,c,d]),!Ro)){const m=n.initFocus(setTimeout.bind(vn,_b.bind(vn,a,K1))),p=n.initReconnect(setTimeout.bind(vn,_b.bind(vn,a,W1)));o=()=>{m&&m(),p&&p(),La.delete(e)}}};return u(),[e,r,u,o]}return[e,La.get(e)[4]]},kW=(e,t,n,a,r)=>{const o=n.errorRetryCount,s=r.retryCount,d=~~((Math.random()+.5)*(1<<(s<8?s:8)))*n.errorRetryInterval;!We(o)&&s>o||setTimeout(a,d,r)},AW=(e,t)=>Fo(e)==Fo(t),[Y1,SW]=jW(new Map),_W=yi({onLoadingSlow:ui,onSuccess:ui,onError:ui,onErrorRetry:kW,onDiscarded:ui,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Sb?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Sb?5e3:3e3,compare:AW,isPaused:()=>!1,cache:Y1,mutate:SW,fallback:{}},vW),EW=(e,t)=>{const n=yi(e,t);if(t){const{use:a,fallback:r}=e,{use:o,fallback:s}=t;a&&o&&(n.use=a.concat(o)),r&&s&&(n.fallback=yi(r,s))}return n},IW=l.createContext({}),MW="$inf$",X1=kc&&window.__SWR_DEVTOOLS_USE__,PW=X1?window.__SWR_DEVTOOLS_USE__:[],NW=()=>{X1&&(window.__SWR_DEVTOOLS_REACT__=qu)},OW=e=>ba(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],FW=()=>yi(_W,l.useContext(IW)),RW=e=>(t,n,a)=>e(t,n&&((...r)=>{const[o]=Op(t),[,,,s]=La.get(Y1);if(o.startsWith(MW))return n(...r);const d=s[o];return We(d)?n(...r):(delete s[o],d)}),a),DW=PW.concat(RW),$W=e=>function(...t){const n=FW(),[a,r,o]=OW(t),s=EW(n,o);let d=e;const{use:c}=s,u=(c||[]).concat(DW);for(let m=u.length;m--;)d=u[m](d);return d(a,r||s.fetcher||null,s)},LW=(e,t,n)=>{const a=t[e]||(t[e]=[]);return a.push(n),()=>{const r=a.indexOf(n);r>=0&&(a[r]=a[a.length-1],a.pop())}};NW();const Eb=qu.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Cd={dedupe:!0},BW=(e,t,n)=>{const{cache:a,compare:r,suspense:o,fallbackData:s,revalidateOnMount:d,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:m,refreshWhenOffline:p,keepPreviousData:h}=n,[f,g,b,v]=La.get(a),[y,x]=Op(e),w=l.useRef(!1),C=l.useRef(!1),T=l.useRef(y),j=l.useRef(t),A=l.useRef(n),M=()=>A.current,S=()=>M().isVisible()&&M().isOnline(),[N,D,_,F]=H1(a,y),R=l.useRef({}).current,$=We(s)?n.fallback[y]:s,O=(Y,z)=>{for(const ne in R){const ee=ne;if(ee==="data"){if(!r(Y[ee],z[ee])&&(!We(Y[ee])||!r(le,z[ee])))return!1}else if(z[ee]!==Y[ee])return!1}return!0},V=l.useMemo(()=>{const Y=!y||!t?!1:We(d)?M().isPaused()||o?!1:We(c)?!0:c:d,z=De=>{const Fe=yi(De);return delete Fe._k,Y?{isValidating:!0,isLoading:!0,...Fe}:Fe},ne=N(),ee=F(),fe=z(ne),Oe=ne===ee?fe:z(ee);let Se=fe;return[()=>{const De=z(N());return O(De,Se)?(Se.data=De.data,Se.isLoading=De.isLoading,Se.isValidating=De.isValidating,Se.error=De.error,Se):(Se=De,De)},()=>Oe]},[a,y]),H=qA.useSyncExternalStore(l.useCallback(Y=>_(y,(z,ne)=>{O(ne,z)||Y()}),[a,y]),V[0],V[1]),J=!w.current,q=f[y]&&f[y].length>0,oe=H.data,ie=We(oe)?$:oe,te=H.error,X=l.useRef(ie),le=h?We(oe)?X.current:oe:ie,me=q&&!We(te)?!1:J&&!We(d)?d:M().isPaused()?!1:o?We(ie)?!1:c:We(ie)||c,G=!!(y&&t&&J&&me),ce=We(H.isValidating)?G:H.isValidating,de=We(H.isLoading)?G:H.isLoading,pe=l.useCallback(async Y=>{const z=j.current;if(!y||!z||C.current||M().isPaused())return!1;let ne,ee,fe=!0;const Oe=Y||{},Se=!b[y]||!Oe.dedupe,De=()=>Ab?!C.current&&y===T.current&&w.current:y===T.current,Fe={isValidating:!1,isLoading:!1},Qe=()=>{D(Fe)},ht=()=>{const ue=b[y];ue&&ue[1]===ee&&delete b[y]},Q={isValidating:!0};We(N().data)&&(Q.isLoading=!0);try{if(Se&&(D(Q),n.loadingTimeout&&We(N().data)&&setTimeout(()=>{fe&&De()&&M().onLoadingSlow(y,n)},n.loadingTimeout),b[y]=[z(x),Mu()]),[ne,ee]=b[y],ne=await ne,Se&&setTimeout(ht,n.dedupingInterval),!b[y]||b[y][1]!==ee)return Se&&De()&&M().onDiscarded(y),!1;Fe.error=vn;const ue=g[y];if(!We(ue)&&(ee<=ue[0]||ee<=ue[1]||ue[1]===0))return Qe(),Se&&De()&&M().onDiscarded(y),!1;const se=N().data;Fe.data=r(se,ne)?se:ne,Se&&De()&&M().onSuccess(ne,y,n)}catch(ue){ht();const se=M(),{shouldRetryOnError:he}=se;se.isPaused()||(Fe.error=ue,Se&&De()&&(se.onError(ue,y,se),(he===!0||ba(he)&&he(ue))&&(!M().revalidateOnFocus||!M().revalidateOnReconnect||S())&&se.onErrorRetry(ue,y,se,_e=>{const Ne=f[y];Ne&&Ne[0]&&Ne[0](so.ERROR_REVALIDATE_EVENT,_e)},{retryCount:(Oe.retryCount||0)+1,dedupe:!0})))}return fe=!1,Qe(),!0},[y,a]),W=l.useCallback((...Y)=>q1(a,T.current,...Y),[]);if(vd(()=>{j.current=t,A.current=n,We(oe)||(X.current=oe)}),vd(()=>{if(!y)return;const Y=pe.bind(vn,Cd);let z=0;const ne=LW(y,f,(ee,fe={})=>{if(ee==so.FOCUS_EVENT){const Oe=Date.now();M().revalidateOnFocus&&Oe>z&&S()&&(z=Oe+M().focusThrottleInterval,Y())}else if(ee==so.RECONNECT_EVENT)M().revalidateOnReconnect&&S()&&Y();else{if(ee==so.MUTATE_EVENT)return pe();if(ee==so.ERROR_REVALIDATE_EVENT)return pe(fe)}});return C.current=!1,T.current=y,w.current=!0,D({_k:x}),me&&(We(ie)||Ro?Y():CW(Y)),()=>{C.current=!0,ne()}},[y]),vd(()=>{let Y;function z(){const ee=ba(u)?u(N().data):u;ee&&Y!==-1&&(Y=setTimeout(ne,ee))}function ne(){!N().error&&(m||M().isVisible())&&(p||M().isOnline())?pe(Cd).then(z):z()}return z(),()=>{Y&&(clearTimeout(Y),Y=-1)}},[u,m,p,y]),l.useDebugValue(le),o&&We(ie)&&y){if(!Ab&&Ro)throw new Error("Fallback data is required when using suspense in SSR.");j.current=t,A.current=n,C.current=!1;const Y=v[y];if(!We(Y)){const z=W(Y);Eb(z)}if(We(te)){const z=pe(Cd);We(le)||(z.status="fulfilled",z.value=!0),Eb(z)}else throw te}return{mutate:W,get data(){return R.data=!0,le},get error(){return R.error=!0,te},get isValidating(){return R.isValidating=!0,ce},get isLoading(){return R.isLoading=!0,de}}},VW=$W(BW);function UW({children:e}){const{enabled:t,isLoading:n}=cs("scheduledPublishing"),{scheduledPublishing:a}=Dt(),r=a.enabled,o=l.useMemo(()=>!r||n?{enabled:!1,mode:null}:{enabled:!0,mode:t?"default":"upsell"},[t,n,r]);return i.jsx(K0.Provider,{value:o,children:e})}function nr(){const e=l.useContext(K0);if(!e)throw new Error("useScheduledPublishingEnabled must be used within a ScheduledPublishingEnabledProvider");return e}function Ui(e){return(e==null?void 0:e.executedAt)||(e==null?void 0:e.executeAt)}function Pu({reverseOrder:e}={reverseOrder:!1}){return function(t,n){const a=Ui(t),r=Ui(n);return a===r?0:a===null?1:r===null?-1:(a>r?1:-1)*(e?-1:1)}}const lo=jc("useScheduleOperation");function zW(){const e=Xe({apiVersion:"2022-09-01"});return l.useMemo(()=>HW(e),[e])}function HW(e){const{dataset:t,projectId:n}=e.config();function a({date:c,documentId:u}){lo("_create:",u);const m=new Date(c);return m.setSeconds(0),m.setMilliseconds(0),e.request({body:{documents:[{documentId:u}],executeAt:m,name:m},method:"POST",uri:`/schedules/${n}/${t}`})}function r({scheduleId:c}){return lo("_delete:",c),e.request({method:"DELETE",uri:`/schedules/${n}/${t}/${c}`})}function o({scheduleIds:c}){lo("_deleteMultiple:",c);const u=c.map(m=>r({scheduleId:m}));return Promise.allSettled(u)}function s({scheduleId:c}){return lo("_publish:",c),e.request({method:"POST",uri:`/schedules/${n}/${t}/${c}/publish`})}function d({documentSchedule:c,scheduleId:u}){return lo("_update:",u,c),e.request({body:c,method:"PATCH",uri:`/schedules/${n}/${t}/${u}`})}return{create:a,delete:r,deleteMultiple:o,publish:s,update:d}}var Ra=(e=>(e.create="scheduleCreate",e.delete="scheduleDelete",e.deleteMultiple="scheduleDeleteMultiple",e.publish="schedulePublish",e.update="scheduleUpdate",e))(Ra||{});function Ib(e,t){return`${t} ${e}${t===1?"":"s"}`}const co=(e,t)=>new CustomEvent(e,t);function is(){const e=Vt(),{formatDateTz:t}=Gt(),n=zW();async function a({date:c,displayToast:u=!0,documentId:m}){try{const p=await n.create({date:c,documentId:m});window.dispatchEvent(co("scheduleCreate",{detail:{date:c,documentId:m}})),u&&p!=null&&p.executeAt&&e.push({closable:!0,description:i.jsx(Pn,{body:t({date:new Date(p.executeAt),includeTimeZone:!0,prefix:"Publishing on "}),title:"Schedule created"}),duration:15e3,status:"success"})}catch(p){u&&e.push({closable:!0,description:i.jsx(Pn,{body:dr(p),title:"Unable to create schedule"}),duration:15e3,status:"error"})}}async function r({displayToast:c=!0,schedule:u}){try{await n.delete({scheduleId:u==null?void 0:u.id}),window.dispatchEvent(co("scheduleDelete",{detail:{scheduleId:u==null?void 0:u.id}})),c&&e.push({closable:!0,description:i.jsx(Pn,{title:"Schedule deleted"}),status:"success"})}catch(m){c&&e.push({closable:!0,description:i.jsx(Pn,{body:dr(m),title:"Unable to delete schedule"}),duration:15e3,status:"error"})}}async function o({displayToast:c=!0,schedules:u}){try{const m=u.map(v=>v.id),p=await n.deleteMultiple({scheduleIds:m}),{fulfilledIds:h,rejectedReasons:f}=p.reduce((v,y,x)=>(y.status==="fulfilled"&&v.fulfilledIds.push(u[x].id),y.status==="rejected"&&v.rejectedReasons.push(`[${u[x].id}]: ${y.reason}`),v),{fulfilledIds:[],rejectedReasons:[]}),g=h.length,b=f.length;(h==null?void 0:h.length)>0&&window.dispatchEvent(co("scheduleDeleteMultiple",{detail:{scheduleIds:h}})),c&&((h==null?void 0:h.length)>0&&e.push({closable:!0,description:i.jsx(Pn,{title:`${Ib("schedule",g)} deleted`}),status:"success"}),(f==null?void 0:f.length)>0&&e.push({closable:!0,description:i.jsx(Pn,{body:f==null?void 0:f.toString(),title:`Unable to delete ${Ib("schedule",b)}`}),duration:15e3,status:"error"}))}catch(m){c&&e.push({closable:!0,description:i.jsx(Pn,{body:dr(m),title:"Unable to delete schedules"}),duration:15e3,status:"error"})}}async function s({displayToast:c=!0,schedule:u}){try{const m=u.id;await n.publish({scheduleId:m}),window.dispatchEvent(co("schedulePublish",{detail:{scheduleId:m}})),c&&e.push({closable:!0,description:i.jsx(Pn,{title:"Document published"}),status:"success"})}catch(m){c&&e.push({closable:!0,description:i.jsx(Pn,{body:dr(m),title:"Unable to publish schedule"}),duration:15e3,status:"error"})}}async function d({date:c,displayToast:u=!0,scheduleId:m}){try{await n.update({documentSchedule:{executeAt:c},scheduleId:m}),window.dispatchEvent(co("scheduleUpdate",{detail:{date:c,scheduleId:m}})),u&&e.push({closable:!0,description:i.jsx(Pn,{body:t({date:new Date(c),includeTimeZone:!0,prefix:"Publishing on "}),title:"Schedule updated"}),duration:15e3,status:"success"})}catch(p){u&&e.push({closable:!0,description:i.jsx(Pn,{body:dr(p),title:"Unable to update schedule"}),duration:15e3,status:"error"})}}return{createSchedule:a,deleteSchedule:r,deleteSchedules:o,publishSchedule:s,updateSchedule:d}}function KW(){const e=Xe({apiVersion:"2022-09-01"}),{dataset:t,projectId:n}=e.config();return`/schedules/${n}/${t}`}function WW(e){const t=Xe({apiVersion:"2022-09-01"});return l.useCallback(()=>t.request({query:e.params,method:"GET",uri:e.url}),[t,e])}const GW=[];function Ac({documentId:e,state:t}={}){const{mode:n}=nr(),a=l.useMemo(()=>({refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnFocus:!1,shouldRetryOnError:!1,refreshInterval:n==="default"?1e4:void 0,revalidateIfStale:n==="default",revalidateOnReconnect:n==="default"}),[n]),r=KW(),o=l.useMemo(()=>({params:{documentIds:e,state:t},url:r}),[r,e,t]),s=WW(o),{data:d,error:c,mutate:u}=VW(o,s,a),m=l.useCallback(b=>{u(v=>{var y;return{schedules:(y=v==null?void 0:v.schedules)==null?void 0:y.filter(x=>x.id!==b.detail.scheduleId)}},!0)},[u]),p=l.useCallback(b=>{u(v=>{var y;return{schedules:(y=v==null?void 0:v.schedules)==null?void 0:y.filter(x=>!b.detail.scheduleIds.includes(x.id))}},!0)},[u]),h=l.useCallback(b=>{u(v=>{const y=(v==null?void 0:v.schedules)||[],x=y.findIndex(w=>w.id===b.detail.scheduleId);return{schedules:[...y.slice(0,x),{...y[x],executeAt:new Date().toISOString(),state:"succeeded"},...y.slice(x+1)]}},!0)},[u]),f=l.useCallback(b=>{u(v=>{const y=(v==null?void 0:v.schedules)||[],x=y.findIndex(w=>w.id===b.detail.scheduleId);return{schedules:[...y.slice(0,x),{...y[x],executeAt:b.detail.date},...y.slice(x+1)]}},!0)},[u]);l.useEffect(()=>(window.addEventListener(Ra.delete,m),window.addEventListener(Ra.deleteMultiple,p),window.addEventListener(Ra.publish,h),window.addEventListener(Ra.update,f),()=>{window.removeEventListener(Ra.delete,m),window.removeEventListener(Ra.deleteMultiple,p),window.removeEventListener(Ra.publish,h),window.removeEventListener(Ra.update,f)}),[m,p,h,f]);const g=l.useMemo(()=>{var b;return(b=d==null?void 0:d.schedules)==null?void 0:b.sort(Pu())},[d==null?void 0:d.schedules]);return{error:c,isInitialLoading:!c&&!d,schedules:g||GW}}const qW=[];function YW({children:e,value:t}){const[n,a]=l.useState(t.sortBy||"executeAt"),{utcToCurrentZoneDate:r}=Gt(),o=l.useCallback(u=>function(m){const p=Ui(m);if(!p)return!1;const h=new Date(p),f=r(h);return ln(f,u)},[r]),s=l.useCallback(u=>function(m){return m.state===u},[]),d=l.useMemo(()=>t.schedules.filter(u=>t.selectedDate?o(t.selectedDate)(u):s(t.scheduleState)(u)).sort((u,m)=>{if(n==="createdAt")return u[n]<m[n]?1:-1;if(n==="executeAt"){const p=!(t.scheduleState==="scheduled"||t.selectedDate);return Pu({reverseOrder:p})(u,m)}return 1})||[],[s,t.schedules,t.scheduleState,t.selectedDate,n,o]),c=l.useCallback(u=>t.schedules.filter(o(u)).sort(Pu()),[t.schedules,o]);return i.jsx(W0.Provider,{value:{activeSchedules:d,schedules:t.schedules||qW,schedulesByDate:c,scheduleState:t.scheduleState,selectedDate:t.selectedDate,setSortBy:a,sortBy:n},children:e})}function rs(){const e=l.useContext(W0);if(e===void 0)throw new Error("useSchedules must be used within a SchedulesProvider");return e}function J1(e,t){return l.useMemo(()=>e.filter(n=>n.state===t),[e,t])}const XW=e=>{const{selected:t,schedules:n,state:a}=e,r=J1(n,a).length,o=r>0,s=a==="cancelled",{href:d,onClick:c}=j0({state:{state:a}});return i.jsx(He,{as:"a",href:d,mode:"bleed",onClick:c,selected:t,tone:s?"critical":"default",padding:2,children:i.jsxs(P,{gap:2,align:"center",children:[i.jsx(E,{size:1,weight:"medium",children:No[a].title}),o&&i.jsx(E,{size:0,children:r})]})})},JW=e=>{const{onClearDate:t,selectedDate:n}=e,{navigate:a}=Ho(),{schedules:r,scheduleState:o}=rs(),s=c=>{a(c)},d=J1(r,o);return i.jsxs(i.Fragment,{children:[i.jsxs(I,{display:["block","block","none"],children:[n&&i.jsx(Z,{iconRight:un,onClick:t,text:ya(n,"d MMMM yyyy"),tone:"primary"}),o&&i.jsx(ze,{button:i.jsx(Z,{iconRight:yA,mode:"ghost",text:`${No[o].title} (${(d==null?void 0:d.length)||0})`,tone:"default"}),id:"state",menu:i.jsx(Be,{style:{minWidth:"175px"},children:Oo.map(c=>i.jsx(ye,{iconRight:c===o?Gn:void 0,onClick:s.bind(void 0,{state:c}),text:No[c].title},c))}),placement:"bottom"})]}),i.jsxs(I,{display:["none","none","block"],children:[n&&i.jsx(Z,{iconRight:un,onClick:t,text:ya(n,"d MMMM yyyy"),tone:"primary"}),o&&i.jsx(P,{gap:2,children:Oo.map(c=>i.jsx(XW,{schedules:r,selected:o===c,state:c},c))})]})]})},ZW=k.img(e=>{const{media:t}=Re(e.theme),n=Zy(t,e.$direction,a=>({width:a==="row"?"50%":"100%",height:a==="row"?"auto":"180px"}));return ae`
    object-fit: cover;
    ${n}
  `}),QW=k(I)`
  margin: auto 0;
`,eG=[3,3,5];function Fp(e){var t;const{data:n,onPrimaryClick:a,onSecondaryClick:r,layout:o="vertical"}=e,s=["column","column",o==="horizontal"?"row":"column"];return i.jsx(U,{radius:3,overflow:"hidden",border:!0,children:i.jsxs(P,{direction:s,gap:2,children:[n.image&&i.jsx(ZW,{src:n.image.asset.url,alt:(t=n.image.asset.altText)!=null?t:"",$direction:s}),i.jsxs(QW,{paddingX:3,paddingY:o==="horizontal"?eG:3,children:[i.jsx(B,{space:4,children:i.jsx(wc,{blocks:n.descriptionText})}),i.jsxs(P,{gap:2,justify:"flex-end",marginTop:5,children:[n.secondaryButton.text&&i.jsx(Z,{mode:"bleed",text:n.secondaryButton.text,tone:"primary",iconRight:Wi,...n.secondaryButton.url&&{target:"_blank",rel:"noopener noreferrer",as:"a",href:n.secondaryButton.url},onClick:r}),i.jsx(Z,{text:n.ctaButton.text,tone:"primary",...n.ctaButton.url&&{target:"_blank",rel:"noopener noreferrer",as:"a",href:n.ctaButton.url},onClick:a})]})]})]})})}function os(){return mt().projectId}const Nr=Et({name:"Upsell Dialog Viewed",version:1,description:"User viewed the upsell dialog"}),Or=Et({name:"Upsell Dialog Dismissed",version:1,description:"User dismissed the upsell dialog"}),Fr=Et({name:"Upsell Dialog Upgrade CTA Clicked",version:1,description:'User clicked the "Upgrade" CTA in the upsell dialog'}),Rr=Et({name:"Upsell Dialog Learn More CTA Clicked",version:1,description:'User clicked the "Learn More" CTA in the upsell dialog'}),ii="scheduled_publishing",Mb={interpolate:/{{([\s\S]+?)}}/g},Pb="www.sanity.io";function tG(e){const[t,n]=l.useState(!1),[a,r]=l.useState(null),o=os(),s=ha(),d=Xe(qe),c=l.useMemo(()=>({dialogSecondaryClicked:()=>s.log(Rr,{feature:ii,type:"modal"}),dialogPrimaryClicked:()=>s.log(Fr,{feature:ii,type:"modal"}),panelViewed:g=>s.log(Nr,{feature:ii,type:"inspector",source:g}),panelDismissed:()=>s.log(Or,{feature:ii,type:"inspector"}),panelPrimaryClicked:()=>s.log(Fr,{feature:ii,type:"inspector"}),panelSecondaryClicked:()=>s.log(Rr,{feature:ii,type:"inspector"})}),[s]),u=l.useCallback(()=>{c.dialogPrimaryClicked()},[c]),m=l.useCallback(()=>{c.dialogSecondaryClicked()},[c]),p=l.useCallback(()=>{n(!1),s.log(Or,{feature:ii,type:"modal"})},[s]);l.useEffect(()=>{const g=d.observable.request({uri:"/journey/scheduled-publishing"}).subscribe({next:b=>{if(b)try{const v=Er(b.ctaButton.url,Mb);b.ctaButton.url=v({baseUrl:Pb,projectId:o});const y=Er(b.secondaryButton.url,Mb);b.secondaryButton.url=y({baseUrl:Pb,projectId:o}),r(b)}catch{}},error:()=>{}});return()=>{g.unsubscribe()}},[d,o]);const h=l.useCallback(g=>{n(!0),s.log(Nr,{feature:ii,type:"modal",source:g})},[s]),f=l.useMemo(()=>({upsellDialogOpen:t,handleOpenDialog:h,upsellData:a,telemetryLogs:c}),[h,t,a,c]);return i.jsxs(ov.Provider,{value:f,children:[e.children,a&&t&&i.jsx(Ip,{data:a,onClose:p,onPrimaryClick:u,onSecondaryClick:m})]})}function Z1(){return l.useContext(ov)}const nG=e=>i.jsxs("svg",{width:"100",height:"100",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[i.jsx("path",{d:"M54 26C54 28.7614 49.0751 31 43 31C36.9249 31 32 28.7614 32 26C32 23.2386 36.9249 7 43 7C49.0751 7 54 23.2386 54 26Z",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M65 71.5V57M65 71.5L60.5789 69.0132M65 71.5L60.5789 73.9868M65 57L57 52.5L54 54.1875M65 57V42.5M65 57L57 47M65 57L58.1586 60.8483M65 57L60.5789 67.5M65 42.5L57 38L54 39.6875M65 42.5L57 47M65 42.5V27.5M57 47L65 27.5M57 47L54 39.6875M57 47L54 45.3125M57 47L54 50.75M57 23L65 27.5M57 23L54 24.6875V39.6875M57 23V60M65 27.5L57 32L54 30.3125",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M54 76C54 78.7614 49.0751 81 43 81C36.9249 81 32 78.7614 32 76M54 76H60.5V63L54 57M54 76V57M32 76H25V63L32 57M32 76V57M32 26V57M54 26V57M54 45C54 47.7614 49.0751 50 43 50V35C49.0751 35 54 32.7614 54 30",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M43 45.5701H44.8976L45.8465 43.1981L46.9679 42.7335L49.3162 43.7399L50.658 42.3981L49.6516 40.0499L50.1161 38.9284L52.4882 37.9795V36.0819L50.1161 35.1331L49.6516 34.0116M47.1334 34.9653C47.5197 35.5597 47.7441 36.269 47.7441 37.0307C47.7441 39.1268 46.0449 40.826 43.9488 40.826C43.6212 40.826 43.3033 40.7845 43 40.7064",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinejoin:"round"}),i.jsx("path",{d:"M63.5464 78.6739L64.9606 78.0321L67.4355 78.5135L68.6174 78.2913L69.6174 77.1566H71.6174L72.6174 78.2913L73.7994 78.5135L76.2743 78.0321L77.6885 78.6739M63.5464 78.6739L64.607 79.7972L64.1174 80.3336L63.5464 80.4373M63.5464 78.6739V80.4373M77.6885 78.6739L76.6278 79.7972L77.1174 80.3336L77.6885 80.4373M77.6885 78.6739V80.4373M63.5464 80.4373L61.6174 80.7875V81.6952L64.1174 82.1491L64.607 82.6855L63.5464 83.8088L64.9606 84.4506L67.4355 83.9693L68.6174 84.1915L69.6174 85.3261H71.6174L72.6174 84.1915L73.7994 83.9693L76.2743 84.4506L77.6885 83.8088L76.6278 82.6855L77.1174 82.1491L79.6174 81.6952V80.7875L77.6885 80.4373",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M79.6174 81.4647V84.7162L77.6885 85.0664M76.2743 87.4716L77.6885 86.8298V85.0664M76.2743 87.4716L73.7994 86.9902L72.6174 87.2124L71.6174 88.3471M76.2743 87.4716V84.7162M61.6174 81.4647V84.7162L63.5464 85.0664M71.6174 88.3471H69.6174M71.6174 88.3471V85.3261M69.6174 88.3471L68.6174 87.2124L67.4355 86.9902L64.9606 87.4716M69.6174 88.3471V85.3261M64.9606 87.4716L64.2535 87.1507L63.5464 86.8298V85.0664M64.9606 87.4716V84.6825M63.5464 84.039V85.0664M77.6885 84.039V85.0664",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M73.6174 81.2412C73.6174 81.9932 72.2743 82.6028 70.6174 82.6028C68.9606 82.6028 67.6174 81.9932 67.6174 81.2412C67.6174 80.4892 68.9606 79.8796 70.6174 79.8796C72.2743 79.8796 73.6174 80.4892 73.6174 81.2412Z",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M90 85.3616C90 86.1136 88.6569 86.7232 87 86.7232C85.3431 86.7232 84 86.1136 84 85.3616M90 85.3616C90 84.6096 88.6569 84 87 84C85.3431 84 84 84.6096 84 85.3616M90 85.3616V87.3616C90 88.1136 88.6569 88.7232 87 88.7232C85.3431 88.7232 84 88.1136 84 87.3616V85.3616",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M82 89.8648C82 90.3425 81.3284 90.7297 80.5 90.7297C79.6716 90.7297 79 90.3425 79 89.8648M82 89.8648C82 89.3872 81.3284 89 80.5 89C79.6716 89 79 89.3872 79 89.8648M82 89.8648V91.1352C82 91.6128 81.3284 92 80.5 92C79.6716 92 79 91.6128 79 91.1352V89.8648",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M52.7555 46.7289L52.5381 45.0136L51.2951 44.6903L50.2695 46.0824L49.4558 46.1956L48.0892 45.1364L46.9817 45.7867L47.2408 47.4962L46.7455 48.1517L45.0302 48.3691L44.7069 49.612M51.1084 47.9593C49.8968 47.6442 48.6622 48.2485 48.1434 49.3385",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M39 80.5L38 83.5C38 84.8807 40.2386 86 43 86C45.7614 86 48 84.8807 48 83.5L47 80.5",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M32 77L31 80C31 81.3807 33.2386 82.5 36 82.5C36.9107 82.5 37.7646 82.3783 38.5 82.1655",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M54 77L55 80C55 81.3807 52.7614 82.5 50 82.5C49.0893 82.5 48.2354 82.3783 47.5 82.1655",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Nb=e=>i.jsxs("svg",{width:"100",height:"100",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[i.jsx("path",{d:"M35 84.5L41.7308 67H50V69.5M65 84.5L58.2692 67M32 65H42.5H50H57.5H81V23H19V65H24",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M84 16V23H16V16M84 16H16M84 16L82 14H18L16 16",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M24 65H18L17 67H83L82 65H32",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("circle",{cx:"50",cy:"72",r:"2",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M24 63C24 61.8954 24.8954 61 26 61H30C31.1046 61 32 61.8954 32 63V67H24V63Z",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M24 65C24 63.8954 24.8954 63 26 63H30C31.1046 63 32 63.8954 32 65V67H24V65Z",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M28 44.9975C31.0617 44.62 33.5601 42.4793 35.2478 39.995C36.199 38.5947 36.9116 37.0761 36.9653 35.3597C36.9973 34.3355 36.8332 33.1459 35.8944 32.5454C35.3035 32.1675 34.4935 32.0285 33.8044 32.0022C32.7788 31.9631 32.1643 32.4357 31.8489 33.4197C30.3123 38.2145 33.0184 42.7025 36.3911 45.8977C38.1152 47.531 40.0746 48.9275 42.1179 50.1294C43.9867 51.2287 46.003 52.2595 48.1189 52.7885C48.9466 52.9954 50.4951 53.3913 51.3211 52.954C52.3579 52.4051 51.8285 49.7323 51.7091 48.9809C51.3862 46.9486 50.7293 45.0311 49.8726 43.1662C49.3791 42.0918 48.7948 40.8004 47.9999 39.8967C47.4959 39.3237 47.1331 39.4889 47.1101 40.2278C47.0699 41.5204 47.5768 42.7535 48.3103 43.7973C50.633 47.1024 54.4924 49.4656 58.2792 50.6985C59.9643 51.2471 61.8953 51.7306 63.6853 51.6193C65.3845 51.5137 65.6225 50.1321 65.7287 48.655C65.9958 44.9405 64.9629 40.7695 62.6403 37.7963C61.615 36.4839 60.3547 35.6334 58.6879 35.4476C57.7554 35.3437 56.665 35.3303 55.7391 35.5097C54.8073 35.6903 54.0162 36.297 54.3371 37.3462C54.6464 38.3572 55.8044 39.0666 56.6444 39.5759C57.983 40.3876 59.4813 40.9898 61.0262 41.2624C63.2658 41.6576 65.1745 41.1715 67.141 40.1346C67.9966 39.6835 68.8825 39.1795 69.4379 38.3861",stroke:"#7B8CA8",strokeWidth:"1.2"})]}),aG=e=>i.jsxs("svg",{width:"100",height:"100",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[i.jsx("path",{d:"M35.5034 34.5961C35.6531 34.1763 35.8628 33.792 36.1352 33.4478C37.6813 31.4827 40.9503 31.2145 44.9898 32.3554M35.5034 34.5961L24.12 78.5806C23.4656 81.1092 26.1309 83.2083 28.4357 81.9796L68.4485 60.6484M35.5034 34.5961C34.2315 38.1622 37.2902 44.2842 43.0792 50.0342M68.4485 60.6484C68.8174 60.4078 69.1391 60.118 69.4084 59.7777C70.9736 57.7883 70.4521 54.4677 68.3472 50.7308M68.4485 60.6484C65.1795 62.7806 58.1999 61.0522 51.0413 56.4338M49.3164 55.2667C48.6043 54.7622 47.8933 54.2299 47.1867 53.6707C46.3331 52.9953 45.5161 52.3044 44.7387 51.6037M49.3164 55.2667C49.8913 55.674 50.4669 56.0632 51.0413 56.4338M49.3164 55.2667C52.3445 53.1871 58.7283 49.8329 66.4965 47.8874M51.0413 56.4338C55.9305 53.432 62.4593 51.6876 68.3472 50.7308M43.0792 50.0342C43.6098 50.5612 44.1634 51.0852 44.7387 51.6037M43.0792 50.0342C44.4006 45.7138 45.8116 38.387 44.9898 32.3554M44.7387 51.6037C47.6743 44.2968 48.7135 38.3712 48.6643 33.6916M63.9622 36.487C63.2905 34.23 62.35 29.5386 63.9622 28.8293C65.9774 27.9426 68.5569 33.5045 70.8139 32.2148C73.0709 30.9251 69.4435 27.7814 70.8139 25.2019C72.1842 22.6224 79.6002 28.4262 81.2123 23.4285C82.502 19.4304 79.7614 16.6574 78.2298 15.7708M66.4965 47.8874C70.7697 46.8171 75.462 46.1731 80.2449 46.4019L80.2449 49.7068C77.5329 49.6936 73.1535 49.9498 68.3472 50.7308M66.4965 47.8874C64.45 45.1054 61.6564 42.2264 58.3003 39.5859C55.0633 37.039 51.7429 35.0416 48.6643 33.6916M48.6643 33.6916C48.5822 25.8794 45.4671 21.5396 43.0792 20.043L39.941 23.4285C42.9851 25.0774 44.4569 28.4441 44.9898 32.3554",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M32.2094 47.3001C31.0515 50.5465 34.6857 56.6214 40.9597 61.5862C47.2404 66.5562 53.9958 68.696 56.8839 66.8122",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M28.8867 60.1903C28.1245 62.3275 30.5169 66.3267 34.6472 69.595C38.7818 72.8669 43.229 74.2755 45.1303 73.0354",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M26.2718 70.2225C25.8147 71.5039 27.2491 73.9016 29.7254 75.8611C32.2044 77.8228 34.8707 78.6673 36.0106 77.9238",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("path",{d:"M28.0529 44.1724C29.5354 43.1981 32.3735 40.6904 31.8652 38.4538C31.2298 35.6581 22.8425 38.9622 22.7155 36.5477C22.5884 34.1331 27.0361 30.575 26.909 28.6688C26.7819 26.7626 18.6489 30.8291 18.6489 26.8896C18.6489 23.738 21.36 22.1029 22.7155 21.6793",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("rect",{x:"21.8833",y:"50.1122",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 21.8833 50.1122)",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("rect",{x:"16.0527",y:"36.722",width:"3.03077",height:"3.03077",transform:"rotate(4.36851 16.0527 36.722)",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("rect",{x:"27.9448",y:"22.8353",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 27.9448 22.8353)",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("rect",{x:"53.7065",y:"33.443",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 53.7065 33.443)",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("rect",{x:"67.3447",y:"13.743",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 67.3447 13.743)",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("rect",{x:"74.9219",y:"54.6584",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 74.9219 54.6584)",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("rect",{x:"70.3755",y:"66.7814",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 70.3755 66.7814)",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("rect",{x:"77.9526",y:"78.9045",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 77.9526 78.9045)",stroke:"#7B8CA8",strokeWidth:"1.2"}),i.jsx("rect",{x:"82.4985",y:"62.2353",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 82.4985 62.2353)",stroke:"#7B8CA8",strokeWidth:"1.2"})]}),iG=e=>{const{scheduleState:t,selectedDate:n}=e;let a,r,o;switch(t){case"succeeded":{r="When a scheduled document is successfully published it moves to this list view.",o="No completed scheduled publications ... yet",a=nG;break}case"cancelled":{r="Schedules can fail for several reasons, for example when their documents are deleted. When they do, they show up here.",o="No failed scheduled publications",a=aG;break}case"scheduled":{r="When editing a document, create a new scheduled publication from the menu next to the Publish button.",o="No upcoming scheduled publications",a=Nb;break}}return n&&(r="No schedules for this date.",o=ya(n,"d MMMM yyyy"),a=Nb),i.jsx(U,{paddingX:6,paddingBottom:8,paddingTop:7,radius:2,shadow:1,children:i.jsxs(B,{space:4,children:[i.jsx(P,{justify:"center",children:a&&i.jsx(a,{})}),i.jsxs(B,{space:4,children:[o&&i.jsx(An,{align:"center",size:1,children:o}),r&&i.jsx(E,{align:"center",size:1,children:r})]})]})})},rG=e=>e.liveEdit===!0;function oG(e,t,n,a){const r=rG(t)?re({snapshot:null}):e.observeForPreview({_type:"reference",_ref:kn(n)},t),o=e.observeForPreview({_type:"reference",_ref:ft(n)},t);return Ht([r,o]).pipe(K(([s,d])=>({draft:s.snapshot?{title:a,...s.snapshot||{}}:null,isLoading:!1,published:d.snapshot?{title:a,...d.snapshot||{}}:null})),Lt({draft:null,isLoading:!0,published:null}))}function Sc(e){var t;return(t=e.documents)==null?void 0:t[0]}function Q1(e){var t;return(t=Sc(e))==null?void 0:t.documentId.replaceAll("drafts.","")}function sG(e,t){const n=gn(),[a,r]=l.useState({});return l.useEffect(()=>{if(!t)return;const o=oG(n,t,e,"").subscribe(s=>{r(s)});return()=>{o==null||o.unsubscribe()}},[n,t,e]),a}function ot(){return mt().schema}function eT(e){const t=Sc(e),n=ot(),a=t.documentType;return l.useMemo(()=>{if(a)return n.get(a)},[a,n])}function lG(e){const t=ot();return l.useMemo(()=>t.get(e),[e,t])}const cG=k(zu)`
  .date-small {
    display: inline;
  }
  .date-medium {
    display: none;
  }
  .date-large {
    display: none;
  }

  &[data-eq-min~='1'] {
    .date-small {
      display: none;
    }
    .date-medium {
      display: inline;
    }
    .date-large {
      display: none;
    }
  }

  &[data-eq-min~='2'] {
    .date-small {
      display: none;
    }
    .date-medium {
      display: none;
    }
    .date-large {
      display: inline;
    }
  }
`;function dG({children:e,value:t}){return i.jsx(sv.Provider,{value:t,children:e})}function uG(){const e=l.useContext(sv);if(e===void 0)throw new Error("useDocumentActionProps must be used within a DocumentActionPropsProvider");return e}function tT(e){const[t,n]=l.useState(!1),[a,r]=l.useState(e&&e!=null&&e.executeAt?{date:e.executeAt}:null),o=l.useCallback(s=>{const d=(e==null?void 0:e.executeAt)&&new Date(e.executeAt).getTime()===new Date(s==null?void 0:s.date).getTime();r(s),n(!d)},[e==null?void 0:e.executeAt]);return{formData:a,isDirty:t,onFormChange:o}}function mG(e){const{date:t,focused:n,isCurrentMonth:a,isToday:r,customValidation:o,onSelect:s,selected:d}=e,c=l.useMemo(()=>o?o(Xs(t)):!0,[t,o]),u=l.useCallback(()=>{c&&s(t)},[t,c,s]);return i.jsx("div",{"aria-selected":d,"data-ui":"CalendarDay",children:i.jsx(U,{"aria-label":t.toDateString(),"aria-pressed":d,as:"button",__unstable_focusRing:!0,"data-weekday":!0,"data-focused":n?"true":"",disabled:!c,role:"button",tabIndex:-1,onClick:u,padding:3,radius:2,selected:d,tone:r||d?"primary":"default",children:i.jsx(E,{muted:!d&&!a,style:{textAlign:"center"},weight:a?"medium":"regular",children:t.getDate()})})})}const pG=["January","February","March","April","May","June","July","August","September","October","November","December"],hG=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fG=Lo(0,24),gG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],bG=[1,2,3,4,5,6],yG=e=>{const t=Ol(e);return Fl({start:t,end:Rl(t)})},vG=e=>e.map(t=>[t,...bG.map(n=>gt(t,n))]),xG=e=>vG(yG(e)).map(t=>({number:_l(t[0]),days:t}));function CG(e){const{getCurrentZoneDate:t}=Gt(),{customValidation:n}=e;return i.jsx(I,{"aria-hidden":e.hidden||!1,"data-ui":"CalendarMonth",children:i.jsxs(Ze,{gap:1,style:{gridTemplateColumns:"repeat(7, minmax(44px, 46px))"},children:[hG.map(a=>i.jsx(I,{paddingY:2,children:i.jsx(E,{size:1,weight:"medium",style:{textAlign:"center"},children:a})},a)),xG(e.date).map((a,r)=>a.days.map((o,s)=>{const d=e.focused&&ln(o,e.focused),c=e.selected&&ln(o,e.selected),u=ln(o,t()),m=e.focused&&Al(o,e.focused);return i.jsx(mG,{date:o,focused:d,isCurrentMonth:m,isToday:u,customValidation:n,onSelect:e.onSelect,selected:c},`${r}-${s}`)}))]})})}const wG={dayPresets:!1,timePresets:!1},TG=({onChange:e,...t})=>{const n=l.useCallback(a=>{const r=parseInt(a.currentTarget.value,10);isNaN(r)||e(r)},[e]);return i.jsx(uc,{...t,onChange:n,inputMode:"numeric"})},jG=i.jsx("span",{"data-preserve-focus":!0,style:{overflow:"hidden",position:"absolute",outline:"none"},tabIndex:-1}),kG=l.forwardRef(function(e,t){const{getCurrentZoneDate:n,zoneDateToUtc:a}=Gt(),{selectTime:r,onFocusedDateChange:o,selectedDate:s=n(),focusedDate:d=s,timeStep:c=1,onSelect:u,customValidation:m,...p}=e,h=l.useCallback(M=>o(a(M)),[o,a]),f=l.useCallback(M=>h(By(Vy(d,M),1)),[d,h]),g=l.useCallback(M=>f(Number(M.currentTarget.value)),[f]),b=l.useCallback(M=>h(wl(d,M)),[d,h]),v=l.useCallback(M=>h(Uy(d,M)),[d,h]),y=l.useCallback(M=>{u(a(Va(Di(M,s.getHours()),s.getMinutes())))},[u,s,a]),x=l.useCallback(M=>{const S=Number(M.currentTarget.value);u(a(Va(s,S)))},[u,s,a]),w=l.useCallback(M=>{const S=Number(M.currentTarget.value);u(a(Di(s,S)))},[u,s,a]);l.useCallback((M,S)=>{u(a(Di(Va(s,S),M)))},[u,s,a]);const C=l.useRef(null);l.useImperativeHandle(t,()=>C.current);const T=l.useCallback(()=>{var M,S;(S=(M=C.current)==null?void 0:M.querySelector('[data-focused="true"]'))==null||S.focus()},[C]),j=l.useCallback(M=>{var S,N;if(gG.includes(M.key)){if(M.preventDefault(),M.currentTarget.hasAttribute("data-calendar-grid")){T();return}M.key==="ArrowUp"&&o(a(gt(d,-7))),M.key==="ArrowDown"&&o(a(gt(d,7))),M.key==="ArrowLeft"&&o(a(gt(d,-1))),M.key==="ArrowRight"&&o(a(gt(d,1))),(N=(S=C.current)==null?void 0:S.querySelector("[data-preserve-focus]"))==null||N.focus()}},[a,C,T,o,d]);l.useEffect(()=>{T()},[T]),l.useEffect(()=>{var M;(M=document.activeElement)!=null&&M.matches("[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]")&&T()},[C,T,d]);const A=l.useCallback(()=>u(new Date),[u]);return i.jsxs(I,{"data-ui":"Calendar",...p,ref:C,children:[i.jsxs(I,{padding:2,children:[i.jsxs(P,{children:[i.jsx(I,{flex:1,children:i.jsx(AG,{moveFocusedDate:b,onChange:g,value:d==null?void 0:d.getMonth()})}),i.jsx(I,{marginLeft:2,children:i.jsx(SG,{moveFocusedDate:b,onChange:v,value:d.getFullYear()})})]}),i.jsxs(I,{"data-calendar-grid":!0,onKeyDown:j,marginTop:2,overflow:"hidden",tabIndex:0,children:[i.jsx(CG,{date:d,focused:d,customValidation:m,onSelect:y,selected:s}),jG]})]}),r&&i.jsxs(I,{padding:2,style:{borderTop:"1px solid var(--card-border-color)"},children:[i.jsxs(P,{align:"center",children:[i.jsxs(P,{align:"center",flex:1,children:[i.jsx(I,{children:i.jsx(ka,{"aria-label":"Select hour",value:s==null?void 0:s.getHours(),onChange:w,children:fG.map(M=>i.jsx("option",{value:M,children:`${M}`.padStart(2,"0")},M))})}),i.jsx(I,{paddingX:1,children:i.jsx(E,{children:":"})}),i.jsx(I,{children:i.jsx(ka,{"aria-label":"Select minutes",value:s==null?void 0:s.getMinutes(),onChange:x,children:Lo(0,60,c).map(M=>i.jsx("option",{value:M,children:`${M}`.padStart(2,"0")},M))})})]}),i.jsx(I,{marginLeft:2,children:i.jsx(He,{text:"Set to current time",mode:"bleed",onClick:A})})]}),wG.timePresets]})]})});function AG(e){const{moveFocusedDate:t,onChange:n,value:a}=e,r=l.useCallback(()=>t(-1),[t]),o=l.useCallback(()=>t(1),[t]);return i.jsxs(P,{flex:1,children:[i.jsx(He,{"aria-label":"Go to previous month",onClick:r,mode:"bleed",icon:Vr,paddingX:2,radius:0}),i.jsx(I,{flex:1,children:i.jsx(ka,{radius:0,value:a,onChange:n,children:pG.map((s,d)=>i.jsx("option",{value:d,children:s},d))})}),i.jsx(He,{"aria-label":"Go to next month",mode:"bleed",icon:_a,onClick:o,paddingX:2,radius:0})]})}function SG(e){const{moveFocusedDate:t,onChange:n,value:a}=e,r=l.useCallback(()=>t(-12),[t]),o=l.useCallback(()=>t(12),[t]);return i.jsxs(P,{children:[i.jsx(He,{"aria-label":"Previous year",onClick:r,mode:"bleed",icon:Vr,paddingX:2,radius:0}),i.jsx(TG,{value:a,onChange:n,radius:0,style:{width:65}}),i.jsx(He,{"aria-label":"Next year",onClick:o,mode:"bleed",icon:_a,paddingX:2,radius:0})]})}const _G=l.forwardRef(function(e,t){const{utcToCurrentZoneDate:n}=Gt(),{value:a=new Date,onChange:r,customValidation:o,...s}=e,[d,c]=l.useState(),u=l.useCallback(m=>{r(m),c(void 0)},[r]);return i.jsx(kG,{...s,ref:t,selectedDate:n(a),onSelect:u,focusedDate:n(d||a),onFocusedDateChange:c,customValidation:o})}),EG=l.forwardRef(function(e,t){const{value:n,inputValue:a,customValidation:r,onInputChange:o,onChange:s,selectTime:d,timeStep:c,...u}=e,[m,p]=l.useState(null),h=l.useRef(null),f=l.useRef(null);l.useImperativeHandle(t,()=>h.current);const[g,b]=l.useState(!1),v=Wu();vt(()=>b(!1),[m]);const y=l.useCallback(()=>{var T,j;(T=h.current)==null||T.focus(),(j=h.current)==null||j.select()},[h]),x=l.useCallback(T=>{T.key==="Escape"&&b(!1)},[]),w=l.useCallback(()=>b(!0),[]),C=i.jsx(I,{style:{padding:"5px"},children:i.jsx(He,{ref:f,icon:Qt,mode:"bleed",padding:2,onClick:w,style:{display:"block"},"data-testid":"select-date-button"})});return i.jsx(uc,{ref:h,...u,value:a,onChange:o,suffix:g?i.jsx(Tl,{zOffset:1e3,children:i.jsx(rt,{constrainSize:!0,content:i.jsx(I,{overflow:"auto",children:i.jsx(qa,{onDeactivation:y,children:i.jsx(_G,{selectTime:d,timeStep:c,onKeyUp:x,value:n,onChange:s,customValidation:r})})}),"data-testid":"date-input-dialog",fallbackPlacements:["bottom","bottom-start","top-end","top","top-start"],floatingBoundary:v.element,open:!0,placement:"bottom-end",portal:!0,radius:2,ref:p,children:C})}):C})}),IG=l.forwardRef(function(e,t){const{value:n,markers:a,title:r,description:o,placeholder:s,parseInputValue:d,formatInputValue:c,deserialize:u,serialize:m,selectTime:p,timeStep:h,readOnly:f,level:g,onChange:b,customValidation:v,...y}=e,[x,w]=l.useState(null);l.useEffect(()=>{w(null)},[n]);const{zoneDateToUtc:C}=Gt(),T=typeof n>"u",j=l.useCallback(F=>{const R=F.currentTarget.value,$=R===""?null:d(R);$===null?(b(null),T&&x&&w(null)):$.isValid?b(m(C($.date))):w(R)},[T,C,x,m,b,d]),A=l.useCallback(F=>{b(F?m(F):null)},[m,b]),M=l.useRef(null);l.useImperativeHandle(t,()=>M.current);const S=l.useId(),N=x?d(x):n?u(n):null,D=x||(N!=null&&N.isValid?c(N.date):n),_=l.useMemo(()=>a.map(F=>{var R,$;return{level:F.level,path:F.path,message:($=F.message)!=null?$:(R=F.item)==null?void 0:R.message}}),[a]);return i.jsx(Xi,{validation:N!=null&&N.error?[..._,{level:"error",message:N.error,path:[]}]:_,title:r,level:g,description:o,inputId:S,children:f?i.jsx(nn,{value:D,readOnly:!0}):i.jsx(EG,{...y,id:S,selectTime:p,timeStep:h,placeholder:s||`e.g. ${c(new Date)}`,ref:M,value:N==null?void 0:N.date,inputValue:D||"",readOnly:!!f,onInputChange:j,onChange:A,customValidity:N==null?void 0:N.error,customValidation:v})})});function MG(e){return e instanceof Date&&!isNaN(e.valueOf())}function PG(e={}){return{customValidation:e.customValidation||function(){return!0},customValidationMessage:e.customValidationMessage||"Invalid date.",calendarTodayLabel:e.calendarTodayLabel||"Today",timeStep:"timeStep"in e&&Number(e.timeStep)||1}}function nT(e){return e.toISOString()}function NG(e){const t=new Date(e);return MG(t)?{isValid:!0,date:t}:{isValid:!1,error:`Invalid date value: "${e}"`}}function OG(e,t){if(!t||t===1)return e;const n=C0(e),a=w0(n),r=a%t;return nT(r!==0?Va(n,a-r):n)}const FG=l.forwardRef(function(e,t){const{type:n,onChange:a,...r}=e,{title:o,description:s,placeholder:d}=n,{scheduledPublishing:c}=Dt(),u=c.inputDateTimeFormat,{getCurrentZoneDate:m,timeZone:p}=Gt(),{customValidation:h,customValidationMessage:f,timeStep:g}=PG(n.options),b=l.useCallback(x=>{let w=x;w!==null&&g>1&&(w=OG(w,g)),a(w)},[a,g]),v=l.useCallback(x=>B1(x,p.name,`${u}`),[u,p.name]),y=l.useCallback(x=>{const w=Yu(x,`${u}`,m());return pi(w)?h(w)?{isValid:!0,date:w}:{isValid:!1,error:f}:{isValid:!1,error:`Invalid date. Must be in the format "${u}"`}},[h,f,m,u]);return i.jsx(IG,{...r,onChange:b,ref:t,selectTime:!0,timeStep:g,title:o,description:s,placeholder:d,serialize:nT,deserialize:NG,formatInputValue:v,customValidation:h,parseInputValue:y})}),RG=e=>{const{onChange:t,value:n}=e,{getCurrentZoneDate:a}=Gt(),[r,o]=l.useState();return i.jsx(B,{space:4,children:i.jsx(U,{children:i.jsx(FG,{level:0,markers:[],onChange:s=>{s&&t&&(t({date:s}),o(s))},type:{name:"date",options:{customValidation:s=>s>a(),customValidationMessage:"Date cannot be in the past."},title:"Date and time"},value:r===void 0?n==null?void 0:n.date:r})})})};function aT(e){const{onChange:t,value:n}=e;return i.jsxs(B,{space:4,children:[e.children,i.jsx(RG,{onChange:t,value:n})]})}const iT=e=>{const{title:t}=e;return i.jsx(z1,{children:i.jsxs(P,{align:"center",children:[t,i.jsx("input",{style:{opacity:0,position:"absolute",width:0},tabIndex:-1,type:"button"}),i.jsx(I,{marginLeft:2,style:{marginTop:"-1em",marginBottom:"-1em"},children:i.jsx(U1,{useElementQueries:!0})})]})})},DG=e=>{const{onClose:t,schedule:n}=e,{updateSchedule:a}=is(),{formData:r,isDirty:o,onFormChange:s}=tT(n),d=l.useCallback(()=>{r!=null&&r.date&&a({date:r.date,scheduleId:n.id}).then(t)},[n.id,a,t,r==null?void 0:r.date]);return i.jsx(En,{footer:{confirmButton:{text:"Update",disabled:!o,onClick:d}},header:i.jsx(iT,{title:"Edit schedule"}),id:"time-zone",onClose:t,width:1,children:i.jsx(aT,{onChange:s,value:r})})};function rT(e){const{visible:t,show:n,hide:a}=V1();return{DialogScheduleEdit:t?DG:null,dialogProps:{onClose:a,schedule:e,visible:t},dialogScheduleEditShow:n,hide:a}}const $G=[];function bl({currentUser:e,context:t}){const{t:n}=L(),a=Kr({style:"short",type:"unit"}),r=(e==null?void 0:e.roles)||$G,o=l.useCallback(()=>i.jsx(i.Fragment,{children:a.formatToParts(r.map(s=>s.title||pn(s.name))).map((s,d)=>s.type==="element"?i.jsx("code",{children:s.value},`${s.value}-${d}`):i.jsx(l.Fragment,{children:s.value},`${s.value}-${d}`))}),[r,a]);return i.jsxs(I,{children:[i.jsxs(et,{space:2,children:[i.jsx(E,{size:0,children:i.jsx(Li,{})}),i.jsx(E,{size:1,weight:"medium",children:n("insufficient-permissions-message.title")})]}),i.jsx(et,{marginTop:4,children:i.jsx(E,{size:1,children:i.jsx(Pe,{i18nKey:"insufficient-permissions-message.not-authorized-explanation",t:n,context:t})})}),i.jsx(et,{marginTop:4,marginBottom:1,children:i.jsx(E,{size:1,children:i.jsx(Pe,{i18nKey:"insufficient-permissions-message.roles",t:n,components:{Roles:o}})})})]})}const Ps=e=>{const{currentUser:t,hasPermission:n,icon:a,onClick:r,permissionsOperationLabel:o,title:s,tone:d,disabled:c}=e;return i.jsx(Ie,{content:i.jsx(I,{paddingX:2,paddingY:1,children:i.jsx(bl,{currentUser:t,context:o})}),disabled:n,placement:"left",portal:!0,children:i.jsx("div",{children:i.jsx(ye,{disabled:!n||c,icon:a,onClick:r,text:s,tone:d})})})},LG=e=>{const{actions:t,onDelete:n,onEdit:a,schedule:r,schemaType:o}=e,{mode:s}=nr(),d=Sc(r),c=Tt(),[u,m]=Yw({id:d.documentId,type:o==null?void 0:o.name,permission:"publish"}),{deleteSchedule:p,publishSchedule:h}=is(),f=!m&&!(u!=null&&u.granted),g=()=>{a==null||a()},b=()=>{p({schedule:r}).then(()=>n==null?void 0:n())},v=()=>{h({schedule:r})};return c?i.jsxs(i.Fragment,{children:[(t==null?void 0:t.edit)&&i.jsx(Ps,{currentUser:c,hasPermission:!f,icon:Qt,onClick:g,permissionsOperationLabel:"edit-schedules",title:"Edit schedule",disabled:s==="upsell"}),(t==null?void 0:t.execute)&&i.jsx(Ps,{currentUser:c,hasPermission:!f,icon:XA,onClick:v,permissionsOperationLabel:"execute-schedules",title:"Publish now",disabled:s==="upsell"}),(t==null?void 0:t.delete)&&i.jsx(Ps,{currentUser:c,hasPermission:!f,icon:_t,onClick:b,permissionsOperationLabel:"delete-schedules",title:"Delete schedule",tone:"critical",disabled:s==="upsell"}),(t==null?void 0:t.clear)&&i.jsx(Ps,{currentUser:c,hasPermission:!f,icon:zo,onClick:b,permissionsOperationLabel:"delete-schedules",title:"Clear completed schedule",disabled:s==="upsell"})]}):null},oT=e=>{const{actions:t,onDelete:n,onEdit:a,schedule:r,schemaType:o}=e;return i.jsx(ze,{button:i.jsx(wt,{}),id:"contextMenu",menu:i.jsx(Be,{children:i.jsx(LG,{actions:t,onDelete:n,onEdit:a,schedule:r,schemaType:o})}),placement:"left",popover:{portal:!0,tone:"default"}})},sT={validation:[],isValidating:!1};function BG(e=sT.validation){const t=e.filter(mv).length>0,n=e.filter(pv).length>0;let a="default";return n&&(a="default"),t&&(a="critical"),{markers:e,validationTone:a,hasError:t,hasWarning:n}}function _c(e){return l.useMemo(()=>BG(e),[e])}const VG={validation:[],isValidating:!1};function Rp(e,t){const n=ts(),a=l.useMemo(()=>n.pair.validation(e,t),[t,n.pair,e]);return Ut(a,VG)}const UG=1500;function zG({schedule:e,updateValidation:t}){const n=eT(e),a=Q1(e);return!a||!(n!=null&&n.name)?null:i.jsx(HG,{id:a,schemaName:n.name,updateValidation:t})}function HG({id:e,schemaName:t,updateValidation:n}){const[a,r]=l.useState(!1);return l.useEffect(()=>{const o=setTimeout(()=>{r(!0)},UG);return()=>{clearTimeout(o)}},[]),a?i.jsx(KG,{id:e,schemaName:t,updateValidation:n}):null}function KG({id:e,schemaName:t,updateValidation:n}){const a=Rp(e,t);return l.useEffect(()=>{a.isValidating||n(a)},[n,a]),null}function Ec(e){return l.useMemo(()=>e?e.replaceAll("drafts.",""):void 0,[e])}const Ob=k(E)`
  white-space: initial;
`,WG={error:"critical",warning:"caution",info:"primary"};function wd(e){var t,n;const{marker:a,onClick:r,path:o,truncate:s}=e,d=l.useCallback(()=>{r&&r(a.path)},[a.path,r]),c=WG[a==null?void 0:a.level]||void 0,u=(n=a.message)!=null?n:(t=a.item)==null?void 0:t.message,m=i.jsxs(P,{children:[i.jsx(I,{children:i.jsxs(E,{size:1,children:[a.level==="error"&&i.jsx(Aa,{}),a.level==="warning"&&i.jsx(Wt,{}),a.level==="info"&&i.jsx(Uo,{})]})}),i.jsxs(B,{space:2,flex:1,paddingLeft:3,children:[o&&i.jsx(Ob,{size:1,weight:"semibold",children:o}),u&&i.jsx(Ob,{muted:!0,size:1,textOverflow:s?"ellipsis":void 0,children:u})]})]});return i.jsx(Hu,{padding:1,onClick:d,radius:2,tone:c,children:i.jsx(I,{padding:2,children:m})})}function GG(e){const{documentType:t,kind:n,validation:a,onFocus:r,onClose:o,truncate:s}=e,d=a.filter(mv),c=a.filter(pv),u=a.filter(HA),m=l.useCallback((b=[])=>{r&&r(b),o&&o()},[r,o]),p=b=>{const v=t&&t.fields,y=v&&v.find(x=>x.name===b[0]);return y&&y.type.title||""},h=d.length>0,f=c.length>0,g=u.length>0;return!h&&!f&&!g?null:i.jsxs(Jn,{width:0,"data-kind":n,"data-testid":"validation-list",children:[h&&d.map((b,v)=>i.jsx(wd,{truncate:s,path:p(b.path),marker:b,onClick:m},v)),f&&c.map((b,v)=>i.jsx(wd,{truncate:s,path:p(b.path),marker:b,onClick:m},v)),g&&u.map((b,v)=>i.jsx(wd,{truncate:s,path:p(b.path),marker:b,onClick:m},v))]})}const qG={portal:!0,constrainSize:!0,preventOverflow:!0,tone:"default",width:0,placement:"bottom-end"};function lT(e){const{type:t,markers:n,menuHeader:a,documentId:r}=e,o=Ho(),{hasError:s,hasWarning:d}=_c(n),c=s||d?"visible":"hidden",u=l.useId()||"",m=Ec(r),p=l.useCallback(h=>{m&&o.navigateIntent("edit",{id:m,path:encodeURIComponent(Je(h))})},[o,m]);return i.jsx(ze,{id:u||"",button:i.jsx(Z,{tooltipProps:{content:"Show validation issues"},mode:"bleed","data-testid":"schedule-validation-list-button",icon:s?Aa:Wt,style:{visibility:c},tone:s?"critical":"default"}),menu:i.jsx(Be,{padding:1,children:i.jsx(Jn,{width:0,children:i.jsxs(B,{space:1,children:[a??null,i.jsx(GG,{documentType:t,validation:n,onFocus:p})]})})}),popover:qG})}const YG=e=>{const{date:t,useElementQueries:n}=e,{formatDateTz:a}=Gt(),r=JA(t,new Date,{addSuffix:!0}),o=a({date:t,format:vr.LARGE}),s=a({date:t,format:vr.MEDIUM}),d=a({date:t,format:vr.SMALL});return i.jsx(E,{size:1,textOverflow:"ellipsis",children:i.jsx(Ie,{content:r,portal:!0,children:i.jsx("span",{children:n?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"date-small",children:d}),i.jsx("span",{className:"date-medium",children:s}),i.jsx("span",{className:"date-large",children:o})]}):o})})})},XG={portal:!0,constrainSize:!0,preventOverflow:!0,tone:"default",width:0},Fb=e=>{const{stateReason:t}=e;return i.jsx(ze,{id:"stateReason",button:i.jsx(Z,{tooltipProps:{content:"Schedule failed"},mode:"bleed","data-testid":"schedule-validation-list-button",icon:Aa,tone:"critical"}),menu:i.jsx(Be,{padding:1,children:i.jsxs(Jn,{padding:2,width:0,children:[i.jsx(E,{size:1,children:fK}),i.jsxs(P,{gap:3,marginTop:4,padding:1,children:[i.jsx(E,{size:1,style:{color:wr[700].hex},children:i.jsx(Aa,{})}),i.jsx(E,{size:1,style:{color:wr[700].hex},weight:"medium",children:t})]})]})}),popover:XG})},JG=e=>{const{id:t}=e;return i.jsx(Xa,{user:t,withTooltip:!0})},ZG=k(I)`
  width: 9px;
`,Dp=e=>{const{children:t,contextMenu:n,linkComponent:a,onClick:r,previewState:o,publishedDocumentId:s,schedule:d,schemaType:c,useElementQueries:u}=e,{mode:m}=nr(),[p,h]=l.useState(sT),{validation:f}=p,{hasError:g,validationTone:b}=_c(f),{formatDateTz:v}=Gt(),y=Ui(d),x=y?new Date(y):null;return i.jsx(U,{padding:1,radius:2,shadow:1,tone:b,style:m==="upsell"&&d.state==="scheduled"?{opacity:.7}:void 0,children:i.jsxs(P,{align:"center",gap:1,justify:"space-between",children:[i.jsx(Ie,{delay:{open:400},placement:"bottom-end",content:i.jsx(Yp,{draft:o==null?void 0:o.draft,published:o==null?void 0:o.published}),disabled:!(o!=null&&o.draft)&&!(o!=null&&o.published),children:i.jsx(U,{__unstable_focusRing:!0,as:a||void 0,"data-as":r||a?"a":void 0,flex:1,onClick:r,padding:1,radius:2,tabIndex:0,tone:b,children:i.jsxs(P,{align:"center",gap:3,justify:"flex-start",paddingLeft:t?0:[1,2],children:[t&&i.jsx(I,{style:{flexBasis:"auto",flexGrow:1},children:t}),d.action==="unpublish"&&i.jsx(P,{style:{flexShrink:0},children:i.jsx(Sn,{fontSize:0,mode:"outline",tone:hl[d.action].badgeTone,children:d.action})}),i.jsx(I,{display:["block","none"],style:{flexShrink:0,width:"90px"},children:i.jsx(B,{space:2,children:x?i.jsxs(i.Fragment,{children:[i.jsx(E,{size:1,children:v({date:x,format:"dd/MM/yyyy"})}),i.jsx(E,{size:1,children:v({date:x,format:"p"})})]}):i.jsx(E,{muted:!0,size:1,children:i.jsx("em",{children:"No date specified"})})})}),i.jsx(I,{display:["none","block"],style:{flexShrink:0,maxWidth:"250px",width:t?"35%":"auto"},children:x?i.jsx(YG,{date:x,useElementQueries:u}):i.jsx(E,{muted:!0,size:1,children:i.jsx("em",{children:"No date specified"})})}),!t&&i.jsx(I,{style:{visibility:"hidden"},children:i.jsx(Xn,{isPlaceholder:!0})}),i.jsxs(P,{align:"center",style:{flexShrink:0,marginLeft:"auto"},children:[i.jsx(I,{display:["none","none","block"],marginX:3,style:{flexShrink:0},children:i.jsx(JG,{id:d==null?void 0:d.author})}),i.jsx(I,{display:["none","block"],marginX:[2,2,3],style:{flexShrink:0},children:o!=null&&o.draft||o!=null&&o.published?i.jsx($m,{draft:o==null?void 0:o.draft,published:o==null?void 0:o.published}):i.jsx(ZG,{})})]})]})})}),i.jsxs(P,{justify:"center",style:{width:"38px"},children:[d.state==="scheduled"&&i.jsxs(I,{children:[i.jsx(zG,{schedule:d,updateValidation:h}),i.jsx(lT,{markers:f,type:c,documentId:s,menuHeader:i.jsx(I,{padding:2,children:i.jsx(E,{size:1,children:g?Mp:hK})})})]}),d.state==="cancelled"&&i.jsx(Fb,{stateReason:d.stateReason})]}),d.state==="cancelled"&&i.jsx(Fb,{stateReason:d.stateReason}),n&&i.jsx(I,{style:{flexShrink:0},paddingRight:2,children:n})]})})},QG=e=>{const{schedule:t,schemaType:n}=e,{DialogScheduleEdit:a,dialogProps:r,dialogScheduleEditShow:o}=rT(t),{onComplete:s}=uG(),d=l.useMemo(()=>Q1(t),[t]);return i.jsxs(i.Fragment,{children:[a&&i.jsx(a,{...r}),i.jsx(Dp,{contextMenu:i.jsx(oT,{actions:{delete:!0,edit:!0},onDelete:s,onEdit:o,schedule:t,schemaType:n}),onClick:o,publishedDocumentId:d,schedule:t,schemaType:n})]})},eq=e=>{const{onDelete:t,schedule:n}=e,{deleteSchedule:a}=is();return i.jsx(ze,{button:i.jsx(wt,{}),id:"contextMenu",menu:i.jsx(Be,{children:i.jsx(ye,{icon:_t,onClick:()=>{a({schedule:n}).then(()=>t==null?void 0:t())},text:"Delete schedule",tone:"critical"})}),placement:"left",popover:{portal:!0,tone:"default"}})},tq=({schedule:e})=>i.jsx(Dp,{contextMenu:i.jsx(eq,{schedule:e}),schedule:e,useElementQueries:!0,children:i.jsx(Xn,{icon:mi,layout:"default",subtitle:i.jsx("em",{children:"It may have been deleted"}),title:i.jsx("em",{style:{color:wr[600].hex},children:"Document not found"})})}),nq=e=>{const{previewState:t,schedule:n,schemaType:a}=e,r=t.draft||t.published,o=n.state==="succeeded",s=n.state==="scheduled",{DialogScheduleEdit:d,dialogProps:c,dialogScheduleEditShow:u}=rT(n),m=Ec(r==null?void 0:r._id),p=l.useMemo(()=>{const h=l.forwardRef((f,g)=>i.jsx(Ma,{...f,intent:"edit",params:{type:a.name,id:r&&ft(r==null?void 0:r._id)},ref:g}));return h.displayName="LinkComponent",h},[a,r]);return i.jsxs(i.Fragment,{children:[d&&i.jsx(d,{...c}),i.jsx(Dp,{contextMenu:i.jsx(oT,{actions:{clear:o,delete:!o,edit:s,execute:s},onEdit:u,schedule:n,schemaType:a}),linkComponent:p,previewState:t,publishedDocumentId:m,schedule:n,schemaType:a,useElementQueries:!0,children:t.isLoading?i.jsx(Xn,{icon:a==null?void 0:a.icon,isPlaceholder:t.isLoading,layout:"default"}):i.jsx(vw,{layout:"default",schemaType:a,value:r})})]})},cT=e=>{const{schedule:t,type:n}=e,a=Sc(t),r=eT(t),o=sG(a==null?void 0:a.documentId,r),s=!(o.draft||o.published)&&!o.isLoading,d=l.useMemo(()=>!r||s?i.jsx(tq,{schedule:t}):n==="document"?i.jsx(QG,{schedule:t,schemaType:r}):n==="tool"?i.jsx(nq,{previewState:o,schedule:t,schemaType:r}):null,[s,n,o,t,r]);return i.jsx(cG,{children:d})},aq=200;function iq(e){const{item:{content:t,virtualRow:n},measureElement:a}=e,r=l.useMemo(()=>({position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${n.start}px)`}),[n]);return i.jsx(I,{"data-index":n.index,paddingBottom:2,ref:a,style:r,children:typeof t=="string"?i.jsx(oq,{content:t}):i.jsx(rq,{schedule:t})},n.key)}function rq({schedule:e}){const[t,n]=l.useState(i.jsx(sq,{}));return l.useEffect(()=>{let a=!0;const r=setTimeout(()=>{a&&n(i.jsx(cT,{schedule:e,type:"tool"}))},aq);return()=>{a=!1,clearTimeout(r)}},[e]),t}function oq({content:e}){return i.jsx(P,{align:"flex-end",paddingBottom:2,paddingTop:4,children:i.jsx(tm,{muted:!0,size:1,children:e})})}function sq(){return i.jsx(U,{padding:1,radius:2,shadow:1,children:i.jsx(U,{padding:1,children:i.jsx(Xn,{isPlaceholder:!0})})})}function Rb(e){return new Date(e).toLocaleString("default",{month:"long",year:"numeric"})}const lq=()=>{const{activeSchedules:e,scheduleState:t,sortBy:n}=rs(),{measureElement:a,virtualList:r,totalSize:o,containerRef:s}=cq(e,n),{deleteSchedules:d}=is(),c=()=>{d({schedules:e||[]})};return l.useEffect(()=>{var u;(u=s==null?void 0:s.current)==null||u.scrollTo(0,0)},[t,n,s]),i.jsxs(I,{paddingBottom:6,paddingTop:1,paddingX:4,ref:s,style:{position:"relative",overflowX:"hidden",overflowY:"auto",height:"100%",boxSizing:"border-box"},children:[i.jsx(I,{style:{height:`${o}px`,width:"100%",position:"relative"},children:r.map(u=>i.jsx(iq,{item:u,measureElement:a},u.key))}),t==="succeeded"&&i.jsx(P,{justify:"center",marginTop:6,children:i.jsx(Z,{icon:zo,mode:"ghost",onClick:c,text:"Clear all completed schedules"})})]})};function cq(e,t){const n=l.useRef(null),a=l.useMemo(()=>{const s=[];return e.forEach((d,c)=>{if(t=="executeAt"){const u=e[c-1],m=Ui(u),p=c>0&&m?Rb(m):null,h=Ui(d),f=h?Rb(h):null;f!==p&&s.push(f||"No date specified")}s.push(d)}),s},[e,t]),r=Du({count:a.length,getScrollElement:()=>n.current,estimateSize:()=>50,overscan:5}),o=r.getVirtualItems().map(s=>{const d=a[s.index];return{content:d,key:typeof d=="string"?d:d.id,virtualRow:s}});return{containerRef:n,measureElement:r.measureElement,totalSize:r.getTotalSize(),virtualList:o}}const Db=k(Jn)`
  width: auto;
`,dq=()=>{const{activeSchedules:e,selectedDate:t,scheduleState:n}=rs(),{upsellData:a,telemetryLogs:r}=Z1(),{mode:o}=nr(),s=o==="upsell"&&n==="scheduled";return i.jsxs(I,{style:{height:"100%"},children:[o==="upsell"&&a&&i.jsx(Db,{width:1,padding:4,paddingBottom:1,children:i.jsx(Fp,{layout:"horizontal",data:a,onPrimaryClick:r.panelPrimaryClicked,onSecondaryClick:r.panelSecondaryClicked})}),e.length===0?i.jsx(Db,{width:1,padding:4,paddingTop:4,children:i.jsx(iG,{scheduleState:n,selectedDate:t})}):i.jsxs(i.Fragment,{children:[s&&i.jsx(U,{margin:4,marginBottom:2,padding:3,tone:"caution",radius:3,shadow:1,children:i.jsxs(P,{gap:3,align:"center",children:[i.jsx(E,{size:1,children:i.jsx(Wt,{})}),i.jsx(E,{size:1,children:"Your scheduled documents won't be published automatically unless you upgrade your plan. You can still publish them manually."})]})}),i.jsx(I,{paddingTop:s?0:4,children:i.jsx(lq,{})})]})]})},uq=()=>{const{setSortBy:e,sortBy:t}=rs();return i.jsx(ze,{button:i.jsx(wt,{}),id:"sort",menu:i.jsxs(Be,{style:{minWidth:"250px"},children:[i.jsx(ye,{icon:Bd,iconRight:t==="createdAt"?Gn:void 0,onClick:()=>e("createdAt"),text:"Sort by time added"}),i.jsx(ye,{icon:Bd,iconRight:t==="executeAt"?Gn:void 0,onClick:()=>e("executeAt"),text:"Sort by time scheduled"})]})})},Td=e=>{const{mode:t="default",selected:n}=e;return i.jsx(I,{style:{...t==="default"?{background:Os[n?100:300].hex}:{},...t==="failed"?{background:wr[500].hex}:{},borderRadius:"2px",height:"2px",width:"100%"}})};function mq(e){const{date:t,focused:n,isCurrentMonth:a,isToday:r,onSelect:o,selected:s}=e,{schedulesByDate:d}=rs(),c=d(t),u=l.useCallback(()=>{o(s?void 0:t)},[t,o,s]);let m;r||s?m="primary":(Jk(t),m="default");const p=c.length>0,{completed:h,failed:f,upcoming:g}=l.useMemo(()=>({completed:c.filter(b=>b.state==="succeeded"),failed:c.filter(b=>b.state==="cancelled"),upcoming:c.filter(b=>b.state==="scheduled")}),[c]);return i.jsx("div",{"aria-selected":s,"data-ui":"CalendarDay",children:i.jsx(Ie,{content:i.jsx(pq,{date:t,schedules:c}),disabled:!p,portal:!0,children:i.jsxs(U,{"aria-label":t.toDateString(),"aria-pressed":s,as:"button",__unstable_focusRing:!0,"data-weekday":!0,"data-focused":n?"true":"",role:"button",tabIndex:-1,onClick:u,paddingX:3,paddingY:4,radius:2,selected:s,style:{position:"relative"},tone:m,children:[i.jsx(E,{size:1,style:{opacity:!s&&!a?.35:1,textAlign:"center"},children:s?i.jsx(un,{}):t.getDate()}),i.jsx(I,{style:{bottom:2,left:2,position:"absolute",right:2},children:i.jsxs(P,{align:"center",gap:1,justify:"center",children:[h.length>0&&i.jsx(Td,{selected:s}),g.length>0&&i.jsx(Td,{selected:s}),f.length>0&&i.jsx(Td,{mode:"failed",selected:s})]})})]})})})}function pq(e){const{date:t,schedules:n=[]}=e,{formatDateTz:a}=Gt(),r=n.reduce((o,s)=>(o[s.state].push(s),o),{cancelled:[],succeeded:[],scheduled:[]});return i.jsxs(I,{padding:3,children:[i.jsx(I,{marginBottom:4,children:i.jsx(E,{size:1,weight:"medium",children:ya(t,"d MMMM yyyy")})}),i.jsx(B,{space:3,children:Object.keys(r).map(o=>{const s=r[o];return s.length===0?null:i.jsxs(B,{space:2,children:[i.jsx(tm,{muted:!0,size:0,children:No[o].title}),i.jsx(B,{space:1,children:s.filter(d=>d.executeAt).map(d=>{const c=Ui(d);return c?i.jsxs(et,{space:2,children:[i.jsx(I,{style:{width:"60px"},children:i.jsx(E,{size:1,weight:"regular",children:a({date:new Date(c),format:"p"})})}),i.jsx(P,{align:"center",style:{flexShrink:0,opacity:d.action==="unpublish"?1:0},children:i.jsx(Sn,{fontSize:0,mode:"outline",tone:hl[d.action].badgeTone,children:d.action})})]},d.id):null})})]},o)})})]})}const hq=["January","February","March","April","May","June","July","August","September","October","November","December"],fq=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],gq=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],bq=[1,2,3,4,5,6],yq=e=>{const t=Ol(e);return Fl({start:t,end:Rl(t)})},vq=e=>e.map(t=>[t,...bq.map(n=>gt(t,n))]),xq=e=>vq(yq(e)).map(t=>({number:_l(t[0]),days:t}));function Cq(e){const{getCurrentZoneDate:t}=Gt();return i.jsx(I,{"aria-hidden":e.hidden||!1,"data-ui":"CalendarMonth",children:i.jsxs(Ze,{style:{gridGap:"1px",gridTemplateColumns:"repeat(7, 1fr)"},children:[fq.map(n=>i.jsx(U,{paddingY:3,children:i.jsx(tm,{size:1,style:{textAlign:"center"},children:n.slice(0,1)})},n)),xq(e.date).map((n,a)=>n.days.map((r,o)=>{const s=e.focused&&ln(r,e.focused),d=e.selected&&ln(r,e.selected),c=ln(r,t()),u=e.focused&&Al(r,e.focused);return i.jsx(mq,{date:r,focused:s,isCurrentMonth:u,isToday:c,onSelect:e.onSelect,selected:d},`${a}-${o}`)}))]})})}const wq=i.jsx("span",{"data-preserve-focus":!0,style:{overflow:"hidden",position:"absolute",outline:"none"},tabIndex:-1}),Tq=l.forwardRef(function(e,t){const{focusedDate:n,onFocusedDateChange:a,onSelect:r,selectedDate:o,...s}=e,{zoneDateToUtc:d}=Gt(),c=l.useCallback(y=>a(d(y)),[a,d]),u=l.useCallback(y=>c(wl(n,y)),[n,c]),m=l.useCallback(y=>{if(y){const x=d(Va(Di(y,y.getHours()),y.getMinutes()));r(x),a(x)}else r(void 0)},[r,d,a]),p=l.useRef(null);l.useImperativeHandle(t,()=>p.current);const h=l.useCallback(()=>{var y,x;(x=(y=p.current)==null?void 0:y.querySelector('[data-focused="true"]'))==null||x.focus()},[p]),f=l.useCallback(y=>{var x,w;if(gq.includes(y.key)){if(y.preventDefault(),y.currentTarget.hasAttribute("data-calendar-grid")){h();return}y.key==="ArrowUp"&&a(d(gt(n,-7))),y.key==="ArrowDown"&&a(d(gt(n,7))),y.key==="ArrowLeft"&&a(d(gt(n,-1))),y.key==="ArrowRight"&&a(d(gt(n,1))),(w=(x=p.current)==null?void 0:x.querySelector("[data-preserve-focus]"))==null||w.focus()}},[p,h,a,n,d]);l.useEffect(()=>{h()},[h]),l.useEffect(()=>{var y;(y=document.activeElement)!=null&&y.matches("[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]")&&h()},[p,h,n]);const g=l.useCallback(()=>{const y=new Date;r(y),a(y)},[r,a]),b=l.useCallback(()=>u(-1),[u]),v=l.useCallback(()=>u(1),[u]);return i.jsxs(I,{"data-ui":"Calendar",...s,ref:p,children:[i.jsx(P,{align:"center",paddingLeft:4,style:{borderBottom:"1px solid var(--card-border-color)",minHeight:`${R1}px`,position:"sticky",top:0},children:i.jsxs(P,{align:"center",flex:1,justify:"space-between",children:[i.jsxs(E,{weight:"medium",size:1,children:[hq[n==null?void 0:n.getMonth()]," ",n==null?void 0:n.getFullYear()]}),i.jsx(P,{paddingRight:3,gap:2,children:i.jsxs(Ia,{children:[i.jsx(Z,{icon:Vr,mode:"bleed",onClick:b,tooltipProps:{content:"Previous month"}}),i.jsx(Z,{icon:_a,mode:"bleed",onClick:v,tooltipProps:{content:"Next month"}})]})})]})}),i.jsx(I,{children:i.jsxs(I,{"data-calendar-grid":!0,onKeyDown:f,overflow:"hidden",paddingBottom:1,paddingX:1,tabIndex:0,children:[i.jsx(Cq,{date:n,focused:n,onSelect:m,selected:o}),wq]})}),i.jsx(I,{flex:1,style:{borderBottom:"1px solid var(--card-border-color)"},children:i.jsx(Z,{mode:"bleed",onClick:g,width:"fill",text:"Today"})})]})}),jq=e=>{const{onSelect:t,selectedDate:n}=e,{getCurrentZoneDate:a,utcToCurrentZoneDate:r}=Gt(),[o,s]=l.useState(n||a()),d=l.useCallback(c=>{s(r(c))},[r]);return i.jsx(Tq,{focusedDate:o,onFocusedDateChange:d,onSelect:t,selectedDate:n})},$b=k(I)`
  flex-direction: column;
  &:not(:last-child) {
    border-right: 1px solid var(--card-border-color);
  }
`,kq=[],Lb="yyyy-MM-dd";function Aq(){const e=Ho(),{sanity:t}=Lr(),{error:n,isInitialLoading:a,schedules:r=kq}=Ac(),o=l.useRef(),s=e.state.state,d=e.state.date?Yu(e.state.date,Lb,new Date):void 0;l.useEffect(()=>{e.state.state&&(o.current=e.state.state)},[e.state.state]),Sq(e,s,d);const{formatDateTz:c}=Gt(),u=l.useMemo(()=>({schedules:r,scheduleState:s,selectedDate:d}),[r,s,d]),m=()=>{e.navigate({state:(o==null?void 0:o.current)||Oo[0]})};return i.jsx(YW,{value:u,children:i.jsx(P,{direction:"column",height:"fill",flex:1,overflow:"hidden",children:i.jsxs(P,{flex:1,height:"fill",children:[i.jsx($b,{display:["none",null,null,"flex"],style:{position:"sticky",top:0,width:"350px"},children:i.jsx(jq,{onSelect:p=>{p?e.navigate({date:c({date:p,format:Lb})}):e.navigate({state:(o==null?void 0:o.current)||Oo[0]})},selectedDate:d})}),i.jsxs($b,{display:"flex",flex:1,overflow:"hidden",children:[i.jsx(z1,{style:{background:t.color.card.enabled.bg,position:"sticky",top:0,zIndex:1},children:i.jsx(P,{align:"center",paddingLeft:4,paddingRight:3,style:{borderBottom:"1px solid var(--card-border-color)",minHeight:`${R1}px`},children:i.jsxs(P,{align:"center",flex:1,justify:"space-between",children:[i.jsx(JW,{onClearDate:m,selectedDate:d}),i.jsxs(P,{align:"center",gap:1,children:[i.jsx(U1,{useElementQueries:!0}),i.jsx(uq,{})]})]})})}),i.jsxs(P,{direction:"column",flex:1,children:[n&&i.jsx(I,{paddingTop:4,paddingX:4,children:i.jsx(D1,{description:"More information in the developer console.",title:"Something went wrong, unable to retrieve schedules."})}),i.jsx(I,{flex:1,children:a?i.jsx(I,{padding:4,children:i.jsx(E,{muted:!0,children:"Loading..."})}):i.jsx(dq,{})})]})]})]})})})}function Sq(e,t,n){l.useEffect(()=>{!t&&!n&&e.navigate({state:Oo[0]},{replace:!0})},[n,e,t])}const _q=e=>{const{buttonText:t="Action",disabled:n,icon:a,onAction:r,onComplete:o,tone:s="positive"}=e;return i.jsxs(P,{width:"full",gap:3,justify:"flex-end",children:[i.jsx(Z,{mode:"bleed",onClick:o,text:"Cancel"}),r&&i.jsx(Z,{disabled:n,icon:a,onClick:r,text:t,tone:s})]})};function Eq({id:e,schemaType:t}){return i.jsxs(B,{space:4,children:[i.jsxs(E,{size:1,children:["Schedule this document to be published at any time in the future.",i.jsx("br",{}),"Any edits in the meantime will be added to the scheduled document."]}),i.jsx(E,{size:1,children:"Visit the Schedules page to get an overview of all schedules."}),i.jsx(Iq,{id:e,type:t})]})}function Iq({id:e,type:t}){const n=Ec(e),a=lG(t),r=Rp(n,t),{hasError:o}=_c(r.validation);return o?i.jsx(U,{padding:2,radius:1,shadow:1,tone:"critical",children:i.jsxs(P,{gap:1,align:"center",children:[i.jsx(lT,{markers:r.validation,type:a,documentId:n}),i.jsx(E,{size:1,children:Mp})]})}):null}const Mq=e=>{const{schedules:t}=e;return i.jsx(B,{space:4,children:t.length===0?i.jsx(I,{children:i.jsx(E,{size:1,children:"No schedules"})}):i.jsx(B,{space:2,children:t.map(n=>i.jsx(cT,{schedule:n,type:"document"},n.id))})})},Pq=jc("ScheduleAction"),Bb=e=>{const{draft:t,id:n,liveEdit:a,onComplete:r,published:o,type:s}=e,d=Tt(),[c,u]=Yw({id:n,type:s,permission:"publish"}),{createSchedule:m}=is(),{enabled:p,mode:h}=nr(),{handleOpenDialog:f}=Z1(),[g,b]=l.useState(!1),{formData:v,onFormChange:y}=tT(),{error:x,isInitialLoading:w,schedules:C}=Ac({documentId:n,state:"scheduled"});Pq("schedules",C);const T=C&&C.length>0,j=t!==null||o!==null,A=!u&&!(c!=null&&c.granted),M=l.useCallback(()=>{h==="upsell"?f("document_action"):b(!0)},[h,f]),S=l.useCallback(()=>{v!=null&&v.date&&m({date:v.date,documentId:n}).then(r)},[r,m,n,v==null?void 0:v.date]),N=T?"Edit Schedule":"Schedule";if(A)return{disabled:!0,icon:Qt,label:N,title:i.jsx(bl,{currentUser:d,context:"edit-schedules"})};let D="This document doesn't exist yet";j&&(D=null),w&&(D="Loading schedules"),a&&(D="Live Edit is enabled for this content type and publishing happens automatically as you make changes");const _={content:x?i.jsx(D1,{description:"More information in the developer console.",title:"Something went wrong, unable to retrieve schedules."}):i.jsx(dG,{value:e,children:T?i.jsx(Mq,{schedules:C}):i.jsx(aT,{onChange:y,value:v,children:i.jsx(Eq,{id:n,schemaType:s})})}),footer:!T&&i.jsx(_q,{buttonText:"Schedule",disabled:!(v!=null&&v.date),icon:G0,onAction:S,onComplete:r,tone:"primary"}),header:i.jsx(iT,{title:N}),onClose:r,type:"dialog"};return p?{dialog:g&&_,disabled:w||!j||a,label:N,icon:Qt,onHandle:M,title:D&&i.jsx(I,{style:{maxWidth:"315px"},children:D})}:null};function Nq(e){return e.findIndex(t=>t.action==="publish")<0?[Bb,...e]:e.flatMap(t=>t.action==="publish"?[t,Bb]:t)}const Oq=jc("ScheduledBadge"),Fq=e=>{const{schedules:t}=Ac({documentId:e.id,state:"scheduled"});Oq("schedules",t);const n=t==null?void 0:t[0];if(!n||!n.executeAt)return null;const a=ya(new Date(n.executeAt),vr.LARGE);return{color:hl[n.action].badgeColor,label:"Scheduled",title:`${hl[n.action].actionName} on ${a} (local time)`}};function Rq(e){return[...e,Fq]}function Dq(e){const{id:t,markers:n}=e,a=Ec(t),{hasError:r}=_c(n),{schedules:o}=Ac({documentId:a,state:"scheduled"}),{mode:s}=nr();return o.length>0?i.jsxs(I,{marginBottom:4,children:[s==="upsell"&&i.jsx(U,{tone:"caution",padding:3,radius:3,shadow:1,marginBottom:3,children:i.jsxs(P,{align:"center",gap:3,padding:1,children:[i.jsx(E,{muted:!0,size:1,children:i.jsx(Wt,{})}),i.jsx(E,{muted:!0,size:1,weight:"medium",children:"Scheduled publishing is not available on your current plan"})]})}),i.jsx(U,{padding:3,radius:1,shadow:1,tone:r?"critical":"primary",style:s==="upsell"?{opacity:.7}:void 0,children:i.jsxs(B,{space:2,children:[i.jsxs(P,{align:"center",gap:3,marginBottom:1,padding:1,children:[i.jsx(E,{muted:!0,size:1,children:i.jsx(Qt,{})}),i.jsxs(E,{muted:!0,size:1,children:[i.jsx("span",{style:{fontWeight:600},children:"Upcoming schedule"})," (local time)"]})]}),i.jsx(B,{space:2,children:o.map(d=>{if(!d.executeAt)return null;const c=ya(new Date(d.executeAt),vr.LARGE);return i.jsxs(et,{space:2,children:[i.jsx(E,{muted:!0,size:1,children:c}),i.jsx(P,{style:{opacity:d.action==="unpublish"?1:0},children:i.jsx(Sn,{fontSize:0,mode:"outline",children:d.action})})]},d.id)})}),r&&i.jsx(I,{marginTop:3,children:i.jsx(E,{muted:!0,size:1,weight:"regular",children:Mp})})]})})]}):null}function $q(e){const{value:t,validation:n,children:a}=e,r=t,o=l.useMemo(()=>n.map(s=>({level:s.level,path:s.path,item:{message:s.message},message:s.message})),[n]);return i.jsxs(i.Fragment,{children:[r!=null&&r._id?i.jsx(Dq,{id:r._id,markers:o}):null,a]})}const Lq=e=>{const{schemaType:t}=e;return dT(t).name==="document"?i.jsx($q,{...e,children:e.renderDefault(e)}):e.renderDefault(e)};function dT(e){return e.type?dT(e.type):e}function Bq(e){const{enabled:t,mode:n}=nr();return t?i.jsx(Pl,{condition:n==="upsell",wrapper:a=>i.jsx(tG,{children:a}),children:e.renderDefault(e)}):e.renderDefault(e)}function Vq(e){return i.jsx(UW,{children:i.jsx(Bq,{...e})})}const uT="sanity/scheduled-publishing",Uq=zl({name:uT,document:{actions:e=>Nq(e),badges:e=>Rq(e)},form:{components:{input:Lq}},studio:{components:{layout:Vq}},tools:e=>[...e,{name:yK,title:vK,icon:Qt,component:Aq,router:li.create("/",[li.create("/state/:state"),li.create("/date/:date")])}]}),st="tasks",zq={locale:"en-US",namespace:st,resources:()=>N0(()=>import("./resources2-733cf1a5.js"),["static/resources2-733cf1a5.js","static/sanity-6afb8dc4.js"])};function Hq({children:e}){var t;const{enabled:n,isLoading:a}=cs("sanityTasks"),r=(t=Dt().tasks)==null?void 0:t.enabled,o=l.useMemo(()=>!r||a?{enabled:!1,mode:null}:{enabled:!0,mode:n?"default":"upsell"},[n,a,r]);return i.jsx(q0.Provider,{value:o,children:e})}function ea(){return l.useContext(q0)}function Kq(){return l.useContext(DA)}function Wq(e){const[t,n]=l.useState(null),a=JT({documentValue:t,permission:"read"}),r=l.useMemo(()=>({mentionOptions:a,selectedDocument:t,setSelectedDocument:n}),[a,t,n]);return i.jsx(hv.Provider,{value:r,children:e.children})}function ss(){const e=l.useContext(hv);if(!e)throw new Error("useMentionUser must be used within a MentionUserProvider");return e}const Gq=Et({name:"Task Created",version:1,description:"A task is created"}),qq=Et({name:"Task Status Changed",version:1,description:"Task status changed"}),Yq=Et({name:"Task Duplicated",version:1,description:"A task is duplicated"}),Xq=Et({name:"Task Removed",version:1,description:"A task is removed"}),Jq=Et({name:"Task Link Copied",version:1,description:"The link to a task is copied"}),Zq=Et({name:"Task Link Opened",version:1,description:"User visited the studio through a link with a task"}),mT={viewMode:"list",selectedTask:null,activeTabId:"assigned",duplicateTaskValues:null,isOpen:!1};function Qq(e,t){switch(t.type){case"TOGGLE_TASKS_VIEW":return t.payload===!1?{...mT,isOpen:t.payload}:{...e,isOpen:t.payload};case"CREATE_TASK":return{...e,viewMode:"create",selectedTask:Cn()};case"EDIT_TASK":return{...e,viewMode:"edit",selectedTask:t.payload.id};case"EDIT_DRAFT":return{...e,viewMode:"draft",selectedTask:t.payload.id};case"DUPLICATE_TASK":return{...e,viewMode:"duplicate",selectedTask:Cn(),duplicateTaskValues:t.payload.duplicateTaskValues};case"SET_ACTIVE_TAB":return{...e,viewMode:"list",activeTabId:t.payload};case"NAVIGATE_TO_LIST":return{...e,viewMode:"list"};default:return e}}const eY=({children:e})=>{const[t,n]=l.useReducer(Qq,mT),a=Ho(),r=Vt(),o=ha(),s=l.useCallback(h=>{switch(h.type){case"list":n({type:"NAVIGATE_TO_LIST"});break;case"create":n({type:"CREATE_TASK"});break;case"edit":n({type:"EDIT_TASK",payload:{id:h.id}});break;case"duplicate":n({type:"DUPLICATE_TASK",payload:{duplicateTaskValues:h.duplicateTaskValues}});break;case"draft":n({type:"EDIT_DRAFT",payload:{id:h.id}});break}},[]),d=l.useCallback(h=>{n({type:"SET_ACTIVE_TAB",payload:h})},[]),c=l.useCallback(()=>{n({type:"TOGGLE_TASKS_VIEW",payload:!1})},[]),u=l.useCallback(()=>{n({type:"TOGGLE_TASKS_VIEW",payload:!0})},[]),m=l.useCallback(()=>{const h=new URL(window.location.href);h.searchParams.set("sidebar","tasks"),h.searchParams.set("viewMode",t.viewMode),t.selectedTask&&h.searchParams.set("selectedTask",t.selectedTask),navigator.clipboard.writeText(h.toString()).then(()=>{r.push({closable:!0,status:"info",title:"Copied link to clipboard"}),o.log(Jq)}).catch(()=>{r.push({closable:!0,status:"error",title:"Failed to copy link to clipboard"})})},[t.selectedTask,t.viewMode,o,r]),p=new URLSearchParams(a.state._searchParams).toString();return l.useEffect(()=>{if(p){const h=new URLSearchParams(p);if(h.get("sidebar")!=="tasks")return;n({type:"TOGGLE_TASKS_VIEW",payload:!0});const f=h.get("viewMode"),g=h.get("selectedTask");f==="edit"&&g&&(n({type:"EDIT_TASK",payload:{id:g}}),o.log(Zq))}},[p,o]),i.jsx(Y0.Provider,{value:{state:t,setViewMode:s,setActiveTab:d,handleCloseTasks:c,handleOpenTasks:u,handleCopyLinkToTask:m},children:e})};function $n(){return l.useContext(Y0)||{state:{activeTabId:"assigned",viewMode:"list",selectedTask:null,isOpen:!1,duplicateTaskValues:null},setActiveTab:()=>null,setViewMode:()=>null,handleCloseTasks:()=>null,handleCopyLinkToTask:()=>null,handleOpenTasks:()=>null}}function tY(e){return e.reduce((t,n)=>({...t,[n._id]:n}),{})}function nY(e,t){switch(t.type){case"TASKS_SET":{const n=tY(t.tasks);return{...e,tasks:n}}case"TASK_ADDED":{const n=t.payload,a=n,r={[n._id]:{...e.tasks[n._id],...a,_state:n._state||void 0,_createdAt:n._createdAt||new Date().toISOString()}};return{...e,tasks:{...e.tasks,...r}}}case"TASK_RECEIVED":{const n=t.payload;return{...e,tasks:{...e.tasks,[n._id]:n}}}case"TASK_DELETED":{const{[t.id]:n,...a}=e.tasks;return{...e,tasks:a}}case"TASK_UPDATED":{const n=t.payload,a=n._id,r={...e.tasks[a],...n};return{...e,tasks:{...e.tasks,[a]:r}}}default:return e}}const aY={tasks:{}},iY={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query"},rY="_createdAt",oY="desc",sY=['_type == "tasks.task"'],lY=`{
  ...,
}`,cY=`order(${rY} ${oY})`,Vb=`*[${sY.join(" && ")}] ${lY} | ${cY}`;function dY(e){const{client:t}=Ic(),{documentId:n}=e,[a,r]=l.useReducer(nY,aY),[o,s]=l.useState(t!==null),[d,c]=l.useState(null),u=l.useMemo(()=>({documentId:n?ft(n):null}),[n]),m=l.useCallback(async()=>{if(!t){s(!1);return}try{const f=await t.fetch(Vb,u);r({type:"TASKS_SET",tasks:f}),s(!1)}catch(f){c(f)}},[t,u]),p=l.useCallback(async f=>{if(f.type==="welcome"&&(s(!0),await m(),s(!1)),f.type==="reconnect"&&s(!0),f.type==="mutation"){if(f.transition==="appear"){const g=f.result;g&&r({type:"TASK_RECEIVED",payload:g})}if(f.transition==="disappear"&&r({type:"TASK_DELETED",id:f.documentId}),f.transition==="update"){const g=f.result;g&&r({type:"TASK_UPDATED",payload:g})}}},[m]),h=l.useMemo(()=>t?t.observable.listen(Vb,u,iY).pipe(ut(f=>(c(f),re(f)))):re(),[t,u]);return l.useEffect(()=>{const f=h.subscribe(p);return()=>{f==null||f.unsubscribe()}},[p,h]),{data:l.useMemo(()=>Object.values(a.tasks),[a.tasks]),dispatch:r,error:d,isLoading:o}}const uY=[];function mY(e){const{children:t}=e,[n,a]=l.useState(null),{data:r=uY,isLoading:o}=dY({}),s=l.useMemo(()=>Bo(a,1e3),[]),d=l.useMemo(()=>({activeDocument:n,setActiveDocument:s,isLoading:o,data:r??[]}),[n,r,o,s]);return i.jsx(X0.Provider,{value:d,children:t})}function ar(){return l.useContext(X0)||{activeDocument:null,setActiveDocument:()=>null,data:[],isLoading:!1}}const ri="tasks",Ub={interpolate:/{{([\s\S]+?)}}/g},zb="www.sanity.io",pY="2024-04-19";function hY(e){const[t,n]=l.useState(!1),[a,r]=l.useState(null),o=os(),s=ha(),d=Xe({apiVersion:pY}),c=l.useMemo(()=>({dialogSecondaryClicked:()=>s.log(Rr,{feature:ri,type:"modal"}),dialogPrimaryClicked:()=>s.log(Fr,{feature:ri,type:"modal"}),panelViewed:g=>s.log(Nr,{feature:ri,type:"inspector",source:g}),panelDismissed:()=>s.log(Or,{feature:ri,type:"inspector"}),panelPrimaryClicked:()=>s.log(Fr,{feature:ri,type:"inspector"}),panelSecondaryClicked:()=>s.log(Rr,{feature:ri,type:"inspector"})}),[s]),u=l.useCallback(()=>{c.dialogPrimaryClicked()},[c]),m=l.useCallback(()=>{c.dialogSecondaryClicked()},[c]),p=l.useCallback(()=>{n(!1),s.log(Or,{feature:ri,type:"modal"})},[s]);l.useEffect(()=>{const g=d.observable.request({uri:"/journey/tasks"}).subscribe({next:b=>{if(b)try{const v=Er(b.ctaButton.url,Ub);b.ctaButton.url=v({baseUrl:zb,projectId:o});const y=Er(b.secondaryButton.url,Ub);b.secondaryButton.url=y({baseUrl:zb,projectId:o}),r(b)}catch{}},error:()=>{}});return()=>{g.unsubscribe()}},[d,o]);const h=l.useCallback(g=>{n(!0),s.log(Nr,{feature:ri,type:"modal",source:g})},[s]),f=l.useMemo(()=>({upsellDialogOpen:t,handleOpenDialog:h,upsellData:a,telemetryLogs:c}),[h,t,a,c]);return i.jsxs(J0.Provider,{value:f,children:[e.children,a&&t&&i.jsx(Ip,{data:a,onClose:p,onPrimaryClick:u,onSecondaryClick:m})]})}function pT(){return l.useContext(J0)||{upsellData:null,handleOpenDialog:()=>null,upsellDialogOpen:!1,telemetryLogs:{dialogSecondaryClicked:()=>null,dialogPrimaryClicked:()=>null,panelViewed:()=>null,panelDismissed:()=>null,panelPrimaryClicked:()=>null,panelSecondaryClicked:()=>null}}}function fY(){const{handleOpenTasks:e,setViewMode:t}=$n(),{enabled:n,mode:a}=ea(),{handleOpenDialog:r}=pT(),o=l.useCallback(()=>{a==="upsell"?r("document_action"):(e(),t({type:"create"}))},[e,t,a,r]),{t:s}=L(st);return n?{icon:im,label:s("actions.create.text"),title:s("actions.create.text"),group:["paneActions"],onHandle:o}:null}function gY(e){const{documentId:t,documentType:n}=e,a=Kq(),{setActiveDocument:r}=ar();return l.useEffect(()=>(t&&a&&n&&(r==null||r({documentId:ft(t),documentType:n})),()=>{a&&(r==null||r(null))}),[t,n,a,r]),null}function bY(e){const{enabled:t}=ea();return t?i.jsx(gY,{...e}):null}function yY(e){var t,n;const a=(t=e.value)==null?void 0:t._id,r=(n=e.value)==null?void 0:n._type;return i.jsxs(i.Fragment,{children:[i.jsx(bY,{documentId:a,documentType:r}),e.renderDefault(e)]})}const vY=k.div`
  position: relative;
  [data-ui='Badge'] {
    position: absolute;
    top: -2px;
    right: -2px;
  }
`;function xY(){const{data:e,activeDocument:t}=ar(),{handleOpenTasks:n,setActiveTab:a}=$n(),r=Il(),o=l.useMemo(()=>t!=null&&t.documentId?e.filter(c=>{var u;return((u=c.target)==null?void 0:u.document._ref)===t.documentId&&c.status==="open"&&c.createdByUser}):[],[t,e]),s=l.useCallback(()=>{n(),a("document")},[n,a]),{t:d}=L(st);return o.length===0?null:r<3?i.jsxs(vY,{children:[i.jsx(Z,{mode:"bleed",icon:im,size:"large",onClick:s,tooltipProps:{content:d("document.footer.open-tasks.placeholder",{count:o.length})}}),i.jsx(Sn,{tone:"primary",fontSize:0,children:o.length})]}):i.jsx(Z,{mode:"bleed",tooltipProps:{content:d("document.footer.open-tasks.placeholder",{count:o.length})},text:d("document.footer.open-tasks.text",{count:o.length}),onClick:s})}function hT({documentId:e,documentType:t,dataset:n,projectId:a}){return{documentType:t,document:{_ref:ft(e),_type:"crossDatasetReference",_dataset:n,_projectId:a,_weak:!0}}}function yl(e){if(!e)return[];const t=[];return e==null||e.forEach(n=>{Fn(n)&&n.children.forEach(a=>{a._type==="mention"&&typeof a.userId=="string"&&!t.includes(a.userId)&&t.push(a.userId)})}),t}const fT="2024-03-05",Dr=[{value:"open",title:"To Do",icon:i.jsx(To,{})},{value:"closed",title:"Done",icon:i.jsx(zo,{})}],CY=["title","status","assignedTo","dueBy","target","description"],wY=2*60*1e3;function TY(e){const t=[];for(const n of e){const a=t[t.length-1];if(!a){t.push(n);continue}if(!CY.includes(n.field)){t.push(n);continue}if(a.author===n.author&&a.field===n.field){const r=new Date(a.timestamp),o=new Date(n.timestamp);if(Math.abs(r.getTime()-o.getTime())<=wY){a.to=n.to,a.timestamp=n.timestamp;continue}}t.push(n)}return t}function jY(e){const{_rev:t,...n}=e;return n}function kY(e,t,n){let a=jY(e);const r=[];let o=a;for(const c of t){const{timestamp:u,effects:m}=c,p=c.documentIDs[0],h=m[p];!h||!h.revert||(o=el(a,h.revert),n.forEach(f=>{(o==null?void 0:o[f])!==(a==null?void 0:a[f])&&r.push({field:f,from:o==null?void 0:o[f],to:a==null?void 0:a[f],timestamp:u,author:c.author})}),a=o)}const s=r.sort((c,u)=>c.timestamp.localeCompare(u.timestamp)),d=s.findIndex(c=>c.field==="createdByUser");return TY(s.slice(d+1))}function AY(e){var t;const[n,a]=l.useState([]),r=Xe({apiVersion:fT}),{dataset:o,token:s}=r.config(),d="tag=sanity.studio.tasks.history&effectFormat=mendoza&excludeContent=true&includeIdentifiedDocumentsOnly=true&reverse=true",c=ft((t=e==null?void 0:e._id)!=null?t:""),u=r.getUrl(`/data/history/${o}/transactions/${c}?${d}`),m=l.useCallback(async p=>{try{if(!c)return;const h=[],f=(await Zw(u,s)).getReader();let g;for(;g=await f.read(),!g.done;){if("error"in g.value)throw new Error(g.value.error.description||g.value.error.type);h.push(g.value)}const b=["createdByUser","title","description","dueBy","assignedTo","status","target"],v=await kY(p,[...h],b);a(v)}catch(h){console.error("Failed to fetch and parse activity log",h)}},[u,s,c]);return l.useEffect(()=>{m(e)},[m,e._rev]),{changes:n}}function $p(e){var t;const{documentId:n,documentType:a}=e||{},r=ot().get(a),o=gn(),s=l.useMemo(()=>!n||!r?re(null):pc(o,r,n,""),[n,o,r]),d=Ut(s),c=(t=d==null?void 0:d.isLoading)!=null?t:!0,{published:u,draft:m}=d||{},p=(m==null?void 0:m.title)||(u==null?void 0:u.title),h=(m==null?void 0:m.subtitle)||(u==null?void 0:u.subtitle),f=(m==null?void 0:m.description)||(u==null?void 0:u.description),g=(m==null?void 0:m.media)||(u==null?void 0:u.media);return{isLoading:c,value:{title:p,subtitle:h,media:g,description:f}}}function gT(){const{client:e,createAddonDataset:t}=Ic(),n=Tt(),a=l.useCallback(async s=>{if(!n)throw new Error("No current user found. Unable to create task.");const d={...s,authorId:n.id,_type:"tasks.task"};if(!e)try{const c=await t();if(!c)throw new Error("No addon client found. Unable to create task.");return await c.create(d)}catch(c){throw c}try{return await e.create(d)}catch(c){throw c}},[e,t,n]),r=l.useCallback(async(s,d)=>{try{if(!e)throw new Error("No client. Unable to create task.");return await e.patch(s).set(d).commit()}catch(c){throw c}},[e]),o=l.useCallback(async s=>{try{if(!e)throw new Error("No client. Unable to create task.");await e.delete(s)}catch(d){throw d}},[e]);return l.useMemo(()=>({create:a,edit:r,remove:o}),[a,r,o])}function bT({id:e,onError:t,onRemoved:n}){const[a,r]=l.useState("idle"),[o,s]=l.useState(!1),[d,c]=l.useState(null),u=gT(),m=l.useCallback(async()=>{try{r("loading"),await u.remove(e),n==null||n(),r("idle"),await new Promise(f=>setTimeout(f,300)),s(!1)}catch(f){t==null||t(f.message),c(f.message),r("error")}finally{r("idle")}},[e,u,t,n]),p=l.useCallback(()=>{s(!0)},[s]),h=l.useCallback(()=>{s(!1)},[s]);return{removeStatus:a,showDialog:o,error:d,handleRemove:m,handleOpenDialog:p,handleCloseDialog:h}}const SY={month:"long",day:"2-digit",minute:"2-digit",hour:"2-digit",second:"2-digit"},_Y={minimal:!0,useTemporalPhrase:!0},Lp=k.strong`
  font-weight: 600;
`,Bp=k.span`
  white-space: nowrap;
`;function yT(e){const t=new Date(e),n=ca(SY).format(t);return{timeAgo:$r(t||"",_Y),formattedDate:n}}function vT({userId:e}){const[t,n]=Oa(e);return n?i.jsx(it,{style:{width:"15ch"}}):i.jsx(Lp,{children:t==null?void 0:t.displayName})}const EY={month:"short",day:"numeric"};function Hb({date:e}){const t=new Date(e),n=ca(EY).format(t);return i.jsx(Lp,{children:i.jsx(Bp,{children:n})})}const IY=k.span`
  > a {
    color: var(--card-fg-muted-color);
    text-decoration: underline;
    text-underline-offset: 1px;
    font-weight: 600;
  }
`;function MY({target:e}){const t=ot(),n=e.document._ref,a=e.documentType,r=t.get(a),{isLoading:o,value:s}=$p({documentId:n,documentType:a});return o?i.jsx(it,{style:{width:"15ch"}}):r?i.jsx(IY,{children:i.jsx(Ma,{intent:"edit",params:{id:n,type:a},children:s==null?void 0:s.title})}):null}function PY(e){var t,n;switch(e.field){case"status":{const a=(t=Dr.find(r=>r.value===e.to))==null?void 0:t.title;return{text:"changed status to",icon:((n=Dr.find(r=>r.value===e.to))==null?void 0:n.icon)||i.jsx(To,{}),changeTo:i.jsx(Lp,{children:a})}}case"target":return e.to?{text:"set target content to",icon:i.jsx(ma,{}),changeTo:i.jsx(MY,{target:e.to})}:{text:"removed target content",icon:i.jsx(ma,{}),changeTo:void 0};case"dueBy":return e.from?e.to?{text:"changed the due date to",icon:i.jsx(Qt,{}),changeTo:i.jsx(Hb,{date:e.to})}:{text:"removed the due date",icon:i.jsx(Qt,{}),changeTo:void 0}:{text:"set the due date to",icon:i.jsx(Qt,{}),changeTo:i.jsx(Hb,{date:e.to})};case"assignedTo":return e.to?{text:"assigned to",icon:i.jsx(Js,{}),changeTo:i.jsx(vT,{userId:e.to})}:{text:"unassigned this task",icon:i.jsx(Js,{}),changeTo:void 0};case"description":return{text:"updated the task description",icon:i.jsx(Sr,{}),changeTo:void 0};case"title":return{text:"updated the task title",icon:i.jsx(Sr,{}),changeTo:void 0};default:return{text:"",icon:i.jsx(To,{})}}}const NY=l.memo(function(e){const{activity:t}=e,{formattedDate:n,timeAgo:a}=yT(t.timestamp),{icon:r,text:o,changeTo:s}=PY(t);return i.jsxs(P,{gap:1,children:[i.jsx(I,{marginTop:1,marginLeft:1,marginRight:3,children:i.jsx(I,{marginRight:1,children:i.jsx(E,{children:r})})}),i.jsxs(E,{muted:!0,size:1,children:[i.jsx(vT,{userId:t.author})," ",o," ",s," •"," ",i.jsx(Ie,{content:n,placement:"top-end",children:i.jsx(Bp,{children:i.jsx("time",{dateTime:n,children:a})})})]})]})},(e,t)=>e.activity.timestamp===t.activity.timestamp),Kb=k.div(e=>{var t,n;const a=Re(e.theme);return ae`
      min-height: ${(t=a.avatar.sizes[e.$size])==null?void 0:t.size}px;
      min-width: ${(n=a.avatar.sizes[e.$size])==null?void 0:n.size}px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      ${e.$border?"box-shadow: inset 0 0 0 1px var(--card-border-color);":""};
      ${e.$removeBg?"--card-avatar-gray-bg-color: transparent;":""}
    `}),OY=k(Ti)(e=>{var t,n;const a=Re(e.theme);return ae`
    height: ${(t=a.avatar.sizes[e.$size])==null?void 0:t.size}px;
    width: ${(n=a.avatar.sizes[e.$size])==null?void 0:n.size}px;
    border-radius: 50%;
  `});function Jr(e){const{user:t,size:n=0,border:a=!0}=e,[r,o]=Oa((t==null?void 0:t.id)||"");return o?i.jsx(OY,{$size:n,animated:!0}):!t||!r?i.jsx(Kb,{$size:n,$border:a,children:i.jsx(E,{size:n,children:i.jsx(Js,{})})}):i.jsx(Ie,{content:r.displayName,disabled:!e.withTooltip,portal:!0,fallbackPlacements:["top","top-start"],placement:"top-end",children:i.jsx(Kb,{$size:n,$removeBg:!!(r!=null&&r.imageUrl),children:i.jsx(Xa,{user:r,size:n,...r!=null&&r.imageUrl?{color:void 0}:{},...e.withTooltip?{title:null}:{}})})})}const FY=k(P)`
  height: 100%;
`,RY=k.div`
  width: 100%;
`;function Vp({avatarPaddingTop:e=1,userId:t,children:n}){return i.jsxs(P,{children:[i.jsx(I,{marginRight:3,paddingTop:e,children:i.jsx(Jr,{user:{id:t},size:0})}),i.jsx(FY,{align:"center",flex:1,children:i.jsx(RY,{children:n})})]})}function DY(e){const{mentionOptions:t,currentUser:n,onSubmit:a}=e,{mode:r}=ea(),[o,s]=l.useState(null),d=l.useRef(null),c=l.useMemo(()=>er(o),[o]),u=l.useCallback(b=>{s(b)},[]),m=l.useCallback(()=>{c&&(a(o),s(null))},[c,a,o]),p=l.useCallback(()=>{var b;(b=d.current)==null||b.discardDialogController.close()},[]),h=l.useCallback(()=>{var b;(b=d.current)==null||b.discardDialogController.close(),s(null)},[]),f=l.useCallback(b=>{var v,y;b.key==="Escape"&&(b.preventDefault(),b.stopPropagation(),c?(v=d.current)==null||v.discardDialogController.open():((y=d.current)==null||y.discardDialogController.close(),s(null)))},[c]),{t:g}=L(st);return i.jsx(Vp,{userId:n.id,avatarPaddingTop:3,children:i.jsx(U,{tone:"transparent",radius:3,padding:2,children:i.jsx(ir,{withAvatar:!1,currentUser:n,expandOnFocus:!0,mentionOptions:t,onChange:u,onDiscardConfirm:h,onDiscardCancel:p,onKeyDown:f,onSubmit:m,readOnly:r==="upsell",placeholder:g(r==="upsell"?"panel.comment.placeholder.upsell":"panel.comment.placeholder"),ref:d,value:o})})})}const $Y={parentCommentAvatar:!1,threadCommentsAvatar:!0,replyAvatar:!0,avatarSize:0},LY=k.div(e=>{const t=Re(e.theme);return ae`
    [data-ui='CommentsListItem'] {
      padding-right: ${t.space[2]}px;
    }

    // Increase the padding when the comment input is focused
    [data-ui='CommentInputEditableWrap']:focus-within {
      padding-bottom: ${t.space[2]}px;
    }
  `});function BY(e){const{parentComment:t}=e,{mode:n}=ea();return i.jsx(Vp,{userId:t.authorId,avatarPaddingTop:3,children:i.jsx(LY,{children:i.jsx(cj,{...e,avatarConfig:$Y,canReply:!0,isSelected:!1,mode:n??"default"})})})}const VY=k(it)`
  max-width: 15ch;
  width: '100%';
`,UY=l.memo(function(e){var t;const{createdAt:n,authorId:a}=e,[r,o]=Oa(a),{timeAgo:s,formattedDate:d}=yT(n),{t:c}=L(st);return i.jsx(Vp,{userId:a,children:i.jsx(P,{align:"center",paddingTop:1,children:i.jsxs(E,{size:1,muted:!0,children:[i.jsxs("strong",{style:{fontWeight:600},children:[o?i.jsx(VY,{}):(t=r==null?void 0:r.displayName)!=null?t:c("panel.activity.unknown-user")," "]}),c("panel.activity.created-fragment")," •"," ",i.jsx(Ie,{content:d,placement:"top-end",children:i.jsx(Bp,{children:i.jsx("time",{dateTime:n,children:s})})})]})})})},(e,t)=>e.createdAt===t.createdAt);function zY(e){var t,n;const{value:a,onChange:r,path:o,currentUserId:s}=e,d=(t=a.subscribers)!=null&&t.includes(s)?"Unsubscribe":"Subscribe",c=l.useCallback(()=>{const u=a.subscribers||[];u.includes(s)||r(be(u.concat(s),o)),u.includes(s)&&r(be(u.filter(m=>m!==s),o))},[a.subscribers,s,r,o]);return i.jsxs(P,{gap:1,align:"center",children:[i.jsx(Z,{mode:"bleed",text:d,onClick:c}),a.subscribers&&((n=a.subscribers)==null?void 0:n.length)>0&&i.jsx(KY,{subscriberIds:a.subscribers})]})}const HY=[];function KY(e){const{subscriberIds:t}=e,n=l.useMemo(()=>(t==null?void 0:t.filter(Boolean))||HY,[t]);return i.jsx(Ea,{initial:!1,children:i.jsx(D0,{maxLength:3,size:0,children:n.map(a=>i.jsx(hn.div,{exit:{opacity:0,translateX:"2px",scale:.9},animate:{opacity:1,translateX:0,scale:1,transition:{type:"just",duration:.2}},initial:{opacity:0,translateX:"2px",scale:.9},children:i.jsx(Jr,{user:{id:a},size:0})},a))})})}const jd=[],WY={hidden:{opacity:0,x:0},visible:{opacity:1,x:0}},GY=k(hn(B))``;function qY(e){const{value:t,onChange:n,path:a,activityData:r=[]}=e,o=Tt(),{title:s,basePath:d}=Dt(),{comments:c,mentionOptions:u,operation:m,getComment:p}=xc(),[h,f]=l.useState(null),[g,b]=l.useState(null),[v,y]=l.useState(!1),x=c.loading,w=c.data.open,C=l.useCallback((O,V)=>{const H=new URL(`${window.location.origin}${d?`${d}/`:""}`);H.searchParams.set("sidebar","tasks"),H.searchParams.set("selectedTask",t==null?void 0:t._id),H.searchParams.set("viewMode","edit"),H.searchParams.set("commentId",V);const J=yl(O),q=Array.from(new Set([...t.subscribers||[],...J]));return{documentTitle:t.title||"Sanity task",url:H.toString(),workspaceTitle:s,subscribers:q}},[d,t==null?void 0:t._id,t.title,s,t.subscribers]),T=l.useCallback(O=>{const V=Cn(),H=C(O,V),J={id:V,type:"task",message:O,parentCommentId:void 0,reactions:jd,status:"open",threadId:Cn(),context:{notification:H}};n(be(H.subscribers,["subscribers"])),m.create(J)},[m,C,n]),j=l.useCallback(O=>{const V=Cn(),H=C(O.message,V);n(be(H.subscribers,["subscribers"])),m.create({id:V,type:"task",message:O.message,parentCommentId:O.parentCommentId,reactions:jd,status:"open",threadId:O.threadId,context:{notification:H}})},[m,C,n]),A=l.useCallback(O=>{const V=p(O);if(!V)return;const H=C(V.message,V._id);n(be(H.subscribers,["subscribers"])),m.create({type:"task",id:V._id,message:V.message,parentCommentId:V.parentCommentId,reactions:V.reactions||jd,status:V.status,threadId:V.threadId,context:{notification:H}})},[p,m,C,n]),M=l.useCallback((O,V)=>{m.react(O,V)},[m]),S=l.useCallback(O=>f(O),[]),N=l.useCallback(()=>f(null),[]),D=l.useCallback(async O=>{try{y(!0),b(null),await m.remove(O),f(null)}catch(V){b(V)}finally{y(!1)}},[m]),_=l.useCallback((O,V)=>{m.update(O,V)},[m]),F=l.useMemo(()=>{const O=r.map(H=>({_type:"activity",payload:H,timestamp:H.timestamp})),V=w.map(H=>({_type:"comment",payload:H,timestamp:H.parentComment._createdAt}));return O.concat(V).sort((H,J)=>new Date(H.timestamp).getTime()-new Date(J.timestamp).getTime())},[r,w]),{t:R}=L(st),$=l.useMemo(()=>{var O;const V=w.find(H=>{var J;return((J=H.parentComment)==null?void 0:J._id)===h});return!!(V&&((O=V==null?void 0:V.replies)==null?void 0:O.length)>0)},[h,w]);return i.jsxs(i.Fragment,{children:[h&&i.jsx(nj,{commentId:h,error:g,isParent:$,loading:v,onClose:N,onConfirm:D}),i.jsxs(B,{space:5,children:[i.jsxs(P,{align:"center",children:[i.jsx(I,{flex:1,children:i.jsx(E,{size:2,weight:"semibold",children:R("panel.activity.title")})}),(o==null?void 0:o.id)&&i.jsx(zY,{currentUserId:o.id,value:t,onChange:n,path:a})]}),x&&i.jsx(It,{showText:!0,title:"Loading activity"}),i.jsx(Ea,{children:!x&&i.jsxs(GY,{animate:"visible",initial:"hidden",space:4,variants:WY,children:[t.createdByUser&&i.jsx(B,{paddingBottom:1,children:i.jsx(UY,{createdAt:t.createdByUser,authorId:t.authorId})}),o&&i.jsxs(B,{space:4,marginTop:1,children:[F.map(O=>O._type==="activity"?i.jsx(NY,{activity:O.payload},O.timestamp):i.jsx(BY,{currentUser:o,mentionOptions:u,onCreateRetry:A,onDelete:S,onEdit:_,onReactionSelect:M,onReply:j,parentComment:O.payload.parentComment,replies:O.payload.replies},O.payload.parentComment._id)),i.jsx(DY,{currentUser:o,mentionOptions:u,onSubmit:T})]})]})})]})]})}function YY(e){const{user:t,onSelect:n,pressed:a}=e,{t:r}=L(st),o=l.useCallback(()=>n(t.id),[t,n]);return i.jsx(Hu,{onClick:o,padding:1,disabled:!t.granted,pressed:a,children:i.jsxs(P,{align:"center",gap:3,children:[i.jsxs(P,{align:"center",gap:2,flex:1,children:[i.jsx(Jr,{user:t.id?t:void 0,size:1}),i.jsx(E,{size:1,textOverflow:"ellipsis",title:t.displayName,children:t.displayName})]}),!t.granted&&i.jsx(Sn,{fontSize:1,mode:"outline",children:r("form.input.assignee.unauthorized.text")})]})})}const XY=k(Be)`
  width: 308px;
  border-radius: 3px;
`,JY=["Control","Shift","Alt","Enter","Home","End","PageUp","PageDown","Meta","Tab","CapsLock"],ZY={id:"",displayName:"No assignee",granted:!0};function QY({onSelect:e,value:t=""}){const[n,a]=l.useState(""),{mentionOptions:r}=ss(),o=l.useRef(null),s=[ZY].concat(r.data||[]),d=l.useCallback(h=>{a(h.currentTarget.value)},[]),c=l.useMemo(()=>{var h;if(!n)return s||[];const f=Tr(n).toLocaleLowerCase(),g=s==null?void 0:s.map(b=>({...b,searchName:Tr(b.displayName||"").toLocaleLowerCase()}));return((h=g==null?void 0:g.filter(b=>b==null?void 0:b.searchName.includes(f)))==null?void 0:h.sort((b,v)=>{const y=b.searchName.startsWith(f),x=v.searchName.startsWith(f);return y&&!x?-1:!y&&x?1:0}))||[]},[s,n]),u=l.useCallback(h=>i.jsx(YY,{user:h,onSelect:e,pressed:h.id===t},h.id),[e,t]),m=l.useCallback(h=>{var f;h.target!==o.current&&(JY.includes(h.key)||(f=o.current)==null||f.focus())},[]),{t:p}=L(st);return r.loading?i.jsx(Jn,{width:0,children:i.jsx(It,{showText:!0})}):i.jsxs("div",{onKeyDown:m,children:[i.jsx(nn,{placeholder:p("form.input.assignee.search.placeholder"),autoFocus:!0,border:!1,onChange:d,value:n,fontSize:1,icon:Js,ref:o,name:"assigneeSearch",autoComplete:"off"}),i.jsx("div",{style:{maxHeight:"320px",overflowY:"scroll",paddingTop:"8px"},children:c.length===0?i.jsx(I,{padding:3,children:i.jsx(E,{align:"center",size:1,muted:!0,children:p("form.input.assignee.search.no-users.text")})}):c.map(u)})]})}function xT(e){const{onSelect:t,menuButton:n,value:a}=e;return i.jsx(ze,{button:n,id:"assign-user-menu",menu:i.jsx(XY,{children:i.jsx(QY,{onSelect:t,value:a})}),popover:{placement:"bottom",fallbackPlacements:["bottom"],portal:!0,constrainSize:!0}})}const eX=k(U)(e=>{const t=Re(e.theme);return ae`
    &[data-as='button'] {
      border: 1px solid var(--card-border-color);
      &:focus-within {
        border: 1px solid var(--card-focus-ring-color);
      }
      --card-muted-fg-color: ${t.color.input.default.enabled.placeholder};
    }
  `});function tX(e){const{value:t,onChange:n}=e,{mentionOptions:a}=ss(),r=l.useMemo(()=>{var c;return(c=a.data)==null?void 0:c.find(u=>u.id===t)},[a.data,t]),o=l.useCallback(c=>n(be(c)),[n]),{t:s}=L(st),d=l.useMemo(()=>{if(t){if(a.loading)return i.jsx(it,{animated:!0,style:{width:"10ch"}});if(r)return r.displayName||r.email;if(!r)return s("form.input.assignee.user-not-found.text")}return s("form.input.assignee.search.placeholder")},[a.loading,r,t,s]);return i.jsx(xT,{onSelect:o,value:t,menuButton:i.jsx(eX,{"data-as":"button",padding:1,radius:2,tabIndex:0,children:i.jsxs(P,{align:"center",gap:3,children:[i.jsxs(P,{align:"center",gap:1,flex:1,children:[i.jsx(Jr,{user:r,size:1,border:!1}),i.jsx(E,{size:1,textOverflow:"ellipsis",muted:!r,children:d})]}),t&&r&&!r.granted&&i.jsx(Sn,{fontSize:1,mode:"outline",children:s("form.input.assignee.unauthorized.text")})]})})})}const nX=k(He)`
  padding: 3px 6px;
`;function aX(e){const{value:t,onChange:n,path:a}=e,r=Qo(["subscribers"]),{mentionOptions:o}=ss(),s=l.useMemo(()=>{var m;return(m=o.data)==null?void 0:m.find(p=>p.id===t)},[o.data,t]),{t:d}=L(st),c=l.useCallback(m=>{n(be(m,a)),r&&!r.includes(m)&&m&&n(be([...r,m],["subscribers"]))},[n,a,r]),u=l.useMemo(()=>{if(t){if(o.loading)return i.jsx(it,{animated:!0,style:{width:"10ch"}});if(s)return s.displayName||s.email;if(!s)return d("form.input.assignee.user-not-found.text")}return d("form.input.assignee.no-user-assigned.text")},[o.loading,s,t,d]);return i.jsx(xT,{onSelect:c,value:t,menuButton:i.jsx(nX,{mode:"ghost",padding:0,children:i.jsx(Ie,{content:d(t?"form.input.assignee.user-assigned.tooltip":"form.input.assignee.no-user-assigned.tooltip"),children:i.jsxs(P,{align:"center",gap:3,children:[i.jsxs(P,{align:"center",gap:2,flex:1,children:[i.jsx(Jr,{user:s,size:0}),i.jsx(I,{children:i.jsx(E,{size:1,textOverflow:"ellipsis",children:u})})]}),t&&s&&!s.granted&&i.jsx(Sn,{fontSize:1,mode:"outline",children:d("form.input.assignee.unauthorized.text")})]})})})})}const iX=e=>Ko(e,Ki),rX=e=>Bl(e,Ki);function oX(e){var t;const{value:n,onChange:a,path:r}=e,{t:o}=L(),{t:s}=L(st),[d,c]=l.useState(!1),[u,m]=l.useState(null),p=l.useRef(null),h=ca({dateStyle:"long"}),f=l.useMemo(()=>{if(!n)return{short:"----",full:"----"};const T=h.format(new Date(n)),[j]=T.split(",");return{short:j,full:T}},[h,n]);vt(()=>c(!1),[u]);const g=l.useCallback(T=>{T.key==="Escape"&&c(!1)},[]),b=l.useCallback(()=>c(T=>!T),[]),v=l.useMemo(()=>ap(o),[o]),y=l.useCallback(T=>{a(T?be(iX(T),r):we(r)),c(!1)},[a,r]),x=rX(n),w=l.useCallback(()=>{var T;(T=p.current)==null||T.focus()},[p]),C=((t=x==null?void 0:x.date)==null?void 0:t.getFullYear())===new Date().getFullYear();return i.jsx(rt,{constrainSize:!0,"data-testid":"date-input-dialog",portal:!0,ref:m,content:i.jsx(I,{overflow:"auto",children:i.jsxs(qa,{onDeactivation:w,children:[i.jsx(vC,{calendarLabels:v,selectTime:!1,timeStep:1,onKeyUp:g,value:x.date,onChange:y}),n&&i.jsx(P,{justify:"flex-start",padding:3,paddingTop:0,children:i.jsx(Z,{mode:"bleed",text:s("form.input.date.buttons.remove.text"),onClick:()=>y(null),tone:"critical"})})]})}),open:d,placement:"bottom",fallbackPlacements:["bottom-start","bottom-end"],children:i.jsx(Z,{icon:Qt,mode:"ghost",text:C?f.short:f.full,onClick:b,ref:p,tooltipProps:{content:s(n?"form.input.date.buttons.tooltip":"form.input.date.buttons.empty.tooltip")}})})}const sX=k(E)`
  word-break: break-word;
`;function lX(e){const{children:t}=e;return i.jsx(I,{paddingTop:2,paddingBottom:3,children:i.jsx(sX,{size:1,children:t})})}const cX=e=>{const{children:t}=e;return i.jsx(lX,{children:t})},dX=k.div(e=>{const t=Re(e.theme),n=e.$mode==="edit"?t.space[1]:t.space[3],a=e.$mode==="edit"?120:200;return ae`
    /* select CommentInputEditableWrap and change the padding */
    [data-ui='CommentInputEditableWrap'] {
      overflow: hidden;
      padding: ${e.$mode==="edit"?`${n}px 0px`:`${n}px ${t.space[2]}px`};
      min-height: ${Math.max(e.$minHeight+n,a)}px !important;
    }
    #comment-input-root {
      box-shadow: ${e.$mode==="edit"?"none":""};
    }
    [data-ui='CommentInputActions'] {
      display: none !important;
    }
  `});function uX(e){const{value:t,mode:n,inputProps:{onChange:a}}=e,r=t,o=Tt(),{mentionOptions:s}=ss(),d=l.useCallback(b=>a(be(b)),[a]),[c,u]=l.useState(null),[m,p]=l.useState(200),h=l.useCallback(b=>{const v=b.querySelector('[role="textbox"]');if(!v)return;const y=v.scrollHeight;p(y)},[]),f=l.useCallback(b=>{b&&l.startTransition(()=>{u(b)})},[]),{t:g}=L(st);return l.useEffect(()=>{c&&h(c)},[r,h,c]),o?i.jsx(dX,{$mode:n,ref:f,$minHeight:m,children:i.jsx(ir,{expandOnFocus:!1,currentUser:o,mentionOptions:s,onChange:d,value:r??[],withAvatar:!1,placeholder:g("form.input.description.placeholder"),onDiscardConfirm:()=>null,renderBlock:cX})}):null}const CT=k.div(e=>{const t=Re(e.theme);return ae`
    // Reset the padding of the field header content box
    [data-ui='fieldHeaderContentBox'] {
      padding: 0;
      label {
        font-weight: ${t.font.text.weights.regular};
      }
    }
  `});function Wb(e){return i.jsx(CT,{children:e.renderDefault(e)})}const mX=l.forwardRef(function(e,t){var n;const{t:a}=L(st),{value:r,options:o,...s}=e,d=o.find(u=>u.value===r),c=(n=Dr.find(u=>u.value===r))==null?void 0:n.icon;return i.jsx(Z,{...s,ref:t,tooltipProps:{content:a("form.input.status.button.tooltip")},icon:c,text:(d==null?void 0:d.title)||r,tone:"default",mode:"ghost"})});function pX(e){const{value:t,onChange:n,options:a,path:r}=e,o=ha(),s=l.useCallback(d=>{n(be(d,r)),o.log(qq,{from:t,to:d})},[n,r,o,t]);return i.jsx(ze,{button:i.jsx(mX,{value:t,options:a}),id:"reference-menuButton",menu:i.jsx(Be,{children:a.map(d=>{var c;const u=t===d.value,m=(c=Dr.find(p=>p.value===d.value))==null?void 0:c.icon;return i.jsx(ye,{icon:typeof d.value=="string"?m||To:To,text:d.title||d.value,pressed:u,iconRight:u&&i.jsx(Gn,{}),onClick:()=>s(d.value)},d.title)})})})}function hX(){return i.jsx("div",{children:"Config errors"})}function Up({children:e}){return i.jsx(tte,{LoadingComponent:It,ConfigErrorsComponent:hX,children:e})}const fX=k(U)(e=>{const t=Re(e.theme);return ae`
    &:focus {
      border: 1px solid var(--card-focus-ring-color);
    }
    &:focus-visible {
      outline: none;
      border: 1px solid var(--card-focus-ring-color);
    }
    &:hover {
      border-color: ${t.color.input.default.hovered.border};
    }
  `}),gX=k(E)(e=>`
      color: ${Re(e.theme).color.input.default.enabled.placeholder};
      margin-left: 3px;
  `),bX=k(U)`
  position: relative;
  [data-ui='show-on-hover'] {
    opacity: 0;
    position: absolute;
    right: 6px;
    top: 4px;
    display: flex;
  }
  &:focus-within,
  &:hover {
    padding-right: 36px;
    /* Hides the preview status dot, the button will take it's position. */
    [data-testid='compact-preview__status'] {
      opacity: 0;
    }
    [data-ui='show-on-hover'] {
      transition: opacity 200ms;
      opacity: 1;
    }
  }
`,yX=k(Ma)(()=>ae`
    text-decoration: none;
    width: 100%;
    overflow: hidden;
    cursor: pointer;
    &:focus {
      box-shadow: 0 0 0 1px var(--card-focus-ring-color);
    }
    &:focus-visible {
      outline: none;
      box-shadow: 0 0 0 1px var(--card-focus-ring-color);
    }
  `);function vX(e){const{value:t,handleRemove:n}=e,a=t.document._ref,r=t.documentType,o=ot().get(t.documentType),s=yp(a),{t:d}=L(st),c=l.useMemo(()=>l.forwardRef(function(u,m){return i.jsx(yX,{...u,intent:"edit",params:{id:a,type:r},ref:m})}),[a,r]);return o?i.jsx(bX,{border:!0,radius:2,children:i.jsxs(P,{gap:1,align:"center",justify:"space-between",children:[i.jsx(U,{as:c,radius:2,"data-as":"button",children:i.jsx(h1,{documentId:t.document._ref,layout:"compact",presence:s,schemaType:o,showBadge:!1})}),i.jsx("div",{"data-ui":"show-on-hover",children:i.jsx(Z,{icon:un,mode:"bleed",onClick:n,tooltipProps:{content:d("form.input.target.buttons.remove.text")}})})]})}):i.jsx(E,{children:d("form.input.target.error.schema-not-found")})}function xX(e){const[t,n]=l.useState(!1),{dataset:a,projectId:r}=Dt(),{mode:o,inputProps:{onChange:s},value:d}=e,c=d,u=l.useCallback(b=>{s(be(hT({documentId:b._id,documentType:b._type,dataset:a,projectId:r})))},[a,r,s]),m=l.useCallback(()=>{s(we())},[s]),p=l.useCallback(()=>{n(!0)},[n]),h=l.useCallback(()=>{n(!1)},[n]),f=l.useCallback(b=>{(b.key==="Enter"||b.key===" ")&&n(!0)},[]),{t:g}=L(st);return i.jsx(U,{borderBottom:o==="edit",paddingBottom:o==="edit"?4:0,children:i.jsx(CT,{children:i.jsx(Tl,{zOffset:100,children:i.jsxs(Up,{children:[i.jsxs(B,{space:2,children:[o==="create"&&i.jsx(I,{"data-ui":"fieldHeaderContentBox",children:i.jsx(_m,{description:e.description,inputId:e.inputId,title:e.title,validation:e.validation,deprecated:void 0})}),c?i.jsx(vX,{value:c,handleRemove:m}):i.jsx(fX,{border:!0,radius:2,paddingX:2,paddingY:3,onClick:p,onKeyDown:f,tabIndex:0,children:i.jsxs(P,{gap:1,justify:"flex-start",align:"center",children:[i.jsx(I,{paddingX:1,children:i.jsx(E,{size:1,children:i.jsx(Ar,{})})}),i.jsx(gX,{size:1,children:g("form.input.target.search.placeholder")})]})})]}),i.jsx(XQ,{children:i.jsx(zQ,{open:t,onClose:h,onItemSelect:u,disableIntentLink:!0})})]})})})})}const CX=k.div(e=>`
      display: grid;
      grid-template-columns: 1fr;
      padding-top: ${Re(e.theme).space[3]}px;
    `),wX=k.textarea(e=>{const{color:t,font:n}=Re(e.theme);return ae`
    resize: none;
    overflow: hidden;
    appearance: none;
    background: none;
    border: 0;
    padding: 0;
    border-radius: 0;
    outline: none;
    width: 100%;
    box-sizing: border-box;
    font-family: ${n.text.family};
    font-weight: ${n.text.weights.semibold};
    font-size: ${n.text.sizes[3].fontSize}px;
    line-height: ${n.text.sizes[3].lineHeight}px;
    margin: 0;
    position: relative;
    z-index: 1;
    display: block;
    transition: height 500ms;
    /* NOTE: This is a hack to disable Chrome’s autofill styles */
    &:-webkit-autofill,
    &:-webkit-autofill:hover,
    &:-webkit-autofill:focus,
    &:-webkit-autofill:active {
      -webkit-text-fill-color: var(--input-fg-color) !important;
      transition: background-color 5000s;
      transition-delay: 86400s /* 24h */;
    }

    color: ${t.input.default.enabled.fg};

    &::placeholder {
      color: ${t.input.default.enabled.placeholder};
    }
  `});function wT(e){const{value:t,onChange:n,placeholder:a,path:r}=e,o=l.useRef(null);l.useEffect(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=`${o.current.scrollHeight}px`)},[t]);const s=l.useCallback(d=>{const c=d.currentTarget.value;return c||n(we(r)),n(be(c.replace(/\n/g,""),r))},[n,r]);return i.jsx(CX,{children:i.jsx(wX,{ref:o,autoFocus:!t,value:t,placeholder:a,onChange:s,rows:1})})}function TX(e){const{value:t,inputProps:n}=e,{onChange:a,schemaType:r}=n;return i.jsx(wT,{value:t,onChange:a,placeholder:r.placeholder})}const jX=e=>{const t=e.subscribers||[];return yl(e.description).forEach(n=>{t.includes(n)||t.push(n)}),e.assignedTo&&(t.includes(e.assignedTo)||t.push(e.assignedTo)),t};function kX(e){const[t,n]=l.useState(!1),{onChange:a}=e,{setViewMode:r,setActiveTab:o}=$n(),s=Vt(),d=ha(),[c,u]=l.useState(!1),m=l.useCallback(()=>u(w=>!w),[]),p=e.value,h=l.useCallback(()=>{r({type:"list"})},[r]),{handleRemove:f,removeStatus:g}=bT({id:p._id,onRemoved:h}),{t:b}=L(st),{data:v}=ar(),y=v.find(w=>w._id===p._id);l.useEffect(()=>{t&&y!=null&&y.createdByUser&&(d.log(Gq),s.push({closable:!0,status:"success",title:b("form.status.success")}),n(!1),c?r({type:"create"}):o("subscribed"))},[t,y==null?void 0:y.createdByUser]),l.useEffect(()=>{let w=null;return t&&(w=setTimeout(()=>{n(!1),s.push({closable:!0,status:"error",title:b("form.status.error.creation-failed")})},1e4)),()=>{w&&clearTimeout(w)}},[t]);const x=l.useCallback(async()=>{if(n(!0),!(p!=null&&p.title)){s.push({closable:!0,status:"error",title:b("form.status.error.title-required")});return}a([be(jX(p),["subscribers"]),be(new Date().toISOString(),["createdByUser"])])},[p,a,b,s]);return i.jsxs(i.Fragment,{children:[e.renderDefault(e),i.jsx(I,{paddingY:5,children:i.jsxs(P,{paddingTop:1,gap:4,children:[p._rev&&i.jsx(Z,{onClick:f,mode:"bleed",icon:_t,tooltipProps:{content:b("buttons.discard.text")},disabled:g==="loading",loading:g==="loading"}),i.jsxs(P,{align:"center",gap:2,justify:"flex-end",flex:1,children:[i.jsx(rm,{onChange:m,checked:c}),i.jsx(E,{size:1,muted:!0,children:b("form.input.create-more.text")})]}),i.jsx(Z,{text:b("buttons.create.text"),onClick:x,disabled:t,loading:t})]})})]})}function AX(e){const{handleCloseDialog:t,handleRemove:n,removeStatus:a,showDialog:r}=e,{t:o}=L(st);return r?i.jsx(En,{id:"remove-task",header:o("dialog.remove-task.title"),onClose:t,footer:{cancelButton:{text:o("dialog.remove-task.buttons.cancel.text"),onClick:t},confirmButton:{text:o("dialog.remove-task.buttons.confirm.text"),tone:"critical",onClick:n,loading:a==="loading"}},children:i.jsx(B,{space:3,children:i.jsx(E,{as:"p",children:o("dialog.remove-task.body")})})}):null}const SX=k(P)(e=>{const t=Re(e.theme);return ae`
    column-gap: ${t.space[2]}px;
    row-gap: ${t.space[3]}px;
  `});function _X({id:e,value:t}){const{setViewMode:n,handleCopyLinkToTask:a}=$n(),{mode:r}=ea(),o=ha(),s=l.useCallback(()=>{n({type:"list"}),o.log(Xq)},[n,o]),d=bT({id:e,onRemoved:s}),c=l.useCallback(()=>{n({type:"duplicate",duplicateTaskValues:t}),o.log(Yq)},[n,o,t]),{t:u}=L(st);return i.jsxs(i.Fragment,{children:[i.jsx(I,{paddingTop:3,children:i.jsx(ze,{id:"edit-task-menu",button:i.jsx(wt,{}),popover:{placement:"bottom",fallbackPlacements:["bottom-end","bottom-start"]},menu:i.jsxs(Be,{children:[i.jsx(ye,{text:u("menuitem.duplicate.text"),icon:Br,onClick:c,tooltipProps:r==="upsell"?{content:u("menuitem.duplicate.upsell-tooltip")}:void 0,disabled:r==="upsell"}),i.jsx(ye,{text:u("menuitem.copylink.text"),icon:ma,onClick:a}),i.jsx(en,{}),i.jsx(ye,{text:u("menuitem.delete.text"),icon:_t,onClick:d.handleOpenDialog,tone:"critical"})]})})}),i.jsx(AX,{...d})]})}function EX(e){var t,n,a,r,o,s;const d=e.schemaType.fields.find(f=>f.name==="status"),c=e.value,u=Tt(),{t:m}=L(st),p=AY(c).changes,h=l.useCallback(f=>{const g=c.subscribers||[];e.onChange(f),u&&(g.includes(u.id)||e.onChange(be([...g,u.id],["subscribers"])))},[u,e,c.subscribers]);if(!d)throw new Error("Status field not found");return(t=e.value)!=null&&t._id?i.jsxs(i.Fragment,{children:[i.jsxs(P,{align:"flex-start",gap:3,children:[i.jsx(B,{flex:1,children:i.jsx(wT,{onChange:h,value:(n=e.value)==null?void 0:n.title,path:["title"],placeholder:m("form.input.title.placeholder")})}),i.jsx(_X,{id:(a=e.value)==null?void 0:a._id,value:c})]}),i.jsx(U,{borderTop:!0,marginTop:3,children:i.jsx(SX,{paddingBottom:3,paddingTop:4,align:"flex-start",justify:"flex-start",wrap:"wrap",children:i.jsxs(Ia,{children:[i.jsx(pX,{value:(r=e.value)==null?void 0:r.status,path:["status"],onChange:h,options:d.type.options.list}),i.jsx(aX,{value:(o=e.value)==null?void 0:o.assignedTo,onChange:h,path:["assignedTo"]}),i.jsx(oX,{value:(s=e.value)==null?void 0:s.dueBy,onChange:h,path:["dueBy"]})]})})}),e.renderDefault(e),i.jsx(rH,{documentId:c._id,documentType:"tasks.task",sortOrder:"asc",type:"task",children:i.jsx(Up,{children:i.jsx(U,{borderTop:!0,paddingTop:4,marginTop:4,paddingBottom:6,children:i.jsx(qY,{value:c,onChange:e.onChange,path:["subscribers"],activityData:p})})})})]}):i.jsx(It,{})}function IX(e){const t=e.value,n=Tt(),a=l.useCallback(r=>{if(!n||r.some(u=>u.path[0]==="subscribers")||r.some(u=>u.path[0]==="context"&&u.path[1]==="notification"))return r;const o=t.subscribers||[],s=[...o],d=r.find(u=>u.path[0]==="assignedTo");d&&d.type==="set"&&typeof d.value=="string"&&!s.includes(d.value)&&s.push(d.value),s.includes(n.id)||s.push(n.id);const c=r.find(u=>u.path[0]==="description"&&u.type==="set");if(c){const u=yl(t.description),m=c.type==="set"?c.value:void 0;yl(m).filter(p=>!u.includes(p)).forEach(p=>{s.includes(p)||s.push(p)})}return s.length!==o.length&&r.push(be(s,["subscribers"])),r},[n,t.subscribers,t.description]);return i.jsx(m9,{transform:a,children:i.jsx(EX,{...e})})}function MX(e,t,n=""){let a=window.location.origin;t&&(a+=t),n&&(a+=`/${n}`);const r=new URL(`${a}/`);return r.searchParams.set("sidebar","tasks"),r.searchParams.set("selectedTask",e),r.searchParams.set("viewMode","edit"),r.toString()}function PX(e){var t,n,a,r;const{inputProps:o}=e,{onChange:s}=o,d=Ju(l.useCallback(A=>typeof A.tool=="string"?A.tool:void 0,[])),{target:c,_id:u,context:m,_rev:p}=Qo([]),{title:h,basePath:f}=Dt(),g=Xe(qe),b=l.useMemo(()=>jl(g),[g]),v=(n=(t=c==null?void 0:c.document)==null?void 0:t._ref)!=null?n:"",y=(a=c==null?void 0:c.documentType)!=null?a:"",{isLoading:x,value:w}=$p({documentId:v,documentType:y}),C=(w==null?void 0:w.title)||null,T=Ur(w==null?void 0:w.media)?b.image(w.media).width(96).height(96).url():null,j=l.useMemo(()=>{var A;const M=(A=m==null?void 0:m.notification)==null?void 0:A.url;return{url:M&&Ya?M:MX(u,f,d),workspaceTitle:h,targetContentImageUrl:T,targetContentTitle:C}},[(r=m==null?void 0:m.notification)==null?void 0:r.url,u,f,d,h,T,C]);return l.useEffect(()=>{v&&y&&x||p&&(_y(m==null?void 0:m.notification,j)||s(be(j,["notification"])))},[p,m,v,y,j,x,s]),null}function NX(e){return i.jsx(Up,{children:i.jsx(PX,{...e})})}const Gb=e=>Nl({type:"object",name:"target",title:"Target",components:{field:t=>i.jsx(xX,{...t,mode:e})},fields:[{name:"document",type:"crossDatasetReference",dataset:"playground",weak:!0,studioUrl:({id:t,type:n})=>`intent/edit/id=${t};type=${n}/`,to:[{type:"any_document",preview:{select:{title:"title"}}}]},{name:"documentType",type:"string",title:"Document type"}]}),qb=e=>Nl({type:"array",name:"description",title:"Description",components:{field:t=>i.jsx(uX,{...t,mode:e})},of:[{type:"block",name:"block",of:[{name:"mention",type:"object",fields:[{name:"userId",type:"string"}]}],marks:{annotations:[]},styles:[{title:"Normal",value:"normal"}],lists:[]}]}),OX=e=>oS({type:"document",name:"tasks.task",liveEdit:!0,components:{input:e==="edit"?IX:kX},fields:[{type:"string",title:"Title",name:"title",placeholder:"Task title",components:{field:TX},hidden:e==="edit"},...e==="edit"?[Gb(e),qb(e)]:[qb(e),Gb(e)],{type:"string",name:"assignedTo",title:"Assign to",placeholder:"Select assignee",components:{field:Wb,input:tX},hidden:e==="edit"},{type:"date",name:"dueBy",title:"Deadline",placeholder:"yyyy-mm-dd",components:{field:Wb},hidden:e==="edit"},{type:"string",name:"authorId",hidden:!0},{type:"string",name:"createdByUser",hidden:!0},{type:"array",of:[{type:"string"}],name:"subscribers",hidden:!0},{type:"string",name:"status",title:"Status",options:{list:Dr.map(t=>({value:t.value,title:t.title}))},hidden:!0},{type:"object",name:"context",components:{field:NX},fields:[{type:"object",name:"notification",fields:[{type:"string",name:"url"},{type:"string",name:"workspaceTitle"},{type:"string",name:"targetContentImageUrl"},{type:"string",name:"targetContentTitle"}]}]}]});function FX({children:e,mode:t,addonDataset:n}){const a=Xe({apiVersion:fT}).config().apiHost,r="",o=mt(),s=l.useMemo(()=>({basePath:r,dataset:n,name:`addon-dataset-${n}`,projectId:o.projectId,apiHost:a,schema:{types:[OX(t)]}}),[o.projectId,t,a,n,r]),{workspaces:d}=l.useMemo(()=>KJ(s,{basePath:r}),[s,r]),c=KT(d[0]);return c?i.jsx(Vx,{workspace:c,children:i.jsx(pC,{source:c.unstable_sources[0],children:i.jsx(wU,{children:e})})}):null}function RX(e){const{client:t,ready:n,createAddonDataset:a}=Ic(),r=t==null?void 0:t.config().dataset;return l.useEffect(()=>{!r&&n&&a()},[r,n,a]),r?i.jsx(FX,{...e,addonDataset:r}):i.jsx(It,{})}function DX(e){const{documentType:t="tasks.task",documentId:n,initialValue:a={}}=e,r=ot().get(t);if(!r)throw new Error(`Schema type for '${t}' not found`);const{validation:o}=Rp(n,t),s=Wo(o),[d,c]=l.useState([]),[u,m]=l.useState([]),[p,h]=l.useState(),[f,g]=l.useState(),[b,v]=l.useState(),[y]=l.useState([]),x=l.useCallback(O=>{c(O)},[c]),w=l.useCallback(()=>{c([])},[]),C=l.useCallback((O,V)=>{h(H=>Ws(H,O,V))},[]),T=l.useCallback((O,V)=>{g(H=>Ws(H,O,V))},[]),j=l.useCallback((O,V)=>v(H=>Ws(H,O,V)),[]),{patch:A}=ate(n,t),M=l.useRef(()=>{throw new Error("Nope")});M.current=O=>{A.execute(d9(O.patches),a)};const S=l.useCallback(O=>M.current(O),[]),N=nte(n,t),D=GT(n,t),_=(D==null?void 0:D.draft)||(D==null?void 0:D.published)||a,F=c9(r,{value:_,comparisonValue:_,readOnly:!1,changesOpen:!1,presence:y,focusPath:d,openPath:u,collapsedPaths:p,collapsedFieldSets:f,fieldGroupState:b,validation:s}),R=D.ready&&N==="connected",$=l.useMemo(()=>WM(),[]);return F===null||!R?{loading:!0}:{id:"root",onChange:S,__internal_patchChannel:$,__internal_fieldActions:void 0,onPathFocus:x,onPathOpen:m,onPathBlur:w,onFieldGroupSelect:j,onSetFieldSetCollapsed:T,onSetPathCollapsed:C,collapsedPaths:p,collapsedFieldSets:f,focusPath:F.focusPath,changed:F.changed,focused:F.focused,groups:F.groups,validation:F.validation,members:F.members,presence:F.presence,schemaType:r,value:F.value}}const $X={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.2,delay:.2}}},LX=k(hn.div)(e=>{const t=Re(e.theme);return`
    // Update spacing for the form builder
    & > [data-ui='Stack'] {
      grid-gap: ${Te(t.space[4])};
    }
`}),BX=({documentId:e,initialValue:t})=>{var n,a;const r=DX({documentType:"tasks.task",documentId:e,initialValue:t}),{setSelectedDocument:o}=ss(),s=r.loading||(n=r.value)==null?void 0:n.target,d=(a=s==null?void 0:s.document)==null?void 0:a._ref,c=s==null?void 0:s.documentType;return l.useEffect(()=>{o(d&&c?{_id:d,_type:c}:null)},[d,c,o]),i.jsx(I,{children:r.loading?i.jsx(It,{showText:!0}):i.jsx(LX,{id:"wrapper",initial:"hidden",animate:"visible",variants:$X,children:i.jsx(Q5,{...r})})})};function VX(){const e=Tt(),{activeDocument:t}=ar(),{dataset:n,projectId:a}=Dt(),{state:{selectedTask:r,viewMode:o,duplicateTaskValues:s}}=$n(),d=l.useMemo(()=>{if(e&&r){if(o==="duplicate")return{...s,title:`${s==null?void 0:s.title} (copy)`,createdByUser:void 0,_id:r,_type:"tasks.task",authorId:e.id,status:"open"};if(o==="create")return{_id:r,_type:"tasks.task",authorId:e.id,status:"open",subscribers:[e.id],target:t?hT({documentId:t.documentId,documentType:t.documentType,dataset:n,projectId:a}):void 0}}},[t,e,n,s,a,r,o]);return e?r?i.jsx(Wq,{children:i.jsx(RX,{mode:o==="edit"?"edit":"create",children:i.jsx(BX,{documentId:r,currentUser:e,initialValue:d})})}):null:i.jsx(It,{showText:!0,title:"Loading current user"})}const UX={open:{assigned:{heading:"empty-state.status.list.open.assigned.heading",text:"empty-state.status.list.open.assigned.text"},document:{heading:"empty-state.status.list.open.document.heading",text:""},subscribed:{heading:"empty-state.status.list.open.subscribed.heading",text:"empty-state.status.list.open.subscribed.text"}},closed:{assigned:{heading:"empty-state.status.list.closed.assigned.heading",text:"empty-state.status.list.closed.assigned.text"},document:{heading:"empty-state.status.list.closed.document.heading",text:""},subscribed:{heading:"empty-state.status.list.closed.subscribed.heading",text:"empty-state.status.list.closed.subscribed.text"}}};function zX({status:e}){const{state:{activeTabId:t}}=$n(),{t:n}=L(st),{heading:a,text:r}=UX[e][t];return i.jsxs(B,{space:3,children:[i.jsx(E,{size:1,weight:"semibold",children:n(a)}),i.jsx(E,{size:1,children:n(r)})]})}const HX={assigned:{heading:"empty-state.list.assigned.heading",text:"empty-state.list.assigned.text"},subscribed:{heading:"empty-state.list.subscribed.heading",text:"empty-state.list.subscribed.text"},document:{heading:"empty-state.list.document.heading",text:"empty-state.list.document.text"},noActiveDocument:{heading:"empty-state.list.no-active-document.heading",text:"empty-state.list.no-active-document.text"}},KX=k.div`
  max-width: 268px;
  margin: 0 auto;
  height: 100%;
  margin-top: 40%;
`,Yb=k(E)`
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  animation: fadeIn 0.2s ease-in-out;
`;function WX(){const{activeDocument:e}=ar(),{mode:t}=ea(),{state:{activeTabId:n},setViewMode:a}=$n(),r=!e&&n==="document"?"noActiveDocument":n,{heading:o,text:s}=HX[r],{t:d}=L(st),c=l.useCallback(()=>{a({type:"create"})},[a]);return i.jsx(KX,{children:i.jsxs(P,{direction:"column",gap:3,align:"center",flex:1,justify:"center",children:[i.jsx(Yb,{size:1,weight:"semibold",children:d(o)},r),i.jsx(I,{paddingBottom:6,paddingTop:1,children:i.jsx(Yb,{size:1,align:"center",children:d(s)},r)}),t!=="upsell"&&i.jsx(Z,{icon:Ta,text:d("empty-state.list.create-new"),onClick:c})]})})}const GX=k(Ma)(e=>`
  text-decoration: underline;
  text-decoration-color: ${Re(e.theme).color.input.default.enabled.border};
  text-underline-offset: 2px;
`);function qX({documentId:e,documentType:t}){const n=ot().get(t),{isLoading:a,value:r}=$p({documentId:e,documentType:t}),o=l.useMemo(()=>l.forwardRef(function(s,d){return i.jsx(GX,{...s,intent:"edit",params:{id:e,type:t},ref:d})}),[e,t]);return n?i.jsxs(P,{align:"center",gap:2,children:[i.jsx(E,{size:1,children:i.jsx(Ar,{})}),a?i.jsx(it,{size:1,muted:!0}):i.jsx(E,{size:1,as:o,weight:"medium",style:{maxWidth:"20ch"},textOverflow:"ellipsis",children:(r==null?void 0:r.title)||"Untitled"})]}):null}function YX(e){const t=gT(),{documentId:n,status:a}=e,[r,o]=l.useState(a==="closed"),[s,d]=l.useState(!1),c=l.useCallback(async u=>{const m=u.target.checked;o(m),d(!0);try{m?await t.edit(n,{status:"closed"}):m||await t.edit(n,{status:"open"})}catch(p){console.error("An error occurred while updating the task status",p)}finally{d(!1)}},[n,t]);return i.jsx(P,{children:s?i.jsx("div",{style:{height:"17px",width:"17px"},children:i.jsx($o,{style:{marginLeft:"3.5px",marginRight:"3.5px",marginTop:"3.5px"}})}):i.jsx($l,{onChange:c,checked:r,disabled:s})})}const XX=k(He)`
  width: 100%;
  max-width: 100%;
`,JX=k(P)`
  /* Checkbox width is 17px and first row gap is 12px. */
  margin-left: 29px;
`;function ZX(e){var t;if((t=e==null?void 0:e.document)!=null&&t._ref)return{_ref:e==null?void 0:e.document._ref,_type:e==null?void 0:e.documentType}}function QX({dueBy:e}){const t=ca({dateStyle:"medium"}),n=ca({month:"short",day:"numeric"}),a=ca({weekday:"long"}),r=l.useMemo(()=>{const m=new Date(e);return{fullDate:t.format(m),monthAndDay:n.format(m),day:a.format(m),isDueByToday:sS(m),isDueThisWeek:lS(m)}},[a,e,t,n]),{fullDate:o,monthAndDay:s,day:d,isDueByToday:c,isDueThisWeek:u}=r;return i.jsx(Ie,{content:o,children:i.jsx(U,{tone:c?"critical":"transparent",padding:1,radius:2,children:i.jsx(P,{align:"center",gap:2,children:i.jsx(E,{as:"time",size:1,dateTime:e,muted:!0,children:c?"Today":u?d:s})})})})}function eJ(e){const{assignedTo:t,title:n,dueBy:a,target:r,onSelect:o,documentId:s,status:d}=e,c=l.useMemo(()=>ZX(r),[r]);return i.jsxs(B,{space:3,children:[i.jsxs(P,{align:"center",gap:1,children:[i.jsx(I,{children:i.jsx(YX,{documentId:s,status:d})}),i.jsx(P,{flex:1,children:i.jsx(XX,{onClick:o,mode:"bleed",padding:2,children:i.jsx(E,{size:1,textOverflow:"ellipsis",weight:"semibold",children:n||"Untitled"})})}),i.jsx(Jr,{user:t?{id:t}:void 0,withTooltip:!0})]}),(a||c)&&i.jsxs(JX,{align:"center",gap:2,paddingX:0,children:[a&&i.jsx(QX,{dueBy:a}),c&&i.jsx(I,{marginLeft:1,children:i.jsx(qX,{documentId:c._ref,documentType:c._type})})]})]})}const tJ=[],nJ=e=>{const t=Dr.find(n=>n.value===e);return t==null?void 0:t.title},aJ=k(P)`
  [data-ui='summary-icon'] {
    transition: transform 0.2s;
    transform: rotate(-90deg);
  }
  &[open] [data-ui='summary-icon'] {
    transform: rotate(0);
  }
  > summary::-webkit-details-marker {
    display: none;
  }
`,iJ=k(I)`
  list-style: none;
`;function Xb(e){const{status:t,tasks:n,onTaskSelect:a}=e;return i.jsxs(aJ,{forwardedAs:"details",direction:"column",open:t==="open",children:[i.jsx(iJ,{forwardedAs:"summary",paddingY:1,children:i.jsxs(P,{align:"center",gap:1,paddingY:1,children:[i.jsx(E,{size:1,weight:"medium",muted:!0,children:nJ(t)}),i.jsx(E,{muted:!0,size:1,children:i.jsx(_n,{"data-ui":"summary-icon"})})]})}),i.jsx(B,{space:4,marginTop:3,paddingBottom:5,children:(n==null?void 0:n.length)>0?n.map((r,o)=>{const s=o<n.length-1;return i.jsxs(l.Fragment,{children:[i.jsx(eJ,{documentId:r._id,title:r.title,dueBy:r.dueBy,assignedTo:r.assignedTo,target:r.target,onSelect:()=>a(r._id),status:r.status}),s&&i.jsx(en,{})]},r._id)}):i.jsx(zX,{status:t})})]})}function rJ(e){var t,n;const{items:a=tJ,onTaskSelect:r}=e,o=l.useMemo(()=>a.reduce((c,u)=>(c[u.status]||(c[u.status]=[]),c[u.status].push(u),c),{}),[a]),s=((t=o.open)==null?void 0:t.length)>0,d=((n=o.closed)==null?void 0:n.length)>0;return i.jsx(B,{space:4,flex:1,children:!s&&!d?i.jsx(WX,{}):i.jsxs(i.Fragment,{children:[i.jsx(Xb,{status:"open",tasks:o.open,onTaskSelect:r}),i.jsx(Xb,{status:"closed",tasks:o.closed,onTaskSelect:r})]})})}function oJ(){const{upsellData:e,telemetryLogs:{panelPrimaryClicked:t,panelSecondaryClicked:n}}=pT();return e?i.jsx(Jn,{width:1,children:i.jsx(I,{marginBottom:6,children:i.jsx(Fp,{data:e,onPrimaryClick:t,onSecondaryClick:n})})}):null}const sJ="https://snty.link/tasks-feedback",lJ=k.span`
  margin-right: 0.2em;
`,cJ=k.a`
  white-space: nowrap;
  > [data-sanity-icon] {
    --card-icon-color: var(--card-link-color);
  }
`;function dJ(e){return i.jsxs(cJ,{href:sJ,target:"_blank",rel:"noreferrer",children:[i.jsx(lJ,{children:e.children})," ",i.jsx(Wi,{})]})}function uJ(){const{t:e}=L(st);return i.jsx(I,{padding:4,children:i.jsx(E,{muted:!0,size:1,children:i.jsx(Pe,{i18nKey:"list.feedback.text",t:e,components:{Link:dJ}})})})}const mJ={marginLeft:"-0.5em",justifyContent:"space-between",display:"flex"};function pJ({activeTabId:e,onChange:t}){const{t:n}=L(st),a=l.useMemo(()=>[{id:"assigned",label:n("tab.assigned.label")},{id:"subscribed",label:n("tab.subscribed.label")},{id:"document",label:n("tab.document.label")}],[n]),r=l.useCallback(o=>{t(o.id)},[t]);return i.jsx(p0,{space:2,style:mJ,children:a.map(o=>i.jsx(zy,{"aria-controls":`${o.id}-panel`,id:`${o.id}-tab`,onClick:()=>r(o),selected:o.id===e,children:i.jsx(E,{size:1,weight:"medium",children:o.label})},`${o.id}-tab`))})}const hJ=k.div(e=>`
    height: 25px;
    width: 1px;
    background-color: ${Re(e.theme).color.input.default.enabled.border};
  `);function fJ(e){const{items:t}=e,{state:n,setViewMode:a}=$n(),{selectedTask:r}=n,o=t.filter(m=>m.status==="open"),s=o.findIndex(m=>m._id===r),d=l.useCallback(()=>{const m=s>0?o[s-1]._id:o[o.length-1]._id;a({type:"edit",id:m})},[s,o,a]),c=l.useCallback(()=>{const m=s<o.length-1?o[s+1]._id:o[0]._id;a({type:"edit",id:m})},[s,o,a]),{t:u}=L(st);return o.length?i.jsx(Ia,{children:i.jsxs(P,{gap:1,align:"center",children:[i.jsx(Z,{tooltipProps:{content:u("buttons.previous.tooltip")},mode:"bleed",icon:Vr,onClick:d}),i.jsx(Ie,{content:u("panel.navigation.tooltip"),children:i.jsx(I,{paddingY:2,children:i.jsxs(E,{size:1,children:[s+1," / ",o.length]})})}),i.jsx(Z,{tooltipProps:{content:u("buttons.next.tooltip")},mode:"bleed",icon:_a,onClick:c}),i.jsx(hJ,{})]})}):null}const gJ={constrainSize:!0,fallbackPlacements:["bottom-end"],placement:"bottom-end",portal:!0},bJ=k(Be)`
  width: 220px;
`;function yJ(e){const{isSelected:t,item:n,onSelect:a}=e,r=l.useCallback(()=>{a(n._id)},[n._id,a]),o=t?Gn:void 0,s=n.title||"Untitled";return i.jsx(ye,{iconRight:o,onClick:r,pressed:t,selected:t,text:s})}function vJ(){const{data:e}=ar(),{state:t,setViewMode:n}=$n(),{viewMode:a,selectedTask:r}=t,o=Tt(),s=l.useMemo(()=>o!=null&&o.id?e.filter(u=>{const m=u.authorId===o.id,p=!u.createdByUser,h=u._updatedAt!==u._createdAt,f=a==="create"?u._id!==r:!0;return m&&p&&f&&h}):[],[e,r,o==null?void 0:o.id,a]),d=l.useCallback(u=>{n({type:"draft",id:u})},[n]),{t:c}=L(st);return s.length?i.jsx(ze,{button:i.jsx(Z,{text:c("buttons.draft.text"),mode:"ghost",iconRight:_n}),id:"edit-task-menu",menu:i.jsxs(bJ,{children:[i.jsx(I,{padding:3,children:i.jsx(E,{size:1,weight:"semibold",children:c("panel.drafts.title")})}),i.jsx(en,{}),s==null?void 0:s.map(u=>i.jsx(yJ,{isSelected:r===u._id,item:u,onSelect:d},u._id))]}),popover:gJ}):null}function xJ(e){const{items:t}=e,{mode:n}=ea(),{state:a,setViewMode:r,handleCloseTasks:o}=$n(),{viewMode:s,activeTabId:d}=a,c=l.useCallback(()=>{r({type:"create"})},[r]),u=l.useCallback(()=>{r({type:"list"})},[r]),{t:m}=L(st);return i.jsxs(P,{justify:"space-between",align:"center",gap:1,children:[i.jsx(P,{align:"center",flex:1,children:s==="list"?i.jsx(I,{padding:2,children:i.jsx(E,{size:2,weight:"semibold",children:m("panel.title")})}):i.jsxs(i.Fragment,{children:[i.jsx(He,{mode:"bleed",space:2,padding:2,onClick:u,children:i.jsx(E,{size:1,children:m("panel.title")})}),i.jsx(_a,{}),i.jsx(I,{paddingX:2,children:i.jsx(E,{size:1,weight:"semibold",style:{textTransform:"capitalize"},children:s==="create"||s==="draft"?m("panel.create.title"):d})})]})}),(s==="create"||s==="draft")&&i.jsx(vJ,{}),s==="edit"&&i.jsx(fJ,{items:t}),i.jsxs(P,{gap:1,children:[s==="list"&&i.jsx(Z,{icon:Ta,onClick:c,mode:"bleed",text:m("buttons.new.text"),disabled:n==="upsell",tooltipProps:n==="upsell"?{content:m("buttons.new.upsell-tooltip")}:void 0}),i.jsx(Z,{tooltipProps:{content:m("panel.close.tooltip")},iconRight:un,mode:"bleed",onClick:o})]})]})}const CJ=k(U)`
  flex: 1;
  flex-direction: column;
`,wJ=k(B)`
  border-bottom: 1px solid var(--card-border-color);
`,TJ=k(P)`
  overflow-y: scroll;
  overflow-x: hidden;
`;function jJ(){const{mode:e}=ea(),{activeDocument:t,data:n,isLoading:a}=ar(),{state:r,setActiveTab:o,setViewMode:s}=$n(),{activeTabId:d,viewMode:c,selectedTask:u}=r,m=Tt(),p=l.useCallback(g=>s({type:"edit",id:g}),[s]),h=l.useMemo(()=>n.filter(g=>{var b,v;return g.createdByUser?d==="assigned"?g.assignedTo===(m==null?void 0:m.id):d==="subscribed"?(m==null?void 0:m.id)&&((b=g.subscribers)==null?void 0:b.includes(m.id)):d==="document"?(t==null?void 0:t.documentId)&&((v=g.target)==null?void 0:v.document._ref)===t.documentId:!1:!1}),[t==null?void 0:t.documentId,d,n,m]),f=l.useMemo(()=>c!=="list"?i.jsx(VX,{},u):a?i.jsx(P,{align:"center",justify:"center",children:i.jsx($o,{})}):i.jsxs(i.Fragment,{children:[e==="upsell"&&i.jsx(oJ,{}),i.jsx(rJ,{items:h,onTaskSelect:p})]}),[h,a,p,u,c,e]);return i.jsxs(CJ,{display:"flex",height:"fill",flex:1,overflow:"hidden",children:[i.jsxs(wJ,{space:3,padding:3,sizing:"border",children:[i.jsx(xJ,{items:h}),c==="list"&&!a&&i.jsx(pJ,{activeTabId:d,onChange:o})]}),i.jsx(TJ,{direction:"column",flex:1,overflow:"auto",padding:3,paddingTop:4,paddingX:4,sizing:"border",children:f}),c==="list"&&i.jsx(uJ,{})]})}function kJ(){const{enabled:e}=ea();return e?i.jsx(jJ,{}):null}const AJ={hidden:{opacity:0},visible:{opacity:1}},SJ={duration:.2},TT=1,jT=2,_J=k(P)(({theme:e})=>{const t=e.sanity.media;return ae`
    min-height: 100%;

    @media (max-width: ${t[jT]}px) {
      position: relative;
    }
  `}),EJ=k(hn(wi))(({theme:e})=>{const t=e.sanity.media;return ae`
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 360px;
    border-left: 1px solid var(--card-border-color);
    box-sizing: border-box;
    overflow: hidden;

    box-shadow:
      0px 6px 8px -4px var(--card-shadow-umbra-color),
      0px 12px 17px -1px var(--card-shadow-penumbra-color);

    @media (max-width: ${t[jT]}px) {
      bottom: 0;
      position: absolute;
      right: 0;
      top: 0;
    }

    @media (max-width: ${t[TT]}px) {
      border-left: 0;
      min-width: 100%;
      left: 0;
    }
  `});function IJ(e){const t=Il(),{state:{isOpen:n}}=$n(),a=t<=TT&&n;return i.jsxs(_J,{sizing:"border",height:"fill",children:[i.jsx(I,{flex:1,height:"fill",overflow:a?"hidden":"auto",children:e.renderDefault(e)}),i.jsx(Ea,{initial:!1,children:n&&i.jsx(EJ,{animate:"visible",zOffset:100,height:"fill",initial:"hidden",transition:SJ,variants:AJ,children:i.jsx(kJ,{})})})]})}function MJ(e){const{enabled:t}=ea();return t?i.jsx(IJ,{...e}):e.renderDefault(e)}const PJ=e=>{const{enabled:t,mode:n}=ea();return t?i.jsx(AT,{children:i.jsx(Pl,{condition:n==="upsell",wrapper:a=>i.jsx(hY,{children:a}),children:i.jsx(mY,{children:i.jsx(eY,{children:e.renderDefault(e)})})})}):e.renderDefault(e)};function NJ(e){return i.jsx(Hq,{children:i.jsx(PJ,{...e})})}const OJ=[];function FJ(e){const{handleOpenTasks:t,handleCloseTasks:n,state:{isOpen:a}}=$n(),{t:r}=L(st),o=l.useCallback(()=>{a?n():t()},[a,t,n]),s=l.useMemo(()=>[...(e==null?void 0:e.__internal_actions)||OJ,{icon:vA,location:"topbar",name:"tasks-topbar",onAction:o,selected:a,title:r("actions.open.text")},{icon:im,location:"sidebar",name:"tasks-sidebar",onAction:o,selected:a,title:r("actions.open.text")}],[o,a,e==null?void 0:e.__internal_actions,r]);return e.renderDefault({...e,__internal_actions:s})}function RJ(e){const{enabled:t}=ea();return t?i.jsx(FJ,{...e}):e.renderDefault(e)}const DJ="sanity/tasks",$J=zl({name:"sanity/tasks",__internal_tasks:{footerAction:i.jsx(xY,{})},document:{actions:e=>[...e,fY].filter(Boolean)},studio:{components:{layout:NJ,navbar:RJ,activeToolLayout:MJ}},form:{components:{input:e=>{var t;return e.id==="root"&&((t=e.schemaType.type)==null?void 0:t.name)==="document"?i.jsx(yY,{...e}):e.renderDefault(e)}}},i18n:{bundles:[zq]}}),LJ=[pK(),$J(),Uq()];function BJ(e,t){return LJ.filter(n=>n.name===uT?e.scheduledPublishing.enabled&&!!(t!=null&&t.length):n.name===DJ?e.tasks.enabled:!0)}function VJ(e){return{tasks:{enabled:!0,...e.unstable_tasks,...e.tasks},scheduledPublishing:{...bK,...e.scheduledPublishing}}}function UJ({config:e,context:t}){return on({propertyName:"schema.types",config:e,context:t,initialValue:[],reducer:nz})}class kT extends Error{constructor(t){super("SchemaError"),this.schema=t,this.name="SchemaError"}}const zJ=e=>e.severity==="error";function HJ(e,t,n=""){return zr.isValidElementType(e)?l.createElement(e):l.isValidElement(e)?e:W7(t,n)}const kd=new WeakMap;function KJ(e,t){if(!Array.isArray(e)&&"missingConfigFile"in e)throw new sa({name:"",type:"configuration file",causes:["No `sanity.config.ts` file found","No `sanity.config.js` file found"]});const n=YJ(t==null?void 0:t.basePath),a=Array.isArray(e)?e:[e];try{S_({workspaces:a})}catch(r){throw new sa({name:"",type:"workspace",causes:[r.message]})}return{type:"prepared-config",workspaces:a.map(r=>{if(kd.has(r))return kd.get(r);const o=VJ(r),{unstable_sources:s=[],...d}=r,c=[d,...s].map(({plugins:p,...h})=>({...h,plugins:[...p??[],...BJ(o,p)]})).map(p=>{const{projectId:h,dataset:f}=p;let g;try{g=UJ({config:p,context:{projectId:h,dataset:f}})}catch(T){throw new sa({name:p.name,type:"source",causes:[T]})}const b=sR({name:p.name,types:g}),v=b._validation,y=v==null?void 0:v.filter(T=>T.problems.some(zJ));if(v&&y!=null&&y.length)throw new kT(b);const x=WJ(p),w=jz(p),C=x.state.pipe(K(({client:T,authenticated:j,currentUser:A})=>qJ({config:p,client:T,currentUser:A,schema:b,authenticated:j,auth:x,i18n:w})),an(1));return{name:p.name,projectId:p.projectId,dataset:p.dataset,title:p.title||pn(p.name),auth:x,schema:b,i18n:w.source,source:C}}),u=d.title||pn(d.name),m={type:"workspace-summary",auth:c[0].auth,basePath:XJ(n,d.basePath),dataset:d.dataset,schema:c[0].schema,i18n:c[0].i18n,customIcon:!!d.icon,icon:HJ(d.icon,u,`${d.projectId} ${d.dataset}`),name:d.name||"default",projectId:d.projectId,theme:d.theme||xr,title:u,subtitle:d.subtitle,__internal:{sources:c},__internal_serverDocumentActions:r.__internal_serverDocumentActions,...o};return kd.set(r,m),m})}}function WJ(e){if($E(e.auth))return e.auth;const t=e.unstable_clientFactory||_0,{projectId:n,dataset:a,apiHost:r}=e;return UE({apiHost:r,...e.auth,clientFactory:t,dataset:a,projectId:n})}function GJ(e,t){const n=e.withConfig({apiVersion:"2022-06-30"}),{dataset:a,url:r,requestTagPrefix:o="sanity.studio"}=n.config(),s=`${`${r.replace(/\/+$/,"")}/socket/${a}`.replace(/^http/,"ws")}?tag=${o}`,d=t.token?{token$:t.token}:{};return cS(s,d)}function qJ({config:e,client:t,currentUser:n,schema:a,authenticated:r,auth:o,i18n:s}){var d,c,u,m,p,h,f;const{dataset:g,projectId:b}=e,v=GJ(t,o),y=[],x={},w=_=>{if(!_||!_.apiVersion)throw new Error("Missing required `apiVersion` option");return x[_.apiVersion]||(x[_.apiVersion]=t.withConfig(_)),x[_.apiVersion]},C={client:t,getClient:w,currentUser:n,dataset:g,projectId:b,schema:a,i18n:s.source},T=t;C.client=[...Object.keys(t),...Object.keys(T.__proto__)].reduce((_,F)=>{const R=Object.hasOwnProperty.call(t,F)?T[F]:T.__proto__[F];return Object.defineProperty(_,F,{get(){return console.warn('`configContext.client` is deprecated and will be removed in the next release! Use `context.getClient({apiVersion: "2021-06-07"})` instead'),R}})},{});let j;try{j=on({config:e,context:C,propertyName:"schema.templates",reducer:rz,initialValue:a.getTypeNames().filter(_=>!/^sanity\./.test(_)).map(_=>a.get(_)).filter(Ft).filter(_=>{var F;return((F=_.type)==null?void 0:F.name)==="document"}).map(_=>({id:_.name,schemaType:_.name,title:_.title||_.name,icon:_.icon,value:_.initialValue||{_type:_.name}}))})}catch(_){throw new sa({name:e.name,type:"source",causes:[_]})}let A;try{A=on({config:e,context:C,initialValue:[],propertyName:"tools",reducer:iz})}catch(_){throw new sa({name:e.name,type:"source",causes:[_]})}if(A.some(({name:_})=>_==="tool"))throw new Error('A tool cannot have the name "tool". Please enter a different name.');const M=j.filter(_=>{var F;return!((F=_.parameters)!=null&&F.length)}).map(_=>({templateId:_.id,description:_.description,icon:_.icon,title:_.title})),S=j.reduce((_,F)=>(_.set(F.id,F),_),new Map),N=_=>{const{schemaType:F}=_,R=on({config:e,context:{...C,creationContext:_},initialValue:M,propertyName:"document.resolveNewDocumentOptions",reducer:dz}),$=[];if($.length)throw new sa({name:e.name,type:"source",causes:$});return R.map((O,V)=>{const H=S.get(O.templateId);if(!H)throw new Error(`Could not find template with ID \`${O.templateId}\``);const J=a.get(H.schemaType);if(!J)throw new Error(`Could not find matching schema type \`${H.schemaType}\` for template \`${H.id}\``);const q=O.title||H.title,oe=(J==null?void 0:J.title)===q||J==null?void 0:J.title;return{id:`${O.templateId}-${V}`,templateId:O.templateId,type:"initialValueTemplateItem",title:q,i18n:O.i18n||H.i18n,subtitle:O.subtitle||oe,description:O.description||H.description,icon:O.icon||H.icon||(J==null?void 0:J.icon),initialDocumentId:O.initialDocumentId,parameters:O.parameters,schemaType:H.schemaType}}).filter(O=>{var V;return!F||_.type==="document"?!0:F===((V=S.get(O.templateId))==null?void 0:V.schemaType)})};let D;try{D=N({type:"global"})}catch(_){y.push(_)}if(y.length)throw new sa({name:e.name,type:"source",causes:y});return{type:"source",name:e.name,title:e.title||pn(e.name),schema:a,getClient:w,dataset:g,projectId:b,tools:A,currentUser:n,authenticated:r,templates:j,auth:o,i18n:s.source,__internal_tasks:gz({config:e}),document:{actions:_=>on({config:e,context:{...C,..._},initialValue:ez,propertyName:"document.actions",reducer:cz}),badges:_=>on({config:e,context:{...C,..._},initialValue:QU,propertyName:"document.badges",reducer:lz}),unstable_fieldActions:_=>on({config:e,context:{...C,..._},initialValue:L_,propertyName:"document.unstable_fieldActions",reducer:$_}),inspectors:_=>on({config:e,context:{...C,..._},initialValue:lt,propertyName:"document.inspectors",reducer:hz}),resolveProductionUrl:_=>on({config:e,context:{...C,..._},initialValue:void 0,propertyName:"resolveProductionUrl",asyncReducer:az}),resolveNewDocumentOptions:N,unstable_languageFilter:_=>on({config:e,context:{...C,..._},initialValue:tz,propertyName:"document.unstable_languageFilter",reducer:pz}),unstable_comments:{enabled:_=>Kg({context:_,config:e,initialValue:!0})},comments:{enabled:_=>Kg({context:_,config:e,initialValue:!0})}},form:{file:{assetSources:on({config:e,context:C,initialValue:[l1],propertyName:"formBuilder.file.assetSources",reducer:uz}),directUploads:((c=(d=e.form)==null?void 0:d.file)==null?void 0:c.directUploads)===void 0?!0:e.form.file.directUploads},image:{assetSources:on({config:e,context:C,initialValue:[c1],propertyName:"formBuilder.image.assetSources",reducer:mz}),directUploads:((m=(u=e.form)==null?void 0:u.image)==null?void 0:m.directUploads)===void 0?!0:e.form.image.directUploads}},search:{filters:Iz,operators:H7,unstable_partialIndexing:{enabled:bz({config:e,initialValue:(f=(h=(p=e.search)==null?void 0:p.unstable_partialIndexing)==null?void 0:h.enabled)!=null?f:!1})},enableLegacySearch:on({config:e,context:C,reducer:yz,propertyName:"enableLegacySearch",initialValue:!0})},__internal:{bifur:v,i18next:s.i18next,staticInitialValueTemplateItems:D,options:e},features:{beta:{treeArrayEditing:{enabled:fz({config:e,initialValue:!1})}}}}}function YJ(e){const t=e||"";if(typeof t!="string"||t.length>0&&!t.startsWith("/"))throw new sa({name:"",type:"options",causes:["basePath must be a string, and must start with a slash"]});return t==="/"?"":t}function XJ(e,t){return`/${[e,t||""].map(n=>n.replace(/^\/+/g,"").replace(/\/+$/g,"")).filter(Boolean).join("/")}`}function JJ({children:e,history:t}){return i.jsx(T0.Provider,{value:t,children:e})}function ZJ(){const e=l.useContext(T0);if(!e)throw new Error("Could not find `RouterHistoryProvider` context");return e}l.memo(function({children:e,history:t,activeWorkspace:n,setActiveWorkspace:a}){const r=l.useMemo(()=>({activeWorkspace:n,setActiveWorkspace:a}),[n,a]);return i.jsx(Qy.Provider,{value:r,children:i.jsx(JJ,{history:t,children:e})})});function zp(){const e=l.useContext(Qy);if(!e)throw new Error("Could not find `ActiveWorkspaceMatcher` context");return e}const Ad="v2023-11-13";function AT(e){const{children:t}=e,{dataset:n,projectId:a}=Dt(),r=Xe(qe),[o,s]=l.useState(null),[d,c]=l.useState(!1),[u,m]=l.useState(!1),p=l.useCallback(async()=>{var b;const v=await r.withConfig({apiVersion:Ad}).request({uri:`/projects/${a}/datasets?datasetProfile=comments&addonFor=${n}`,tag:"sanity.studio"});return(b=v==null?void 0:v[0])==null?void 0:b.name},[n,r,a]),h=l.useCallback(b=>r.withConfig({apiVersion:Ad,dataset:b,projectId:a,requestTagPrefix:"sanity.studio",useCdn:!1,withCredentials:!0}),[r,a]),f=l.useCallback(async()=>{c(!0);try{const b=await p();if(b){const v=h(b);return s(v),c(!1),v}}catch{}try{const b=await r.withConfig({apiVersion:Ad}).request({uri:`/comments/${n}/setup`,method:"POST"}),v=b==null?void 0:b.datasetName;if(!v)return c(!1),null;const y=h(v);return s(y),y}catch(b){throw b}finally{c(!1)}},[n,p,h,r]);l.useEffect(()=>{p().then(b=>{if(!b)return;const v=h(b);s(v)}).finally(()=>{m(!0)})},[p,h]);const g=l.useMemo(()=>({client:o,createAddonDataset:f,isCreatingDataset:d,ready:u}),[o,f,d,u]);return i.jsx(e0.Provider,{value:g,children:t})}function Ic(){const e=l.useContext(e0);if(!e)throw new Error("useAddonDataset: missing context value");return e}function QJ(){return EA()?"dark":"light"}function eZ(){const e=l.useContext(fk);if(e===null)throw new Error("Could not find `ColorSchemeSetValueContext` context");return e}function ST(){const e=l.useContext(xA);if(e===null)throw new Error("Could not find `ColorSchemeValueContext` context");return e}function Hp(){const e=ST(),t=QJ();return e==="system"?t:e}function tZ(e,t){const n=ST();return l.useMemo(()=>[{title:t("user-menu.color-scheme.system-title"),name:"system",label:t("user-menu.color-scheme.system-description"),selected:n==="system",onSelect:()=>e("system"),icon:Zk},{title:t("user-menu.color-scheme.dark-title"),name:"dark",label:t("user-menu.color-scheme.dark-description"),selected:n==="dark",onSelect:()=>e("dark"),icon:Qk},{title:t("user-menu.color-scheme.light-title"),name:"light",label:t("user-menu.color-scheme.light-description"),selected:n==="light",onSelect:()=>e("light"),icon:eA}],[n,e,t])}function _T(e){return e.reduce((t,n)=>(t[n.type]=n,t),{})}function vi(e,t){return t?e[t]:void 0}function nZ(e,t){var n;return(n=vi(e,t))==null?void 0:n.initialValue}function Nu(e,t){var n;return{fieldId:t,filterName:e.name,operatorType:((n=e==null?void 0:e.operators.find(a=>a.type==="item"))==null?void 0:n.name)||""}}function Pi({fieldDefinitions:e,filterDefinitions:t,filters:n,operatorDefinitions:a}){return n.filter(r=>ls({filter:r,filterDefinitions:t,fieldDefinitions:e,operatorDefinitions:a})).map(r=>{var o;return(o=vi(a,r.operatorType))==null?void 0:o.groqFilter({fieldPath:aZ({filter:r,fieldDefinitions:e,filterDefinitions:t}),value:r==null?void 0:r.value})}).filter(r=>!xS(r)).filter(Ft).join(" && ")}function Ga(e,t){return t!=null&&t.fieldId?e[t.fieldId]:void 0}function dn(e){return[e.filterName,...e.fieldId?[e.fieldId]:[]].join("-")}function Ni({fieldDefinitions:e,filters:t,types:n}){const a=n.map(d=>d.name),r=Object.values(e).filter(d=>t.map(c=>c==null?void 0:c.fieldId).includes(d.id)).filter(d=>d.documentTypes.length>0).map(d=>d.documentTypes),o=Ud(...r),s=[];return a.length>0&&s.push(a),o.length>0&&s.push(o),Ud(...s).sort()}function aZ({filter:e,fieldDefinitions:t,filterDefinitions:n}){const a=Ga(t,e),r=Ei(n,e.filterName);if(r)switch(r.type){case"field":return a==null?void 0:a.fieldPath;case"pinned":return r==null?void 0:r.fieldPath;default:return}}function ls({filter:e,filterDefinitions:t,fieldDefinitions:n,operatorDefinitions:a}){const r=Ei(t,e.filterName),o=vi(a,e.operatorType),s=Ga(n,e);return!(!r||!o||e.fieldId&&!s||r.type==="field"&&(!(s!=null&&s.fieldPath)||!e.fieldId||!o.groqFilter({fieldPath:s.fieldPath,value:e.value}))||r.type==="pinned"&&!o.groqFilter({fieldPath:r.fieldPath,value:e.value}))}const iZ=Xu("escape"),rZ=500,oZ=k.div`
  background: transparent;
  height: 100%;
  left: 0;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: -1;
`;function Kp({anchorElement:e,children:t,onClose:n}){const{isTopLayer:a}=xi(),r=l.useCallback(s=>{iZ(s)&&a&&n()},[a,n]);Pa(r);const o=sZ(e||null);return i.jsxs(i.Fragment,{children:[i.jsx(oZ,{onClick:n}),i.jsx(qa,{autoFocus:!1,returnFocus:!0,children:i.jsx(U,{display:"flex",overflow:"hidden",radius:Yr,style:{maxHeight:`min(calc(100vh - ${o}px - ${ns}px - ${bu}px), ${rZ}px`,zIndex:1},children:i.jsx(P,{children:t})})})]})}function Sd(e){const t=e.getBoundingClientRect();return t.y+t.height+ns}function sZ(e){const[t,n]=l.useState(e&&Sd(e)),a=l.useCallback(()=>{e&&n(Sd(e))},[e]);return l.useEffect(()=>{e&&n(Sd(e))},[e]),l.useEffect(()=>(window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)),[a]),t}const lZ=k(I)`
  border-bottom: 1px solid ${({theme:e})=>e.sanity.color.base.border};
  flex-shrink: 0;
`,cZ=k(P)`
  box-sizing: border-box;
`,ET=l.forwardRef(function({ariaInputLabel:e,onChange:t,onClear:n,typeFilter:a},r){const{state:{fullscreen:o}}=Ve(),{t:s}=L();return i.jsx(lZ,{children:i.jsx(cZ,{align:"center",flex:1,padding:1,children:i.jsx(Tp,{__unstable_disableFocusRing:!0,$smallClearButton:!0,"aria-label":e,autoComplete:"off",border:!1,clearButton:!!a,fontSize:o?2:1,icon:Rn,muted:!0,onChange:t,onClear:n,placeholder:s("search.filter-placeholder"),ref:r,spellCheck:!1,radius:2,value:a})})})});function dZ({documentTypesNarrowed:e,fieldDefinitions:t,filterDefinitions:n,schema:a,titleFilter:r,types:o,t:s}){const d=Object.values(t).filter(u=>hZ(u,r)).map(u=>{const m=Ei(n,u.filterName);return m?Nu(m,u.id):null}).filter(Ft),c=mZ({fieldDefinitions:t,filterDefinitions:n,titleFilter:r});return e.length===0?[...c,...Do({fieldDefinitions:t,filterDefinitions:n,filters:d,headerTitle:s("search.filter-all-fields-header"),id:"field"})]:[...c,...uZ({documentTypesNarrowed:e,fieldDefinitions:t,filterDefinitions:n,filters:d,schema:a,types:o,t:s})]}function Do({fieldDefinitions:e,filterDefinitions:t,filters:n,id:a,headerTitle:r,tone:o}){const s={title:r||"",tone:o||"default",type:"header"},d=n.map(c=>({fieldDefinition:Ga(e,c),filterDefinition:Ei(t,c.filterName),filter:c,group:a,tone:o||"default",type:"filter"}));return d.length>0?[...r?[s]:[],...d]:[]}function uZ({documentTypesNarrowed:e,fieldDefinitions:t,filterDefinitions:n,filters:a,schema:r,types:o,t:s}){const d=a.filter(m=>{const p=Ga(t,m);return bZ(e,p)}),c=e.length>1&&o.length>1?Do({fieldDefinitions:t,filterDefinitions:n,filters:d,headerTitle:s("search.filter-shared-fields-header"),id:"shared",tone:"primary"}):[],u=e.map(m=>{const p=r.get(m);return{title:(p==null?void 0:p.title)||pn(p==null?void 0:p.name)||"(Unknown type)",documentType:m}}).sort((m,p)=>m.title.localeCompare(p.title)).map(({documentType:m,title:p})=>{const h=a.filter(f=>{const g=Ga(t,f);return pZ([m],g)});return Do({fieldDefinitions:t,filterDefinitions:n,filters:h,id:p,headerTitle:p})}).flat();return[...c,...u]}function mZ({fieldDefinitions:e,filterDefinitions:t,titleFilter:n}){const a=Object.values(t).filter(gZ).filter(o=>Jb(o,n)).map(o=>Nu(o)),r=Object.values(t).filter(fZ).filter(o=>Jb(o,n)).reduce((o,s)=>(o[s.group]=o[s.group]||[],o[s.group].push(Nu(s)),o),{});return[...Do({fieldDefinitions:e,filterDefinitions:t,filters:a,id:"pinned-ungrouped",tone:"primary"}),...Object.entries(r).flatMap(([o,s])=>Do({fieldDefinitions:e,filterDefinitions:t,filters:s,headerTitle:o,id:o,tone:"primary"}))]}function pZ(e,t){return t==null?void 0:t.documentTypes.some(n=>e.includes(n))}function hZ(e,t){return e.titlePath.join("/").toLowerCase().includes(t.toLowerCase())}function Jb(e,t){return e.title.toLowerCase().includes(t.toLowerCase())}function fZ(e){return e.type==="pinned"&&typeof(e==null?void 0:e.group)<"u"}function gZ(e){return e.type==="pinned"&&typeof(e==null?void 0:e.group)>"u"}function bZ(e,t){return Ys(e,(t==null?void 0:t.documentTypes)||[]).length===0}function IT({filter:e,maxLength:t}){const{state:{definitions:n}}=Ve(),a=l.useMemo(()=>{const r=Ei(n.filters,e.filterName);switch(r==null?void 0:r.type){case"field":{const o=Ga(n.fields,e);return o!=null&&o.titlePath?o.titlePath[o.titlePath.length-1]:null}case"pinned":return r.title;default:return null}},[n,e]);return a?t&&a.length>t?i.jsxs("span",{children:[a.slice(0,t),"…"]}):i.jsx("span",{children:a}):null}function yZ({filter:e}){var t;const{state:{definitions:n}}=Ve(),a=(t=Ei(n.filters,e.filterName))==null?void 0:t.icon;return a?l.createElement(a):i.jsx(mi,{})}function MT({filter:e}){var t;const{state:{definitions:n}}=Ve(),a=Ga(n.fields,e);return i.jsxs(B,{space:2,children:[(a==null?void 0:a.titlePath)&&((t=a.titlePath)==null?void 0:t.length)>1&&i.jsx(I,{marginLeft:4,children:i.jsx(E,{muted:!0,size:0,children:a.titlePath.slice(0,-1).map((r,o)=>i.jsxs(l.Fragment,{children:[i.jsx("span",{children:r}),o!==a.titlePath.length-2&&i.jsx("span",{style:{opacity:.75,paddingLeft:"0.25em",paddingRight:"0.25em"},children:i.jsx(_a,{})})]},o))})}),i.jsxs(P,{align:"flex-start",gap:3,children:[i.jsx(I,{style:{flexShrink:0},children:i.jsx(E,{size:1,children:i.jsx(yZ,{filter:e})})}),i.jsx(E,{size:1,weight:"medium",children:i.jsx(IT,{filter:e})})]})]})}function PT(e){return l.isValidElement(e)?vZ(tA(e)):typeof e=="string"?e:""}function vZ(e){var t;return((t=new DOMParser().parseFromString(e,"text/html"))==null?void 0:t.body.textContent)||""}const _d=10;function xZ({children:e,fieldDefinition:t,filterDefinition:n,visible:a}){const{state:{documentTypesNarrowed:r}}=Ve(),{t:o}=L(),s=ot(),d=l.useMemo(()=>t!=null&&t.documentTypes?t.documentTypes.map(u=>{const m=s.get(u);return(m==null?void 0:m.title)||pn(m==null?void 0:m.name)}).filter(Ft).sort():[],[t==null?void 0:t.documentTypes,s]),c=l.useMemo(()=>{if(t!=null&&t.documentTypes){const u=t.documentTypes.map(p=>{const h=s.get(p);if(h){const f=gc(h,t.fieldPath);return(f==null?void 0:f.type.description)&&PT(f==null?void 0:f.type.description)}return null}).filter(Ft).sort(),m=za(u);if(m.length===1)return m[0]}},[t==null?void 0:t.documentTypes,t==null?void 0:t.fieldPath,s]);return i.jsx(Ie,{content:i.jsx(U,{tone:"default",radius:2,style:{maxWidth:"250px"},children:i.jsxs(B,{space:4,children:[t&&i.jsxs(B,{space:3,children:[i.jsx(E,{muted:!0,size:1,weight:"medium",children:o("search.filter-field-tooltip-name")}),i.jsx(Ct,{size:1,style:{fontFamily:"monospace"},tone:"primary",textOverflow:"ellipsis",children:t==null?void 0:t.name})]}),c&&i.jsxs(B,{space:3,children:[i.jsx(E,{muted:!0,size:1,weight:"medium",children:o("search.filter-field-tooltip-description")}),i.jsx(E,{muted:!0,size:1,children:hh(c,256)})]}),(n==null?void 0:n.description)&&i.jsx(E,{muted:!0,size:1,children:hh(n.description,256)}),!r.length&&d.length>0&&i.jsxs(B,{space:2,children:[i.jsxs(P,{align:"center",gap:1,children:[i.jsx(E,{muted:!0,size:1,weight:"medium",children:o("search.filter-field-tooltip-used-in-document-types")}),i.jsx(U,{padding:1,radius:2,tone:"transparent",children:i.jsx(E,{size:1,muted:!0,children:d.length})})]}),i.jsxs(E,{size:1,weight:"regular",muted:!0,children:[d.slice(0,_d).join(", "),(d==null?void 0:d.length)>_d?` +${d.length-_d} more`:""]})]})]})}),disabled:!a,fallbackPlacements:["left"],placement:"right",portal:!0,children:e})}const CZ=l.memo(function({item:e,onClose:t,...n}){const{dispatch:a,state:{filters:r}}=Ve(),o=l.useCallback(()=>{a({filter:e.filter,type:"TERMS_FILTERS_ADD"}),t==null||t()},[a,e.filter,t]),s=!!r.find(c=>dn(c)===dn(e.filter)),d=!!(e.fieldDefinition||e.filterDefinition.description);return i.jsx(I,{...n,children:i.jsx(He,{disabled:s,fontSize:1,justify:"flex-start",mode:"bleed",onClick:s?void 0:o,padding:0,style:{position:"relative",whiteSpace:"normal",width:"100%"},tabIndex:-1,tone:e==null?void 0:e.tone,children:i.jsx(xZ,{fieldDefinition:e.fieldDefinition,filterDefinition:e.filterDefinition,visible:d,children:i.jsx(I,{padding:3,children:i.jsx(MT,{filter:e.filter})})})})})}),wZ=l.memo(function({item:e}){return i.jsx(I,{paddingTop:1,children:i.jsx(U,{borderBottom:!0,paddingX:2,paddingY:3,tone:e==null?void 0:e.tone,children:i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",weight:"medium",children:e.title})})})}),TZ={width:"300px"};function jZ({onClose:e}){const[t,n]=l.useState(null),[a,r]=l.useState(""),{t:o}=L(),s=l.useCallback(y=>r(y.currentTarget.value),[r]),d=l.useCallback(()=>r(""),[]),c=ot(),{state:{documentTypesNarrowed:u,definitions:m,filters:p,terms:{types:h}}}=Ve(),f=l.useMemo(()=>dZ({documentTypesNarrowed:u,fieldDefinitions:m.fields,filterDefinitions:m.filters,schema:c,titleFilter:a,types:h,t:o}),[u,m.fields,m.filters,c,a,h,o]),g=l.useCallback(y=>y.type==="filter"?i.jsx(CZ,{item:y,onClose:e,paddingBottom:1}):y.type==="header"?i.jsx(wZ,{item:y}):null,[e]),b=l.useCallback(y=>{const x=f[y];return x.type!=="filter"||!!p.find(w=>dn(w)===dn(x.filter))},[f,p]),v=l.useCallback(y=>{const x=f[y];switch(x.type){case"filter":return[...x.group?[x.group]:[],dn(x.filter)].join("-");case"header":return`${x.type}-${x.title}`;default:return y}},[f]);return i.jsxs(P,{direction:"column",style:TZ,children:[i.jsx(ET,{ariaInputLabel:o("search.filter-by-title-aria-label"),onChange:s,onClear:d,ref:n,typeFilter:a}),i.jsxs(P,{children:[f.length>0&&i.jsx(Gi,{activeItemDataAttr:"data-hovered",ariaLabel:o("search.filters-aria-label",{count:f.length}),autoFocus:"input",getItemDisabled:b,getItemKey:v,inputElement:t,itemHeight:45,items:f,overscan:20,padding:1,paddingBottom:0,renderItem:g}),f.length==0&&i.jsx(I,{padding:3,children:i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",children:o("search.filter-no-matches-found",{filter:a})})})]})]})}function Zb(){const[e,t]=l.useState(!1),[n,a]=l.useState(null),[r,o]=l.useState(null),{t:s}=L(),{state:{fullscreen:d}}=Ve(),c=l.useCallback(()=>t(!1),[]),u=l.useCallback(()=>t(!0),[]);return vt(c,[n,r]),i.jsx(rt,{__unstable_margins:[ns,0,0,0],content:i.jsx(Kp,{anchorElement:n,onClose:c,children:i.jsx(jZ,{onClose:c})}),open:e,placement:"bottom-start",radius:Yr,ref:o,portal:!0,children:i.jsx(Z,{icon:Ta,mode:"bleed",onClick:u,size:d?"large":"default",ref:a,selected:e,text:s("search.action.add-filter")})})}const kZ=l.memo(function({selected:e,type:t,...n}){var a,r;const{dispatch:o}=Ve(),s=l.useCallback(()=>{o({type:"TERMS_TYPE_ADD",schemaType:t})},[o,t]),d=l.useCallback(()=>{o({type:"TERMS_TYPE_REMOVE",schemaType:t})},[o,t]),c=l.useCallback(()=>{e?d():s()},[s,d,e]);return i.jsx(I,{...n,children:i.jsx(Z,{iconRight:e&&Gn,justify:"flex-start",mode:"bleed",onClick:c,width:"fill",size:"large",tabIndex:-1,text:(r=t.title)!=null?r:t.name,tone:e?"primary":"default"},(a=t.title)!=null?a:t.name)})}),AZ=k(I)`
  border-top: 1px solid ${({theme:e})=>e.sanity.color.base.border};
  flex-shrink: 0;
`,SZ={width:"250px"};function _Z(){const[e,t]=l.useState(null),[n,a]=l.useState(""),r=l.useRef(null),{t:o}=L(),s=ot(),{dispatch:d,state:{terms:{types:c}}}=Ve(),[u,m]=l.useState(c),p=IZ(s,c,u,n),h=l.useCallback(w=>a(w.currentTarget.value),[a]),f=l.useCallback(()=>a(""),[]),g=l.useCallback(()=>{var w,C;m([]),d({type:"TERMS_TYPES_CLEAR"}),(w=r==null?void 0:r.current)==null||w.focusInputElement(),(C=r==null?void 0:r.current)==null||C.scrollToIndex(0)},[d]),b=l.useCallback(w=>{const C=p[w];switch(C.type){case"divider":return`${C.type}-${w}`;case"header":return`${C.type}-${C.title}`;case"item":return`${C.type}-${C.item.name}`;default:return w}},[p]),v=l.useCallback(w=>w.type==="divider"?i.jsx(I,{paddingY:1,children:i.jsx(en,{})}):w.type==="header"?i.jsx(I,{margin:2,padding:1,children:i.jsx(E,{muted:!0,size:1,weight:"medium",children:w.title})}):w.type==="item"?i.jsx(kZ,{paddingBottom:1,selected:w.selected,type:w.item}):null,[]),y=l.useCallback(w=>p[w].type!=="item",[p]),x=l.useCallback(w=>{const C=p[w];return C.type==="item"&&C.selected},[p]);return i.jsxs(P,{direction:"column",style:SZ,children:[i.jsx(ET,{ariaInputLabel:o("search.action.filter-by-document-type-aria-label"),onChange:h,onClear:f,ref:t,typeFilter:n}),i.jsxs(P,{children:[p.length>0&&i.jsx(Gi,{activeItemDataAttr:"data-hovered",ariaLabel:o("search.document-types-aria-label"),ariaMultiselectable:!0,autoFocus:"input",getItemDisabled:y,getItemSelected:x,getItemKey:b,inputElement:e,itemHeight:37,items:p,overscan:20,padding:1,paddingBottom:0,ref:r,renderItem:v}),!p.length&&i.jsx(I,{padding:3,children:i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",children:o("search.document-types-no-matches-found",{filter:n})})})]}),!n&&c.length>0&&i.jsx(EZ,{onClick:g,selectedTypes:c})]})}function EZ({onClick:e,selectedTypes:t}){const{t:n}=L();return i.jsx(AZ,{padding:1,children:i.jsx(B,{children:i.jsx(Z,{"aria-label":n("search.action.clear-type-filters-aria-label"),"data-name":"type-filter-button",disabled:t.length===0,mode:"bleed",onClick:e,text:n("search.action.clear-type-filters-label"),tone:"primary"})})})}function IZ(e,t,n,a){return l.useMemo(()=>{const[r,o]=cv(Bz(e,a),u=>n.includes(u)),s=r.length>0,d=r.length>0,c=[];return s&&c.push({title:"Selected",type:"header"}),r.forEach(u=>c.push({item:u,selected:t.includes(u),type:"item"})),s&&d&&c.push({type:"divider"}),o.forEach(u=>c.push({item:u,selected:t.includes(u),type:"item"})),c},[e,t,n,a])}const MZ=["top-start","bottom-start"];function PZ(){const[e,t]=l.useState(!1),[n,a]=l.useState(null),[r,o]=l.useState(null),{state:{fullscreen:s,terms:{types:d}}}=Ve(),{t:c}=L(),u=l.useCallback(()=>t(!1),[]),m=l.useCallback(()=>t(!0),[]);vt(u,[n,r]);const p=l.useMemo(()=>v1({types:d,t:c}),[d,c]);return i.jsx(rt,{__unstable_margins:[ns,0,0,0],content:i.jsx(Kp,{anchorElement:n,onClose:u,children:i.jsx(_Z,{})}),open:e,placement:"bottom-start",fallbackPlacements:MZ,portal:!0,radius:Yr,ref:o,children:i.jsx(Z,{iconRight:_n,mode:"ghost",onClick:m,size:s?"large":"default",ref:a,selected:e,text:p,tone:"default"})})}const Ed=k(I)`
  flex-shrink: ${({$flexShrink:e=0})=>e};
`;function NT({filter:e,fontSize:t=1,showContent:n=!0}){const{t:a}=L(),{state:{definitions:r,fullscreen:o}}=Ve(),s=vi(r.operators,e.operatorType),d=s==null?void 0:s.buttonValueComponent,c=e.value,u=l.useMemo(()=>({Field:()=>i.jsx(Ed,{$flexShrink:o?1:0,children:i.jsx(Ct,{tone:"default",size:t,textOverflow:"ellipsis",weight:"medium",children:i.jsx(IT,{filter:e,maxLength:o?25:40})})}),Operator:({children:m})=>n?i.jsx(Ed,{$flexShrink:0,children:i.jsx(Ct,{tone:"default",size:t,textOverflow:"ellipsis",weight:"regular",children:m})}):null,Value:({children:m})=>n?i.jsx(Ed,{$flexShrink:1,children:i.jsx(Ct,{tone:"default",size:t,textOverflow:"ellipsis",weight:"medium",children:d?i.jsx(d,{value:c}):m})}):null}),[e,t,o,n,d,c]);if(s!=null&&s.descriptionKey||console.warn("Missing `descriptionKey` for operator `%s`",e.operatorType),!n||!(s!=null&&s.descriptionKey)){const m=u.Field;return i.jsx(P,{align:"center",gap:1,children:i.jsx(m,{})})}return i.jsx(P,{align:"center",gap:1,children:i.jsx(Pe,{t:a,i18nKey:s==null?void 0:s.descriptionKey,components:u,values:NZ(e)})})}function NZ(e){const t={};return typeof e.value=="number"&&(t.count=e.value),Id(e.value)&&(t.value=e.value),Ke(e.value)&&"from"in e.value&&Id(e.value.from)&&(t.from=e.value.from),Ke(e.value)&&"to"in e.value&&Id(e.value.to)&&(t.to=e.value.to),t}function Id(e){return typeof e=="string"||typeof e=="number"}function OZ(e){const{t}=L();return i.jsx(I,{...e,children:i.jsxs(P,{align:"flex-start",gap:3,children:[i.jsx(Ct,{tone:"critical",children:i.jsx(Aa,{})}),i.jsxs(B,{space:4,children:[i.jsx(Ct,{size:1,tone:"critical",weight:"medium",children:t("search.error.display-filter-title")}),i.jsx(Ct,{size:1,tone:"critical",children:t("search.error.display-filter-description")})]})]})})}function FZ({onClick:e,operator:t,selected:n}){const a=l.useCallback(()=>e(t.type),[e,t.type]),{t:r}=L();return i.jsx(ye,{onClick:a,pressed:n,tone:"default",text:r(t.nameKey),iconRight:t==null?void 0:t.icon})}function RZ({filter:e,operator:t}){var n;const a=l.useId(),{t:r}=L(),{dispatch:o,state:s}=Ve(),d=(n=Ei(s.definitions.filters,e.filterName))==null?void 0:n.operators,c=l.useCallback(u=>{o({filterKey:dn(e),operatorType:u,type:"TERMS_FILTERS_SET_OPERATOR"})},[o,e]);return!t||!d||d.length<=1?null:i.jsx(et,{children:i.jsx(ze,{button:i.jsx(Z,{mode:"ghost",iconRight:_n,text:r(t.nameKey)}),id:a||"",menu:i.jsx(Be,{children:d.map((u,m)=>{if(u.type==="item"){const p=vi(s.definitions.operators,u.name);return p?i.jsx(FZ,{onClick:c,operator:p,selected:t.type===u.name},m):null}return u.type==="divider"?i.jsx(en,{},m):null})}),placement:"bottom-start",popover:{constrainSize:!0,portal:!1,radius:2}})})}function DZ({filter:e}){const[t,n]=l.useState(null),{dispatch:a,state:{definitions:r,fullscreen:o}}=Ve(),s=Ei(r.filters,e.filterName),d=vi(r.operators,e.operatorType),c=Ga(r.fields,e),u=dn(e),m=l.useCallback(()=>{a({filterKey:dn(e),type:"TERMS_FILTERS_REMOVE"})},[a,e]),p=l.useCallback(g=>{a({filterKey:u,type:"TERMS_FILTERS_SET_VALUE",value:g})},[a,u]),h=l.useCallback(g=>{n(g)},[]),f=d==null?void 0:d.inputComponent;return t?i.jsx(OZ,{padding:4}):i.jsx(dm,{onCatch:h,children:i.jsx(qa,{autoFocus:!Go,returnFocus:!0,children:i.jsxs(P,{direction:"column-reverse",children:[f&&i.jsx(U,{borderTop:!0,padding:3,children:i.jsx(f,{fieldDefinition:c,onChange:p,value:e.value},e.operatorType)}),i.jsx(U,{padding:3,children:i.jsxs(B,{space:3,children:[i.jsxs(P,{align:"flex-start",gap:3,justify:"space-between",children:[i.jsx(I,{paddingLeft:1,paddingRight:2,paddingY:1,children:i.jsx(MT,{filter:e})}),o&&i.jsx(Z,{icon:_t,mode:"bleed",onClick:m,tone:"critical",tooltipProps:{content:"Remove filter"}})]}),(s==null?void 0:s.description)&&i.jsx(U,{border:!0,padding:3,radius:2,tone:"transparent",children:i.jsx(E,{muted:!0,size:1,children:s.description})}),i.jsx(RZ,{filter:e,operator:d})]})})]})})})}const $Z=k(P)`
  max-width: 480px;
  min-width: 150px;
  overflow: hidden;
  overflow: clip;
  width: 100%;
`;function LZ({filter:e}){return i.jsxs($Z,{direction:"column",children:[i.jsx(DZ,{filter:e}),f1]})}const BZ=k(He)`
  border-radius: ${({theme:e})=>`0 ${Te(e.sanity.radius[2])} ${Te(e.sanity.radius[2])} 0`};
`,VZ=k(U)`
  position: absolute;
  right: 0;
`,UZ=k.div`
  align-items: center;
  display: inline-flex;
  max-width: 100%;
  position: relative;
`,zZ=k(He)`
  border: none;
  width: 100%;
`;function HZ({filter:e,initialOpen:t}){const[n,a]=l.useState(t),[r,o]=l.useState(null),[s,d]=l.useState(null),{dispatch:c,state:{definitions:u,fullscreen:m}}=Ve(),{t:p}=L(),h=l.useCallback(()=>a(!1),[]),f=l.useCallback(()=>a(!0),[]),g=l.useCallback(()=>c({filterKey:dn(e),type:"TERMS_FILTERS_REMOVE"}),[c,e]),b=l.useCallback(y=>{["Backspace","Delete"].includes(y.key)&&g()},[g]);vt(h,[r,s]);const v=ls({fieldDefinitions:u.fields,filter:e,filterDefinitions:u.filters,operatorDefinitions:u.operators});return i.jsx(rt,{__unstable_margins:[ns,0,0,0],content:i.jsx(Kp,{anchorElement:r,onClose:h,children:i.jsx(LZ,{filter:e})}),constrainSize:!0,open:n,overflow:"auto",placement:"bottom-start",portal:!0,radius:Yr,ref:d,children:i.jsxs(UZ,{children:[i.jsx(U,{__unstable_focusRing:!0,display:"flex",radius:2,tone:v?"primary":"transparent",children:i.jsx(zZ,{mode:"bleed",onClick:f,onKeyDown:b,paddingLeft:m?3:2,paddingRight:m?3:5,paddingY:m?3:2,ref:o,children:i.jsx(NT,{filter:e,showContent:v})})}),!m&&i.jsx(VZ,{__unstable_focusRing:!0,display:"flex",radius:2,tone:v?"primary":"transparent",children:i.jsx(BZ,{"aria-label":p("search.action.remove-filter-aria-label"),fontSize:1,icon:un,mode:"bleed",onClick:g,onKeyDown:b,padding:2,radius:2})})]})})}function KZ({showTypeFilter:e=!0}){const{dispatch:t,state:{filters:n,fullscreen:a,lastAddedFilter:r,terms:{types:o}}}=Ve(),{t:s}=L(),d=l.useRef(!1),c=l.useCallback(()=>{e&&t({type:"TERMS_TYPES_CLEAR"}),t({type:"TERMS_FILTERS_CLEAR"})},[t,e]),u=n.length>0||e&&o.length>0;l.useEffect(()=>{d.current=!0},[]);const m=r&&dn(r),p=()=>i.jsx(Z,{mode:"bleed",onClick:c,size:a?"large":"default",text:s("search.action.clear-filters"),tone:"critical"});return i.jsxs(i.Fragment,{children:[i.jsxs(P,{align:"flex-start",gap:3,justify:"space-between",padding:2,children:[i.jsxs(P,{flex:1,gap:2,wrap:"wrap",children:[e&&i.jsx(PZ,{}),n==null?void 0:n.map(h=>{const f=dn(h);return i.jsx(HZ,{filter:h,initialOpen:d.current&&m===f},f)}),!a&&i.jsx(Zb,{})]}),u&&!a&&i.jsx(p,{})]}),a&&i.jsxs(P,{justify:"space-between",paddingBottom:2,paddingX:2,children:[i.jsx(Zb,{}),u&&i.jsx(p,{})]}),f1]})}const WZ=t0`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,GZ=k(Ej)`
  animation: ${WZ} 500ms linear infinite;
`,qZ=k.div`
  line-height: 0;
  position: relative;
`,YZ=l.forwardRef(function({ariaInputLabel:e,onClose:t},n){const a=l.useRef(!1),{t:r}=L(),{dispatch:o,state:{filters:s,filtersVisible:d,fullscreen:c,result:{loading:u},terms:m}}=Ve(),{types:p,query:h}=m,f=bc({terms:m}),g=r(e||f?"search.search-results-aria-label":"search.recent-searches-aria-label"),b=l.useCallback(()=>o({type:"FILTERS_VISIBLE_SET",visible:!d}),[o,d]),v=l.useCallback(w=>o({type:"TERMS_QUERY_SET",query:w.currentTarget.value}),[o]),y=l.useCallback(()=>{o({type:"TERMS_QUERY_SET",query:""})},[o]);l.useEffect(()=>{c||o({type:"FILTERS_VISIBLE_SET",visible:!0})},[o,c]),l.useEffect(()=>{a.current=!0},[]);const x=s.length>0||p.length>0;return i.jsx(U,{flex:"none",children:i.jsxs(P,{align:"center",flex:1,gap:c?2:1,padding:c?2:1,children:[c&&i.jsx(Z,{"aria-label":r("search.action.close-search-aria-label"),icon:Ij,mode:"bleed",onClick:t,size:"large",tooltipProps:{content:r("search.action.close-search-aria-label")}}),i.jsx(I,{flex:1,children:i.jsx(Tp,{__unstable_disableFocusRing:!0,$background:c,$smallClearButton:c,"aria-label":g,autoComplete:"off",border:!1,clearButton:!!h,fontSize:[2,2,1],icon:u?GZ:Rn,onChange:v,onClear:y,placeholder:r("search.placeholder"),radius:2,ref:n,spellCheck:!1,value:h})}),c&&i.jsx(qZ,{children:i.jsx(fne,{"aria-expanded":d,"aria-label":r("search.action.toggle-filters-aria-label",{context:d?"hide":"show"}),icon:n0,mode:"bleed",onClick:b,selected:d,size:"large",tone:x?"primary":void 0,tooltipProps:{content:r("search.action.toggle-filters-label",{context:d?"hide":"show"})}})})]})})}),XZ=Xu(`mod+${g1}`),JZ=Xu("escape");function ZZ({open:e,onClose:t,onOpen:n}){const{isTopLayer:a}=xi(),r=l.useCallback(()=>{t==null||t()},[t]),o=l.useCallback(s=>{XZ(s)&&(s.preventDefault(),e?r():n==null||n()),JZ(s)&&e&&a&&r()},[r,a,e,n]);Pa(o)}function QZ({children:e,hasValidTerms:t,onClose:n,onOpen:a,open:r}){const o=l.useRef(!1),{dispatch:s,searchCommandList:d,setOnClose:c,state:{result:u}}=Ve(),m=l.useCallback(()=>{var p;s({index:(p=d==null?void 0:d.getTopIndex())!=null?p:-1,type:"LAST_ACTIVE_INDEX_SET"}),n()},[s,n,d]);return ZZ({onClose:m,onOpen:a,open:r}),l.useEffect(()=>{c(m)},[m,c]),l.useEffect(()=>{(!t||u.loaded)&&o.current&&s({index:0,type:"LAST_ACTIVE_INDEX_SET"})},[s,t,u.loaded]),l.useEffect(()=>{!t&&o.current&&!r&&s({type:"ORDERING_RESET"})},[s,t,r]),l.useEffect(()=>{o!=null&&o.current||(o.current=!0)},[]),e}const eQ=3;function OT(e,t){var n;const a=yc(e).map(d=>d.name),{documentTypes:r,objectTypes:o}=(((n=e._original)==null?void 0:n.types)||[]).filter(d=>Qb(d)?a.includes(d.name):!0).filter(d=>d.name!=="slug").filter(d=>!d.name.startsWith("sanity.")).reduce((d,c)=>(Qb(c)&&(d.documentTypes[c.name]=c),DT(c)&&(d.objectTypes[c.name]=c),d),{documentTypes:{},objectTypes:{}})||{documentTypes:{},objectTypes:{}},s=Ez(t);return nQ(s,r,o)}function FT(e){return e.reduce((t,n)=>(t[n.id]=n,t),{})}function tQ(e){return[e.type,e.fieldPath,e.filterName,e.documentTypes.join(",")].join("-")}function nQ(e,t,n){function a({acc:r,defType:o,depth:s=0,documentType:d,prevFieldPath:c,prevTitlePath:u}){var m;const p=s<=eQ,h=o.name.startsWith("_"),f=o!=null&&o.title?PT(o.title):pn(o.name),g=c?`${c}.${o.name}`:o.name,b=u?[...u,f]:[f];if(!p)return;const v=n[o.type],y=t[o.type],x=DT(o)?o:null,w=y||v||x;if(w){(m=w==null?void 0:w.fields)==null||m.forEach(C=>a({acc:r,defType:C,depth:s+1,documentType:d,prevFieldPath:g,prevTitlePath:b}));return}e.includes(o.type)&&r.push({documentTypes:d&&!h?[d]:[],fieldPath:g,filterName:sQ(o),id:"",name:o.name,titlePath:b,title:f,type:o.type})}return Object.values(t).reduce((r,o)=>{const s=o.fields.reduce((d,c)=>(a({acc:d,defType:c,documentType:o.name}),d),[]);return r.push(...s),r},[]).reduce((r,o)=>{const s=r.findIndex(d=>d.fieldPath===o.fieldPath&&d.title===o.title&&d.type===o.type);return s>-1?r[s]={...r[s],documentTypes:[...r[s].documentTypes,...o.documentTypes]}:r.push(o),r},[]).map(aQ).sort(lQ)}function aQ(e){return{...e,id:tQ(e)}}function iQ(e){var t;return RT(e)?e.of.every(n=>["boolean","number","string"].includes(n.type))&&((t=e.options)!=null&&t.list?e.options.list.length>0:!1):!1}function RT(e){return e.type==="array"}function Qb(e){return e.type==="document"}function DT(e){return e.type==="object"}function rQ(e){return e.type==="string"}function oQ(e){var t;return rQ(e)&&(t=e.options)!=null&&t.list?e.options.list.length>0:!1}function sQ(e){if(oQ(e))return"stringList";if(RT(e)){if(e.of.some(t=>t.type==="reference"))return"arrayReferences";if(e.of.find(t=>t.type==="block"))return"portableText";if(iQ(e))return"arrayList"}return e.type}function lQ(e,t){const n=e.titlePath.slice(0,-1).join("/"),a=t.titlePath.slice(0,-1).join("/");return e.title.localeCompare(t.title)||n.localeCompare(a)||e.fieldPath.localeCompare(t.fieldPath)}const $T=2,cQ="studio.search.recent",uo={version:$T,recentSearches:[]};function dQ(){const e=IU(),t=Xe(qe),{dataset:n}=t.config(),a=l.useMemo(()=>`${cQ}.${n}`,[n]),[r,o]=l.useState(uo),s=l.useMemo(()=>e.getKey(a),[e,a]);l.useEffect(()=>{const c=s.pipe(Lt(uo),K(u=>u?(u==null?void 0:u.version)!==$T?(e.setKey(a,uo),uo):u:uo)).subscribe({next:o});return()=>c==null?void 0:c.unsubscribe()},[s,e,a]);const d=l.useCallback(c=>{o(c),e.setKey(a,c)},[e,a]);return l.useMemo(()=>[r,d],[d,r])}const uQ=5,LT=2;function Wp(){const[e,t]=dQ(),n=ot(),{search:{operators:a,filters:r}}=mt(),{fieldDefinitions:o,filterDefinitions:s,operatorDefinitions:d}=l.useMemo(()=>({fieldDefinitions:FT(OT(n,r)),filterDefinitions:u1(r),operatorDefinitions:_T(a)}),[r,a,n]);return{addSearch:(c,u)=>{const m=(u||[]).map(f=>({fieldId:f.fieldId,filterName:f.filterName,operatorType:f.operatorType,value:f.value})).filter(f=>ls({fieldDefinitions:o,filter:f,filterDefinitions:s,operatorDefinitions:d})),p={created:new Date().toISOString(),filters:m,terms:{query:c.query.trim(),typeNames:c.types.map(f=>f.name)}},h={version:LT,recentSearches:[p,...e.recentSearches.filter(f=>!tt(Yn(f,"created"),Yn(p,"created")))].slice(0,uQ)};return t(h),mo({fieldDefinitions:o,filterDefinitions:s,operatorDefinitions:d,schema:n,storedSearch:h,setStoredSearch:t})},getRecentSearches:()=>mo({fieldDefinitions:o,filterDefinitions:s,operatorDefinitions:d,schema:n,storedSearch:e,setStoredSearch:t}),removeSearch:()=>{const c={...e,recentSearches:[]};return t(c),mo({fieldDefinitions:o,filterDefinitions:s,operatorDefinitions:d,schema:n,storedSearch:c,setStoredSearch:t})},removeSearchAtIndex:c=>{if(c<0||c>e.recentSearches.length)return mo({fieldDefinitions:o,filterDefinitions:s,operatorDefinitions:d,schema:n,storedSearch:e,setStoredSearch:t});const u={...e,recentSearches:[...e.recentSearches.slice(0,c),...e.recentSearches.slice(c+1)]};return t(u),mo({fieldDefinitions:o,filterDefinitions:s,operatorDefinitions:d,schema:n,storedSearch:u,setStoredSearch:t})}}}function mo({schema:e,fieldDefinitions:t,filterDefinitions:n,operatorDefinitions:a,storedSearch:r,setStoredSearch:o}){return mQ({studioSchema:e,filterDefinitions:n,fieldDefinitions:t,operatorDefinitions:a,storedSearch:r,setStoredSearch:o}).recentSearches.filter(s=>!!s.terms).map((s,d)=>({__recent:{index:d,timestamp:new Date(s.created).getTime()},filters:s.filters,query:s.terms.query,types:s.terms.typeNames.map(c=>e.get(c)).filter(c=>!!(c&&c.jsonType==="object"))}))}function mQ({fieldDefinitions:e,filterDefinitions:t,operatorDefinitions:n,studioSchema:a,storedSearch:r,setStoredSearch:o}){const s=yc(a).map(u=>u.name),d=r.recentSearches.filter(u=>u.terms.typeNames.every(m=>s.includes(m))&&u.filters.every(m=>ls({fieldDefinitions:e,filter:m,filterDefinitions:t,operatorDefinitions:n}))),c={version:LT,recentSearches:d};return c.recentSearches.length<r.recentSearches.length&&o(c),c}function pQ(){const{t:e}=L();return i.jsx(P,{align:"center",direction:"column",gap:4,paddingX:4,paddingY:5,children:i.jsx(et,{space:3,children:i.jsx(E,{muted:!0,children:i.jsx(Pe,{t:e,i18nKey:"search.instructions",components:{ControlsIcon:()=>i.jsx(n0,{style:{padding:"0 0.25rem"}},0)}})})})})}function hQ({availableCharacters:e,types:t}){const{t:n}=L(),a=l.useMemo(()=>v1({availableCharacters:e,types:t,t:n}),[e,t,n]);return i.jsx(U,{border:!0,padding:2,radius:2,children:i.jsx(E,{muted:!0,size:1,children:a})})}const fQ=k(U)`
  cursor: default;
`;function gQ({filter:e}){return i.jsx(fQ,{border:!0,padding:2,radius:2,tone:"primary",children:i.jsx(NT,{filter:e})})}const bQ=40,BT=k(He)`
  border-radius: ${({theme:e})=>Te(e.sanity.radius[2])};
  cursor: default;
  width: 100%;
`,yQ=k(I)`
  flex-shrink: 3;
`,vQ=k(P)`
  flex-shrink: 2;
`,xQ=k.div`
  opacity: 0.8;
  visibility: hidden;

  @media (hover: hover) {
    ${BT}:hover & {
      visibility: visible;
    }
    &:hover {
      opacity: 0.4;
    }
  }
`;function CQ({index:e,maxVisibleTypePillChars:t=bQ,value:n,...a}){var r;const{dispatch:o}=Ve(),s=Wp(),d=t-n.query.length,c=l.useCallback(()=>{o({type:"TERMS_SET",filters:n==null?void 0:n.filters,terms:n}),s&&(s==null||s.addSearch(n,n==null?void 0:n.filters))},[o,s,n]),u=l.useCallback(m=>{m.stopPropagation(),s&&(s==null||s.removeSearchAtIndex(e))},[e,s]);return i.jsx(I,{...a,children:i.jsx(BT,{mode:"bleed",onClick:c,paddingLeft:3,paddingRight:1,paddingY:1,tabIndex:-1,children:i.jsxs(P,{align:"stretch",children:[i.jsxs(et,{paddingY:2,children:[i.jsx(E,{muted:!0,size:1,children:i.jsx(G0,{})}),i.jsx(E,{children:"​"})]}),i.jsxs(P,{align:"stretch",flex:1,gap:2,justify:"flex-start",marginLeft:3,wrap:"wrap",children:[n.query&&i.jsx(vQ,{align:"center",paddingY:2,children:i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",weight:"medium",children:n.query})}),n.types.length>0&&i.jsx(yQ,{children:i.jsx(hQ,{availableCharacters:d,types:n.types})}),(r=n==null?void 0:n.filters)==null?void 0:r.map((m,p)=>i.jsx(gQ,{filter:m},p))]}),i.jsx(P,{align:"center",children:i.jsx(xQ,{onClick:u,children:i.jsx(P,{padding:2,children:i.jsx(E,{size:1,children:i.jsx(un,{})})})})})]})})})}const wQ=36,TQ=20,jQ=40,kQ=k(U)`
  overflow-x: hidden;
  overflow-y: auto;
  position: relative;
`;function AQ({inputElement:e}){const{dispatch:t,state:{filtersVisible:n,fullscreen:a}}=Ve(),r=Wp(),o=l.useMemo(()=>r==null?void 0:r.getRecentSearches(),[r]),s=l.useRef(null),{t:d}=L(),c=l.useCallback(()=>{var f;r&&r.removeSearch(),(f=s==null?void 0:s.current)==null||f.focusInputElement()},[r]),u=Il(),m=l.useMemo(()=>u<2?TQ:jQ,[u]),p=l.useCallback((f,{virtualIndex:g})=>i.jsx(CQ,{index:g,maxVisibleTypePillChars:m,paddingBottom:1,value:f}),[m]),h=!!o.length;return i.jsx(kQ,{borderTop:h||!h&&!n&&a,flex:1,children:o.length>0?i.jsxs(i.Fragment,{children:[i.jsx(I,{paddingBottom:2,paddingTop:4,paddingX:3,children:i.jsx(E,{muted:!0,size:1,weight:"medium",children:d("search.recent-searches-label")})}),i.jsx(I,{children:i.jsx(Gi,{activeItemDataAttr:"data-hovered",ariaLabel:d("search.recent-searches-aria-label"),inputElement:e,initialIndex:0,itemHeight:wQ,items:o,paddingX:2,paddingY:1,renderItem:p})}),i.jsx(I,{paddingBottom:2,paddingTop:1,paddingX:2,children:i.jsx(Z,{mode:"bleed",onClick:c,tone:"default",text:d("search.action.clear-recent-searches"),muted:!0})})]}):!n&&a&&i.jsx(pQ,{})})}function SQ(){const{t:e}=L();return i.jsx(Jn,{width:0,children:i.jsxs(B,{"aria-live":"assertive",space:4,paddingX:4,paddingY:5,children:[i.jsx(E,{align:"center",muted:!0,size:1,weight:"medium",children:e("search.no-results-title")}),i.jsx(E,{align:"center",muted:!0,size:1,children:e("search.no-results-help-description")})]})})}const _Q=k(E)`
  &:not([data-muted]) {
    &[data-tone='default'] {
      --card-fg-color: var(--card-badge-default-fg-color);
    }
    &[data-tone='primary'] {
      --card-fg-color: var(--card-badge-primary-fg-color);
    }
    &[data-tone='positive'] {
      --card-fg-color: var(--card-badge-positive-fg-color);
    }
    &[data-tone='caution'] {
      --card-fg-color: var(--card-badge-caution-fg-color);
    }
    &[data-tone='critical'] {
      --card-fg-color: var(--card-badge-critical-fg-color);
    }
  }

  &[data-dimmed] {
    opacity: 0.3;
  }
`,Ct=l.forwardRef(function(e,t){const{tone:n,dimmed:a,muted:r,...o}=e;return i.jsx(_Q,{"data-ui":"TextWithTone","data-dimmed":a?"":void 0,"data-muted":r?"":void 0,"data-tone":n,muted:r,ref:t,...o})});function EQ(){const{t:e}=L();return i.jsxs(P,{align:"center","aria-live":"assertive",direction:"column",flex:1,gap:3,marginY:2,padding:4,children:[i.jsx(I,{marginBottom:1,children:i.jsx(Ct,{tone:"critical",children:i.jsx(Wt,{})})}),i.jsx(Ct,{size:2,tone:"critical",weight:"medium",children:e("search.error.unspecified-error-title")}),i.jsx(Ct,{size:1,tone:"critical",children:e("search.error.unspecified-error-help-description")})]})}const Gp=({enableLegacySearch:e})=>({createdAsc:{ignoreScore:!0,sort:{direction:"asc",field:"_createdAt"},titleKey:"search.ordering.created-ascending-label"},createdDesc:{ignoreScore:!0,sort:{direction:"desc",field:"_createdAt"},titleKey:"search.ordering.created-descending-label"},relevance:{customMeasurementLabel:"relevance",...e?{sort:{direction:"desc",field:"_updatedAt"}}:{},titleKey:"search.ordering.best-match-label"},updatedAsc:{ignoreScore:!0,sort:{direction:"asc",field:"_updatedAt"},titleKey:"search.ordering.updated-ascending-label"},updatedDesc:{ignoreScore:!0,sort:{direction:"desc",field:"_updatedAt"},titleKey:"search.ordering.updated-descending-label"}}),IQ=k(P)`
  box-sizing: border-box;
`;function ey(e){return e.type==="divider"}function MQ({ordering:e}){const{t}=L(),{dispatch:n,state:{ordering:a}}=Ve(),r=l.useCallback(()=>{n({ordering:e,type:"ORDERING_SET"})},[n,e]),o=l.useMemo(()=>tt(a,e),[a,e]);return i.jsx(ye,{onClick:r,pressed:o,tone:"default",text:t(e.titleKey)})}function PQ(){const{t:e}=L(),{enableLegacySearch:t=!1}=Dt().search,{state:{ordering:n}}=Ve(),a=l.useId(),r=l.useMemo(()=>{const s=Gp({enableLegacySearch:t});return[s.relevance,{type:"divider"},s.createdAsc,s.createdDesc,{type:"divider"},s.updatedAsc,s.updatedDesc]},[t]),o=r.find(s=>tt(n,s)&&!ey(s));return o?i.jsx(U,{borderBottom:!0,children:i.jsx(IQ,{align:"center",flex:1,padding:2,children:i.jsx(ze,{button:i.jsx(Z,{mode:"bleed",icon:Bd,text:e(o.titleKey)}),id:a||"",menu:i.jsx(Be,{children:r.map((s,d)=>ey(s)?i.jsx(en,{},d):i.jsx(MQ,{ordering:s},d))}),placement:"bottom-start",popover:{portal:!0,radius:2}})})}):null}const NQ=k(U)`
  cursor: help;
  left: 0;
  position: absolute;
  top: 0;
`;function OQ({data:e}){const{score:t}=e;let n="default";t<=.1?n="critical":t>=.5&&(n="primary");const a=e.stories.filter(r=>r.score>0);return i.jsx(i.Fragment,{children:i.jsx(Ie,{content:i.jsx(B,{space:2,children:a.length?i.jsx(i.Fragment,{children:a.map(r=>i.jsxs(et,{space:3,children:[i.jsx(xn,{size:0,weight:"medium",children:r.path}),i.jsx(xn,{size:0,children:r.why})]},r.path))}):i.jsx(xn,{size:0,children:"No matches"})}),placement:"bottom-start",portal:!0,children:i.jsx(NQ,{padding:1,shadow:1,tone:n,children:i.jsxs(xn,{size:0,children:["score: ",t]})})})})}const FQ=57,RQ=4,DQ=k(P)`
  opacity: ${({$loading:e})=>e?.5:1};
  overflow-x: hidden;
  overflow-y: auto;
  position: relative;
  transition: 300ms opacity;
  width: 100%;
`;function $Q({disableIntentLink:e,inputElement:t,onItemSelect:n}){const{dispatch:a,onClose:r,setSearchCommandList:o,state:{debug:s,filters:d,fullscreen:c,lastActiveIndex:u,result:m,terms:p}}=Ve(),{t:h}=L(),f=Wp(),g=!!m.hits.length,b=!m.hits.length&&m.loaded,v=m.error,y=l.useCallback(()=>{f&&f.addSearch(p,d),r==null||r()},[d,r,f,p]),x=l.useCallback(()=>{a({type:"PAGE_INCREMENT"})},[a]),w=l.useCallback(C=>i.jsxs(i.Fragment,{children:[i.jsx(vp,{disableIntentLink:e,documentId:ft(C.hit._id)||"",documentType:C.hit._type,onClick:y,onItemSelect:n,paddingY:1}),s&&i.jsx(OQ,{data:C})]}),[s,e,y,n]);return i.jsx(P,{children:i.jsx(U,{borderTop:c||!!(v||g||b),flex:1,children:i.jsxs(P,{direction:"column",height:"fill",children:[g&&i.jsx(PQ,{}),i.jsx(DQ,{$loading:m.loading,"aria-busy":m.loading,flex:1,children:v?i.jsx(EQ,{}):i.jsxs(i.Fragment,{children:[g&&i.jsx(Gi,{activeItemDataAttr:"data-hovered",ariaLabel:h("search.search-results-label"),"data-testid":"search-results",fixedHeight:!0,initialIndex:u,inputElement:t,itemHeight:FQ,items:m.hits,overscan:RQ,onEndReached:x,paddingX:2,paddingY:1,ref:o,renderItem:w}),b&&i.jsx(SQ,{})]})})]})})})}const ty={duration:.4,type:"spring"},LQ={open:{opacity:1,scale:1,x:"-50%"},closed:{opacity:0,scale:.99,x:"-50%"}},BQ={open:{opacity:1},closed:{opacity:0}},ny=12,VQ=k(hn(U))`
  background-color: var(--card-backdrop-color);
  bottom: 0;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
`,UQ=k(hn(U))`
  display: flex !important;
  flex-direction: column;
  left: 50%;
  max-height: min(
    calc(100vh - ${ny}vh - ${bu}px),
    ${$z}px
  );
  position: absolute;
  top: ${ny}vh;
  width: min(calc(100vw - ${bu*2}px), ${Lz}px);
`;function zQ({disableFocusLock:e,disableIntentLink:t,onClose:n,onItemSelect:a,onOpen:r,open:o}){const[s,d]=l.useState(null),c=l.useRef(null),{isTopLayer:u,zIndex:m}=xi();L();const{onClose:p,state:{filtersVisible:h,terms:f}}=Ve(),g=bc({terms:f}),b=l.useCallback(()=>{u&&p&&o&&p()},[u,p,o]);return vt(b,[c.current]),i.jsx(QZ,{hasValidTerms:g,onClose:n,onOpen:r,open:o,children:i.jsx(Ea,{children:o&&i.jsx(hm,{children:i.jsxs(qa,{autoFocus:!Go,disabled:e,returnFocus:!0,children:[i.jsx(VQ,{animate:"open",exit:"closed",initial:"closed",style:{zIndex:m},transition:ty,variants:BQ}),i.jsxs(UQ,{animate:"open",exit:"closed",initial:"closed",overflow:"hidden",radius:Yr,ref:c,shadow:2,style:{zIndex:m},transition:ty,variants:LQ,children:[i.jsx(YZ,{onClose:n,ref:d}),h&&i.jsx(U,{borderTop:!0,flex:"none",children:i.jsx(KZ,{})}),g?i.jsx($Q,{inputElement:s,onItemSelect:a,disableIntentLink:t}):i.jsx(AQ,{inputElement:s})]})]})})})})}function VT(e){return typeof e.__recent<"u"}const Ou="core:studio:navbar:search:";Kn(Ou);function HQ(e){const t=`${Ou}${e}`;return Kn&&Kn.enabled(t)?Kn(t):Kn(Ou)}function KQ(){return typeof window>"u"?!1:window.location.hash.slice(1).split(";").includes(Fz)}function WQ({currentUser:e,fullscreen:t,definitions:n,pagination:a,enableLegacySearch:r}){return{currentUser:e,debug:KQ(),documentTypesNarrowed:[],filters:[],filtersVisible:!0,fullscreen:t,lastActiveIndex:-1,ordering:Gp({enableLegacySearch:r}).relevance,...a,result:{error:null,hasLocal:!1,hits:[],loaded:!1,loading:!1},terms:{query:"",types:[]},definitions:n,enableLegacySearch:r}}const GQ=HQ("reducer");function qQ(e,t){var n,a;let r="🔍";switch(t.type.startsWith("SEARCH_REQUEST")&&(r="🚨"),t.type.startsWith("RECENT_SEARCHES")&&(r="💾"),GQ(r,t),t.type){case"FILTERS_VISIBLE_SET":return{...e,filtersVisible:t.visible};case"LAST_ACTIVE_INDEX_SET":return{...e,lastActiveIndex:t.index};case"ORDERING_RESET":return{...e,ordering:Gp({enableLegacySearch:e.enableLegacySearch}).relevance,terms:Oi(e.terms),result:{...e.result,hasLocal:!1}};case"ORDERING_SET":return{...e,ordering:t.ordering,terms:Oi(e.terms),result:{...e.result,hasLocal:!1}};case"PAGE_INCREMENT":return{...e,cursor:(n=e.nextCursor)!=null?n:e.cursor,nextCursor:null,terms:Oi(e.terms)};case"SEARCH_CLEAR":return{...e,cursor:null,nextCursor:null,result:{...e.result,hasLocal:!1,hits:[]}};case"SEARCH_REQUEST_COMPLETE":return{...e,nextCursor:(a=t.nextCursor)!=null?a:null,result:{...e.result,error:null,hasLocal:!0,hits:e.result.hasLocal?YQ([...e.result.hits,...t.hits]):t.hits,loaded:!0,loading:!1}};case"SEARCH_REQUEST_ERROR":return{...e,result:{...e.result,error:t.error,loaded:!1,loading:!1}};case"SEARCH_REQUEST_START":return{...e,result:{...e.result,loaded:!1,loading:!0}};case"TERMS_FILTERS_ADD":{const o={...t.filter,value:nZ(e.definitions.operators,t.filter.operatorType)},s=[...e.filters,o];return{...e,documentTypesNarrowed:Ni({fieldDefinitions:e.definitions.fields,filters:s,types:e.terms.types}),filters:s,lastAddedFilter:o,terms:{...e.terms,filter:Pi({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:s,operatorDefinitions:e.definitions.operators})},result:{...e.result,hasLocal:!1}}}case"TERMS_FILTERS_CLEAR":{const o=[];return{...e,documentTypesNarrowed:Ni({fieldDefinitions:e.definitions.fields,filters:o,types:e.terms.types}),filters:o,terms:{...e.terms,filter:Pi({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:o,operatorDefinitions:e.definitions.operators})},result:{...e.result,hasLocal:!1}}}case"TERMS_FILTERS_REMOVE":{const o=e.filters.findIndex(d=>dn(d)===t.filterKey),s=[...e.filters.slice(0,o),...e.filters.slice(o+1)];return{...e,documentTypesNarrowed:Ni({fieldDefinitions:e.definitions.fields,filters:s,types:e.terms.types}),filters:s,terms:{...e.terms,filter:Pi({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:s,operatorDefinitions:e.definitions.operators})},result:{...e.result,hasLocal:!1}}}case"TERMS_FILTERS_SET_OPERATOR":{const o=e.filters.find(p=>dn(p)===t.filterKey),s=vi(e.definitions.operators,o==null?void 0:o.operatorType),d=vi(e.definitions.operators,t.operatorType),c=d==null?void 0:d.initialValue,u=(s==null?void 0:s.inputComponent)!=(d==null?void 0:d.inputComponent),m=e.filters.map(p=>dn(p)===t.filterKey?{...p,operatorType:t.operatorType,...u?{value:c}:{}}:p);return{...e,filters:m,terms:{...e.terms,filter:Pi({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:m,operatorDefinitions:e.definitions.operators})},result:{...e.result,hasLocal:!1}}}case"TERMS_FILTERS_SET_VALUE":{const o=e.filters.map(s=>dn(s)===t.filterKey?{...s,value:t.value}:s);return{...e,filters:o,terms:{...e.terms,filter:Pi({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:o,operatorDefinitions:e.definitions.operators})},result:{...e.result,hasLocal:!1}}}case"TERMS_QUERY_SET":return{...e,cursor:null,nextCursor:null,result:{...e.result,loaded:!1,hasLocal:!1},terms:Oi({...e.terms,query:t.query})};case"TERMS_SET":{const o=t.filters||[],s=[...e.terms.types||[],...t.terms.types].sort(yu);return{...e,documentTypesNarrowed:Ni({fieldDefinitions:e.definitions.fields,filters:o,types:s}),filters:o,lastAddedFilter:null,cursor:null,nextCursor:null,result:{...e.result,loaded:!1,hasLocal:!1},terms:{...t.terms,filter:Pi({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:o,operatorDefinitions:e.definitions.operators})}}}case"TERMS_TYPE_ADD":{const o=[...e.terms.types||[],t.schemaType].sort(yu),s=Ni({fieldDefinitions:e.definitions.fields,filters:[],types:o}),d=e.filters.filter(c=>{const u=Ga(e.definitions.fields,c);return u?u.documentTypes.length===0?!0:s.every(m=>u.documentTypes.findIndex(p=>p===m)>-1):!0});return{...e,documentTypesNarrowed:s,filters:d,cursor:null,nextCursor:null,result:{...e.result,loaded:!1,hasLocal:!1},terms:Oi({...e.terms,filter:Pi({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,operatorDefinitions:e.definitions.operators,filters:d}),types:o})}}case"TERMS_TYPE_REMOVE":{const o=(e.terms.types||[]).filter(s=>s!==t.schemaType);return{...e,documentTypesNarrowed:Ni({fieldDefinitions:e.definitions.fields,filters:e.filters,types:o}),cursor:null,nextCursor:null,result:{...e.result,loaded:!1,hasLocal:!1},terms:Oi({...e.terms,types:o})}}case"TERMS_TYPES_CLEAR":{const o=[];return{...e,documentTypesNarrowed:Ni({fieldDefinitions:e.definitions.fields,filters:e.filters,types:o}),cursor:null,nextCursor:null,result:{...e.result,loaded:!1,hasLocal:!1},terms:Oi({...e.terms,types:[]})}}default:return e}}function Oi(e){if(VT(e)){const{__recent:t,...n}=e;return n}return e}function YQ(e){const t=e.reduce((n,a)=>{const r=ft(a.hit._id);return{...n,[r]:a}},{});return Object.values(t)}function XQ({children:e,fullscreen:t}){const n=l.useRef(null),[a,r]=l.useState(null),o=ot(),s=Tt(),{search:{operators:d,filters:c,enableLegacySearch:u}}=mt(),{fieldDefinitions:m,filterDefinitions:p,operatorDefinitions:h}=l.useMemo(()=>({fieldDefinitions:FT(OT(o,c)),filterDefinitions:u1(c),operatorDefinitions:_T(d)}),[c,d,o]),f=l.useMemo(()=>WQ({currentUser:s,fullscreen:t,definitions:{fields:m,operators:h,filters:p},pagination:{cursor:null,nextCursor:null},enableLegacySearch:u}),[s,m,p,t,h,u]),[g,b]=l.useReducer(qQ,f),{documentTypesNarrowed:v,filters:y,ordering:x,cursor:w,result:C,terms:T}=g,j=l.useRef(!1),A=l.useRef(f.ordering),M=l.useRef(f.cursor),S=l.useRef(f.terms),{handleSearch:N,searchState:D}=b1({initialState:{...C,terms:T},onComplete:O=>b({...O,type:"SEARCH_REQUEST_COMPLETE"}),onError:O=>b({error:O,type:"SEARCH_REQUEST_ERROR"}),onStart:()=>b({type:"SEARCH_REQUEST_START"}),schema:o}),_=bc({terms:T}),F=v.map(O=>o.get(O)),R=y.filter(O=>ls({fieldDefinitions:m,filter:O,filterDefinitions:p,operatorDefinitions:h})),$=l.useCallback(O=>{n.current=O},[]);return l.useEffect(()=>{var O,V;const H=!tt(x,A.current),J=w!==M.current,q=!tt(T,S.current);if(H||J||q){let oe="findability-sort:";(x!=null&&x.customMeasurementLabel||x.sort)&&(oe+=(x==null?void 0:x.customMeasurementLabel)||`${(O=x.sort)==null?void 0:O.field} ${(V=x.sort)==null?void 0:V.direction}`),N({options:{comments:[...VT(T)?[`findability-recent-search:${T.__recent.index}`]:[],`findability-selected-types:${T.types.length}`,oe,"findability-source: global",`findability-filter-count:${R.length}`],limit:Rz,skipSortByScore:x.ignoreScore,...x.sort?{sort:[x.sort]}:{},cursor:w||void 0},terms:{...T,...F?{types:F}:{}}}),M.current=w}A.current=x,S.current=T},[R.length,y,F,N,_,x,D.terms,T,w]),l.useEffect(()=>{!_&&j!=null&&j.current&&C.hits.length>0&&b({type:"SEARCH_CLEAR"}),j.current=!0},[b,_,C.hits,T.query,T.types]),i.jsx(g0.Provider,{value:{dispatch:b,onClose:n==null?void 0:n.current,searchCommandList:a,setSearchCommandList:r,setOnClose:$,state:{...g,fullscreen:t}},children:e})}l.forwardRef(function({onClick:e},t){const{t:n}=L();return i.jsx(Z,{"aria-label":n("search.action-open-aria-label"),"data-testid":"studio-search",icon:Rn,tooltipProps:{content:n("search.button.tooltip"),hotkeys:[Dz,g1.toUpperCase()],portal:!0},onClick:e,mode:"bleed",ref:t})});k(U)`
  flex-direction: column;
  overflow: hidden;
  overflow: clip;
  pointer-events: all;
  position: relative;
`;k(I)`
  height: 100%;
  left: 0;
  overflow: hidden;
  overflow: clip;
  pointer-events: none;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 1;
`;const JQ=qo&&!!localStorage.getItem("SANITY_DEBUG_ERROR_REPORTING");Mj(),Pj(),Nj({eventTarget:!1}),Oj({console:!1}),Fj({onerror:!0,onunhandledrejection:!0}),Rj(),Dj(),ZQ(),$j();function ZQ(){const e=[];return{name:"SanityDedupe",processEvent(t){if(t.type)return t;try{if(QQ(t,e))return JQ&&console.warn("[sanity/sentry] Dropping error from being reported because it is a duplicate"),null}catch{}return e.length>10&&e.shift(),e.push(t),t}}}function QQ(e,t){for(const n of t){const a=ay(e),r=ay(n);if(a&&r&&a!==r)continue;const o=Math.floor(e.timestamp||0),s=Math.floor(n.timestamp||0);if(Math.abs(o-s)<300)return!0}return!1}function ay(e){if(e.message)return e.message;if(e.exception){for(const t of e.exception.values||[])if(t.value)return t.value}}const eee=Ul(e=>Ht(e.map(t=>t.auth.state.pipe(K(n=>[t.name,n])))).pipe(K(t=>Object.fromEntries(t)))),tee={"logged-in":"","logged-out":"Signed out","no-access":""},nee=k.div`
  width: ${e=>e.$size==="small"?"25px":"41px"};
  height: ${e=>e.$size==="small"?"25px":"41px"};

  svg {
    width: 100%;
    height: 100%;
  }
`,UT=({icon:e,size:t="small"})=>{const n=l.useMemo(()=>aee(e),[e]);return i.jsx(nee,{$size:t,children:n})},aee=e=>{if(zr.isValidElementType(e))return l.createElement(e);if(l.isValidElement(e))return e};k(E)`
  a {
    color: inherit;
  }
`;const iee=k(Be)`
  max-width: 350px;
  min-width: 250px;
`,ree={constrainSize:!0,fallbackPlacements:["bottom-end","bottom"],placement:"bottom-end"};function oee(){const e=xm(),{activeWorkspace:t,setActiveWorkspace:n}=zp(),[a]=eee(e),{navigateUrl:r}=Ho(),{t:o}=L();if(!(e.length>1))return null;const s=!a;return i.jsx(ze,{button:i.jsx(P,{children:i.jsx(Ie,{content:o("workspaces.select-workspace-tooltip"),disabled:s,portal:!0,children:i.jsx(He,{disabled:s,mode:"bleed",padding:2,width:"fill",children:i.jsxs(P,{align:"center",gap:2,children:[i.jsx(I,{children:i.jsx(E,{size:1,textOverflow:"ellipsis",weight:"medium",children:t.title})}),i.jsx(E,{size:1,children:i.jsx(_n,{})})]})})})}),id:"workspace-menu",menu:!s&&a?i.jsx(iee,{children:e.map(d=>{const c=a[d.name].authenticated?"logged-in":d.auth.LoginComponent?"logged-out":"no-access",u=()=>{c==="logged-in"&&d.name!==t.name&&n(d.name),c==="logged-out"&&r({path:d.basePath})},m=d.name===t.name;return i.jsx(ye,{badgeText:tee[c],iconRight:m?Gn:void 0,onClick:u,pressed:m,preview:i.jsx(UT,{icon:d.icon,size:"small"}),selected:m,__unstable_subtitle:d.subtitle,__unstable_space:1,text:(d==null?void 0:d.title)||d.name},d.name)})}):void 0,popover:ree})}k.label`
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  overflow: clip;
  position: absolute;
  white-space: nowrap;
  width: 1px;
`;k.code`
  && {
    background: none;
    color: inherit;
  }
`;k(E)`
  white-space: pre-line;
`;k(U)`
  height: 100%;
  left: 0;
  overflow: hidden;
  overflow: clip;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 200;
`;function see(e){var t,n;return(n=(t=e.studio)==null?void 0:t.components)==null?void 0:n.toolMenu}function lee(){return Ai({defaultComponent:Vee,pick:see})}const cee=Et({name:"Trial Dialog Viewed",version:1,description:"User viewed a dialog or popover related to free trial"}),dee=Et({name:"Trial Dialog Dismissed",version:1,description:"User dismissed a dialog or popover related to free trial"}),iy=Et({name:"Trial Dialog CTA Clicked",version:1,description:"User clicked a CTA in a dialog or popover related to free trial"});function Ns({showOnLoad:e,dialogId:t}){return e&&t.toLowerCase()==="free-upgrade-popover"?"trialStarted":e&&t.toLowerCase()==="trial-ending-popover"?"trialEndingSoon":e&&t.toLowerCase()==="project-downgraded-to-free"?"trialEnded":!e&&t.toLowerCase()==="after-trial-upgrade"?"postTrial":"trialActive"}const uee=k(Z)`
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 20;
  background: transparent;
  border-radius: 9999px;
  box-shadow: none;
  color: white;
  --card-fg-color: white;
  :hover {
    --card-fg-color: white;
  }
`,mee=k.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 196px;
`,pee=k(En)`
  > [data-ui='DialogCard'] {
    max-width: 22.5rem;
  }
`;function hee({onClose:e,onOpenNext:t,onOpenUrlCallback:n,content:a,open:r}){var o,s,d,c,u;function m(){e("xClick")}function p(){e("outsideClick")}function h(){e("ctaClicked")}const f=Hp();return r?i.jsxs(pee,{id:"free-trial-modal",onClose:e,onClickOutside:p,padding:!1,__unstable_hideCloseButton:!0,scheme:f,footer:{cancelButton:(o=a.secondaryButton)!=null&&o.text?{text:a.secondaryButton.text,mode:"bleed",tone:"default",onClick:m}:void 0,confirmButton:{text:(s=a.ctaButton)==null?void 0:s.text,mode:"default",tone:"primary",...((d=a.ctaButton)==null?void 0:d.action)==="openUrl"?{href:a.ctaButton.url,target:"_blank",rel:"noopener noreferrer",as:"a",onClick:n}:{onClick:((c=a.ctaButton)==null?void 0:c.action)==="openNext"?t:h}}},children:[i.jsx(uee,{icon:un,mode:"bleed",tone:"default",onClick:m,tabIndex:-1,tooltipProps:null}),a.image&&i.jsx(mee,{src:a.image.asset.url,alt:(u=a.image.asset.altText)!=null?u:""}),i.jsxs(P,{padding:3,direction:"column",children:[i.jsx(I,{paddingX:2,marginTop:3,children:i.jsx(An,{size:2,children:a.headingText})}),i.jsx(I,{marginTop:4,paddingBottom:3,children:i.jsx(wc,{blocks:a.descriptionText})})]})]}):null}const fee=k.div`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,gee=({daysLeft:e,totalDays:t})=>{const n=t-e,a=Math.round(n/t*100),r=10,o=2*Math.PI*r,s=o*((100-a)/100),d=1.2,c=r*2+d;return i.jsx(U,{children:i.jsx(fee,{children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:`0 0 ${c} ${c}`,style:{transform:"rotate(-90deg)"},children:[i.jsx("circle",{r,cx:c/2,cy:c/2,fill:"transparent",strokeWidth:d,stroke:a>75?Dd[600].hex:gk[400].hex}),i.jsx("circle",{r,cx:c/2,cy:c/2,fill:"transparent",strokeWidth:d,stroke:"var(--card-border-color)",strokeDasharray:o,strokeDashoffset:s})]})})})},bee=l.forwardRef(function({toggleShowContent:e,daysLeft:t,totalDays:n},a){const{t:r}=L();return i.jsxs(Z,{mode:"bleed",onClick:e,ref:a,tooltipProps:{content:t?r("free-trial.tooltip.days-count",{count:t}):r("free-trial.tooltip.trial-finished")},children:[i.jsx(E,{size:0,children:i.jsx(a0,{})}),t>0&&i.jsx(gee,{daysLeft:t,totalDays:n})]})}),yee=l.forwardRef(function({toggleShowContent:e,daysLeft:t},n){const{t:a}=L();return i.jsx(Z,{ref:n,icon:a0,justify:"flex-start",mode:"bleed",size:"large",onClick:e,text:t?a("user-menu.action.free-trial",{count:t}):a("user-menu.action.free-trial-finished")})}),vee=()=>{const e=l.useContext(CA);if(!e)throw new Error("useFreeTrial must be used within a FreeTrialProvider");return e},xee=k.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
`;function Cee({content:e,handleClose:t,handleOpenNext:n}){var a,r,o,s,d;return i.jsx(U,{radius:3,overflow:"hidden",width:0,children:i.jsxs(Jn,{width:0,children:[e.image&&i.jsx(xee,{src:e.image.asset.url,alt:(a=e.image.asset.altText)!=null?a:""}),i.jsxs(P,{padding:3,direction:"column",children:[i.jsx(I,{paddingX:2,marginTop:3,children:i.jsx(An,{size:1,children:e.headingText})}),i.jsx(I,{marginTop:4,children:i.jsx(wc,{blocks:e.descriptionText})})]}),i.jsxs(P,{width:"full",gap:3,justify:"flex-end",padding:3,children:[((r=e.secondaryButton)==null?void 0:r.text)&&i.jsx(Z,{mode:"bleed",text:e.secondaryButton.text,tone:"default",onClick:()=>t("xClick")}),i.jsx(Z,{mode:"default",tooltipProps:null,text:(o=e.ctaButton)==null?void 0:o.text,autoFocus:!0,tone:"primary",...((s=e.ctaButton)==null?void 0:s.action)==="openUrl"?{href:e.ctaButton.url,target:"_blank",rel:"noopener noreferrer",as:"a"}:{onClick:((d=e.ctaButton)==null?void 0:d.action)==="openNext"?n:()=>t("ctaClicked")}})]})]})})}function wee({type:e}){const{data:t,showDialog:n,showOnLoad:a,toggleShowContent:r}=vee(),o=Hp(),s=ha(),[d,c]=l.useState(null),[u,m]=l.useState(!1);l.useEffect(()=>{d&&m(!0)},[d]);const p=l.useCallback(()=>r(!0),[r]),h=l.useCallback(()=>{d==null||d.focus(),r(!1)},[r,d]),f=l.useCallback(w=>C=>{const T=(t==null?void 0:t.showOnLoad)||(t==null?void 0:t.showOnClick);T&&s.log(dee,{dialogId:T.id,dialogRevision:T._rev,dialogType:w,source:"studio",trialDaysLeft:t.daysLeft,dialogTrialStage:Ns({showOnLoad:a,dialogId:T.id}),dialogDismissAction:C}),h()},[t,h,a,s]),g=l.useCallback(w=>()=>{const C=(t==null?void 0:t.showOnLoad)||(t==null?void 0:t.showOnClick);C&&s.log(iy,{dialogId:C.id,dialogRevision:C._rev,dialogType:"modal",source:"studio",trialDaysLeft:t.daysLeft,dialogTrialStage:Ns({showOnLoad:a,dialogId:C.id}),dialogCtaType:w==="openURL"?"upgrade":"learnMore"}),p()},[t,p,s,a]),b=l.useCallback(()=>{t!=null&&t.showOnLoad&&s.log(iy,{dialogId:t.showOnLoad.id,dialogRevision:t.showOnLoad._rev,dialogType:"popover",source:"studio",trialDaysLeft:t.daysLeft,dialogTrialStage:Ns({showOnLoad:!0,dialogId:t.showOnLoad.id}),dialogCtaType:"learnMore"}),p()},[t==null?void 0:t.showOnLoad,t==null?void 0:t.daysLeft,p,s]),v=l.useCallback(()=>{t!=null&&t.showOnClick&&s.log(cee,{dialogId:t.showOnClick.id,dialogRevision:t.showOnClick._rev,dialogTrigger:"fromClick",dialogType:"modal",source:"studio",trialDaysLeft:t.daysLeft,dialogTrialStage:Ns({showOnLoad:!0,dialogId:t.showOnClick.id})}),p()},[t==null?void 0:t.showOnClick,t==null?void 0:t.daysLeft,s,p]);if(!(t!=null&&t.id))return null;const y=a?t.showOnLoad:t.showOnClick;if(!y)return null;const x=e==="sidebar"?i.jsx(yee,{toggleShowContent:v,daysLeft:t.daysLeft,ref:c}):i.jsx(bee,{toggleShowContent:v,daysLeft:t.daysLeft,totalDays:t.totalDays,ref:c});return(y==null?void 0:y.dialogType)==="popover"?i.jsx(rt,{open:n&&u,size:0,scheme:o,radius:3,portal:!0,placement:e==="sidebar"?"top":"bottom-end",content:i.jsx(Cee,{content:y,handleClose:f("popover"),handleOpenNext:b}),children:x}):i.jsxs(i.Fragment,{children:[x,i.jsx(hee,{content:y,onClose:f("modal"),onOpenNext:g("openNext"),onOpenUrlCallback:g("openURL"),open:n})]})}function Tee(){return i.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 33 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("rect",{width:"100%",height:"100%",fill:"#EC5446"}),i.jsx("path",{d:"M10.1637 8.5498C10.1637 11.3854 11.9461 13.0725 15.5143 13.9622L19.2955 14.8235C22.6725 15.5855 24.729 17.4783 24.729 20.5619C24.7553 21.9053 24.3107 23.2168 23.4698 24.2765C23.4698 21.1999 21.8499 19.5376 17.9425 18.538L14.2299 17.7086C11.257 17.0423 8.9623 15.4863 8.9623 12.1368C8.94666 10.8433 9.36932 9.58143 10.1637 8.5498Z",fill:"white"}),i.jsx("path",{d:"M21.1463 19.8069C22.7591 20.8206 23.4662 22.2384 23.4662 24.2729C22.1313 25.953 19.7861 26.8958 17.0297 26.8958C12.3899 26.8958 9.1427 24.6521 8.42111 20.7533H12.8769C13.4506 22.5432 14.9695 23.3726 16.9972 23.3726C19.4722 23.3726 21.1175 22.0753 21.1499 19.7998",fill:"#F8B1AA"}),i.jsx("path",{d:"M12.4801 12.7536C11.7436 12.3236 11.1394 11.7057 10.7316 10.9656C10.3238 10.2255 10.1276 9.3907 10.1638 8.54984C11.4518 6.88396 13.6923 5.8667 16.4235 5.8667C21.1499 5.8667 23.8848 8.31945 24.5595 11.7717H20.2732C19.8006 10.4107 18.6172 9.35089 16.4596 9.35089C14.1541 9.35089 12.5811 10.6694 12.4909 12.7536",fill:"#F8B1AA"})]})}const ry=25,zT=2,jee=k(U).attrs({overflow:"hidden",radius:zT})`
  height: ${ry}px;
  width: ${ry}px;
`,kee=k(U)`
  border-radius: ${({theme:e})=>Te(e.sanity.radius[zT])};
  display: flex;
  outline: none;
  text-decoration: none;
  &:focus-visible {
    box-shadow: ${({theme:e})=>rc({base:e.sanity.color.base,focusRing:{...e.sanity.focusRing,offset:1}})};
  }
`;function Aee(){const e=xm(),{activeWorkspace:t}=zp(),{href:n,onClick:a}=j0({state:{}}),r=e.length>1;return i.jsx(kee,{as:"a",href:n,onClick:a,children:i.jsxs(P,{align:"center",children:[i.jsx(jee,{children:i.jsx(P,{align:"center",height:"fill",justify:"center",children:r||t.customIcon?i.jsx(UT,{icon:t.icon,size:"small"}):i.jsx(Tee,{})})}),!r&&i.jsx(I,{paddingX:2,children:i.jsx(E,{size:1,weight:"medium",children:t.title})})]})})}function See({setScheme:e}){const{t}=L(),n=tZ(e,t);return i.jsx(U,{borderTop:!0,flex:"none",padding:2,overflow:"auto",children:i.jsx(B,{as:"ul",space:1,children:n.map(({icon:a,label:r,name:o,onSelect:s,selected:d,title:c})=>i.jsx(B,{as:"li",children:i.jsx(Z,{"aria-label":r,icon:a,iconRight:d&&i.jsx(Gn,{}),justify:"flex-start",mode:"bleed",onClick:s,selected:d,size:"large",text:c})},o))})})}function _ee(){return Ov(),null}function Eee(){const{currentUser:e,projectId:t}=Dt(),n=!!(e&&n_(e,"administrator")),{t:a}=L();return i.jsx(U,{borderTop:!0,flex:"none",padding:2,children:i.jsxs(B,{as:"ul",space:1,children:[i.jsx(B,{as:"li",children:i.jsx(wee,{type:"sidebar"})}),i.jsx(B,{as:"li",children:i.jsx(Z,{"aria-label":a("user-menu.action.manage-project-aria-label"),as:"a",href:`https://sanity.io/manage/project/${t}`,icon:bk,justify:"flex-start",mode:"bleed",size:"large",target:"_blank",text:a("user-menu.action.manage-project")})}),n&&i.jsx(B,{as:"li",children:i.jsx(Z,{"aria-label":a("user-menu.action.invite-members-aria-label"),as:"a",href:`https://sanity.io/manage/project/${t}/members`,icon:yk,justify:"flex-start",mode:"bleed",size:"large",target:"_blank",text:a("user-menu.action.invite-members")})})]})})}const oy={bounce:0,damping:20,mass:.5,stiffness:200,type:"spring"},Iee={open:{opacity:1},closed:{opacity:0}},Mee={open:{x:"0%"},closed:{x:"-100%"}},Pee=k(wi)`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,Nee=k(hn(U))`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--card-shadow-penumbra-color);
`,Oee=k(hn(U))`
  position: relative;
  pointer-events: all;
  flex-direction: column;
  height: 100%;
  min-width: 200px;
  max-width: 280px;
  overflow: auto;
`;l.memo(function(e){const{__internal_actions:t,activeToolName:n,isOpen:a,onClose:r,tools:o}=e,s=eZ(),{auth:d,currentUser:c}=Dt(),u=xm(),m=lee(),{t:p}=L(),h=l.useCallback(b=>{b.key==="Escape"&&r()},[r]),f=l.useCallback(b=>{b==null||b(),r()},[r]),g=l.useMemo(()=>{var b;return(b=t==null?void 0:t.filter(v=>v.location==="sidebar"))==null?void 0:b.map(v=>i.jsx(Z,{icon:v==null?void 0:v.icon,justify:"flex-start",mode:"bleed",onClick:()=>f(v.onAction),selected:v.selected,size:"large",text:v.title,width:"fill"},v.name))},[t,f]);return i.jsx(Ea,{children:a&&i.jsx(qa,{returnFocus:!0,children:i.jsxs(Pee,{onKeyDown:h,children:[i.jsx(Nee,{animate:"open","data-open":a,exit:"closed",initial:"closed",onClick:r,transition:oy,variants:Iee}),i.jsxs(Oee,{animate:"open","data-open":a,display:"flex",exit:"closed",height:"fill",initial:"closed",shadow:1,transition:oy,variants:Mee,children:[i.jsx(U,{borderBottom:!0,children:i.jsxs(B,{space:3,padding:3,children:[i.jsxs(P,{align:"center",children:[i.jsx(P,{flex:1,align:"center",paddingRight:2,children:i.jsxs(P,{flex:1,align:"center",children:[i.jsx(Xa,{size:1,user:"me"}),i.jsx(I,{flex:1,marginLeft:3,title:(c==null?void 0:c.name)||(c==null?void 0:c.email),children:i.jsx(E,{size:1,textOverflow:"ellipsis",weight:"medium",children:(c==null?void 0:c.name)||(c==null?void 0:c.email)})})]})}),i.jsx(Z,{icon:un,mode:"bleed",onClick:r,tooltipProps:{content:p("user-menu.close-menu")}})]}),u.length>1&&i.jsxs(P,{flex:1,gap:1,children:[i.jsx(Aee,{}),i.jsx(oee,{})]})]})}),i.jsxs(P,{direction:"column",flex:1,justify:"space-between",overflow:"auto",children:[i.jsx(U,{flex:"none",padding:2,children:i.jsx(m,{activeToolName:n,closeSidebar:r,context:"sidebar",isSidebarOpen:a,tools:o})}),i.jsxs(P,{direction:"column",children:[g&&i.jsx(U,{flex:"none",padding:2,children:i.jsx(B,{space:1,children:g})}),s&&i.jsx(See,{setScheme:s}),i.jsx(_ee,{}),i.jsx(Eee,{})]})]}),d.logout&&i.jsx(U,{flex:"none",padding:2,borderTop:!0,children:i.jsx(B,{children:i.jsx(Z,{iconRight:Lj,justify:"flex-start",mode:"bleed",onClick:d.logout,size:"large",text:p("user-menu.action.sign-out")})})})]})]})})})});k(rt)(()=>ae`
    [data-ui='Popover__wrapper'] {
      width: 320px;
      display: flex;
      flex-direction: column;
      border-radius: ${({theme:e})=>e.sanity.radius[3]}px;
      position: relative;
      overflow: hidden;
      overflow: clip;
    }
  `);k(En)(()=>ae`
    [data-ui='DialogCard'] {
      justify-content: flex-start;
    }
  `);k(P)``;k(U)`
  min-height: max-content;
`;k(U)`
  min-height: max-content;
`;k(P)(e=>{const{$maxDisplayedItems:t,$itemHeight:n}=e;return ae`
    --item-height: ${n}px;
    --max-items: ${t};
    --list-padding: 0.5rem;

    position: relative;
    max-height: calc(var(--item-height) * var(--max-items) + var(--list-padding));
    min-height: calc((var(--item-height) * 1));
  `});k(P)`
  min-height: 100px;
`;l.memo(function(e){const{presence:t,focused:n,onFocus:a}=e,[r,o]=l.useState(null),{t:s}=L(),d=Ku(t.locations||[],["lastActiveAt"],["desc"]).find(p=>p.documentId),c=!!(d!=null&&d.documentId);l.useEffect(()=>{n&&r&&(r.focus(),r.setAttribute("data-selected","")),n||r==null||r.removeAttribute("data-selected")},[r,n]);const u=l.useCallback(()=>{a(t.user.id)},[a,t.user.id]),m=l.useMemo(()=>l.forwardRef(function(p,h){return d!=null&&d.path?i.jsx(Ma,{...p,intent:"edit",params:{id:d==null?void 0:d.documentId,path:Je(d==null?void 0:d.path)},ref:h}):null}),[d]);return i.jsx(ye,{as:d?m:"div","data-as":"a",disabled:!c,onFocus:u,preview:i.jsx(Xa,{size:1,user:t.user},t.user.id),ref:o,text:t.user.displayName,tooltipProps:c?void 0:{content:s("presence.not-in-a-document"),placement:"left"}})});k(Be)`
  max-width: 260px;
`;k(B)`
  position: sticky;
  bottom: 0;
  background-color: var(--card-bg-color);
`;k(Be)`
  max-width: 300px;
  min-width: 200px;
`;k.div`
  position: absolute;
  width: 18px;
  height: 18px;
  background: var(--card-bg-color);
  bottom: -4px;
  right: -4px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 1px solid var(--card-bg-color);
  box-sizing: content-box;

  svg {
    box-sizing: content-box;
    border: 1px solid var(--card-hairline-soft-color);
    border-radius: 50%;
    padding: 2px;
    width: 12px;
    height: 12px;
  }

  &[data-logo='github'] {
    svg {
      path {
        fill: var(--card-fg-color);
      }
    }
  }

  &[data-logo='saml'] {
    svg {
      path {
        fill: var(--card-fg-color);
      }
    }
  }
`;k(Be)`
  min-width: 200px;
  max-width: 300px;
`;k(I)`
  position: relative;
  min-width: ${({theme:e})=>e.sanity.avatar.sizes[2].size}px;
  min-height: ${({theme:e})=>e.sanity.avatar.sizes[2].size}px;
`;k(wi)`
  min-height: auto;
  position: relative;

  &[data-search-open='true'] {
    top: 0;
    position: sticky;
  }
`;k(U)`
  line-height: 0;
`;k(Ze)`
  grid-template-columns: auto auto auto;
  @media screen and (min-width: ${({theme:e})=>`${e.sanity.media[3]}px`}) {
    grid-template-columns: 1fr auto 1fr;
  }
`;function Fee(e){return!!e}const Ree=k(aw)`
  list-style: none;
  white-space: nowrap;
  flex-shrink: 0;
  opacity: 0;
  visibility: hidden;
`,Dee=k(P)`
  opacity: 0;
  height: 0.1px;
  overflow: hidden;
`,$ee=l.forwardRef(function(e,t){const{children:n,gap:a,menuButtonProps:r,disableRestoreFocusOnClose:o,onMenuClose:s,collapsed:d,...c}=e,[u,m]=l.useState(null),[p,h]=l.useState([]),[f,g]=l.useState(!1),b=l.useMemo(()=>l.Children.toArray(n).filter(Fee),[n]),v=l.useMemo(()=>d||!f?null:b.filter(T=>!p.some(j=>j.key===T.key)),[b,d,p,f]),y=l.useMemo(()=>({root:u,threshold:1,rootMargin:"1px"}),[u]),x=l.useMemo(()=>(r==null?void 0:r.button)||i.jsx(wt,{}),[r]),w=l.useMemo(()=>d?b:b.filter(({key:T})=>p.find(j=>j.key===T)),[b,p,d]),C=l.useCallback((T,j)=>{const A=p.some(S=>S.key===j.key);f||g(!0);const M=T.isIntersecting;!A&&!M&&h(S=>[...S,j]),A&&M&&h(S=>S.filter(N=>N.key!==j.key))},[p,f,g,h]);return i.jsxs(P,{direction:"column",ref:t,sizing:"border",style:{position:"relative"},...c,children:[i.jsxs(P,{justify:"center",gap:a,flex:1,children:[v,(p.length>0||d)&&i.jsx(op,{disableRestoreFocusOnClose:o,menuButton:x,menuButtonProps:r,menuOptions:w,onMenuClose:s})]}),i.jsxs(Dee,{justify:"flex-start",gap:a,ref:m,"data-hidden":!0,"aria-hidden":"true",children:[l.cloneElement(x,{disabled:!0,"aria-hidden":!0}),b==null?void 0:b.map(T=>i.jsx(Ree,{options:y,onIntersectionChange:j=>C(j[0],T),children:l.cloneElement(T,{disabled:!0,"aria-hidden":!0,tabIndex:-1})},`${T.key}_observer`))]})]})}),HT=l.forwardRef(function(e,t){const{name:n,...a}=e,r=Ju(l.useCallback(()=>({tool:n,[n]:void 0}),[n]));return i.jsx(Bj,{state:r,...a,ref:t})});function Lee(e){const{activeToolName:t,tools:n}=e,a=Hp(),[r,o]=l.useState(null);ej({rootElement:r,navigation:["arrows"]});const s=l.useMemo(()=>({popover:{constrainSize:!0,portal:!0,scheme:a}}),[a]),d=l.useMemo(()=>n.map((c,u)=>{const m=(c==null?void 0:c.title)||pn(c.name),p=l.forwardRef(function(h,f){return i.jsx(HT,{...h,ref:f,name:c.name,children:h.children})});return i.jsx(Z,{as:p,"data-as":"a",mode:"bleed",selected:t===c.name,text:m},`${c.name}-${u}`)}),[t,n]);return i.jsx(P,{justify:"center",marginX:4,children:i.jsx($ee,{"data-testid":"tool-collapse-menu",gap:1,menuButtonProps:s,ref:o,children:d})})}function Bee(e){const{activeToolName:t,isVisible:n,tools:a}=e;return l.useMemo(()=>i.jsx(B,{as:"ul",space:1,children:a.map(r=>{const o=(r==null?void 0:r.title)||pn(r.name),s=l.forwardRef(function(d,c){return i.jsx(HT,{...d,ref:c,name:r.name,children:d.children})});return i.jsx(B,{as:"li",children:i.jsx(Z,{as:s,justify:"flex-start",mode:"bleed",selected:t===r.name,size:"large",tabIndex:n?0:-1,text:o})},r.name)})}),[t,n,a])}function Vee(e){const{context:t,isSidebarOpen:n,tools:a,...r}=e;return a.length<=1?null:t==="sidebar"?i.jsx(Bee,{isVisible:n,tools:a,...r}):i.jsx(Lee,{tools:a,...r})}const sy=12,Uee=4;function zee(e){const t=encodeURIComponent(e);return`url("data:image/svg+xml,${`%3Csvg width='9' height='9' viewBox='0 0 9 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 8L8 1' stroke='${t}' stroke-linecap='round'/%3E%3Cpath d='M5 8L8 5' stroke='${t}' stroke-linecap='round'/%3E%3C/svg%3E%0A`}")`}Vj(e=>{const{color:t,font:n}=Re(e.theme);return ae`
    ::-webkit-resizer {
      background-image: ${zee(t.icon)};
      background-repeat: no-repeat;
      background-position: bottom right;
    }

    ::-webkit-scrollbar {
      width: ${sy}px;
      height: ${sy}px;
    }

    ::-webkit-scrollbar-corner {
      background-color: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background-clip: content-box;
      background-color: var(--card-border-color, ${t.border});
      border: ${Uee}px solid transparent;
    }

    ::-webkit-scrollbar-thumb:hover {
      background-color: var(--card-muted-fg-color, ${t.muted.fg});
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    *::selection {
      background-color: ${i0(t.focusRing,.3)};
    }

    html {
      background-color: ${t.bg};
    }

    body {
      scrollbar-gutter: stable;
    }

    #sanity {
      font-family: ${n.text.family};
    }

    b {
      font-weight: ${n.text.weights.medium};
    }

    strong {
      font-weight: ${n.text.weights.medium};
    }
  `});GS.__sanityErrorChannel;Uj();xr.fonts.code.family,xr.fonts.text.family,Rc.hex,fr.hex,ps[500].hex,fr.hex,Rc.hex,Os[500].hex,Os[500].hex,Os[500].hex,wr[500].hex,ps[500].hex,ih[500].hex,Dd[500].hex,ps[500].hex,ps[500].hex,ih[500].hex,Dd[500].hex,wr[500].hex,Rc.hex,fr.hex;zj();k(P)``;k(I).attrs({padding:4})``;function Hee(e){const{basePath:t="/",tools:n}=e,a=li.create("/:tool",r=>{let o=n.find(s=>s.name===r.tool);return!o&&r.tool==="desk"&&(o=n.find(s=>s.name==="structure")),o?li.scope(o.name,"/",o.router):li.create("/")});return li.create(t,[li.intents("/intent"),a])}function qp(e){const t={}.toolSwitcher||{},n=t.order||[],a=t.hidden||[];if(!n.length&&!a.length)return e;const r=e.reduce((d,c)=>{const u=c.title||"<unknown>";if(!c.name)return console.warn(`Tool "${u}" does not have the required "name" property`),d;if(d[c.name]){const p=d[c.name].tool.title;return console.warn(`Tools with duplicate name "${c.name}" found ("${u}" and "${p}")`),d}const m=n.indexOf(c.name);return d[c.name]={tool:c,index:m===-1?1/0:m},d},{}),o=d=>a.indexOf(d.name)===-1,s=e.filter(o);return s.sort((d,c)=>{const u=r[d.name],m=r[c.name],p=u?u.index:1/0,h=m?m.index:1/0;return p===h?0:p-h}),s}const Kee=["template"],Wee=["mode"];function Gee(e,t){const n=qp(e)[0];return!t||t.tool||!n?t:Object.assign({},t,{tool:n.name})}function qee(e,t){return t&&(qp(e).find(n=>n.name===t.space)?{...t,tool:t.space,space:void 0}:t)}function Yee(e,t){return Gee(e,qee(e,t))}function Xee(e,t,n){var a;const{intent:r,params:o,payload:s}=n;if(typeof r!="string")throw new Error("intent must be a string");if(!Ke(o))throw new Error("intent params must be a string");const d=qp(e),c=t!=null&&t.tool?d.find(f=>f.name===t.tool):null,u=c?d.filter(f=>f!==c):d;let m=[];r==="create"?m=Kee:r==="edit"&&(m=Wee);const p={score:-1,tool:null},{tool:h}=(c?[c,...u]:d).reduce((f,g)=>{if(!g||typeof g.canHandleIntent!="function")return f;const b=g.canHandleIntent(r,o,t&&t[g.name]);if(typeof b=="boolean")return b&&f.score<0?{score:0,tool:g}:f;if(!Ke(b))return f;const v=m.reduce((y,x)=>x in o&&b[x]===!0?y+1:y,0);return v>f.score?{score:v,tool:g}:f},p);if(h!=null&&h.getIntentState){const f=h.getIntentState(r,o,t&&t[h.name],s),{_searchParams:g,...b}=f,v={...t,tool:h.name,[h.name]:b};return(a=h.router)!=null&&a.__unsafe_disableScopedSearchParams?v._searchParams=g:b._searchParams=g,{type:"state",isNotFound:!1,state:v}}return{type:"intent",isNotFound:!0,intent:{name:r,params:o}}}function Jee(e,t){return{type:"state",state:e.decode(t)||{},isNotFound:e.isNotFound(t)}}function Zee({children:e,LoadingComponent:t,workspace:n}){const{basePath:a,tools:r}=n,o=ZJ(),s=l.useMemo(()=>Hee({basePath:a,tools:r}),[a,r]),[d,c]=Qee(o,s,r);return d?i.jsx(CS,{onNavigate:c,router:s,state:d,children:e}):i.jsx(t,{})}function Qee(e,t,n){var a;const r=l.useMemo(()=>{const c=t.getBasePath(),u=new RegExp(`^${wS(c)}(\\/|$)`,"i"),m=p=>c==="/"?!0:u.test(p);return{subscribe:p=>e.listen(p),getSnapshot:()=>`${e.location.pathname}${e.location.search||""}`,getServerSnapshot:()=>null,selector:p=>typeof p=="string"&&m(p)?Jee(t,p):null}},[e,t]),o=TS.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,r.selector,tt),s=l.useRef(o);l.useEffect(()=>{var c;if((o==null?void 0:o.type)==="state"&&!((c=o.state)!=null&&c.intent)){const u=Yee(n,o.state);u&&u!==o.state&&e.replace(t.encode(u))}},[o==null?void 0:o.state,o==null?void 0:o.type,e,t,n]),l.useEffect(()=>{const c=ly(o,t,n,s);c?e.replace(c):s.current=o},[o,e,t,n]);const d=l.useMemo(()=>({path:c,replace:u})=>{const m=r.selector(c),p=ly(m,t,n,s),h=typeof p=="string"?p:c;u?e.replace(h):e.push(h)},[e,t,r,n]);return[(a=o==null?void 0:o.state)!=null?a:null,d]}function ly(e,t,n,a){var r,o;if((e==null?void 0:e.type)==="state"&&(r=e.state)!=null&&r.intent){const s=Xee(n,((o=a.current)==null?void 0:o.type)==="state"?a.current.state:{},e.state);if((s==null?void 0:s.type)==="state")return t.encode(s.state)}return null}function KT(e){const[t,n]=l.useState(null);if(t)throw t;const[a,r]=l.useState(null);return l.useEffect(()=>{const o=Ht(e.__internal.sources.map(({source:s})=>s.pipe(ut(d=>{if(d instanceof sa)return re(d);throw d})))).pipe(K(s=>{const d=s.filter(c=>c instanceof sa);if(d.length)throw new sa({name:e.name,causes:d,type:"workspace"});return s}),K(([s,...d])=>({...e,...s,unstable_sources:[s,...d],type:"workspace"}))).subscribe({next:r,error:n});return()=>o.unsubscribe()},[e]),a}function ete({children:e,LoadingComponent:t}){const{activeWorkspace:n}=zp(),a=KT(n);return a?i.jsx(Vx,{workspace:a,children:i.jsx(pC,{source:a.unstable_sources[0],children:i.jsx(Zee,{LoadingComponent:t,workspace:a,children:e})})}):i.jsx(t,{})}function tte({ConfigErrorsComponent:e,...t}){const[{error:n},a]=l.useState({error:null});if(n)throw n;return i.jsx(dm,{onCatch:a,children:i.jsx(ete,{...t})})}Vo.registerLanguage(Hj);Vo.registerLanguage(Kj);Vo.registerLanguage(Wj);Vo.registerLanguage(Gj);Vo.registerLanguage(qj);function Xe(e){const t=mt();return e?t.getClient(e):(console.warn('Calling `useClient()` without specifying an API version is deprecated and will stop working in the next dev-preview release - please migrate to use `useClient({apiVersion: "2021-06-07"})`.'),t.getClient({apiVersion:"2021-06-07"}))}const cy="connecting";function nte(e,t){const n=ts(),a=l.useMemo(()=>n.pair.documentEvents(e,t).pipe(K(r=>r.type),K(r=>r!=="reconnect"),Ee(r=>r?re("connected"):mn(200).pipe(ZA("reconnecting"))),Lt(cy),yt()),[t,n.pair,e]);return Ut(a,cy)}function WT(){return mt().dataset}function ate(e,t){const n=ts(),a=l.useMemo(()=>n.pair.editOperations(e,t),[t,n.pair,e]);return Ut(a)}function GT(e,t,n="default"){const a=ts(),r=l.useMemo(()=>{if(n==="low"){const o=a.pair.editState(e,t).pipe(da());return at(o.pipe(hi(1)),o.pipe(r0(1),o0(()=>mn(1e3))))}return a.pair.editState(e,t)},[t,a.pair,n,e]);return Ut(r)}const Fu=[],dy={enabled:!0,error:null,features:Fu,isLoading:!0};function ite({versionedClient:e}){return e.observable.request({uri:"/features",tag:"features"})}const Md=new Map;function cs(e){const t=Xe(qe),{projectId:n}=mt();if(!Md.get(n)){const r=ite({versionedClient:t}).pipe(an());Md.set(n,r)}const a=l.useMemo(()=>(Md.get(n)||re(Fu)).pipe(K((r=[])=>({isLoading:!1,enabled:!!(r!=null&&r.includes(e)),features:r,error:null})),Lt(dy),ut(r=>re({isLoading:!1,enabled:!1,features:Fu,error:r}))),[e,n]);return Ut(a,dy)}const uy=1e3*5,rte=1e3*20,qT=1e3*60,my=qT*60,YT={month:"short",day:"numeric"},XT={...YT,year:"numeric"},ote={...XT,hour:"numeric",minute:"numeric"};function $r(e,t={}){const n=ste(e,t),[,a]=l.useReducer(r=>r+1,0);return l.useEffect(()=>{let r;function o(s){r=window.setTimeout(()=>{a(),r=window.setTimeout(()=>o(s),s)},s)}return n.refreshInterval!==null&&o(n.refreshInterval),()=>{r!==null&&clearTimeout(r)}},[a,n.refreshInterval]),n.timestamp}function ste(e,t={}){const{t:n}=L(),a=Yi().id,{timeZone:r,minimal:o}=t,s=e instanceof Date?e:new Date(e),d=!!t.useTemporalPhrase,c=l.useCallback(function(y,x){const w=x==="day"&&Math.abs(y)===1,C=x==="week"&&Math.abs(y)===1;return d||w?$a.relativeTimeFormat(a,{style:o&&!C?"short":"long",numeric:"auto"}).format(y,x):$a.numberFormat(a,{style:"unit",unit:x,unitDisplay:o?"short":"long"}).format(Math.abs(y))},[a,d,o]);if(!s.getTime())return{timestamp:"",refreshInterval:null};const u=t.relativeTo||Date.now(),m=vk(u,s),p=xk(u,s);if(m||p)return t.minimal&&p===0?{timestamp:$a.dateTimeFormat(a,{...YT,timeZone:r}).format(s),refreshInterval:null}:t.minimal?{timestamp:$a.dateTimeFormat(a,{...XT,timeZone:r}).format(s),refreshInterval:null}:{timestamp:$a.dateTimeFormat(a,{...ote,timeZone:r}).format(s),refreshInterval:null};const h=Ck(s,u);if(h)return{timestamp:c(h,"week"),refreshInterval:my};const f=wk(s,u);if(f)return{timestamp:c(f,"day"),refreshInterval:my};const g=Tk(s,u);if(g)return{timestamp:c(g,"hour"),refreshInterval:qT};const b=jk(s,u);if(b)return{timestamp:c(b,"minute"),refreshInterval:rte};const v=kk(s,u);return Math.abs(v)>10?{timestamp:c(v,"second"),refreshInterval:uy}:{timestamp:n("relative-time.just-now"),refreshInterval:uy}}function lte(){return mt().templates}function cte(){return mt().tools}const py={data:[],error:null,loading:!0};let hy=null;function JT(e){const{documentValue:t,permission:n}=e,a=EU(),r=bp(),o=Xe(qe),[s,d]=l.useState(py),c=l.useMemo(()=>{const u=a.get().pipe(K(h=>{var f;return(f=h.members)==null?void 0:f.filter(g=>!g.isRobot)})).pipe(Ee(async h=>{const f=h.map(({id:g})=>g);return await r.getUsers(f)}),K(h=>h.map(f=>({displayName:f.displayName,id:f.id,granted:!1})))),m=hy,p=m?re(m):o.observable.fetch('*[_type == "system.group"]');return Yj([u,p]).pipe(Ye(async([h,f])=>{m||(hy=f);const g=h==null?void 0:h.map(async b=>{const v=[...f.map(x=>x.members.includes(b.id)?x.grants:[])].flat(),{granted:y}=await Jw(b.id,v,n,t);return{...b,granted:y}});return await Promise.all(g||[])})).pipe(K(h=>({error:null,loading:!1,data:zi(h,"displayName")})))},[o.observable,t,a,r,n]);return l.useEffect(()=>{const u=re(py),m=zt(u,c).subscribe({next:d,error:p=>{d({data:[],error:p,loading:!1})}});return()=>{m.unsubscribe()}},[c]),s}const Pd=k(E)`
  white-space: nowrap;
`;function Yp({absoluteDate:e,draft:t,published:n,singleLine:a}){const{t:r}=L(),o=t&&"_updatedAt"in t?t._updatedAt:"",s=n&&"_updatedAt"in n?n._updatedAt:"",d=ca({dateStyle:"medium",timeStyle:"short"}),c=o&&d.format(new Date(o)),u=s&&d.format(new Date(s)),m=$r(o||"",{minimal:!0,useTemporalPhrase:!0}),p=$r(s||"",{minimal:!0,useTemporalPhrase:!0}),h=e?u:p,f=e?c:m;return i.jsxs(P,{align:a?"center":"flex-start","data-testid":"pane-footer-document-status",direction:a?"row":"column",gap:2,wrap:"nowrap",children:[!h&&i.jsx(Pd,{size:1,weight:"medium",children:r("document-status.not-published")}),h&&i.jsx(Pd,{size:1,weight:"medium",children:r("document-status.published",{date:h})}),f&&i.jsx(Pd,{muted:!0,size:1,wrap:"nowrap",children:r("document-status.edited",{date:f})})]})}function dte(e){const t=l.useRef(void 0);return fi(e,t.current)||(t.current=e),[t.current]}function ute(e,t){l.useEffect(e,dte(t))}l.memo(function(e){const{hook:t,args:n,id:a,onNext:r,onReset:o,onRequestUpdate:s}=e,d=t({...n,onComplete:()=>{o(a)}});return ute(()=>(r(a,d),s(),()=>{r(a,null),s()}),d),null},(e,t)=>e.args===t.args);const mte=k(Jn)(e=>{const{theme:t}=e,{container:n,media:a}=t.sanity;return Zy(a,e.$width,r=>({width:r==="auto"?"none":Te(n[r]),maxWidth:"100%"}))}),pte=l.forwardRef(function(e,t){const{width:n,...a}=e,r=Xj(n);return i.jsx(mte,{...a,"data-ui":"PopoverContainer",$width:r,ref:t})}),hte=k(rt)(()=>ae`
    // Make the popover scrollable if it overflows the viewport
    [data-ui='Popover__wrapper'] {
      overflow: auto;
    }
  `),fte=k(wi)(e=>{const t=e.theme.sanity.radius[3];return ae`
    position: sticky;
    top: 0;
    width: 100%;
    background: var(--card-bg-color);
    border-bottom: 1px solid var(--card-border-color);
    border-top-left-radius: ${t}px;
    border-top-right-radius: ${t}px;
  `});function gte(e){const{children:t,header:n,onClose:a,referenceElement:r,containerRef:o,width:s}=e,d=l.useCallback(()=>{a(),r==null||r.focus()},[a,r]);return i.jsx(hte,{portal:!0,constrainSize:!0,content:i.jsx(pte,{width:s,children:i.jsx(qa,{autoFocus:!0,children:i.jsxs(B,{ref:o,children:[i.jsx(fte,{children:i.jsx(I,{padding:2,paddingLeft:4,children:i.jsxs(P,{align:"center",gap:2,children:[i.jsx(I,{flex:1,children:i.jsx(E,{size:1,textOverflow:"ellipsis",weight:"medium",children:n})}),i.jsx(Z,{icon:un,mode:"bleed",onClick:d,tooltipProps:{content:"Close"}})]})})}),i.jsx(I,{padding:4,children:t})]})})}),open:!0,referenceElement:r})}const bte=k(U)(()=>ae`
    /* TextWithTone uses its own logic to set color, and we therefore need */
    /* to override this logic in order to set the correct color in different states */
    &[data-selected],
    &[data-pressed],
    &:active {
      [data-ui='TextWithTone'] {
        color: inherit;
      }
    }
  `),Co=l.forwardRef(function(e,t){const{children:n,selected:a,as:r,...o}=e;return i.jsx(bte,{"data-ui":"PreviewCard",...o,forwardedAs:r,ref:t,selected:a,children:i.jsx(Jj.Provider,{value:{selected:a},children:n})})}),yte=k(Co)`
  /* this is a hack to avoid layout jumps while previews are loading
there's probably better ways of solving this */
  min-height: 36px;
`,Rt={block:{icon:25,media:{width:33,height:33}},blockImage:{icon:25,media:{width:600,height:400}},compact:{icon:21,media:{width:25,height:25}},default:{icon:21,media:{width:33,height:33}},detail:{icon:25,media:{width:73,height:73}},inline:{icon:15,media:{width:15,height:15}},media:{icon:25,media:{width:160,height:160}}},ZT=k.span(e=>{const{$dimensions:t,$layout:n,$radius:a,$responsive:r}=e,o=t.width||0,s=t.width||0,d=Rt[n].icon;return ae`
    position: relative;
    width: ${r?"100%":Te(o)};
    height: ${r?"100%":Te(s)};
    min-width: ${r?void 0:Te(o)};
    border-radius: ${({theme:c})=>Te(c.sanity.radius[a])};
    display: flex;
    overflow: hidden;
    overflow: clip;
    align-items: center;
    justify-content: center;

    & img {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: inherit;
    }

    & svg {
      // Shared styles for SVG icons
      color: var(--card-icon-color);
      display: block;
      flex: 1;

      // Specific styles for non Sanity icons
      &:not([data-sanity-icon]) {
        height: 1em;
        width: 1em;
        max-width: 1em;
        max-height: 1em;
      }

      // Specific styles for Sanity icons
      &[data-sanity-icon] {
        display: block;
        font-size: calc(${d} / 16 * 1em);
      }
    }

    & > span[data-border] {
      display: block;
      position: absolute;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      box-shadow: inset 0 0 0 1px var(--card-fg-color);
      opacity: 0.1;
      border-radius: inherit;
      pointer-events: none;
    }
  `});ZT.displayName="MediaWrapper";function Zr(e){const{border:t=!0,dimensions:n,layout:a,media:r,radius:o=1,responsive:s=!1,styles:d}=e;return i.jsxs(ZT,{$dimensions:n,$layout:a,$radius:o,$responsive:s,className:d==null?void 0:d.media,"data-testid":"Media",children:[vte({dimensions:n,layout:a,media:r}),t&&i.jsx("span",{"data-border":!0})]})}function vte(e){const{dimensions:t,layout:n,media:a,styles:r}=e;return zr.isValidElementType(a)?l.createElement(a,{dimensions:t,layout:n}):typeof a=="string"?i.jsx(E,{as:"span",className:r==null?void 0:r.mediaString,size:1,children:a}):l.isValidElement(a)?a:null}function xte(e,t,n){return zr.isValidElementType(e)?l.createElement(e,{layout:t,dimensions:n}):typeof e=="string"?i.jsx("div",{children:e}):e}function St(e,t,n){return typeof e=="string"?e:zr.isValidElementType(e)?l.createElement(e,{layout:t}):e||n}const Cte={...Rt.compact.media,aspect:1,fit:"crop",dpr:ki()},fy=k(P)`
  height: ${Te(Rt.compact.media.height)};
  box-sizing: content-box;
`,wte=k(it).attrs({animated:!0,radius:1,size:1})`
  max-width: ${Te(160)};
  width: 80%;
`;function Tte(e){const{children:t,isPlaceholder:n,media:a,status:r,title:o}=e,{t:s}=L(),d=r&&i.jsx(I,{"data-testid":"compact-preview__status",paddingLeft:4,paddingRight:1,children:St(r,"compact")});return n?i.jsx(fy,{align:"center","data-testid":"default-preview",paddingLeft:a?1:2,paddingRight:2,paddingY:1,children:i.jsxs(P,{align:"center",flex:1,gap:2,children:[a&&i.jsx(Ti,{animated:!0,radius:2,style:Rt.compact.media}),i.jsx(B,{"data-testid":"compact-preview__heading",flex:1,space:2,children:i.jsx(wte,{})}),d]})}):i.jsxs(fy,{align:"center","data-testid":"compact-preview",paddingLeft:a?1:2,paddingRight:2,paddingY:1,children:[i.jsxs(P,{align:"center",flex:1,gap:2,children:[a&&i.jsx(Zr,{border:!1,dimensions:Cte,layout:"compact",media:a}),i.jsx(B,{"data-testid":"compact-preview__header",flex:1,space:2,children:i.jsxs(E,{size:1,style:{color:"inherit"},textOverflow:"ellipsis",weight:"medium",children:[o&&St(o,"compact"),!o&&i.jsx("span",{style:{color:"var(--card-muted-fg-color)"},children:s("preview.default.title-fallback")})]})}),d]}),t&&i.jsx(I,{marginLeft:1,children:t})]})}const jte={...Rt.default.media,aspect:1,fit:"crop",dpr:ki()},gy=k(P)`
  height: ${Te(Rt.default.media.height)};
  box-sizing: content-box;
`,kte=k(it).attrs({animated:!0,radius:1,size:1})`
  max-width: ${Te(160)};
  width: 80%;
`,Ate=k(it).attrs({animated:!0,radius:1,size:1})`
  max-width: ${Te(120)};
  width: 60%;
`;function QT(e){const{title:t,subtitle:n,media:a,status:r,isPlaceholder:o,children:s,styles:d}=e,{t:c}=L(),u=nA(d==null?void 0:d.root,!!n&&(d==null?void 0:d.hasSubtitle)),m=r&&i.jsx(I,{className:d==null?void 0:d.status,"data-testid":"default-preview__status",children:St(r,"default")});return o?i.jsx(gy,{align:"center",className:d==null?void 0:d.placeholder,"data-testid":"default-preview",padding:2,paddingLeft:a?2:3,children:i.jsxs(P,{align:"center",flex:1,gap:2,children:[a&&i.jsx(I,{flex:"none",children:i.jsx(Ti,{animated:!0,radius:1,style:Rt.default.media})}),i.jsxs(B,{"data-testid":"default-preview__heading",flex:1,space:2,children:[i.jsx(kte,{}),i.jsx(Ate,{})]}),i.jsx(I,{flex:"none",padding:1,children:m})]})}):i.jsx(gy,{align:"center",className:u,"data-testid":"default-preview",padding:2,paddingLeft:a?2:3,children:i.jsxs(P,{align:"center",flex:1,gap:2,children:[a&&i.jsx(I,{flex:"none",children:i.jsx(Zr,{dimensions:jte,layout:"default",media:a,styles:d})}),i.jsxs(B,{className:d==null?void 0:d.heading,"data-testid":"default-preview__header",flex:1,space:2,children:[i.jsxs(E,{className:d==null?void 0:d.title,size:1,style:{color:"inherit"},textOverflow:"ellipsis",weight:"medium",children:[t&&St(t,"default"),!t&&i.jsx("span",{style:{color:"var(--card-muted-fg-color)"},children:c("preview.default.title-fallback")})]}),n&&i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",className:d==null?void 0:d.subtitle,children:St(n,"default")})]}),i.jsx(I,{flex:"none",padding:1,children:m}),s&&i.jsx("div",{className:d==null?void 0:d.children,children:s})]})})}const by=k(P).attrs({align:"center"})`
  height: ${Te(Rt.detail.media.height)};
`,Ste=k(I)`
  white-space: nowrap;
`,_te=k(Ti).attrs({animated:!0,radius:2})`
  width: ${Te(Rt.detail.media.width)};
  height: ${Te(Rt.detail.media.height)};
`,Ete=k(it).attrs({animated:!0,radius:1,size:1})`
  max-width: ${Te(160)}; /* 80% of 200px */
  width: 80%;
`,Ite=k(it).attrs({animated:!0,radius:1,size:1})`
  max-width: ${Te(120)}; /* 60% of 200px */
  width: 60%;
`,Mte=k(it).attrs({animated:!0,radius:1,size:1})`
  max-width: ${Te(180)}; /* 90% of 200px */
  width: 90%;
`,Pte=k(E)(({theme:e})=>{const{fonts:t}=e.sanity,n=t.text.sizes[1],a=2,r=n.lineHeight*a;return ae`
    & > span {
      max-height: ${Te(r)};

      /* Multi-line text overflow */
      display: -webkit-box;
      overflow: hidden;
      overflow: clip;
      text-overflow: ellipsis;
      -webkit-line-clamp: ${a};
      -webkit-box-orient: vertical;
    }
  `}),Nte={...Rt.detail.media,fit:"crop",aspect:1,dpr:ki()};function Ote(e){const{title:t,subtitle:n,description:a,mediaDimensions:r=Nte,media:o,status:s,children:d,isPlaceholder:c}=e,{t:u}=L(),m=s&&i.jsx(Ste,{marginLeft:3,paddingRight:1,children:St(s,"detail")});return c?i.jsx(by,{"data-testid":"detail-preview",paddingLeft:o?2:3,paddingRight:2,paddingY:2,children:i.jsxs(P,{align:"center",flex:1,gap:3,children:[o&&i.jsx(_te,{"data-testid":"detail-preview__media"}),i.jsx(P,{align:"center","data-testid":"detail-preview__header",flex:1,children:i.jsxs(B,{flex:1,space:2,children:[i.jsx(Ete,{}),i.jsx(Ite,{}),a&&i.jsx(I,{marginTop:1,children:i.jsx(Mte,{})})]})}),m]})}):i.jsx(by,{"data-testid":"detail-preview",paddingLeft:o?2:3,paddingRight:2,paddingY:2,children:i.jsxs(P,{align:"center",flex:1,gap:3,children:[o&&i.jsx(Zr,{dimensions:r,layout:"detail",media:o}),i.jsxs(P,{align:"center","data-testid":"detail-preview__header",flex:1,children:[i.jsxs(B,{flex:1,space:2,children:[i.jsxs(E,{textOverflow:"ellipsis",size:1,style:{color:"inherit"},weight:"medium",children:[t&&St(t,"detail"),!t&&i.jsx(i.Fragment,{children:u("preview.default.title-fallback")})]}),n&&i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",children:St(n,"detail")}),a&&i.jsx(I,{marginTop:1,children:i.jsx(Pte,{muted:!0,size:1,children:St(a,"detail")})})]}),m]}),d]})})}const na=43,Xp=3,Fte=k.svg`
  width: ${na}px;
  height: ${na}px;
  transform: rotate(-90deg);
`,Rte=k.circle(({theme:e})=>{const{color:t}=e.sanity;return ae`
    fill: none;
    stroke: ${Ge.gray[t.dark?900:100].hex};
    stroke-width: ${Xp}px;
  `}),Dte=k.circle(({theme:e})=>{const{color:t}=e.sanity;return ae`
    fill: none;
    stroke: ${Ge.blue[t.dark?400:500].hex};
    stroke-width: ${Xp}px;
    transition: stroke-dashoffset 75ms;
  `});function $te(e){const{value:t}=e,n=Math.min(Math.max(t,0),100),a=na/2-Xp/2,r=2*Math.PI*a,o=(100-n)/100*r,s=`${na/2} ${na/2} ${na} ${na}`;return i.jsxs(Fte,{viewBox:s,children:[i.jsx(Rte,{cx:na,cy:na,r:a}),i.jsx(Dte,{cx:na,cy:na,r:a,style:{strokeDasharray:r,strokeDashoffset:`${o}px`}})]})}const Lte=.5,Bte=k(U)`
  overflow: hidden;
  overflow: clip;
`,Vte=k(U)(({theme:e})=>{const{color:t}=e.sanity;return ae`
    height: ${Lte}rem;
    background: ${Ge.blue[t.dark?400:500].hex};
    transition: transform 75ms;
  `});function Ute(e){const{value:t}=e;return i.jsx(Bte,{radius:5,children:i.jsx(Vte,{radius:5,style:{transform:`translate3d(${t-100}%, 0, 0)`}})})}const zte=k(I)`
  position: relative;
`,Hte=k(P).attrs({align:"center",justify:"center"})`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
`,Kte=k(Ti).attrs({animated:!0,radius:2})`
  width: 100%;
  height: 100%;
`,Wte=k(P).attrs({align:"center",justify:"center"})`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;

  &:before {
    background-color: var(--card-bg-color);
    opacity: 0.75;
    content: '';
    display: block;
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
  }

  > svg {
    position: relative;
    z-index: 2;
  }
`,Gte=k(B).attrs({space:2})`
  max-width: ${Te(200)};
`,qte={...Rt.media.media,aspect:1,fit:"crop",dpr:ki()};function Yte(e){const{media:t,mediaDimensions:n=qte,children:a,isPlaceholder:r,progress:o=-1,subtitle:s,title:d,withBorder:c=!0,withRadius:u=!0}=e,m=n.aspect||1,p=l.useMemo(()=>({paddingBottom:`${100/m}%`}),[m]),h=l.useMemo(()=>!d||!s?null:i.jsxs(Gte,{children:[d&&i.jsx(E,{align:"center",size:1,weight:"medium",children:St(d,"media")}),s&&i.jsx(E,{align:"center",muted:!0,size:1,children:St(s,"media")})]}),[s,d]);return i.jsx(I,{padding:2,children:i.jsxs(zte,{"data-testid":"media-preview",flex:1,overflow:"hidden",children:[i.jsx("div",{style:p}),i.jsx(Ie,{content:h,disabled:!h,placement:"top",portal:!0,children:i.jsxs(Hte,{children:[r?i.jsx(Kte,{}):i.jsx(Zr,{border:c,dimensions:n,layout:"media",media:t,radius:u?1:0,responsive:!0}),typeof o=="number"&&o>-1&&i.jsx(Wte,{children:i.jsx($te,{value:o})})]})}),a]})})}const Xte=k(P).attrs({align:"center"})`
  height: ${Te(Rt.block.media.height)};
  white-space: nowrap;
  position: relative;
  z-index: 1;
`,Jte=k(U)`
  overflow: hidden;
  position: relative;
  padding-bottom: ${({$ratio:e})=>e}%;

  & > span {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
`,Zte=k(I).attrs({overflow:"hidden"})`
  border-radius: ${({theme:e})=>e.sanity.radius[1]}px;
`,Qte={...Rt.blockImage.media,fit:"fillmax",dpr:ki()},ene=e=>{const{height:t,width:n}=e;return!t||!n?1:t/n*100};function tne(e){const{actions:t,title:n,subtitle:a,description:r,fallbackTitle:o="Untitled",mediaDimensions:s=Qte,media:d,children:c,status:u}=e;return i.jsxs(Zte,{children:[i.jsxs(B,{children:[i.jsxs(Xte,{paddingBottom:3,paddingLeft:2,paddingRight:1,paddingTop:1,children:[i.jsxs(B,{flex:1,space:2,children:[(n||o)&&i.jsx(E,{size:1,textOverflow:"ellipsis",weight:"medium",children:n?St(n,"block"):o}),a&&i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",children:St(a,"block")})]}),i.jsxs(P,{gap:1,paddingLeft:1,children:[u&&i.jsx(I,{paddingX:2,paddingY:3,children:St(u,"block")}),t]})]}),i.jsx(Jte,{$ratio:ene(s),__unstable_checkered:!0,display:"flex",sizing:"border",radius:2,tone:"inherit",children:i.jsx(Zr,{border:!1,dimensions:s,layout:"blockImage",media:d,radius:0,responsive:!0})})]}),r&&i.jsx(I,{paddingX:2,paddingY:3,children:i.jsx(E,{muted:!0,size:1,children:St(r,"block")})}),c&&i.jsx("div",{children:c})]})}const nne={...Rt.block.media,aspect:1,fit:"crop",dpr:ki()},ane=k(P).attrs({align:"center"})`
  min-height: ${Te(Rt.block.media.height)};
`;function ine(e){const{actions:t,title:n,subtitle:a,description:r,mediaDimensions:o=nne,media:s,status:d,children:c}=e;return i.jsxs(B,{"data-testid":"block-preview",space:1,children:[i.jsxs(ane,{"data-testid":"block-preview__header",children:[s&&i.jsx(Zr,{dimensions:o,layout:"block",media:s}),i.jsxs(I,{flex:1,paddingLeft:s?2:1,children:[i.jsx(E,{size:1,textOverflow:"ellipsis",weight:"medium",children:n?St(n,"block"):"Untitled"}),a&&i.jsx(I,{marginTop:2,children:i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",children:St(a,"block")})}),r&&i.jsx(I,{marginTop:3,children:i.jsx(E,{muted:!0,size:1,textOverflow:"ellipsis",children:St(r,"block")})})]}),i.jsxs(P,{gap:1,paddingLeft:1,children:[d&&i.jsx(I,{paddingX:2,paddingY:3,children:St(d,"block")}),t]})]}),c&&i.jsx("div",{"data-testid":"block-preview__children",children:c})]})}const rne=k.span`
  display: inline-flex;
  align-items: center;
  vertical-align: top;
  height: calc(1em - 1px);
  max-width: 100%;
`,one=k.span`
  position: relative;
  display: inline-block;
  width: calc(1em - 1px);
  height: calc(1em - 1px);
  min-width: calc(1em - 1px);

  & img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: ${({theme:e})=>Te(e.sanity.radius[1])};
  }

  & img + span {
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    box-shadow: inset 0 0 0 1px var(--card-fg-color);
    opacity: 0.2;
    border-radius: ${({theme:e})=>Te(e.sanity.radius[1])};
  }

  & svg {
    display: block;
    font-size: calc(14 / 16 * 1em);
    margin: 1px 0;

    &[data-sanity-icon] {
      font-size: calc(18 / 16 * 1em);
      margin: calc(1px + (2 / 18 * -1em)) 0;
    }
  }
`,sne=k(E).attrs({forwardedAs:"span"})(({theme:e})=>{const t=e.sanity.fonts.text,n=t.sizes[1];return ae`
    font-size: calc(${n.fontSize} / 16 * 1em);
    font-weight: ${t.weights.medium};
    box-sizing: border-box;
    display: inline-block;
    vertical-align: top;
    line-height: ${n.lineHeight/n.fontSize};
    padding-left: 0.5em;
    padding-right: calc(0.5em - 2px);
    min-width: 0;

    & > span {
      display: block;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
      overflow: clip;
    }
  `}),lne={...Rt.inline.media,fit:"crop",aspect:1,dpr:ki()};function cne(e){const{title:t,fallbackTitle:n="Untitled",media:a,mediaDimensions:r=lne}=e;return i.jsxs(rne,{"data-testid":"inline-preview",children:[a&&i.jsxs(one,{"data-testid":"inline-preview-media",children:[xte(a,"inline",r),i.jsx("span",{})]}),i.jsx(sne,{"data-testid":"inline-preview-title",size:1,children:St(t,"inline",n)})]})}({...Rt.default.media,dpr:ki()});k(I)`
  height: 100%;

  a {
    color: currentColor;
    text-decoration: none;
  }

  svg[data-sanity-icon] {
    margin: 0;
  }
`;k(P).attrs({align:"center"})`
  height: ${Te(Rt.default.media.height)};
`;k(it).attrs({animated:!0,radius:1})`
  max-width: ${Te(160)};
  width: 80%;
`;k(it).attrs({animated:!0,radius:1,size:1})`
  max-width: ${Te(120)};
  width: 60%;
`;const dne=["aria-hidden","disabled","href"],une='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';function mne(e){return[...e.querySelectorAll(une)].filter(t=>!t.hasAttribute("disabled")&&t.getAttribute("aria-hidden")!=="true")}function ej(e){const{direction:t="horizontal",initialFocus:n,loop:a=!0,navigation:r=["arrows"],pause:o=!1,rootElement:s}=e,[d,c]=l.useState(-1),[u,m]=l.useState([]),p=u.length,h=p-1,f=t==="horizontal"?"ArrowRight":"ArrowDown",g=t==="horizontal"?"ArrowLeft":"ArrowUp",b=l.useCallback(()=>{if(s){const x=mne(s);m(x)}},[s]),v=l.useCallback(x=>{c(x)},[]),y=l.useCallback(x=>{if(o)return;const w=()=>{x.preventDefault(),c(T=>{const j=(T+h)%p;return!a&&j===h?T:j})},C=()=>{x.preventDefault(),c(T=>{const j=(T+1)%p;return!a&&j===0?T:j})};x.key==="Tab"&&r.includes("tab")&&(x.shiftKey?w():C()),r.includes("arrows")&&(x.key===g&&w(),x.key===f&&C())},[o,g,r,f,h,p,a]);l.useEffect(()=>{b()},[b,n,t]),l.useEffect(()=>{const x=new MutationObserver(b);return s&&x.observe(s,{childList:!0,subtree:!0,attributeFilter:dne}),()=>{x.disconnect()}},[u,b,s]),l.useEffect(()=>{var x;u.forEach((w,C)=>{C===d?(w.setAttribute("tabIndex","0"),w.setAttribute("aria-selected","true"),w.focus(),w.onfocus=()=>v(C),w.onblur=()=>v(-1)):(w.setAttribute("tabIndex","-1"),w.setAttribute("aria-selected","false"),w.onfocus=()=>v(C))}),d===-1&&u&&((x=u[n==="last"?h:0])==null||x.setAttribute("tabIndex","0"))},[u,d,v,n,h]),l.useEffect(()=>(s==null||s.addEventListener("keydown",y),()=>{s==null||s.removeEventListener("keydown",y)}),[y,s])}const pne=k(Z)`
  position: relative;
  // The children in button is rendered inside a span, we need to absolutely position it.
  & > span:nth-child(2) {
    position: absolute;
    top: 6px;
    right: 6px;
    padding: 0;
  }
`,hne=k.div({width:4,height:4,borderRadius:3,boxShadow:"0 0 0 1px var(--card-bg-color)"}),fne=l.forwardRef(function(e,t){const{disabled:n,icon:a,"aria-label":r,mode:o="bleed",text:s,tone:d,...c}=e,u=Lr(),m=d&&u.sanity.color.solid[d],p=l.useMemo(()=>({backgroundColor:m==null?void 0:m.enabled.bg}),[m]);return i.jsx(pne,{"data-ui":"StatusButton",...c,"aria-label":r,disabled:!!n,mode:o,ref:t,text:s,icon:a,children:d&&i.jsx(hne,{style:p})})}),gne=l.forwardRef(function({children:e,content:t,disabled:n,...a},r){return i.jsx(Ie,{...a,content:t,disabled:n||!t,ref:r,children:i.jsx("div",{children:e})})}),tj=l.forwardRef((e,t)=>{const{push:n}=Vt();return l.useImperativeHandle(t,()=>({push:n})),null});tj.displayName="ImperativeToast";function bne(){return l.useContext(aA)}function yne({children:e,zOffset:t}){const n=bne()[t];return i.jsx(Tl,{zOffset:n,children:e})}function vne(e){return{thread:{title:e("delete-thread.title"),body:e("delete-thread.body"),confirmButtonText:e("delete-thread.confirm")},comment:{title:e("delete-comment.title"),body:e("delete-comment.body"),confirmButtonText:e("delete-comment.confirm")}}}function nj(e){const{isParent:t,onClose:n,commentId:a,onConfirm:r,loading:o,error:s}=e,{t:d}=L(pt),c=vne(d),{title:u,body:m,confirmButtonText:p}=c[t?"thread":"comment"],h=l.useCallback(()=>{r(a)},[a,r]);return i.jsx(En,{footer:{cancelButton:{onClick:n},confirmButton:{loading:o,onClick:h,text:p,tone:"critical"}},header:u,id:"delete-comment-dialog",onClose:n,width:0,children:i.jsxs(B,{space:4,children:[i.jsx(E,{size:1,children:m}),s&&i.jsx(Ct,{tone:"critical",children:d("delete-dialog.error")})]})})}const xne=l.forwardRef(function(e,t){return i.jsxs("svg",{"data-sanity-icon":"comment-disabled",width:"1em",height:"1em",ref:t,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[i.jsx("path",{d:"M5.92627 14.5381H7.92627V18.5381L11.9263 14.5381H15.9263C17.0308 14.5381 17.9263 13.6427 17.9263 12.5381V6.53809C17.9263 5.43352 17.0308 4.53809 15.9263 4.53809H5.92627C4.8217 4.53809 3.92627 5.43352 3.92627 6.53809V12.5381C3.92627 13.6427 4.8217 14.5381 5.92627 14.5381Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round"}),i.jsx("path",{d:"M2.77256 2.66835C2.54413 2.51319 2.23317 2.57259 2.07802 2.80103L1.40378 3.7937C1.32927 3.9034 1.30139 4.0382 1.32627 4.16845C1.35115 4.29871 1.42676 4.41374 1.53646 4.48825L19.5861 16.7479C19.8146 16.903 20.1255 16.8436 20.2807 16.6152L20.9549 15.6225C21.0294 15.5128 21.0573 15.378 21.0324 15.2478C21.0076 15.1175 20.9319 15.0025 20.8222 14.928L2.77256 2.66835Z",fill:"currentColor",strokeLinejoin:"round"})]})});l.forwardRef(function(e,t){return i.jsx("svg",{"data-sanity-icon":"comment",width:"1em",height:"1em",ref:t,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:i.jsx("path",{d:"M7.5 15.5H9.5V19.5L13.5 15.5H17.5C18.6046 15.5 19.5 14.6046 19.5 13.5V7.5C19.5 6.39543 18.6046 5.5 17.5 5.5H7.5C6.39543 5.5 5.5 6.39543 5.5 7.5V13.5C5.5 14.6046 6.39543 15.5 7.5 15.5Z",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"1.2"})})});const Cne=l.forwardRef(function(e,t){return i.jsxs("svg",{"data-sanity-icon":"mention",fill:"none",height:"1em",ref:t,viewBox:"0 0 25 25",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:[i.jsx("path",{d:"M16.6633 18.9383C15.539 19.6562 14.2034 20.0723 12.7705 20.0723C8.77022 20.0723 5.52734 16.8294 5.52734 12.8291C5.52734 8.82881 8.77022 5.58594 12.7705 5.58594C16.7708 5.58594 20.0137 8.82881 20.0137 12.8291C20.0137 13.6623 19.8249 14.7093 19.6141 15.2077C19.5578 15.3408 19.479 15.4845 19.3936 15.6238C19.0955 16.1106 18.5507 16.3721 17.9807 16.4018V16.4018C16.8271 16.462 15.8588 15.5428 15.8588 14.3877V9.27302",stroke:"currentColor",strokeWidth:1.2,strokeLinejoin:"round"}),i.jsx("circle",{cx:"12.5732",cy:"12.8291",r:"3.08691",stroke:"currentColor",strokeWidth:1.2})]})}),aj=l.forwardRef(function(e,t){return i.jsxs("svg",{"data-sanity-icon":"add-reaction",fill:"none",height:"1em",ref:t,viewBox:"0 0 25 25",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:[i.jsx("path",{d:"M10.1044 10.4011L10.1044 10.9972",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"square"}),i.jsx("path",{d:"M14.2393 10.4011L14.2393 10.9972",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"square"}),i.jsx("path",{d:"M7.12128 14.1151C7.70803 15.0226 9.66113 16.8377 11.7735 16.8377C13.8859 16.8377 15.6713 15.0226 16.4257 14.1151",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"square"}),i.jsx("path",{d:"M16.703 6.43905C15.3486 5.36511 13.6357 4.72374 11.773 4.72374C7.38731 4.72374 3.83203 8.27902 3.83203 12.6647C3.83203 17.0503 7.38731 20.6056 11.773 20.6056C16.0995 20.6056 19.618 17.1455 19.712 12.8415",stroke:"currentColor",strokeWidth:1.2}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1135 9.03425L19.1135 11.4903L20.3135 11.4903L20.3135 9.03425L22.7693 9.03425L22.7693 7.83425L20.3135 7.83425L20.3135 5.37941L19.1135 5.37941L19.1135 7.83425L16.6584 7.83425L16.6584 9.03425L19.1135 9.03425Z",fill:"currentColor"})]})}),wne=l.forwardRef(function(e,t){return i.jsx("svg",{"data-sanity-icon":"send",fill:"none",height:"1em",ref:t,viewBox:"0 0 25 25",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:i.jsx("path",{clipRule:"evenodd",d:"M21.1602 12.5L7.16016 19.5V14.8765L13.6656 12.4989L7.16016 9.97149L7.16016 5.5L21.1602 12.5Z",stroke:"currentColor",strokeWidth:1.2,strokeLinejoin:"round"})})}),yy=k(Iy)`
  svg > ellipse {
    stroke: transparent;
  }
`,Tne=/[^\p{Alpha}\p{White_Space}]/gu,jne=new RegExp("\\p{White_Space}+","u");function kne(e){const t=e.replace(Tne,"").split(jne);return t.length===1?`${t[0].charAt(0)}`.toUpperCase():`${t[0].charAt(0)}${t[t.length-1].charAt(0)}`}function Mc(e){const{user:t,...n}=e,a=t,r=l.useMemo(()=>kne((a==null?void 0:a.displayName)||""),[a==null?void 0:a.displayName]);return a?i.jsx(yy,{initials:r,src:a==null?void 0:a.imageUrl,title:a==null?void 0:a.displayName,...n}):i.jsx(yy,{...n})}const ur=k.div(e=>{var t;const n=Re(e.theme),{$size:a=1}=e;return ae`
    min-width: ${(t=n.avatar.sizes[a])==null?void 0:t.size}px;
  `}),Ane=Nl({name:"mention",type:"object",fields:[{name:"userId",type:"string"}]}),Sne=Nl({type:"block",name:"block",of:[Ane],marks:{annotations:[]},styles:[{title:"Normal",value:"normal"}],lists:[]}),_ne=Ak({type:"array",name:"body",of:[Sne]}),Ene=s0.compile({name:"comments",types:[_ne]}),Ine=Ene.get("body"),Mne=k.span(({theme:e})=>{var t,n,a;const{regular:r}=((t=e.sanity.fonts)==null?void 0:t.text.weights)||{},{hovered:o}=((n=e.sanity.color)==null?void 0:n.card)||{},{bg:s}=((a=e.sanity.color.selectable)==null?void 0:a.caution.pressed)||{};return ae`
    font-weight: ${r};
    color: var(--card-link-fg-color);
    border-radius: 2px;
    background-color: ${o.bg};
    padding: 1px;
    box-sizing: border-box;

    &[data-active='true'] {
      background-color: ${s};
    }
  `});function ij(e){const{selected:t,userId:n}=e,[a,r]=Oa(n),o=Tt();return!a||r?i.jsx(it,{"data-testid":"comment-mentions-loading-skeleton",style:{width:"10ch"},size:0,muted:!0,radius:1,animated:!0}):i.jsx(Ie,{portal:!0,content:i.jsxs(P,{align:"center",gap:2,children:[i.jsx(P,{children:i.jsx(Mc,{user:a})}),i.jsx(E,{size:1,children:a.displayName})]}),children:i.jsxs(Mne,{"data-selected":t,"data-active":(o==null?void 0:o.id)===n,children:["@",a.displayName]})})}const Pne=k(E)`
  word-break: break-word;
`;function Mn(e){const{children:t}=e;return i.jsx(Pne,{size:1,children:t})}const Nne=e=>{const{children:t}=e;return i.jsx(Mn,{children:t})},One=e=>{const{children:t,value:n,selected:a}=e;return n._type==="mention"&&n.userId?i.jsx(ij,{selected:a,userId:n==null?void 0:n.userId}):t},Fne=9999999;function Rne(e){const{t}=L(pt),{onClose:n,onConfirm:a}=e,r=l.useCallback(s=>{s.stopPropagation(),n()},[n]),o=l.useCallback(s=>{s.stopPropagation(),a()},[a]);return i.jsx(Sk,{tone:"default",children:i.jsx(_k,{zOffset:Fne,children:i.jsx(En,{header:t("discard.header"),id:"discard-comment-dialog",onClose:n,width:0,onClickOutside:n,footer:{cancelButton:{onClick:r},confirmButton:{onClick:o,text:t("discard.button-confirm"),tone:"critical"}},children:i.jsx(E,{size:1,children:t("discard.text")})})})})}const Dne=k(P)``,$ne={width:"50%"};function Lne(e){const{user:t,onSelect:n}=e,[a]=Oa(t.id),{t:r}=L(pt),o=i.jsx(Mc,{user:a,status:t.granted?void 0:"inactive"}),s=a?i.jsx(E,{size:1,textOverflow:"ellipsis",title:a.displayName,children:a.displayName}):i.jsx(it,{size:1,style:$ne}),d=l.useCallback(()=>{n(t.id)},[n,t.id]);return i.jsx(U,{as:"button",disabled:!t.granted,onClick:d,padding:2,radius:2,children:i.jsxs(P,{align:"center",gap:3,children:[i.jsxs(Dne,{align:"center",gap:2,flex:1,children:[o,i.jsx(I,{children:s})]}),!t.granted&&i.jsx(Sn,{fontSize:1,mode:"outline",children:r("mentions.unauthorized-user")})]})})}const vy=[],Bne=k(B)({maxWidth:"220px"}),xy=41,Vne=4,Une=7,zne=k(P)({maxHeight:xy*Une+Vne*2+xy/2}),Hne=l.forwardRef(function(e,t){const{t:n}=L(pt),{loading:a,onSelect:r,options:o=[],inputElement:s}=e,[d,c]=l.useState(""),u=l.useRef(null);l.useImperativeHandle(t,()=>({setSearchTerm(g){c(g)}}),[]);const m=l.useCallback(g=>i.jsx(Lne,{user:g,onSelect:r}),[r]),p=l.useCallback(g=>{var b;return!((b=o==null?void 0:o[g])!=null&&b.granted)},[o]),h=l.useMemo(()=>{var g;if(!d)return o||vy;const b=Tr(d).toLocaleLowerCase(),v=o==null?void 0:o.map(y=>({...y,displayName:Tr(y.displayName||"").toLocaleLowerCase()}));return((g=v==null?void 0:v.filter(y=>{var x;return(x=y==null?void 0:y.displayName)==null?void 0:x.includes(b)}))==null?void 0:g.sort((y,x)=>{var w,C;const T=(w=y.displayName)==null?void 0:w.startsWith(b),j=(C=x.displayName)==null?void 0:C.startsWith(b);return T&&!j?-1:!T&&j?1:0}))||vy},[o,d]);if(a)return i.jsx(Bne,{children:i.jsx(It,{showText:!0})});const f=s||void 0;return i.jsxs(P,{direction:"column",height:"fill","data-testid":"comments-mentions-menu",children:[h.length===0&&i.jsx(I,{padding:5,children:i.jsx(E,{align:"center",size:1,muted:!0,children:n("mentions.no-users-found")})}),h.length>0&&i.jsx(zne,{direction:"column",flex:1,overflow:"hidden",children:i.jsx(Gi,{activeItemDataAttr:"data-hovered",ariaLabel:n("mentions.user-list-aria-label"),fixedHeight:!0,getItemDisabled:p,inputElement:f,itemHeight:41,items:h,padding:1,ref:u,renderItem:m})})]})});function rj(){const e=l.useContext(k0);if(!e)throw new Error("useCommentInputContext must be used within a CommentInputProvider");return e}const Kne={passive:!0};function Wne(e){const{disabled:t,rootElement:n}=e,[a,r]=l.useState(null),o=l.useMemo(()=>a?{getBoundingClientRect:()=>a}:null,[a]),s=l.useCallback(()=>{if(t){r(null);return}const d=window.getSelection();if(!d||!d.isCollapsed||d.rangeCount===0)return;const c=d.getRangeAt(0);if(!(n!=null&&n.contains(c.commonAncestorContainer))){r(null);return}const u=c==null?void 0:c.getBoundingClientRect();u&&r(u)},[t,n]);return l.useEffect(()=>(document.addEventListener("selectionchange",s,Kne),()=>{document.removeEventListener("selectionchange",s)}),[s]),o}const Gne=["bottom","top"],qne={outline:"none"},Cy=[],Yne=k.span(e=>{const{color:t}=Re(e.theme);return ae`
    color: ${t.input.default.enabled.placeholder};
    overflow: hidden;
    text-overflow: ellipsis;
    text-wrap: nowrap;
    display: block;
  `}),Xne=k(rt)(({theme:e})=>{const{space:t,radius:n}=e.sanity;return ae`
    &[data-placement='bottom'] {
      transform: translateY(${t[1]}px);
    }

    &[data-placement='top'] {
      transform: translateY(-${t[1]}px);
    }

    [data-ui='Popover__wrapper'] {
      border-radius: ${n[3]}px;
      display: flex;
      flex-direction: column;
      overflow: clip;
      overflow: hidden;
      position: relative;
      width: 300px; // todo: improve
    }
  `});function Jne(e){const{t}=L(pt),{focusLock:n,onFocus:a,onBlur:r,onKeyDown:o,onSubmit:s,placeholder:d=t("compose.create-comment-placeholder"),renderBlock:c}=e,[u,m]=l.useState(null),p=l.useRef(null),h=l.useRef(null),f=l.useRef(null),g=Hi(),{canSubmit:b,closeMentions:v,insertMention:y,mentionOptions:x,mentionsMenuOpen:w,mentionsSearchTerm:C,onBeforeInput:T,value:j}=rj(),A=Wne({disabled:!w,rootElement:p.current}),M=l.useCallback(()=>i.jsx(Yne,{children:d}),[d]),S=l.useCallback(()=>{w&&v()},[v,w]);vt(S,[u]);const N=l.useCallback(F=>{switch(F.key){case"Enter":if(F.shiftKey)break;if(w){F.preventDefault(),F.stopPropagation(),v();break}s&&b&&(F.preventDefault(),F.stopPropagation(),s());break;case"Escape":case"ArrowLeft":case"ArrowRight":w&&(F.preventDefault(),F.stopPropagation(),v());break}o&&o(F)},[b,v,w,o,s]),D=l.useMemo(()=>{if(g)return;const F=(j||Cy).slice(-1)[0],R=Fn(F)?F.children.slice(-1)[0]:void 0;if(!R)return;const $={path:[{_key:F._key},"children",{_key:R._key}],offset:Ua(R)?R.text.length:0};return{focus:$,anchor:$}},[j,g]);l.useEffect(()=>{var F;(F=f.current)==null||F.setSearchTerm(C)},[C]),l.useEffect(()=>{w&&g&&!tt(g.anchor,g.focus)&&v()},[w,v,g]);const _=i.jsx(Hne,{inputElement:h.current,loading:x.loading,onSelect:y,options:x.data||Cy,ref:f});return i.jsxs("div",{ref:p,children:[i.jsx(Xne,{arrow:!1,constrainSize:!0,content:_,disabled:!w,fallbackPlacements:Gne,open:w,placement:"bottom",ref:m,referenceElement:A}),i.jsx(F0,{"data-testid":"comment-input-editable","data-ui":"EditableElement",onBeforeInput:T,onBlur:r,onFocus:a,onKeyDown:N,ref:h,renderBlock:c,renderChild:One,renderPlaceholder:M,selection:D,style:qne,tabIndex:n?0:void 0})]})}const qs=k(I)`
  max-height: 20vh;
  overflow-y: auto;
`,Zne=k(en)({height:20,width:1});function Nd(e){return`inset 0 0 0 ${e.width}px ${e.color}`}const Qne=k(U)(({theme:e})=>{const{color:t,input:n,radius:a}=Re(e),r=a[2];return ae`
    border-radius: ${r}px;
    box-shadow: var(--input-box-shadow);

    --input-box-shadow: ${Nd({color:t.input.default.enabled.border,width:n.border.width})};

    &:not([data-expand-on-focus='false'], :focus-within) {
      background: transparent;
      box-shadow: unset;
    }

    &[data-focused='true']:focus-within {
      ${qs} {
        min-height: 1em;
      }

      /* box-shadow: inset 0 0 0 1px var(--card-focus-ring-color); */
      --input-box-shadow: ${Nd({color:"var(--card-focus-ring-color)",width:n.border.width})};
    }

    &:focus-within {
      ${qs} {
        min-height: 1em;
      }
    }

    &[data-expand-on-focus='false'] {
      ${qs} {
        min-height: 1em;
      }
    }

    &[data-expand-on-focus='true'] {
      [data-ui='CommentInputActions']:not([hidden]) {
        display: none;
      }

      &:focus-within {
        [data-ui='CommentInputActions'] {
          display: flex;
        }
      }
    }
    &:hover {
      --input-box-shadow: ${Nd({color:t.input.default.hovered.border,width:n.border.width})};
    }
  `}),eae=k.div(e=>{var t;return`
    min-height: ${(t=Re(e.theme).avatar.sizes[1])==null?void 0:t.size}px;
    display: flex;
    align-items: center;
  `});function tae(e){const{avatarSize:t=1,currentUser:n,focusLock:a,onBlur:r,onFocus:o,onKeyDown:s,onSubmit:d,placeholder:c,renderBlock:u,withAvatar:m}=e,[p]=Oa(n.id),{canSubmit:h,expandOnFocus:f,focused:g,hasChanges:b,insertAtChar:v,openMentions:y,readOnly:x}=rj(),{t:w}=L(pt),C=m?i.jsx(eae,{children:i.jsx(Mc,{user:p,size:t})}):null,T=l.useCallback(j=>{j.stopPropagation(),v(),y()},[v,y]);return i.jsxs(P,{align:"flex-start",gap:2,children:[C,i.jsx(Qne,{id:"comment-input-root","data-expand-on-focus":f&&!h?"true":"false","data-focused":g?"true":"false",flex:1,sizing:"border",tone:x?"transparent":"default",children:i.jsxs(B,{children:[i.jsx(qs,{"data-ui":"CommentInputEditableWrap",paddingX:1,paddingY:2,sizing:"border",children:i.jsx(Jne,{focusLock:a,onBlur:r,onFocus:o,onKeyDown:s,onSubmit:d,placeholder:c,renderBlock:u})}),i.jsx(P,{align:"center","data-ui":"CommentInputActions",gap:1,justify:"flex-end",padding:1,children:i.jsxs(Ia,{children:[i.jsx(Z,{"aria-label":w("compose.mention-user-aria-label"),"data-testid":"comment-input-mention-button",disabled:x,icon:Cne,mode:"bleed",type:"button",onClick:T,tooltipProps:{content:w("compose.mention-user-tooltip")}}),d&&i.jsxs(i.Fragment,{children:[i.jsx(Zne,{}),i.jsx(Z,{"aria-label":w("compose.send-comment-aria-label"),"data-testid":"comment-input-send-button",disabled:!h||!b||x,icon:wne,mode:b&&h?"default":"bleed",onClick:d,tone:b&&h?"primary":"default",tooltipProps:{content:w("compose.send-comment-tooltip")}})]})]})})]})})]})}function nae(e){const{children:t,expandOnFocus:n=!1,focused:a,focusOnMount:r=!1,mentionOptions:o,onMentionMenuOpenChange:s,value:d,readOnly:c}=e,u=Bt(),[m,p]=l.useState(!1),[h,f]=l.useState(""),[g,b]=l.useState(null),v=l.useMemo(()=>er(d),[d]),y=E1(d),x=l.useCallback(()=>{c||ge.focus(u)},[u,c]),w=l.useCallback(()=>{p(!1),f(""),b(null)},[]),C=l.useCallback(()=>{p(!0),f(""),p(!0),b(ge.getSelection(u))},[u]),T=l.useCallback(S=>{const N=ge.getSelection(u),D=N?N.focus.offset:0,_=ge.focusChild(u),F=Ua(_)&&_||void 0,R=S.inputType==="insertText",$=S.inputType==="deleteContentBackward",O=R&&S.data==="@",V=(F==null?void 0:F.text.slice(0,Math.max(0,D)).lastIndexOf("@"))||0,H=(F==null?void 0:F.text.slice(D-1,D))===" ",J=R&&S.data===" "&&!h;if(O&&(D<1||H)){C();return}if(J||$&&((F==null?void 0:F.text.length)===1||V===((F==null?void 0:F.text.length)||0)-1)){w();return}if(Ua(_)){let q=_.text.slice(V+1,D);R&&(q+=S.data),$&&(q=q.slice(0,Math.max(0,q.length-1))),f(q)}},[w,u,h,C]),j=l.useCallback(()=>{p(!0),ge.focus(u),ge.insertChild(u,u.schemaTypes.span,{text:"@"}),b(ge.getSelection(u))},[u]);rn(m,()=>s==null?void 0:s(m));const A=l.useCallback(S=>{var N;const D=u.schemaTypes.inlineObjects.find(R=>R.name==="mention"),[_,F]=g&&ge.findByPath(u,g.focus.path)||[];if(_&&Ua(_)&&F&&D){ge.focus(u);const R=(N=ge.getSelection(u))==null?void 0:N.focus.offset;typeof R<"u"&&(ge.delete(u,{anchor:{path:F,offset:_.text.lastIndexOf("@")},focus:{path:F,offset:R}},{mode:"selected"}),ge.insertChild(u,D,{userId:S}),ge.insertChild(u,u.schemaTypes.span,{text:" "}))}},[u,g]),M=l.useMemo(()=>({canSubmit:v,closeMentions:w,editor:u,expandOnFocus:n,focused:a,focusEditor:x,focusOnMount:r,hasChanges:y,insertAtChar:j,insertMention:A,mentionOptions:o,mentionsMenuOpen:m,mentionsSearchTerm:h,onBeforeInput:T,openMentions:C,readOnly:!!c,value:d}),[v,w,u,n,a,x,r,y,j,A,o,m,h,T,C,c,d]);return i.jsx(k0.Provider,{value:M,children:t})}const Od=[],aae={behavior:"smooth",block:"center",inline:"center"},ir=l.forwardRef(function(e,t){const{avatarSize:n,currentUser:a,expandOnFocus:r,focusLock:o=!1,focusOnMount:s,mentionOptions:d,onBlur:c,onChange:u,onDiscardCancel:m,onDiscardConfirm:p,onFocus:h,onKeyDown:f,onMentionMenuOpenChange:g,onSubmit:b,placeholder:v,readOnly:y,renderBlock:x=Nne,value:w=Od,withAvatar:C=!0}=e,[T,j]=l.useState(!1),A=l.useRef(null),M=l.useRef(null),[S,N]=l.useState(!1),D=l.useRef(null),_=l.useRef(null),F=l.useRef(null),[R,$]=l.useState(rh()),O=l.useCallback(()=>{requestAnimationFrame(()=>{A.current&&ge.focus(A.current)})},[]),V=l.useCallback(()=>{$(rh())},[]),H=l.useCallback(X=>{if(X.type==="ready"&&s&&O(),X.type==="focus"&&j(!0),X.type==="blur"&&j(!1),X.type==="patch"&&A.current){const le=ge.getValue(A.current);u(le||Od)}},[s,u,O]),J=l.useCallback(()=>{var X;(X=M.current)==null||X.scrollIntoView(aae)},[]),q=l.useCallback(()=>{b==null||b(),V(),O(),J()},[b,O,V,J]),oe=l.useCallback(()=>{p(),V()},[p,V]),ie=l.useMemo(()=>({open:()=>{N(!0)},close:()=>{N(!1),O()}}),[O]);l.useImperativeHandle(t,()=>({focus:O,blur(){A.current&&ge.blur(A.current)},scrollTo:J,reset:V,discardDialogController:ie}),[ie,O,V,J]);const te=l.useCallback(X=>{if(!o)return;const le=X.target,me=F.current;if(me&&le===D.current){Zj(me);return}me&&le===_.current&&Qj(me)},[o]);return i.jsxs(i.Fragment,{children:[S&&m&&i.jsx(Rne,{onClose:m,onConfirm:oe}),i.jsx(B,{ref:M,"data-testid":"comment-input",onFocus:te,children:i.jsx(ge,{onChange:H,readOnly:y,ref:A,schemaType:Ine,value:w||Od,children:i.jsxs(nae,{expandOnFocus:r,focused:T,focusOnMount:s,mentionOptions:d,onMentionMenuOpenChange:g,readOnly:y,value:w,children:[o&&i.jsx("div",{ref:D,tabIndex:0}),i.jsx(B,{ref:F,children:i.jsx(tae,{avatarSize:n,currentUser:a,focusLock:o,onBlur:c,onFocus:h,onKeyDown:f,onSubmit:b&&q,placeholder:v,renderBlock:x,withAvatar:C})}),o&&i.jsx("div",{ref:_,tabIndex:0})]})},R)})]})}),iae=k.span(({theme:e})=>{var t;const n=(t=e.sanity.v2)==null?void 0:t.color._dark,a=Ge[Da][n?800:100].hex,r=Ge[Da][n?700:300].hex,o=Ge[Da][n?700:200].hex,s=Ge[Da][n?600:400].hex,d=Ge[Da][n?700:200].hex,c=Ge[Da][n?600:400].hex;return ae`
    box-sizing: border-box;
    transition:
      background-color 100ms ease,
      border-color 100ms ease;

    // Make sure that child elements appropriately blend with the
    // background of the highlight span
    * {
      mix-blend-mode: ${n?"screen":"multiply"};
    }

    &[data-inline-comment-state='added'][data-inline-comment-nested='false'] {
      background-color: ${a};
      border-bottom: 2px solid ${r};
    }

    &[data-inline-comment-state='added'][data-inline-comment-nested='true'] {
      background-color: ${d};
      border-bottom: 2px solid ${c};
    }

    &[data-inline-comment-state='added'][data-inline-comment-nested='false'][data-hovered='true'] {
      background-color: ${o};
      border-bottom: 2px solid ${s};
    }

    &[data-inline-comment-state='authoring'] {
      background-color: ${a};
      border-bottom: 2px solid ${r};
    }
  `}),oj=l.forwardRef(function(e,t){const{children:n,isAdded:a,isAuthoring:r,isHovered:o,isNested:s,...d}=e;return i.jsx(iae,{...d,"data-hovered":o?"true":"false","data-inline-comment-nested":s?"true":"false","data-inline-comment-state":a?"added":r?"authoring":void 0,ref:t,children:n})}),rae=k(B)(()=>ae`
    & > [data-ui='Text']:not(:first-child) {
      margin-top: 1em; // todo: improve
    }

    & > [data-ui='Text']:has(> span:empty) {
      display: none;
    }
  `),oae=[],sae={block:{normal:({children:e})=>i.jsx(Mn,{children:e}),h1:({children:e})=>i.jsx(Mn,{children:e}),h2:({children:e})=>i.jsx(Mn,{children:e}),h3:({children:e})=>i.jsx(Mn,{children:e}),h4:({children:e})=>i.jsx(Mn,{children:e}),h5:({children:e})=>i.jsx(Mn,{children:e}),h6:({children:e})=>i.jsx(Mn,{children:e}),blockquote:({children:e})=>i.jsx(Mn,{children:e}),code:({children:e})=>i.jsx(Mn,{children:e})},list:{bullet:({children:e})=>e,number:({children:e})=>i.jsx(i.Fragment,{children:e}),checkmarks:({children:e})=>i.jsx(i.Fragment,{children:e})},listItem:{bullet:({children:e})=>i.jsx(Mn,{children:e}),number:({children:e})=>i.jsx(Mn,{children:e}),checkmarks:({children:e})=>i.jsx(Mn,{children:e})},marks:{strong:({children:e})=>i.jsx(i.Fragment,{children:e}),em:({children:e})=>i.jsx(i.Fragment,{children:e}),code:({children:e})=>i.jsx(i.Fragment,{children:e}),underline:({children:e})=>i.jsx(i.Fragment,{children:e}),strikeThrough:({children:e})=>i.jsx(i.Fragment,{children:e}),link:({children:e})=>i.jsx(i.Fragment,{children:e})},types:{mention:e=>{var t;return i.jsx(ij,{userId:(t=e==null?void 0:e.value)==null?void 0:t.userId,selected:!1})}}};function lae(e){const{blocks:t}=e;return i.jsx(rae,{children:i.jsx(R0,{value:t||oae,components:sae})})}const po=3,Jp=k(E)`
  font-family: 'Twemoji Mozilla', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
    'Noto Color Emoji', 'EmojiOne Color', 'Android Emoji', sans-serif;
`,cae=6;function dae(e){const{options:t,onSelect:n}=e,{t:a}=L(pt),[r,o]=l.useState([]),[s,d]=l.useState(null),[c,u]=l.useState(0),m=l.useCallback(h=>{const f=r.length;h.key==="ArrowRight"&&u(g=>(g+1)%f),h.key==="ArrowLeft"&&u(g=>(g-1+f)%f)},[r.length]),p=l.useCallback(h=>{const f=r.indexOf(h.currentTarget);u(f),n(t[f])},[r,n,t]);return l.useEffect(()=>{if(s){const h=s.querySelectorAll("button");o(Array.from(h))}},[s]),l.useEffect(()=>{r.length>0&&r[c].focus()},[r,c]),i.jsx(Ze,{columns:cae,gap:1,onKeyDown:m,ref:d,role:"menu",children:t.map(h=>{const f=pl[h.shortName];return i.jsx(He,{"aria-label":a("reactions.react-with-aria-label",{reactionName:h.title||h.shortName}),mode:"bleed",onClick:p,padding:2,role:"menuitem",tabIndex:-1,children:i.jsx(Jp,{align:"center",size:2,children:f})},h.shortName)})})}const uae=["top","bottom"];function sj(e){const{onMenuClose:t,onMenuOpen:n,onSelect:a,options:r,readOnly:o,renderMenuButton:s,mode:d}=e,[c,u]=l.useState(null),[m,p]=l.useState(null),[h,f]=l.useState(!1),{t:g}=L(pt),b=l.useCallback(()=>{const T=!h;f(T),T?n==null||n():t==null||t()},[t,n,h]),v=l.useCallback(()=>{h&&(f(!1),t==null||t())},[h,t]),y=l.useCallback(()=>{h&&(v(),c==null||c.focus())},[c,v,h]),x=l.useCallback(T=>{const{key:j,shiftKey:A}=T;(A&&j==="Tab"||j==="Escape"||j==="Tab")&&y()},[y]);vt(v,[m,c]);const w=l.useCallback(T=>{a(T),v()},[v,a]),C=l.useMemo(()=>{const T=s({open:h,tooltipContent:g(d==="upsell"?"list-item.context-menu-add-reaction-upsell":"list-item.context-menu-add-reaction"),t:g});return l.cloneElement(T,{"aria-expanded":h,"aria-haspopup":"true",disabled:o||d==="upsell",id:"reactions-menu-button",onClick:b,ref:u})},[b,h,o,s,g,d]);return i.jsx(rt,{constrainSize:!0,content:i.jsx(U,{"aria-labelledby":"reactions-menu-button",onKeyDown:x,padding:1,radius:3,tone:"default",children:i.jsx(dae,{onSelect:w,options:r})}),fallbackPlacements:uae,open:h,placement:"bottom",portal:!0,ref:p,tone:"default",children:C})}const mae=1,pae=k(B)`
  max-width: 180px;
`,hae=k.div`
  display: inline-block;
`,hr=k(E).attrs({size:mae})`
  display: inline-block !important;

  & > span {
    white-space: break-spaces;
  }
`,fae=k(I)`
  line-height: 1;
  text-align: center;
`,wy=/^\S+/;function Ty(e){const{currentUserId:t,isFirst:n,userId:a}=e,[r]=Oa(a),{t:o}=L(pt);return t===a?o("reactions.user-list.you",{context:n?"leading":void 0,replace:{name:r==null?void 0:r.displayName}}):(r==null?void 0:r.displayName)||o("reactions.user-list.unknown-user-fallback-name")}function gae(e){const{children:t,...n}=e;return i.jsx(Ie,{content:i.jsx(yae,{...n}),placement:"bottom",portal:!0,children:i.jsx("div",{children:t})})}function bae({currentUserId:e,userIds:t}){const n=Kr({style:"long",type:"conjunction"});if(t.length===0)return null;const a=n.formatToParts(t),r=[];for(let o=0;o<a.length;o++){const s=a[o];if(s.type==="literal"){r.push(i.jsx(hr,{children:s.value},`literal-${o}`));continue}const d=a[o+1];if(d&&d.type==="literal"&&wy.test(d.value)){const[c=""]=d.value.match(wy)||[];r.push(i.jsxs(hae,{children:[i.jsx(hr,{weight:"medium",children:i.jsx(Ty,{currentUserId:e,isFirst:o===0,userId:s.value})}),i.jsx(hr,{children:c})]},s.value)),d.value=d.value.slice(c.length);continue}r.push(i.jsx(hr,{weight:"medium",children:i.jsx(Ty,{currentUserId:e,isFirst:o===0,userId:s.value})},s.value))}return r}function yae(e){const{currentUser:t,reactionName:n,userIds:a}=e,{t:r}=L(pt),o=l.useCallback(()=>t?i.jsx(bae,{currentUserId:t.id,userIds:a}):null,[t,a]);return i.jsxs(pae,{padding:1,children:[i.jsx(P,{justify:"center",paddingBottom:2,paddingTop:1,children:i.jsx(Jp,{size:4,children:pl[n]})}),i.jsx(fae,{children:i.jsx(Pe,{t:r,i18nKey:"reactions.users-reacted-with-reaction",values:{reactionName:n},components:{UserList:o,ReactionName:()=>i.jsx(hr,{muted:!0,children:n}),Text:({children:s})=>i.jsxs(i.Fragment,{children:[i.jsx(hr,{muted:!0,children:s})," ",i.jsx("wbr",{})," "]})}})})]})}const jy=k(U)`
  background: none;
`;function vae(e){const t=e.reduce((n,a)=>{const{shortName:r}=a;return n[r]||(n[r]=[]),n[r].push(a),n},{});return Object.entries(t).sort(([n],[a])=>{const r=e.findIndex(s=>s.shortName===n),o=e.findIndex(s=>s.shortName===a);return r-o})}const xae=({open:e,tooltipContent:t})=>i.jsx(He,{fontSize:1,mode:"ghost",padding:0,radius:"full",selected:e,children:i.jsx(P,{paddingX:3,paddingY:2,children:i.jsx(Ie,{animate:!0,content:t,disabled:e,children:i.jsx(E,{size:1,children:i.jsx(aj,{})})})})}),Cae=l.memo(function(e){const{currentUser:t,onSelect:n,reactions:a,readOnly:r,mode:o}=e,s=l.useCallback(p=>{const h=wu.find(f=>f.shortName===p);h&&n(h)},[n]),d=l.useMemo(()=>a.filter(p=>p.userId===(t==null?void 0:t.id)).map(p=>p.shortName),[t==null?void 0:t.id,a]),c=l.useMemo(()=>vae(a).filter(([p])=>pl[p]),[a]),u=l.useRef(Object.keys(Object.fromEntries(c))),m=l.useMemo(()=>{const p=c.sort(([h],[f])=>{const g=u.current.indexOf(h),b=u.current.indexOf(f);return g===-1?1:b===-1?-1:g-b});return u.current=p.map(([h])=>h),p},[c]);return i.jsx(P,{align:"center",gap:1,wrap:"wrap",children:i.jsxs(Ia,{children:[m.map(([p,h])=>{const f=d.includes(p),g=h.map(v=>v.userId),b=pl[p];return i.jsx(gae,{currentUser:t,reactionName:p,userIds:g,children:i.jsx(jy,{tone:"default",children:i.jsx(He,{disabled:r||o==="upsell",mode:"ghost",onClick:()=>s(p),padding:2,radius:"full",selected:f,tone:f?"primary":"default",children:i.jsxs(P,{align:"center",gap:1,children:[i.jsx(Jp,{size:1,children:b}),i.jsx(E,{size:0,weight:f?"semibold":"medium",children:h==null?void 0:h.length})]})})})},p)}),i.jsx(jy,{tone:"default",children:i.jsx(sj,{mode:o,onSelect:p=>s(p.shortName),options:wu,readOnly:r,renderMenuButton:xae})})]})})}),wae=({open:e,tooltipContent:t,t:n})=>i.jsx(Z,{"aria-label":n("list-item.context-menu-add-reaction-aria-label"),icon:aj,mode:"bleed",selected:e,tooltipProps:{content:t}}),Tae={placement:"bottom-end"},jae=k(U)`
  &:empty {
    display: none;
  }
`;function kae(e){const{canDelete:t,canEdit:n,isParent:a,mode:r,onCopyLink:o,onDeleteStart:s,onEditStart:d,onMenuClose:c,onMenuOpen:u,onReactionSelect:m,onStatusChange:p,readOnly:h,status:f}=e,g=!!(o||s||d),{t:b}=L(pt),v=!!(t||n||o);return i.jsx(Ia,{children:i.jsx(P,{children:i.jsxs(jae,{display:"flex",shadow:2,padding:1,radius:2,sizing:"border",children:[m&&i.jsx(sj,{mode:r,onMenuClose:c,onMenuOpen:u,onSelect:m,options:wu,readOnly:h,renderMenuButton:wae}),a&&p&&i.jsx(Z,{"aria-label":b(f==="open"?"list-item.resolved-tooltip-aria-label":"list-item.re-open-resolved-aria-label"),"data-testid":"comments-list-item-status-button",disabled:h,icon:f==="open"?zo:Ld,mode:"bleed",onClick:p,tooltipProps:{content:b(f==="open"?"list-item.resolved-tooltip-content":"list-item.re-open-resolved")}}),v&&i.jsx(ze,{id:"comment-actions-menu",button:i.jsx(wt,{"aria-label":b("list-item.open-menu-aria-label"),disabled:h,hidden:!g}),onOpen:u,onClose:c,menu:i.jsxs(Be,{children:[i.jsx(ye,{hidden:!n,icon:Sr,onClick:d,text:b("list-item.edit-comment"),tooltipProps:r==="upsell"?{content:b("list-item.edit-comment-upsell")}:void 0,disabled:r==="upsell"}),i.jsx(ye,{hidden:!t,icon:_t,onClick:s,text:b("list-item.delete-comment"),tone:"critical"}),o&&i.jsx(en,{hidden:!t&&!n}),i.jsx(ye,{hidden:!o,icon:ma,onClick:o,text:b("list-item.copy-link")})]}),popover:Tae})]})})})}function Aae(e,t=250){return e.length<=t?e:`${e.slice(0,t)}...`}const Sae=k(I).attrs({marginLeft:1,marginRight:2})`
  &:not([data-hidden]) {
    display: inline;
  }
`,_ae=k(B)(({theme:e,$hasReferencedValue:t})=>{var n;const a=(n=e.sanity.v2)==null?void 0:n.color._dark,r=t?Da:"gray",o=a?Ge[r][700].hex:Ge[r][300].hex;return ae`
    border-left: 2px solid ${o};
    word-break: break-word;
  `});function Eae(e){const{hasReferencedValue:t,value:n}=e,{t:a}=L(pt),r=a("list-item.missing-referenced-value-tooltip-content"),o=l.useMemo(()=>{if(Array.isArray(n)&&(n==null?void 0:n.filter(Fn).length)>0){const s=n==null?void 0:n.map(b0).join(" ");return Aae(s)}return null},[n]);return o?i.jsx(_ae,{$hasReferencedValue:!!t,"data-testid":"comments-list-item-referenced-value",flex:1,forwardedAs:"blockquote",padding:1,paddingLeft:2,sizing:"border",children:i.jsx(P,{align:"flex-start",children:i.jsxs(E,{size:1,muted:!0,children:[!t&&i.jsx(Ie,{content:r,children:i.jsx(Sae,{children:i.jsx(iA,{})})}),o]})})}):null}const ky=e=>e.stopPropagation(),go=k(I)``,Iae={width:"50%"},Mae=[],Ay=k(E)(({theme:e})=>{const t=e.sanity.color.dark,n=Ge.gray[t?200:800].hex;return ae`
    min-width: max-content;
    --card-fg-color: ${n};
    color: var(--card-fg-color);
  `}),Pae=k(P)(e=>{var t;const n=Re(e.theme);return ae`
    min-height: ${(t=n.avatar.sizes[e.$size])==null?void 0:t.size}px;
  `}),Nae=k(E)(({theme:e})=>{const t=e.sanity.color.dark,n=Ge.gray[t?200:800].hex;return ae`
    --card-fg-color: ${n};
    color: var(--card-fg-color);
  `}),Oae=k(B)`
  transition: opacity 200ms ease;

  &[data-muted='true'] {
    transition: unset;
    opacity: 0.5;
  }
`,Fae=k(P)(e=>{var t;const n=Re(e.theme);return ae`
    min-height: ${(t=n.avatar.sizes[e.$size])==null?void 0:t.size}px;
  `}),Rae=k(U)`
  // Add not on hover
  &:not(:hover) {
    background-color: transparent;
  }
`,Dae=k(B)(({theme:e})=>{const{space:t}=e.sanity;return ae`
    position: relative;

    // Only show the floating layer on hover when hover is supported.
    // Else, the layer is always visible.
    @media (hover: hover) {
      ${go} {
        opacity: 0;
        position: absolute;
        right: 0;
        top: 0;
        transform: translate(${t[1]}px, -${t[1]}px);
      }

      ${go} {
        &:focus-within {
          opacity: 1;
        }
      }

      &:hover {
        ${go} {
          opacity: 1;
        }
      }
    }

    &[data-menu-open='true'] {
      ${go} {
        opacity: 1;
      }
    }
  `}),$ae={useTemporalPhrase:!0};function Sy(e){var t;const{avatarSize:n=1,canDelete:a,canEdit:r,comment:o,currentUser:s,hasError:d,hasReferencedValue:c,intent:u,isParent:m,isRetrying:p,mentionOptions:h,mode:f,onCopyLink:g,onCreateRetry:b,onDelete:v,onEdit:y,onInputKeyDown:x,onReactionSelect:w,onStatusChange:C,readOnly:T,withAvatar:j=!0}=e,{_createdAt:A,authorId:M,message:S,_id:N,lastEditedAt:D}=o,[_]=Oa(M),{t:F}=L(pt),[R,$]=l.useState(S),[O,V]=l.useState(!1),[H,J]=l.useState(null),q=l.useRef(S),[oe,ie]=l.useState(!1),te=l.useRef(null),X=E1(R),le=l.useMemo(()=>er(R),[R]),me=l.useMemo(()=>{var ke;return(((ke=o==null?void 0:o.reactions)==null?void 0:ke.filter(Mt=>(Mt==null?void 0:Mt._optimisticState)!=="removed"))||Mae).filter(Mt=>"userId"in Mt&&"shortName"in Mt)},[o==null?void 0:o.reactions]),G=!!(me!=null&&me.length),ce=A?new Date(A):new Date,de=D?new Date(D):null,pe=$r(ce,$ae),W=ca({dateStyle:"full",timeStyle:"medium"}),Y=W.format(ce),z=de?W.format(de):null,ne=d||p;l.useEffect(()=>{O||(q.current=S,$(S))},[O,S]);const ee=l.useCallback(()=>ie(!0),[]),fe=l.useCallback(()=>ie(!1),[]),Oe=l.useCallback(()=>g==null?void 0:g(N),[N,g]),Se=l.useCallback(ke=>{ke.stopPropagation(),b==null||b(N)},[N,b]),De=l.useCallback(()=>v(N),[N,v]),Fe=l.useCallback(()=>{V(!1),$(q.current)},[]),Qe=l.useCallback(()=>{var ke;if(!le||!X){Fe();return}(ke=te.current)==null||ke.discardDialogController.open()},[Fe,X,le]),ht=l.useCallback(ke=>{ke.isDefaultPrevented()||(ke.key==="Escape"&&(ke.preventDefault(),ke.stopPropagation(),Qe()),x&&x(ke))},[x,Qe]),Q=l.useCallback(()=>{var ke;(ke=te.current)==null||ke.discardDialogController.close()},[]),ue=l.useCallback(()=>{var ke;(ke=te.current)==null||ke.discardDialogController.close(),Fe()},[Fe]),se=l.useCallback(ke=>{w==null||w(N,ke)},[N,w]),he=l.useCallback(()=>{y(N,{message:R}),V(!1)},[N,y,R]),_e=l.useCallback(()=>{C==null||C(N,o.status==="open"?"resolved":"open")},[N,o.status,C]),Ne=l.useCallback(()=>{V(ke=>!ke)},[]),$e=l.useCallback(()=>ie(!1),[]),Ce=l.useCallback(()=>{X||Fe()},[Fe,X]),Le=l.useCallback(ke=>{ke.key==="Escape"&&!X&&Fe()},[Fe,X]);rn(O,$e),vt(Ce,[H]);const Me=_!=null&&_.displayName?i.jsx(E,{size:1,weight:"medium",textOverflow:"ellipsis",title:_.displayName,children:_.displayName}):i.jsx(it,{size:1,style:Iae});return i.jsxs(Dae,{"data-menu-open":oe?"true":"false","data-testid":"comments-list-item-layout",onKeyDown:Le,ref:J,space:4,children:[i.jsxs(Oae,{space:1,"data-muted":ne,children:[i.jsxs(Pae,{align:"center",gap:po,flex:1,$size:n,children:[j&&i.jsx(Mc,{user:_,size:n}),i.jsxs(P,{direction:"column",gap:2,paddingY:u?2:0,children:[i.jsx(P,{align:"center",paddingBottom:(t=o.context)!=null&&t.intent?0:1,sizing:"border",flex:1,children:i.jsxs(P,{align:"flex-end",gap:2,children:[i.jsx(I,{flex:1,children:Me}),!ne&&i.jsxs(P,{align:"center",gap:1,children:[i.jsx(Ay,{muted:!0,size:0,children:i.jsx("time",{dateTime:ce.toISOString(),title:Y,children:pe})}),z&&de&&i.jsx(Ay,{muted:!0,size:0,title:z,children:i.jsxs("time",{dateTime:de.toISOString(),title:z,children:["(",F("list-item.layout-edited"),")"]})})]})]})}),u&&i.jsx(I,{flex:1,children:i.jsx(Nae,{muted:!0,size:0,textOverflow:"ellipsis",children:i.jsx(Pe,{t:F,i18nKey:"list-item.layout-context",values:{title:u.title,intent:"edit"},components:{IntentLink:({children:ke})=>u?i.jsx(Ma,{params:u.params,intent:u.name,children:ke}):void 0}})})})]}),!O&&!ne&&i.jsx(go,{"data-root-menu":m?"true":"false",onClick:ky,children:i.jsx(kae,{canDelete:a,canEdit:r,isParent:m,mode:f,onCopyLink:g?Oe:void 0,onDeleteStart:De,onEditStart:Ne,onMenuClose:fe,onMenuOpen:ee,onReactionSelect:se,onStatusChange:C?_e:void 0,readOnly:T,status:o.status})})]}),Xr(o)&&!!(o!=null&&o.contentSnapshot)&&i.jsxs(P,{gap:po,marginBottom:3,children:[j&&i.jsx(ur,{$size:n}),i.jsx(Eae,{hasReferencedValue:c,value:o==null?void 0:o.contentSnapshot})]}),O&&i.jsxs(P,{align:"flex-start",gap:2,children:[j&&i.jsx(ur,{$size:n}),i.jsx(B,{flex:1,children:i.jsx(ir,{currentUser:s,focusOnMount:!0,mentionOptions:h,onChange:$,onDiscardCancel:Q,onDiscardConfirm:ue,onKeyDown:ht,onSubmit:he,readOnly:T,ref:te,value:R,withAvatar:!1})})]}),!O&&i.jsxs(P,{gap:po,children:[j&&i.jsx(ur,{$size:n}),i.jsx(lae,{blocks:S})]}),G&&i.jsxs(P,{gap:po,marginTop:2,children:[j&&i.jsx(ur,{$size:n}),i.jsx(I,{onClick:ky,children:i.jsx(Cae,{currentUser:s,mode:f,onSelect:se,reactions:me,readOnly:T})})]})]}),ne&&i.jsxs(Fae,{gap:po,$size:n,children:[j&&i.jsx(ur,{$size:n}),i.jsxs(P,{align:"center",gap:1,flex:1,children:[i.jsxs(E,{muted:!0,size:1,children:[d&&F("list-item.layout-failed-sent"),p&&F("list-item.layout-posting")]}),i.jsx(P,{hidden:p,children:i.jsx(Rae,{__unstable_focusRing:!0,display:"flex",forwardedAs:"button",onClick:Se,padding:1,radius:2,tone:"primary",children:i.jsx(E,{size:1,muted:!0,children:F("list-item.layout-retry")})})})]})]})]})}const lj=k(U).attrs({padding:3,radius:3,sizing:"border"})(e=>{const{theme:t}=e,n=t.sanity.color.dark,a=Ge[Da][n?900:50].hex,r=Ge.gray[n?900:50].hex;return ae`
      background-color: ${r};

      &[data-active='true'] {
        background-color: ${a};
      }
    `}),or=[],ho=5,Lae={avatarSize:1,parentCommentAvatar:!0,replyAvatar:!0,threadCommentsAvatar:!0},Bae=k(lj)(()=>ae`
    position: relative;

    &:has(> [data-ui='GhostButton']:focus:focus-visible) {
      box-shadow:
        inset 0 0 0 1px var(--card-border-color),
        0 0 0 1px var(--card-bg-color),
        0 0 0 2px var(--card-focus-ring-color);
    }

    // The hover styles is managed with the [data-hovered] attribute instead of the :hover pseudo class
    // since we want to show the hover styles when hovering over the menu items in the context menu as well.
    // The context menu is rendered using a portal, so the :hover pseudo class won't work when hovering over
    // the menu items.
    &:not([data-active='true']) {
      @media (hover: hover) {
        &[data-hovered='true'] {
          [data-root-menu='true'] {
            opacity: 1;
          }
        }
      }
    }
  `),Vae=k(Z)(({theme:e})=>{const{medium:t}=e.sanity.fonts.text.weights;return ae`
    font-weight: ${t};
  `}),Uae=k.button`
  opacity: 0;
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  left: 0;
`,cj=l.memo(function(e){var t,n,a,r,o;const{avatarConfig:s=Lae,canReply:d,currentUser:c,hasReferencedValue:u,innerPadding:m,isSelected:p,mentionOptions:h,mode:f,onCopyLink:g,onCreateRetry:b,onDelete:v,onEdit:y,onKeyDown:x,onPathSelect:w,onReactionSelect:C,onReply:T,onStatusChange:j,parentComment:A,readOnly:M,replies:S=or}=e,{t:N}=L(pt),[D,_]=l.useState(or),[F,R]=l.useState(!0),$=l.useRef(!1),O=l.useRef(null),{isTopLayer:V}=xi(),H=l.useMemo(()=>er(D),[D]),[J,q]=l.useState(!1),oe=l.useCallback(()=>q(!0),[]),ie=l.useCallback(()=>q(!1),[]),te=l.useCallback(()=>{var ne;const ee={message:D,parentCommentId:A._id,status:(A==null?void 0:A.status)||"open",threadId:A.threadId,reactions:or,payload:{fieldPath:((ne=A.target.path)==null?void 0:ne.field)||""}};T==null||T(ee),_(or)},[T,A._id,A==null?void 0:A.status,(t=A.target.path)==null?void 0:t.field,A.threadId,D]),X=l.useCallback(()=>{var ne;if(!H){_(or);return}(ne=O.current)==null||ne.discardDialogController.open()},[H]),le=l.useCallback(ne=>{ne.isDefaultPrevented()||ne.key==="Escape"&&(ne.preventDefault(),ne.stopPropagation(),X())},[X]),me=l.useCallback(()=>{var ne;(ne=O.current)==null||ne.discardDialogController.close()},[]),G=l.useCallback(()=>{var ne,ee;_(or),(ne=O.current)==null||ne.discardDialogController.close(),(ee=O.current)==null||ee.focus()},[]),ce=l.useCallback(ne=>{var ee;ne.stopPropagation(),V&&(w==null||w({fieldPath:((ee=A.target.path)==null?void 0:ee.field)||"",origin:"inspector",threadId:A.threadId}))},[V,w,(n=A.target.path)==null?void 0:n.field,A.threadId]),de=l.useCallback(ne=>{ne.stopPropagation(),R(!1),$.current=!0},[]),pe=l.useMemo(()=>F?S==null?void 0:S.slice(-ho):S,[S,F]),W=l.useMemo(()=>S?S.length>ho:!1,[S]),Y=l.useMemo(()=>`${(S==null?void 0:S.length)-ho} more ${(S==null?void 0:S.length)-ho===1?"comment":"comments"}`,[S==null?void 0:S.length]);l.useEffect(()=>{S.length>ho&&!$.current&&R(!0)},[S]);const z=l.useMemo(()=>pe.map(ne=>{var ee,fe;return i.jsx(B,{as:"li",...sb(ne._id),children:i.jsx(Sy,{avatarSize:s.avatarSize,canDelete:ne.authorId===c.id,canEdit:ne.authorId===c.id,comment:ne,currentUser:c,hasError:((ee=ne._state)==null?void 0:ee.type)==="createError",isRetrying:((fe=ne._state)==null?void 0:fe.type)==="createRetrying",intent:f9(A,ne),mentionOptions:h,mode:f,onCopyLink:g,onCreateRetry:b,onDelete:v,onEdit:y,onInputKeyDown:le,onReactionSelect:C,readOnly:M,withAvatar:s.threadCommentsAvatar})},ne._id)}),[s.threadCommentsAvatar,s.avatarSize,c,le,h,g,b,v,y,C,A,M,pe,f]);return i.jsxs(Bae,{"data-active":p?"true":"false","data-hovered":J?"true":"false","data-testid":"comments-list-item","data-ui":"CommentsListItem",onClick:ce,onMouseEnter:oe,onMouseLeave:ie,children:[i.jsx(Uae,{"data-ui":"GhostButton","aria-label":N("list-item.go-to-field-button.aria-label")}),i.jsxs(B,{as:"ul",padding:m,paddingBottom:d?void 0:1,space:4,children:[i.jsx(B,{as:"li",...sb(A._id),children:i.jsx(Sy,{avatarSize:s.avatarSize,canDelete:A.authorId===c.id,canEdit:A.authorId===c.id,comment:A,currentUser:c,hasError:((a=A._state)==null?void 0:a.type)==="createError",hasReferencedValue:u,intent:(r=A.context)==null?void 0:r.intent,isParent:!0,isRetrying:((o=A._state)==null?void 0:o.type)==="createRetrying",mentionOptions:h,mode:f,onCopyLink:g,onCreateRetry:b,onDelete:v,onEdit:y,onInputKeyDown:x,onReactionSelect:C,onStatusChange:j,readOnly:M,withAvatar:s.parentCommentAvatar})}),W&&!$.current&&i.jsxs(P,{gap:1,paddingY:1,sizing:"border",children:[i.jsx(ur,{}),i.jsx(Vae,{iconRight:_n,mode:"bleed",onClick:de,text:Y})]}),z,d&&i.jsx(ir,{avatarSize:s.avatarSize,currentUser:c,expandOnFocus:!0,mentionOptions:h,onChange:_,onDiscardCancel:me,onDiscardConfirm:G,onKeyDown:le,onSubmit:te,placeholder:N(f==="upsell"?"compose.reply-placeholder-upsell":"compose.reply-placeholder"),readOnly:M||f==="upsell",ref:O,value:D,withAvatar:s.replyAvatar})]})]})});function zae(e){return{open:{title:e("list-status.empty-state-open-title"),message:e("list-status.empty-state-open-text")},resolved:{title:e("list-status.empty-state-resolved-title"),message:e("list-status.empty-state-resolved-text")}}}function Hae(e){const{status:t,error:n,loading:a,hasNoComments:r}=e,{t:o}=L(pt),s=zae(o);return n?i.jsx(P,{align:"center",justify:"center",flex:1,padding:4,children:i.jsx(P,{align:"center",children:i.jsx(E,{size:1,muted:!0,children:o("list-status.error")})})}):a?i.jsx(It,{showText:!0,title:o("list-status.loading")}):r?i.jsx(P,{align:"center",justify:"center",flex:1,sizing:"border",children:i.jsx(Jn,{width:0,padding:4,children:i.jsxs(B,{space:3,children:[i.jsx(E,{align:"center",size:1,muted:!0,weight:"medium",children:s[t].title}),i.jsx(E,{align:"center",size:1,muted:!0,children:s[t].message})]})})}):null}const Fd=[];function Kae(e){const{currentUser:t,fieldTitle:n,mentionOptions:a,mode:r,onBlur:o,onFocus:s,onKeyDown:d,onNewThreadCreate:c,readOnly:u}=e,{t:m}=L(pt),[p,h]=l.useState(Fd),f=l.useRef(null),g=l.useCallback(()=>{c==null||c(p),h(Fd)},[c,p]),b=l.useMemo(()=>er(p),[p]),v=l.useCallback(()=>{var T;b&&((T=f.current)==null||T.discardDialogController.open())},[b]),y=l.useCallback(T=>{T.isDefaultPrevented()||(T.key==="Escape"&&(T.preventDefault(),T.stopPropagation(),v()),d&&d(T))},[d,v]),x=l.useCallback(()=>{var T,j;h(Fd),(T=f.current)==null||T.discardDialogController.close(),(j=f.current)==null||j.focus()},[]),w=l.useCallback(()=>{var T;(T=f.current)==null||T.discardDialogController.close()},[]),C=r==="upsell"?m("compose.add-comment-input-placeholder-upsell"):i.jsx(Pe,{t:m,i18nKey:"compose.add-comment-input-placeholder",values:{field:n}});return i.jsx(ir,{currentUser:t,expandOnFocus:!0,mentionOptions:a,onBlur:o,onChange:h,onDiscardCancel:w,onDiscardConfirm:x,onKeyDown:y,onFocus:s,onSubmit:g,placeholder:C,readOnly:u||r==="upsell",ref:f,value:p})}const Wae=k(P)`
  min-height: 25px;
`,Gae=k(He)(({theme:e})=>{const t=e.sanity.color.base.fg;return ae`
    --card-fg-color: ${t};

    // The width is needed to make the text ellipsis work
    // in the breadcrumbs component
    max-width: 100%;
  `});function qae(e){const{breadcrumbs:t,canCreateNewThread:n,children:a,currentUser:r,fieldPath:o,isSelected:s,mentionOptions:d,mode:c,onNewThreadCreate:u,onPathSelect:m,readOnly:p}=e,{t:h}=L(pt),f=l.useCallback(x=>{const w={message:x,parentCommentId:void 0,status:"open",threadId:Cn(),reactions:[],payload:{fieldPath:o}};u==null||u(w)},[u,o]),g=l.useCallback(x=>{x.stopPropagation(),m==null||m({fieldPath:o,origin:"inspector",threadId:null})},[o,m]),b=l.useCallback(x=>{x.stopPropagation(),x.detail!==0&&(m==null||m({fieldPath:o,origin:"inspector",threadId:null}))},[o,m]),v=l.useMemo(()=>(t==null?void 0:t.map(x=>x.title))||[],[t]),y=v[v.length-1];return i.jsxs(B,{space:2,children:[i.jsx(Wae,{align:"center",gap:2,paddingRight:1,sizing:"border",children:i.jsx(B,{flex:1,children:i.jsx(P,{align:"center",children:i.jsx(Gae,{"aria-label":h("list-item.breadcrumb-button-go-to-field-aria-label",{field:y}),mode:"bleed",onClick:g,padding:2,space:2,children:i.jsx(y_,{maxLength:3,titlePath:v})})})})}),n&&i.jsx(lj,{onClick:b,"data-active":s,children:i.jsx(Kae,{currentUser:r,fieldTitle:y,mentionOptions:d,mode:c,onNewThreadCreate:f,readOnly:p})}),i.jsx(B,{space:2,children:a})]})}function Yae(e){return e.reduce((t,n)=>{const a=n.fieldPath;return t[a]||(t[a]=[]),t[a].push(n),t},{})}const Xae=l.forwardRef(function(e,t){const{beforeListNode:n,comments:a,currentUser:r,error:o,loading:s,mentionOptions:d,mode:c,onCopyLink:u,onCreateRetry:m,onDelete:p,onEdit:h,onNewThreadCreate:f,onPathSelect:g,onReactionSelect:b,onReply:v,onStatusChange:y,readOnly:x,selectedPath:w,status:C}=e,[T,j]=l.useState(null),A=l.useMemo(()=>Object.entries(Yae(a)),[a]),M=!s&&!o&&A.length>0;return i.jsxs(P,{"data-testid":"comments-list",direction:"column",flex:1,height:"fill",overflow:"hidden",ref:j,sizing:"border",children:[c!=="upsell"&&i.jsx(Hae,{error:o,hasNoComments:A.length===0,loading:s,status:C}),(M||n)&&i.jsxs(B,{as:"ul",flex:1,overflow:"auto",padding:3,paddingTop:1,paddingBottom:6,sizing:"border",space:1,ref:t,children:[n,i.jsx(Gu,{element:T,children:A==null?void 0:A.map(([S,N])=>{const D=N[0].breadcrumbs,_=N[0].threadId,F=(w==null?void 0:w.fieldPath)===S&&!w.threadId;return i.jsx(B,{as:"li",paddingTop:3,...U9(_),children:i.jsx(qae,{breadcrumbs:D,canCreateNewThread:C==="open",currentUser:r,fieldPath:S,isSelected:F,mentionOptions:d,mode:c,onNewThreadCreate:f,onPathSelect:g,readOnly:x,children:N.map(R=>{var $,O,V;const H=R.replies.slice().reverse(),J=C==="open"&&(($=R.parentComment._state)==null?void 0:$.type)!=="createError"&&((O=R.parentComment._state)==null?void 0:O.type)!=="createRetrying",q=(w==null?void 0:w.threadId)===R.parentComment.threadId&&(w==null?void 0:w.fieldPath)===((V=R.parentComment.target.path)==null?void 0:V.field);return i.jsx(cj,{canReply:J,currentUser:r,hasReferencedValue:R.hasReferencedValue,isSelected:q,mentionOptions:d,mode:c,onCopyLink:u,onCreateRetry:m,onDelete:p,onEdit:h,onPathSelect:g,onReactionSelect:b,onReply:v,onStatusChange:y,parentComment:R.parentComment,readOnly:x,replies:H},R.parentComment._id)})},S)},S)})})]})]})}),Jae=l.memo(Xae),Zae=k(I)`
  max-width: 280px;
`,Qae=t0`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,eie=k(rt)`
  opacity: 0;
  // Fade in the popover after 500ms
  animation: ${Qae} 200ms 500ms forwards;
`;function tie(e){const{onDismiss:t}=e,{t:n}=L(pt);return i.jsx(eie,{content:i.jsx(Zae,{padding:4,children:i.jsxs(B,{space:3,children:[i.jsx(E,{weight:"medium",size:1,children:n("onboarding.header")}),i.jsx(E,{size:1,children:n("onboarding.body")}),i.jsx(P,{justify:"flex-end",marginTop:2,children:i.jsx(Z,{text:n("onboarding.dismiss"),tone:"primary",onClick:t})})]})}),open:!0,portal:!0,...e})}function nie(e){const{data:t,onPrimaryClick:n,onSecondaryClick:a}=e;return i.jsx(Jn,{width:1,children:i.jsx(I,{marginBottom:6,children:i.jsx(Fp,{data:t,onPrimaryClick:n,onSecondaryClick:a})})})}export{Pv as d};
